{"file_contents":{"client/src/components/ui/toast.tsx":{"content":"import * as React from \"react\"\nimport * as ToastPrimitives from \"@radix-ui/react-toast\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\nimport { X } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ToastProvider = ToastPrimitives.Provider\n\nconst ToastViewport = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Viewport>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Viewport>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Viewport\n    ref={ref}\n    className={cn(\n      \"fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]\",\n      className\n    )}\n    {...props}\n  />\n))\nToastViewport.displayName = ToastPrimitives.Viewport.displayName\n\nconst toastVariants = cva(\n  \"group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full\",\n  {\n    variants: {\n      variant: {\n        default: \"border bg-background text-foreground\",\n        destructive:\n          \"destructive group border-destructive bg-destructive text-destructive-foreground\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nconst Toast = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Root>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Root> &\n    VariantProps<typeof toastVariants>\n>(({ className, variant, ...props }, ref) => {\n  return (\n    <ToastPrimitives.Root\n      ref={ref}\n      className={cn(toastVariants({ variant }), className)}\n      {...props}\n    />\n  )\n})\nToast.displayName = ToastPrimitives.Root.displayName\n\nconst ToastAction = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Action>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Action>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Action\n    ref={ref}\n    className={cn(\n      \"inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive\",\n      className\n    )}\n    {...props}\n  />\n))\nToastAction.displayName = ToastPrimitives.Action.displayName\n\nconst ToastClose = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Close>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Close>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Close\n    ref={ref}\n    className={cn(\n      \"absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600\",\n      className\n    )}\n    toast-close=\"\"\n    {...props}\n  >\n    <X className=\"h-4 w-4\" />\n  </ToastPrimitives.Close>\n))\nToastClose.displayName = ToastPrimitives.Close.displayName\n\nconst ToastTitle = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Title>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Title>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Title\n    ref={ref}\n    className={cn(\"text-sm font-semibold\", className)}\n    {...props}\n  />\n))\nToastTitle.displayName = ToastPrimitives.Title.displayName\n\nconst ToastDescription = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Description>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Description>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Description\n    ref={ref}\n    className={cn(\"text-sm opacity-90\", className)}\n    {...props}\n  />\n))\nToastDescription.displayName = ToastPrimitives.Description.displayName\n\ntype ToastProps = React.ComponentPropsWithoutRef<typeof Toast>\n\ntype ToastActionElement = React.ReactElement<typeof ToastAction>\n\nexport {\n  type ToastProps,\n  type ToastActionElement,\n  ToastProvider,\n  ToastViewport,\n  Toast,\n  ToastTitle,\n  ToastDescription,\n  ToastClose,\n  ToastAction,\n}\n","path":null,"size_bytes":4845,"size_tokens":null},"attached_assets/popover_1763671095561.tsx":{"content":"import * as React from \"react\"\nimport * as PopoverPrimitive from \"@radix-ui/react-popover\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Popover = PopoverPrimitive.Root\n\nconst PopoverTrigger = PopoverPrimitive.Trigger\n\nconst PopoverContent = React.forwardRef<\n  React.ElementRef<typeof PopoverPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof PopoverPrimitive.Content>\n>(({ className, align = \"center\", sideOffset = 4, ...props }, ref) => (\n  <PopoverPrimitive.Portal>\n    <PopoverPrimitive.Content\n      ref={ref}\n      align={align}\n      sideOffset={sideOffset}\n      className={cn(\n        \"z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-popover-content-transform-origin]\",\n        className\n      )}\n      {...props}\n    />\n  </PopoverPrimitive.Portal>\n))\nPopoverContent.displayName = PopoverPrimitive.Content.displayName\n\nexport { Popover, PopoverTrigger, PopoverContent }\n","path":null,"size_bytes":1280,"size_tokens":null},"attached_assets/calendar_1763670951628.tsx":{"content":"import * as React from \"react\"\nimport { ChevronLeft, ChevronRight } from \"lucide-react\"\nimport { DayPicker } from \"react-day-picker\"\n\nimport { cn } from \"@/lib/utils\"\nimport { buttonVariants } from \"@/components/ui/button\"\n\nexport type CalendarProps = React.ComponentProps<typeof DayPicker>\n\nfunction Calendar({\n  className,\n  classNames,\n  showOutsideDays = true,\n  ...props\n}: CalendarProps) {\n  return (\n    <DayPicker\n      showOutsideDays={showOutsideDays}\n      className={cn(\"p-3\", className)}\n      classNames={{\n        months: \"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0\",\n        month: \"space-y-4\",\n        caption: \"flex justify-center pt-1 relative items-center\",\n        caption_label: \"text-sm font-medium\",\n        nav: \"space-x-1 flex items-center\",\n        nav_button: cn(\n          buttonVariants({ variant: \"outline\" }),\n          \"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100\"\n        ),\n        nav_button_previous: \"absolute left-1\",\n        nav_button_next: \"absolute right-1\",\n        table: \"w-full border-collapse space-y-1\",\n        head_row: \"flex\",\n        head_cell:\n          \"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]\",\n        row: \"flex w-full mt-2\",\n        cell: \"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20\",\n        day: cn(\n          buttonVariants({ variant: \"ghost\" }),\n          \"h-9 w-9 p-0 font-normal aria-selected:opacity-100\"\n        ),\n        day_range_end: \"day-range-end\",\n        day_selected:\n          \"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground\",\n        day_today: \"bg-accent text-accent-foreground\",\n        day_outside:\n          \"day-outside text-muted-foreground aria-selected:bg-accent/50 aria-selected:text-muted-foreground\",\n        day_disabled: \"text-muted-foreground opacity-50\",\n        day_range_middle:\n          \"aria-selected:bg-accent aria-selected:text-accent-foreground\",\n        day_hidden: \"invisible\",\n        ...classNames,\n      }}\n      components={{\n        IconLeft: ({ className, ...props }) => (\n          <ChevronLeft className={cn(\"h-4 w-4\", className)} {...props} />\n        ),\n        IconRight: ({ className, ...props }) => (\n          <ChevronRight className={cn(\"h-4 w-4\", className)} {...props} />\n        ),\n      }}\n      {...props}\n    />\n  )\n}\nCalendar.displayName = \"Calendar\"\n\nexport { Calendar }\n","path":null,"size_bytes":2695,"size_tokens":null},"client/src/components/ui/textarea.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Textarea = React.forwardRef<\n  HTMLTextAreaElement,\n  React.ComponentProps<\"textarea\">\n>(({ className, ...props }, ref) => {\n  return (\n    <textarea\n      className={cn(\n        \"flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm\",\n        className\n      )}\n      ref={ref}\n      {...props}\n    />\n  )\n})\nTextarea.displayName = \"Textarea\"\n\nexport { Textarea }\n","path":null,"size_bytes":689,"size_tokens":null},"client/src/components/ui/navigation-menu.tsx":{"content":"import * as React from \"react\"\nimport * as NavigationMenuPrimitive from \"@radix-ui/react-navigation-menu\"\nimport { cva } from \"class-variance-authority\"\nimport { ChevronDown } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst NavigationMenu = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Root>\n>(({ className, children, ...props }, ref) => (\n  <NavigationMenuPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative z-10 flex max-w-max flex-1 items-center justify-center\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <NavigationMenuViewport />\n  </NavigationMenuPrimitive.Root>\n))\nNavigationMenu.displayName = NavigationMenuPrimitive.Root.displayName\n\nconst NavigationMenuList = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.List>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.List>\n>(({ className, ...props }, ref) => (\n  <NavigationMenuPrimitive.List\n    ref={ref}\n    className={cn(\n      \"group flex flex-1 list-none items-center justify-center space-x-1\",\n      className\n    )}\n    {...props}\n  />\n))\nNavigationMenuList.displayName = NavigationMenuPrimitive.List.displayName\n\nconst NavigationMenuItem = NavigationMenuPrimitive.Item\n\nconst navigationMenuTriggerStyle = cva(\n  \"group inline-flex h-10 w-max items-center justify-center rounded-md bg-background px-4 py-2 text-sm font-medium transition-colors hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground focus:outline-none disabled:pointer-events-none disabled:opacity-50 data-[state=open]:text-accent-foreground data-[state=open]:bg-accent/50 data-[state=open]:hover:bg-accent data-[state=open]:focus:bg-accent\"\n)\n\nconst NavigationMenuTrigger = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Trigger>\n>(({ className, children, ...props }, ref) => (\n  <NavigationMenuPrimitive.Trigger\n    ref={ref}\n    className={cn(navigationMenuTriggerStyle(), \"group\", className)}\n    {...props}\n  >\n    {children}{\" \"}\n    <ChevronDown\n      className=\"relative top-[1px] ml-1 h-3 w-3 transition duration-200 group-data-[state=open]:rotate-180\"\n      aria-hidden=\"true\"\n    />\n  </NavigationMenuPrimitive.Trigger>\n))\nNavigationMenuTrigger.displayName = NavigationMenuPrimitive.Trigger.displayName\n\nconst NavigationMenuContent = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <NavigationMenuPrimitive.Content\n    ref={ref}\n    className={cn(\n      \"left-0 top-0 w-full data-[motion^=from-]:animate-in data-[motion^=to-]:animate-out data-[motion^=from-]:fade-in data-[motion^=to-]:fade-out data-[motion=from-end]:slide-in-from-right-52 data-[motion=from-start]:slide-in-from-left-52 data-[motion=to-end]:slide-out-to-right-52 data-[motion=to-start]:slide-out-to-left-52 md:absolute md:w-auto \",\n      className\n    )}\n    {...props}\n  />\n))\nNavigationMenuContent.displayName = NavigationMenuPrimitive.Content.displayName\n\nconst NavigationMenuLink = NavigationMenuPrimitive.Link\n\nconst NavigationMenuViewport = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Viewport>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Viewport>\n>(({ className, ...props }, ref) => (\n  <div className={cn(\"absolute left-0 top-full flex justify-center\")}>\n    <NavigationMenuPrimitive.Viewport\n      className={cn(\n        \"origin-top-center relative mt-1.5 h-[var(--radix-navigation-menu-viewport-height)] w-full overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-90 md:w-[var(--radix-navigation-menu-viewport-width)]\",\n        className\n      )}\n      ref={ref}\n      {...props}\n    />\n  </div>\n))\nNavigationMenuViewport.displayName =\n  NavigationMenuPrimitive.Viewport.displayName\n\nconst NavigationMenuIndicator = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Indicator>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Indicator>\n>(({ className, ...props }, ref) => (\n  <NavigationMenuPrimitive.Indicator\n    ref={ref}\n    className={cn(\n      \"top-full z-[1] flex h-1.5 items-end justify-center overflow-hidden data-[state=visible]:animate-in data-[state=hidden]:animate-out data-[state=hidden]:fade-out data-[state=visible]:fade-in\",\n      className\n    )}\n    {...props}\n  >\n    <div className=\"relative top-[60%] h-2 w-2 rotate-45 rounded-tl-sm bg-border shadow-md\" />\n  </NavigationMenuPrimitive.Indicator>\n))\nNavigationMenuIndicator.displayName =\n  NavigationMenuPrimitive.Indicator.displayName\n\nexport {\n  navigationMenuTriggerStyle,\n  NavigationMenu,\n  NavigationMenuList,\n  NavigationMenuItem,\n  NavigationMenuContent,\n  NavigationMenuTrigger,\n  NavigationMenuLink,\n  NavigationMenuIndicator,\n  NavigationMenuViewport,\n}\n","path":null,"size_bytes":5128,"size_tokens":null},"attached_assets/separator_1763670995704.tsx":{"content":"import * as React from \"react\"\nimport * as SeparatorPrimitive from \"@radix-ui/react-separator\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Separator = React.forwardRef<\n  React.ElementRef<typeof SeparatorPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof SeparatorPrimitive.Root>\n>(\n  (\n    { className, orientation = \"horizontal\", decorative = true, ...props },\n    ref\n  ) => (\n    <SeparatorPrimitive.Root\n      ref={ref}\n      decorative={decorative}\n      orientation={orientation}\n      className={cn(\n        \"shrink-0 bg-border\",\n        orientation === \"horizontal\" ? \"h-[1px] w-full\" : \"h-full w-[1px]\",\n        className\n      )}\n      {...props}\n    />\n  )\n)\nSeparator.displayName = SeparatorPrimitive.Root.displayName\n\nexport { Separator }\n","path":null,"size_bytes":756,"size_tokens":null},"attached_assets/card_1763670951629.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Card = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\n      \"shadcn-card rounded-xl border bg-card border-card-border text-card-foreground shadow-sm\",\n      className\n    )}\n    {...props}\n  />\n));\nCard.displayName = \"Card\"\n\nconst CardHeader = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex flex-col space-y-1.5 p-6\", className)}\n    {...props}\n  />\n));\nCardHeader.displayName = \"CardHeader\"\n\nconst CardTitle = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\n      \"text-2xl font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nCardTitle.displayName = \"CardTitle\"\n\nconst CardDescription = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n));\nCardDescription.displayName = \"CardDescription\"\n\nconst CardContent = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div ref={ref} className={cn(\"p-6 pt-0\", className)} {...props} />\n))\nCardContent.displayName = \"CardContent\"\n\nconst CardFooter = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex items-center p-6 pt-0\", className)}\n    {...props}\n  />\n))\nCardFooter.displayName = \"CardFooter\"\nexport {\n  Card,\n  CardHeader,\n  CardFooter,\n  CardTitle,\n  CardDescription,\n  CardContent,\n}\n","path":null,"size_bytes":1904,"size_tokens":null},"attached_assets/badge_1763670951626.tsx":{"content":"import * as React from \"react\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst badgeVariants = cva(\n  // Whitespace-nowrap: Badges should never wrap.\n  \"whitespace-nowrap inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2\" +\n  \" hover-elevate \" ,\n  {\n    variants: {\n      variant: {\n        default:\n          \"border-transparent bg-primary text-primary-foreground shadow-xs\",\n        secondary: \"border-transparent bg-secondary text-secondary-foreground\",\n        destructive:\n          \"border-transparent bg-destructive text-destructive-foreground shadow-xs\",\n\n        outline: \" border [border-color:var(--badge-outline)] shadow-xs\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  },\n)\n\nexport interface BadgeProps\n  extends React.HTMLAttributes<HTMLDivElement>,\n    VariantProps<typeof badgeVariants> {}\n\nfunction Badge({ className, variant, ...props }: BadgeProps) {\n  return (\n    <div className={cn(badgeVariants({ variant }), className)} {...props} />\n  );\n}\n\nexport { Badge, badgeVariants }\n","path":null,"size_bytes":1202,"size_tokens":null},"attached_assets/radio-group_1763671095563.tsx":{"content":"import * as React from \"react\"\nimport * as RadioGroupPrimitive from \"@radix-ui/react-radio-group\"\nimport { Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst RadioGroup = React.forwardRef<\n  React.ElementRef<typeof RadioGroupPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof RadioGroupPrimitive.Root>\n>(({ className, ...props }, ref) => {\n  return (\n    <RadioGroupPrimitive.Root\n      className={cn(\"grid gap-2\", className)}\n      {...props}\n      ref={ref}\n    />\n  )\n})\nRadioGroup.displayName = RadioGroupPrimitive.Root.displayName\n\nconst RadioGroupItem = React.forwardRef<\n  React.ElementRef<typeof RadioGroupPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof RadioGroupPrimitive.Item>\n>(({ className, ...props }, ref) => {\n  return (\n    <RadioGroupPrimitive.Item\n      ref={ref}\n      className={cn(\n        \"aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50\",\n        className\n      )}\n      {...props}\n    >\n      <RadioGroupPrimitive.Indicator className=\"flex items-center justify-center\">\n        <Circle className=\"h-2.5 w-2.5 fill-current text-current\" />\n      </RadioGroupPrimitive.Indicator>\n    </RadioGroupPrimitive.Item>\n  )\n})\nRadioGroupItem.displayName = RadioGroupPrimitive.Item.displayName\n\nexport { RadioGroup, RadioGroupItem }\n","path":null,"size_bytes":1467,"size_tokens":null},"attached_assets/progress_1763670995701.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as ProgressPrimitive from \"@radix-ui/react-progress\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Progress = React.forwardRef<\n  React.ElementRef<typeof ProgressPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ProgressPrimitive.Root>\n>(({ className, value, ...props }, ref) => (\n  <ProgressPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative h-4 w-full overflow-hidden rounded-full bg-secondary\",\n      className\n    )}\n    {...props}\n  >\n    <ProgressPrimitive.Indicator\n      className=\"h-full w-full flex-1 bg-primary transition-all\"\n      style={{ transform: `translateX(-${100 - (value || 0)}%)` }}\n    />\n  </ProgressPrimitive.Root>\n))\nProgress.displayName = ProgressPrimitive.Root.displayName\n\nexport { Progress }\n","path":null,"size_bytes":791,"size_tokens":null},"attached_assets/progress_1763671095562.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as ProgressPrimitive from \"@radix-ui/react-progress\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Progress = React.forwardRef<\n  React.ElementRef<typeof ProgressPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ProgressPrimitive.Root>\n>(({ className, value, ...props }, ref) => (\n  <ProgressPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative h-4 w-full overflow-hidden rounded-full bg-secondary\",\n      className\n    )}\n    {...props}\n  >\n    <ProgressPrimitive.Indicator\n      className=\"h-full w-full flex-1 bg-primary transition-all\"\n      style={{ transform: `translateX(-${100 - (value || 0)}%)` }}\n    />\n  </ProgressPrimitive.Root>\n))\nProgress.displayName = ProgressPrimitive.Root.displayName\n\nexport { Progress }\n","path":null,"size_bytes":791,"size_tokens":null},"client/src/components/ScanResultDialog.tsx":{"content":"import { Dialog, DialogContent } from \"@/components/ui/dialog\";\nimport { Button } from \"@/components/ui/button\";\nimport { CheckCircle2, XCircle, Loader2 } from \"lucide-react\";\n\ninterface ScanResultDialogProps {\n  open: boolean;\n  onClose: () => void;\n  result?: {\n    success: boolean;\n    productName?: string;\n    barcode?: string;\n    oldStatus?: string;\n    newStatus?: string;\n    action?: string;\n    error?: string;\n  };\n  isLoading?: boolean;\n}\n\nexport default function ScanResultDialog({ open, onClose, result, isLoading }: ScanResultDialogProps) {\n  return (\n    <Dialog open={open} onOpenChange={onClose}>\n      <DialogContent className=\"max-w-md text-center\" data-testid=\"dialog-scan-result\">\n        <div className=\"py-6\">\n          {isLoading ? (\n            <>\n              <Loader2 className=\"w-12 h-12 mx-auto text-blue-600 animate-spin mb-4\" />\n              <h3 className=\"text-xl font-bold mb-2\">Processing Scan...</h3>\n              <p className=\"text-muted-foreground\">Please wait</p>\n            </>\n          ) : result?.success ? (\n            <>\n              <CheckCircle2 className=\"w-12 h-12 mx-auto text-green-600 mb-4\" data-testid=\"icon-success\" />\n              <h3 className=\"text-xl font-bold mb-4\">Scan Successful!</h3>\n              <div className=\"space-y-2 text-left bg-muted/50 p-4 rounded-lg\">\n                <p data-testid=\"text-product-name\">\n                  <strong className=\"font-semibold\">Product:</strong> {result.productName}\n                </p>\n                <p data-testid=\"text-barcode\">\n                  <strong className=\"font-semibold\">Barcode:</strong> {result.barcode}\n                </p>\n                <p data-testid=\"text-status-change\">\n                  <strong className=\"font-semibold\">Status:</strong> {result.oldStatus} â†’ {result.newStatus}\n                </p>\n                <p data-testid=\"text-action\">\n                  <strong className=\"font-semibold\">Action:</strong> {result.action}\n                </p>\n              </div>\n            </>\n          ) : (\n            <>\n              <XCircle className=\"w-12 h-12 mx-auto text-red-600 mb-4\" data-testid=\"icon-error\" />\n              <h3 className=\"text-xl font-bold mb-4\">Scan Failed</h3>\n              <p className=\"text-muted-foreground\" data-testid=\"text-error\">\n                {result?.error || 'Unknown error occurred'}\n              </p>\n            </>\n          )}\n\n          {!isLoading && (\n            <div className=\"flex gap-3 mt-6\">\n              <Button \n                className=\"flex-1\"\n                onClick={onClose}\n                data-testid=\"button-scan-another\"\n              >\n                Scan Another Item\n              </Button>\n              <Button \n                variant=\"outline\"\n                onClick={onClose}\n                data-testid=\"button-close\"\n              >\n                Close\n              </Button>\n            </div>\n          )}\n        </div>\n      </DialogContent>\n    </Dialog>\n  );\n}\n","path":null,"size_bytes":2990,"size_tokens":null},"attached_assets/menubar_1763670995698.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as MenubarPrimitive from \"@radix-ui/react-menubar\"\nimport { Check, ChevronRight, Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nfunction MenubarMenu({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Menu>) {\n  return <MenubarPrimitive.Menu {...props} />\n}\n\nfunction MenubarGroup({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Group>) {\n  return <MenubarPrimitive.Group {...props} />\n}\n\nfunction MenubarPortal({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Portal>) {\n  return <MenubarPrimitive.Portal {...props} />\n}\n\nfunction MenubarRadioGroup({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.RadioGroup>) {\n  return <MenubarPrimitive.RadioGroup {...props} />\n}\n\nfunction MenubarSub({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Sub>) {\n  return <MenubarPrimitive.Sub data-slot=\"menubar-sub\" {...props} />\n}\n\nconst Menubar = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"flex h-10 items-center space-x-1 rounded-md border bg-background p-1\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubar.displayName = MenubarPrimitive.Root.displayName\n\nconst MenubarTrigger = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Trigger>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center rounded-sm px-3 py-1.5 text-sm font-medium outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarTrigger.displayName = MenubarPrimitive.Trigger.displayName\n\nconst MenubarSubTrigger = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.SubTrigger>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.SubTrigger> & {\n    inset?: boolean\n  }\n>(({ className, inset, children, ...props }, ref) => (\n  <MenubarPrimitive.SubTrigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <ChevronRight className=\"ml-auto h-4 w-4\" />\n  </MenubarPrimitive.SubTrigger>\n))\nMenubarSubTrigger.displayName = MenubarPrimitive.SubTrigger.displayName\n\nconst MenubarSubContent = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.SubContent>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.SubContent>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.SubContent\n    ref={ref}\n    className={cn(\n      \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-menubar-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarSubContent.displayName = MenubarPrimitive.SubContent.displayName\n\nconst MenubarContent = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Content>\n>(\n  (\n    { className, align = \"start\", alignOffset = -4, sideOffset = 8, ...props },\n    ref\n  ) => (\n    <MenubarPrimitive.Portal>\n      <MenubarPrimitive.Content\n        ref={ref}\n        align={align}\n        alignOffset={alignOffset}\n        sideOffset={sideOffset}\n        className={cn(\n          \"z-50 min-w-[12rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-menubar-content-transform-origin]\",\n          className\n        )}\n        {...props}\n      />\n    </MenubarPrimitive.Portal>\n  )\n)\nMenubarContent.displayName = MenubarPrimitive.Content.displayName\n\nconst MenubarItem = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Item> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <MenubarPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarItem.displayName = MenubarPrimitive.Item.displayName\n\nconst MenubarCheckboxItem = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.CheckboxItem>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.CheckboxItem>\n>(({ className, children, checked, ...props }, ref) => (\n  <MenubarPrimitive.CheckboxItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    checked={checked}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <MenubarPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </MenubarPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </MenubarPrimitive.CheckboxItem>\n))\nMenubarCheckboxItem.displayName = MenubarPrimitive.CheckboxItem.displayName\n\nconst MenubarRadioItem = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.RadioItem>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.RadioItem>\n>(({ className, children, ...props }, ref) => (\n  <MenubarPrimitive.RadioItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <MenubarPrimitive.ItemIndicator>\n        <Circle className=\"h-2 w-2 fill-current\" />\n      </MenubarPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </MenubarPrimitive.RadioItem>\n))\nMenubarRadioItem.displayName = MenubarPrimitive.RadioItem.displayName\n\nconst MenubarLabel = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Label> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <MenubarPrimitive.Label\n    ref={ref}\n    className={cn(\n      \"px-2 py-1.5 text-sm font-semibold\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarLabel.displayName = MenubarPrimitive.Label.displayName\n\nconst MenubarSeparator = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\n    {...props}\n  />\n))\nMenubarSeparator.displayName = MenubarPrimitive.Separator.displayName\n\nconst MenubarShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\n        \"ml-auto text-xs tracking-widest text-muted-foreground\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\nMenubarShortcut.displayname = \"MenubarShortcut\"\n\nexport {\n  Menubar,\n  MenubarMenu,\n  MenubarTrigger,\n  MenubarContent,\n  MenubarItem,\n  MenubarSeparator,\n  MenubarLabel,\n  MenubarCheckboxItem,\n  MenubarRadioGroup,\n  MenubarRadioItem,\n  MenubarPortal,\n  MenubarSubContent,\n  MenubarSubTrigger,\n  MenubarGroup,\n  MenubarSub,\n  MenubarShortcut,\n}\n","path":null,"size_bytes":8605,"size_tokens":null},"attached_assets/toggle-group_1763671095573.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as ToggleGroupPrimitive from \"@radix-ui/react-toggle-group\"\nimport { type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\nimport { toggleVariants } from \"@/components/ui/toggle\"\n\nconst ToggleGroupContext = React.createContext<\n  VariantProps<typeof toggleVariants>\n>({\n  size: \"default\",\n  variant: \"default\",\n})\n\nconst ToggleGroup = React.forwardRef<\n  React.ElementRef<typeof ToggleGroupPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ToggleGroupPrimitive.Root> &\n    VariantProps<typeof toggleVariants>\n>(({ className, variant, size, children, ...props }, ref) => (\n  <ToggleGroupPrimitive.Root\n    ref={ref}\n    className={cn(\"flex items-center justify-center gap-1\", className)}\n    {...props}\n  >\n    <ToggleGroupContext.Provider value={{ variant, size }}>\n      {children}\n    </ToggleGroupContext.Provider>\n  </ToggleGroupPrimitive.Root>\n))\n\nToggleGroup.displayName = ToggleGroupPrimitive.Root.displayName\n\nconst ToggleGroupItem = React.forwardRef<\n  React.ElementRef<typeof ToggleGroupPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof ToggleGroupPrimitive.Item> &\n    VariantProps<typeof toggleVariants>\n>(({ className, children, variant, size, ...props }, ref) => {\n  const context = React.useContext(ToggleGroupContext)\n\n  return (\n    <ToggleGroupPrimitive.Item\n      ref={ref}\n      className={cn(\n        toggleVariants({\n          variant: context.variant || variant,\n          size: context.size || size,\n        }),\n        className\n      )}\n      {...props}\n    >\n      {children}\n    </ToggleGroupPrimitive.Item>\n  )\n})\n\nToggleGroupItem.displayName = ToggleGroupPrimitive.Item.displayName\n\nexport { ToggleGroup, ToggleGroupItem }\n","path":null,"size_bytes":1753,"size_tokens":null},"client/src/components/ui/badge.tsx":{"content":"import * as React from \"react\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst badgeVariants = cva(\n  // Whitespace-nowrap: Badges should never wrap.\n  \"whitespace-nowrap inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2\" +\n  \" hover-elevate \" ,\n  {\n    variants: {\n      variant: {\n        default:\n          \"border-transparent bg-primary text-primary-foreground shadow-xs\",\n        secondary: \"border-transparent bg-secondary text-secondary-foreground\",\n        destructive:\n          \"border-transparent bg-destructive text-destructive-foreground shadow-xs\",\n\n        outline: \" border [border-color:var(--badge-outline)] shadow-xs\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  },\n)\n\nexport interface BadgeProps\n  extends React.HTMLAttributes<HTMLDivElement>,\n    VariantProps<typeof badgeVariants> {}\n\nfunction Badge({ className, variant, ...props }: BadgeProps) {\n  return (\n    <div className={cn(badgeVariants({ variant }), className)} {...props} />\n  );\n}\n\nexport { Badge, badgeVariants }\n","path":null,"size_bytes":1202,"size_tokens":null},"client/src/pages/QRCodes.tsx":{"content":"import { useQuery } from \"@tanstack/react-query\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Download, Copy, ExternalLink } from \"lucide-react\";\nimport { api } from \"@/lib/api\";\nimport InventoryHeader from \"@/components/InventoryHeader\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport type { Language } from \"@/lib/translations\";\nimport { useTranslation } from \"@/lib/translations\";\n\ninterface QRCodesProps {\n  userName: string;\n  userRole: string;\n  onLogout: () => void;\n  onNavigateToInventory?: () => void;\n  onNavigateToReservations?: () => void;\n  onNavigateToActivityLogs?: () => void;\n  onNavigateToMaintenance?: () => void;\n  onNavigateToReports?: () => void;\n  language?: Language;\n  onLanguageChange?: (lang: Language) => void;\n  currentLanguage?: Language;\n}\n\nexport default function QRCodes({ userName, userRole, onLogout, onNavigateToInventory, onNavigateToReservations, onNavigateToActivityLogs, onNavigateToMaintenance, onNavigateToReports, language = 'en', onLanguageChange, currentLanguage = 'en' }: QRCodesProps) {\n  const { toast } = useToast();\n  const lang: Language = language || currentLanguage || 'en';\n  const t = useTranslation(lang);\n  const { data: qrCodes = [], isLoading } = useQuery({\n    queryKey: ['/api/qrcodes/all'],\n    queryFn: () => api.qrCodes.getAllQRCodes(),\n  });\n\n  const downloadQRCode = (qrCode: string, fileName: string) => {\n    const link = document.createElement('a');\n    link.href = qrCode;\n    link.download = `${fileName}.png`;\n    link.click();\n  };\n\n  const copyToClipboard = (text: string) => {\n    navigator.clipboard.writeText(text);\n    toast({ title: \"URL copied to clipboard!\" });\n  };\n\n  const downloadAllQRCodes = () => {\n    qrCodes.forEach((item: any, index: number) => {\n      setTimeout(() => {\n        downloadQRCode(item.qrCode, `${item.barcode}-${item.productName}`);\n      }, index * 100);\n    });\n  };\n\n  return (\n    <div className=\"min-h-screen bg-background\">\n      <InventoryHeader\n        userName={userName}\n        userRole={userRole}\n        currentView=\"inventory\"\n        onViewChange={() => onNavigateToInventory?.()}\n        onLogout={onLogout}\n        onNavigateToReservations={onNavigateToReservations}\n        onNavigateToActivityLogs={onNavigateToActivityLogs}\n        onNavigateToQRCodes={() => {}}\n        onNavigateToMaintenance={onNavigateToMaintenance}\n        onNavigateToReports={onNavigateToReports}\n        hideViewToggle={true}\n        language={lang}\n        onLanguageChange={onLanguageChange || (() => {})}\n      />\n\n      <main className=\"max-w-[1400px] mx-auto px-5 py-8\">\n        <div className=\"flex items-center justify-between mb-6\">\n          <div>\n            <h1 className=\"text-3xl font-bold\">{t('qrCodes')}</h1>\n            <p className=\"text-muted-foreground\">{t('scanQRCodes')}</p>\n          </div>\n          <div className=\"flex gap-2\">\n            <Button\n              onClick={downloadAllQRCodes}\n              variant=\"outline\"\n              disabled={qrCodes.length === 0}\n            >\n              <Download className=\"w-4 h-4 mr-2\" />\n              {t('downloadAll')}\n            </Button>\n          </div>\n        </div>\n\n        {isLoading ? (\n          <div className=\"text-center py-12\">\n            <p className=\"text-muted-foreground\">{t('generatingQRCodes')}</p>\n          </div>\n        ) : qrCodes.length === 0 ? (\n          <div className=\"text-center py-12\">\n            <p className=\"text-muted-foreground\">{t('noItemsFound')}</p>\n          </div>\n        ) : (\n          <div className=\"grid grid-cols-[repeat(auto-fill,minmax(300px,1fr))] gap-6\">\n            {qrCodes.map((item: any) => (\n              <Card key={item.id}>\n                <CardHeader>\n                  <CardTitle className=\"text-lg\">{item.productName}</CardTitle>\n                  <p className=\"text-sm text-muted-foreground\">{item.barcode}</p>\n                </CardHeader>\n                <CardContent className=\"space-y-4\">\n                  <div className=\"bg-white p-4 rounded-lg border\">\n                    <img\n                      src={item.qrCode}\n                      alt={`QR Code for ${item.productName}`}\n                      className=\"w-full h-auto\"\n                    />\n                  </div>\n\n                  {item.publicUrl && (\n                    <div className=\"space-y-2\">\n                      <p className=\"text-xs font-semibold text-muted-foreground\">Public Scan URL:</p>\n                      <div className=\"flex gap-2\">\n                        <input\n                          type=\"text\"\n                          value={item.publicUrl}\n                          readOnly\n                          className=\"flex-1 px-3 py-2 text-xs bg-muted rounded border text-muted-foreground\"\n                        />\n                        <Button\n                          size=\"sm\"\n                          variant=\"outline\"\n                          onClick={() => copyToClipboard(item.publicUrl)}\n                        >\n                          <Copy className=\"w-3 h-3\" />\n                        </Button>\n                        <Button\n                          size=\"sm\"\n                          variant=\"outline\"\n                          onClick={() => window.open(item.publicUrl, '_blank')}\n                        >\n                          <ExternalLink className=\"w-3 h-3\" />\n                        </Button>\n                      </div>\n                    </div>\n                  )}\n\n                  <Button\n                    onClick={() => downloadQRCode(item.qrCode, `${item.barcode}-${item.productName}`)}\n                    variant=\"outline\"\n                    className=\"w-full\"\n                  >\n                    <Download className=\"w-4 h-4 mr-2\" />\n                    {t('downloadQRCode')}\n                  </Button>\n                </CardContent>\n              </Card>\n            ))}\n          </div>\n        )}\n      </main>\n    </div>\n  );\n}","path":null,"size_bytes":6034,"size_tokens":null},"attached_assets/sidebar_1763671095567.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { cva, VariantProps } from \"class-variance-authority\"\nimport { PanelLeftIcon } from \"lucide-react\"\n\nimport { useIsMobile } from \"@/hooks/use-mobile\"\nimport { cn } from \"@/lib/utils\"\nimport { Button } from \"@/components/ui/button\"\nimport { Input } from \"@/components/ui/input\"\nimport { Separator } from \"@/components/ui/separator\"\nimport {\n  Sheet,\n  SheetContent,\n  SheetDescription,\n  SheetHeader,\n  SheetTitle,\n} from \"@/components/ui/sheet\"\nimport { Skeleton } from \"@/components/ui/skeleton\"\nimport {\n  Tooltip,\n  TooltipContent,\n  TooltipProvider,\n  TooltipTrigger,\n} from \"@/components/ui/tooltip\"\n\nconst SIDEBAR_COOKIE_NAME = \"sidebar_state\"\nconst SIDEBAR_COOKIE_MAX_AGE = 60 * 60 * 24 * 7\nconst SIDEBAR_WIDTH = \"16rem\"\nconst SIDEBAR_WIDTH_MOBILE = \"18rem\"\nconst SIDEBAR_WIDTH_ICON = \"3rem\"\nconst SIDEBAR_KEYBOARD_SHORTCUT = \"b\"\n\ntype SidebarContextProps = {\n  state: \"expanded\" | \"collapsed\"\n  open: boolean\n  setOpen: (open: boolean) => void\n  openMobile: boolean\n  setOpenMobile: (open: boolean) => void\n  isMobile: boolean\n  toggleSidebar: () => void\n}\n\nconst SidebarContext = React.createContext<SidebarContextProps | null>(null)\n\nfunction useSidebar() {\n  const context = React.useContext(SidebarContext)\n  if (!context) {\n    throw new Error(\"useSidebar must be used within a SidebarProvider.\")\n  }\n\n  return context\n}\n\nfunction SidebarProvider({\n  defaultOpen = true,\n  open: openProp,\n  onOpenChange: setOpenProp,\n  className,\n  style,\n  children,\n  ...props\n}: React.ComponentProps<\"div\"> & {\n  defaultOpen?: boolean\n  open?: boolean\n  onOpenChange?: (open: boolean) => void\n}) {\n  const isMobile = useIsMobile()\n  const [openMobile, setOpenMobile] = React.useState(false)\n\n  // This is the internal state of the sidebar.\n  // We use openProp and setOpenProp for control from outside the component.\n  const [_open, _setOpen] = React.useState(defaultOpen)\n  const open = openProp ?? _open\n  const setOpen = React.useCallback(\n    (value: boolean | ((value: boolean) => boolean)) => {\n      const openState = typeof value === \"function\" ? value(open) : value\n      if (setOpenProp) {\n        setOpenProp(openState)\n      } else {\n        _setOpen(openState)\n      }\n\n      // This sets the cookie to keep the sidebar state.\n      document.cookie = `${SIDEBAR_COOKIE_NAME}=${openState}; path=/; max-age=${SIDEBAR_COOKIE_MAX_AGE}`\n    },\n    [setOpenProp, open]\n  )\n\n  // Helper to toggle the sidebar.\n  const toggleSidebar = React.useCallback(() => {\n    return isMobile ? setOpenMobile((open) => !open) : setOpen((open) => !open)\n  }, [isMobile, setOpen, setOpenMobile])\n\n  // Adds a keyboard shortcut to toggle the sidebar.\n  React.useEffect(() => {\n    const handleKeyDown = (event: KeyboardEvent) => {\n      if (\n        event.key === SIDEBAR_KEYBOARD_SHORTCUT &&\n        (event.metaKey || event.ctrlKey)\n      ) {\n        event.preventDefault()\n        toggleSidebar()\n      }\n    }\n\n    window.addEventListener(\"keydown\", handleKeyDown)\n    return () => window.removeEventListener(\"keydown\", handleKeyDown)\n  }, [toggleSidebar])\n\n  // We add a state so that we can do data-state=\"expanded\" or \"collapsed\".\n  // This makes it easier to style the sidebar with Tailwind classes.\n  const state = open ? \"expanded\" : \"collapsed\"\n\n  const contextValue = React.useMemo<SidebarContextProps>(\n    () => ({\n      state,\n      open,\n      setOpen,\n      isMobile,\n      openMobile,\n      setOpenMobile,\n      toggleSidebar,\n    }),\n    [state, open, setOpen, isMobile, openMobile, setOpenMobile, toggleSidebar]\n  )\n\n  return (\n    <SidebarContext.Provider value={contextValue}>\n      <TooltipProvider delayDuration={0}>\n        <div\n          data-slot=\"sidebar-wrapper\"\n          style={\n            {\n              \"--sidebar-width\": SIDEBAR_WIDTH,\n              \"--sidebar-width-icon\": SIDEBAR_WIDTH_ICON,\n              ...style,\n            } as React.CSSProperties\n          }\n          className={cn(\n            \"group/sidebar-wrapper has-data-[variant=inset]:bg-sidebar flex min-h-svh w-full\",\n            className\n          )}\n          {...props}\n        >\n          {children}\n        </div>\n      </TooltipProvider>\n    </SidebarContext.Provider>\n  )\n}\n\nfunction Sidebar({\n  side = \"left\",\n  variant = \"sidebar\",\n  collapsible = \"offcanvas\",\n  className,\n  children,\n  ...props\n}: React.ComponentProps<\"div\"> & {\n  side?: \"left\" | \"right\"\n  variant?: \"sidebar\" | \"floating\" | \"inset\"\n  collapsible?: \"offcanvas\" | \"icon\" | \"none\"\n}) {\n  const { isMobile, state, openMobile, setOpenMobile } = useSidebar()\n\n  if (collapsible === \"none\") {\n    return (\n      <div\n        data-slot=\"sidebar\"\n        className={cn(\n          \"bg-sidebar text-sidebar-foreground flex h-full w-[var(--sidebar-width)] flex-col\",\n          className\n        )}\n        {...props}\n      >\n        {children}\n      </div>\n    )\n  }\n\n  if (isMobile) {\n    return (\n      <Sheet open={openMobile} onOpenChange={setOpenMobile} {...props}>\n        <SheetContent\n          data-sidebar=\"sidebar\"\n          data-slot=\"sidebar\"\n          data-mobile=\"true\"\n          className=\"bg-sidebar text-sidebar-foreground w-[var(--sidebar-width)] p-0 [&>button]:hidden\"\n          style={\n            {\n              \"--sidebar-width\": SIDEBAR_WIDTH_MOBILE,\n            } as React.CSSProperties\n          }\n          side={side}\n        >\n          <SheetHeader className=\"sr-only\">\n            <SheetTitle>Sidebar</SheetTitle>\n            <SheetDescription>Displays the mobile sidebar.</SheetDescription>\n          </SheetHeader>\n          <div className=\"flex h-full w-full flex-col\">{children}</div>\n        </SheetContent>\n      </Sheet>\n    )\n  }\n\n  return (\n    <div\n      className=\"group peer text-sidebar-foreground hidden md:block\"\n      data-state={state}\n      data-collapsible={state === \"collapsed\" ? collapsible : \"\"}\n      data-variant={variant}\n      data-side={side}\n      data-slot=\"sidebar\"\n    >\n      {/* This is what handles the sidebar gap on desktop */}\n      <div\n        data-slot=\"sidebar-gap\"\n        className={cn(\n          \"relative w-[var(--sidebar-width)] bg-transparent transition-[width] duration-200 ease-linear\",\n          \"group-data-[collapsible=offcanvas]:w-0\",\n          \"group-data-[side=right]:rotate-180\",\n          variant === \"floating\" || variant === \"inset\"\n            ? \"group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)+var(--spacing-4))]\"\n            : \"group-data-[collapsible=icon]:w-[var(--sidebar-width-icon)]\"\n        )}\n      />\n      <div\n        data-slot=\"sidebar-container\"\n        className={cn(\n          \"fixed inset-y-0 z-10 hidden h-svh w-[var(--sidebar-width)] transition-[left,right,width] duration-200 ease-linear md:flex\",\n          side === \"left\"\n            ? \"left-0 group-data-[collapsible=offcanvas]:left-[calc(var(--sidebar-width)*-1)]\"\n            : \"right-0 group-data-[collapsible=offcanvas]:right-[calc(var(--sidebar-width)*-1)]\",\n          // Adjust the padding for floating and inset variants.\n          variant === \"floating\" || variant === \"inset\"\n            ? \"p-2 group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)+var(--spacing-4)+2px)]\"\n            : \"group-data-[collapsible=icon]:w-[var(--sidebar-width-icon)] group-data-[side=left]:border-r group-data-[side=right]:border-l\",\n          className\n        )}\n        {...props}\n      >\n        <div\n          data-sidebar=\"sidebar\"\n          data-slot=\"sidebar-inner\"\n          className=\"bg-sidebar group-data-[variant=floating]:border-sidebar-border flex h-full w-full flex-col group-data-[variant=floating]:rounded-lg group-data-[variant=floating]:border group-data-[variant=floating]:shadow-sm\"\n        >\n          {children}\n        </div>\n      </div>\n    </div>\n  )\n}\n\nfunction SidebarTrigger({\n  className,\n  onClick,\n  ...props\n}: React.ComponentProps<typeof Button>) {\n  const { toggleSidebar } = useSidebar()\n\n  return (\n    <Button\n      data-sidebar=\"trigger\"\n      data-slot=\"sidebar-trigger\"\n      variant=\"ghost\"\n      size=\"icon\"\n      className={cn(\"h-7 w-7\", className)}\n      onClick={(event) => {\n        onClick?.(event)\n        toggleSidebar()\n      }}\n      {...props}\n    >\n      <PanelLeftIcon />\n      <span className=\"sr-only\">Toggle Sidebar</span>\n    </Button>\n  )\n}\n\nfunction SidebarRail({ className, ...props }: React.ComponentProps<\"button\">) {\n  const { toggleSidebar } = useSidebar()\n\n  // Note: Tailwind v3.4 doesn't support \"in-\" selectors. So the rail won't work perfectly.\n  return (\n    <button\n      data-sidebar=\"rail\"\n      data-slot=\"sidebar-rail\"\n      aria-label=\"Toggle Sidebar\"\n      tabIndex={-1}\n      onClick={toggleSidebar}\n      title=\"Toggle Sidebar\"\n      className={cn(\n        \"hover:after:bg-sidebar-border absolute inset-y-0 z-20 hidden w-4 -translate-x-1/2 transition-all ease-linear group-data-[side=left]:-right-4 group-data-[side=right]:left-0 after:absolute after:inset-y-0 after:left-1/2 after:w-[2px] sm:flex\",\n        \"in-data-[side=left]:cursor-w-resize in-data-[side=right]:cursor-e-resize\",\n        \"[[data-side=left][data-state=collapsed]_&]:cursor-e-resize [[data-side=right][data-state=collapsed]_&]:cursor-w-resize\",\n        \"hover:group-data-[collapsible=offcanvas]:bg-sidebar group-data-[collapsible=offcanvas]:translate-x-0 group-data-[collapsible=offcanvas]:after:left-full\",\n        \"[[data-side=left][data-collapsible=offcanvas]_&]:-right-2\",\n        \"[[data-side=right][data-collapsible=offcanvas]_&]:-left-2\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarInset({ className, ...props }: React.ComponentProps<\"main\">) {\n  return (\n    <main\n      data-slot=\"sidebar-inset\"\n      className={cn(\n        \"bg-background relative flex w-full flex-1 flex-col\",\n        \"md:peer-data-[variant=inset]:m-2 md:peer-data-[variant=inset]:ml-0 md:peer-data-[variant=inset]:rounded-xl md:peer-data-[variant=inset]:shadow-sm md:peer-data-[variant=inset]:peer-data-[state=collapsed]:ml-2\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarInput({\n  className,\n  ...props\n}: React.ComponentProps<typeof Input>) {\n  return (\n    <Input\n      data-slot=\"sidebar-input\"\n      data-sidebar=\"input\"\n      className={cn(\"bg-background h-8 w-full shadow-none\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarHeader({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-header\"\n      data-sidebar=\"header\"\n      className={cn(\"flex flex-col gap-2 p-2\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarFooter({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-footer\"\n      data-sidebar=\"footer\"\n      className={cn(\"flex flex-col gap-2 p-2\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarSeparator({\n  className,\n  ...props\n}: React.ComponentProps<typeof Separator>) {\n  return (\n    <Separator\n      data-slot=\"sidebar-separator\"\n      data-sidebar=\"separator\"\n      className={cn(\"bg-sidebar-border mx-2 w-auto\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarContent({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-content\"\n      data-sidebar=\"content\"\n      className={cn(\n        \"flex min-h-0 flex-1 flex-col gap-2 overflow-auto group-data-[collapsible=icon]:overflow-hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarGroup({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-group\"\n      data-sidebar=\"group\"\n      className={cn(\"relative flex w-full min-w-0 flex-col p-2\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarGroupLabel({\n  className,\n  asChild = false,\n  ...props\n}: React.ComponentProps<\"div\"> & { asChild?: boolean }) {\n  const Comp = asChild ? Slot : \"div\"\n\n  return (\n    <Comp\n      data-slot=\"sidebar-group-label\"\n      data-sidebar=\"group-label\"\n      className={cn(\n        \"text-sidebar-foreground/70 ring-sidebar-ring flex h-8 shrink-0 items-center rounded-md px-2 text-xs font-medium outline-hidden transition-[margin,opacity] duration-200 ease-linear focus-visible:ring-2 [&>svg]:h-4 [&>svg]:w-4 [&>svg]:shrink-0\",\n        \"group-data-[collapsible=icon]:-mt-8 group-data-[collapsible=icon]:opacity-0\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarGroupAction({\n  className,\n  asChild = false,\n  ...props\n}: React.ComponentProps<\"button\"> & { asChild?: boolean }) {\n  const Comp = asChild ? Slot : \"button\"\n\n  return (\n    <Comp\n      data-slot=\"sidebar-group-action\"\n      data-sidebar=\"group-action\"\n      className={cn(\n        \"text-sidebar-foreground ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground absolute top-3.5 right-3 flex aspect-square w-5 items-center justify-center rounded-md p-0 outline-hidden transition-transform focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0\",\n        // Increases the hit area of the button on mobile.\n        \"after:absolute after:-inset-2 md:after:hidden\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarGroupContent({\n  className,\n  ...props\n}: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-group-content\"\n      data-sidebar=\"group-content\"\n      className={cn(\"w-full text-sm\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenu({ className, ...props }: React.ComponentProps<\"ul\">) {\n  return (\n    <ul\n      data-slot=\"sidebar-menu\"\n      data-sidebar=\"menu\"\n      className={cn(\"flex w-full min-w-0 flex-col gap-1\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenuItem({ className, ...props }: React.ComponentProps<\"li\">) {\n  return (\n    <li\n      data-slot=\"sidebar-menu-item\"\n      data-sidebar=\"menu-item\"\n      className={cn(\"group/menu-item relative\", className)}\n      {...props}\n    />\n  )\n}\n\nconst sidebarMenuButtonVariants = cva(\n  \"peer/menu-button flex w-full items-center gap-2 overflow-hidden rounded-md p-2 text-left text-sm outline-hidden ring-sidebar-ring transition-[width,height,padding] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 group-has-data-[sidebar=menu-action]/menu-item:pr-8 aria-disabled:pointer-events-none aria-disabled:opacity-50 data-[active=true]:bg-sidebar-accent data-[active=true]:font-medium data-[active=true]:text-sidebar-accent-foreground data-[state=open]:hover:bg-sidebar-accent data-[state=open]:hover:text-sidebar-accent-foreground group-data-[collapsible=icon]:w-8! group-data-[collapsible=icon]:h-8! group-data-[collapsible=icon]:p-2! [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0\",\n  {\n    variants: {\n      variant: {\n        default: \"hover:bg-sidebar-accent hover:text-sidebar-accent-foreground\",\n        outline:\n          \"bg-background shadow-[0_0_0_1px_hsl(var(--sidebar-border))] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground hover:shadow-[0_0_0_1px_hsl(var(--sidebar-accent))]\",\n      },\n      size: {\n        default: \"h-8 text-sm\",\n        sm: \"h-7 text-xs\",\n        lg: \"h-12 text-sm group-data-[collapsible=icon]:p-0!\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nfunction SidebarMenuButton({\n  asChild = false,\n  isActive = false,\n  variant = \"default\",\n  size = \"default\",\n  tooltip,\n  className,\n  ...props\n}: React.ComponentProps<\"button\"> & {\n  asChild?: boolean\n  isActive?: boolean\n  tooltip?: string | React.ComponentProps<typeof TooltipContent>\n} & VariantProps<typeof sidebarMenuButtonVariants>) {\n  const Comp = asChild ? Slot : \"button\"\n  const { isMobile, state } = useSidebar()\n\n  const button = (\n    <Comp\n      data-slot=\"sidebar-menu-button\"\n      data-sidebar=\"menu-button\"\n      data-size={size}\n      data-active={isActive}\n      className={cn(sidebarMenuButtonVariants({ variant, size }), className)}\n      {...props}\n    />\n  )\n\n  if (!tooltip) {\n    return button\n  }\n\n  if (typeof tooltip === \"string\") {\n    tooltip = {\n      children: tooltip,\n    }\n  }\n\n  return (\n    <Tooltip>\n      <TooltipTrigger asChild>{button}</TooltipTrigger>\n      <TooltipContent\n        side=\"right\"\n        align=\"center\"\n        hidden={state !== \"collapsed\" || isMobile}\n        {...tooltip}\n      />\n    </Tooltip>\n  )\n}\n\nfunction SidebarMenuAction({\n  className,\n  asChild = false,\n  showOnHover = false,\n  ...props\n}: React.ComponentProps<\"button\"> & {\n  asChild?: boolean\n  showOnHover?: boolean\n}) {\n  const Comp = asChild ? Slot : \"button\"\n\n  return (\n    <Comp\n      data-slot=\"sidebar-menu-action\"\n      data-sidebar=\"menu-action\"\n      className={cn(\n        \"text-sidebar-foreground ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground peer-hover/menu-button:text-sidebar-accent-foreground absolute top-1.5 right-1 flex aspect-square w-5 items-center justify-center rounded-md p-0 outline-hidden transition-transform focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0\",\n        // Increases the hit area of the button on mobile.\n        \"after:absolute after:-inset-2 md:after:hidden\",\n        \"peer-data-[size=sm]/menu-button:top-1\",\n        \"peer-data-[size=default]/menu-button:top-1.5\",\n        \"peer-data-[size=lg]/menu-button:top-2.5\",\n        \"group-data-[collapsible=icon]:hidden\",\n        showOnHover &&\n          \"peer-data-[active=true]/menu-button:text-sidebar-accent-foreground group-focus-within/menu-item:opacity-100 group-hover/menu-item:opacity-100 data-[state=open]:opacity-100 md:opacity-0\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenuBadge({\n  className,\n  ...props\n}: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-menu-badge\"\n      data-sidebar=\"menu-badge\"\n      className={cn(\n        \"text-sidebar-foreground pointer-events-none absolute right-1 flex h-5 min-w-5 items-center justify-center rounded-md px-1 text-xs font-medium tabular-nums select-none\",\n        \"peer-hover/menu-button:text-sidebar-accent-foreground peer-data-[active=true]/menu-button:text-sidebar-accent-foreground\",\n        \"peer-data-[size=sm]/menu-button:top-1\",\n        \"peer-data-[size=default]/menu-button:top-1.5\",\n        \"peer-data-[size=lg]/menu-button:top-2.5\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenuSkeleton({\n  className,\n  showIcon = false,\n  ...props\n}: React.ComponentProps<\"div\"> & {\n  showIcon?: boolean\n}) {\n  // Random width between 50 to 90%.\n  const width = React.useMemo(() => {\n    return `${Math.floor(Math.random() * 40) + 50}%`\n  }, [])\n\n  return (\n    <div\n      data-slot=\"sidebar-menu-skeleton\"\n      data-sidebar=\"menu-skeleton\"\n      className={cn(\"flex h-8 items-center gap-2 rounded-md px-2\", className)}\n      {...props}\n    >\n      {showIcon && (\n        <Skeleton\n          className=\"size-4 rounded-md\"\n          data-sidebar=\"menu-skeleton-icon\"\n        />\n      )}\n      <Skeleton\n        className=\"h-4 max-w-[var(--skeleton-width)] flex-1\"\n        data-sidebar=\"menu-skeleton-text\"\n        style={\n          {\n            \"--skeleton-width\": width,\n          } as React.CSSProperties\n        }\n      />\n    </div>\n  )\n}\n\nfunction SidebarMenuSub({ className, ...props }: React.ComponentProps<\"ul\">) {\n  return (\n    <ul\n      data-slot=\"sidebar-menu-sub\"\n      data-sidebar=\"menu-sub\"\n      className={cn(\n        \"border-sidebar-border mx-3.5 flex min-w-0 translate-x-px flex-col gap-1 border-l px-2.5 py-0.5\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenuSubItem({\n  className,\n  ...props\n}: React.ComponentProps<\"li\">) {\n  return (\n    <li\n      data-slot=\"sidebar-menu-sub-item\"\n      data-sidebar=\"menu-sub-item\"\n      className={cn(\"group/menu-sub-item relative\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenuSubButton({\n  asChild = false,\n  size = \"md\",\n  isActive = false,\n  className,\n  ...props\n}: React.ComponentProps<\"a\"> & {\n  asChild?: boolean\n  size?: \"sm\" | \"md\"\n  isActive?: boolean\n}) {\n  const Comp = asChild ? Slot : \"a\"\n\n  return (\n    <Comp\n      data-slot=\"sidebar-menu-sub-button\"\n      data-sidebar=\"menu-sub-button\"\n      data-size={size}\n      data-active={isActive}\n      className={cn(\n        \"text-sidebar-foreground ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground active:bg-sidebar-accent active:text-sidebar-accent-foreground [&>svg]:text-sidebar-accent-foreground flex h-7 min-w-0 -translate-x-px items-center gap-2 overflow-hidden rounded-md px-2 outline outline-2 outline-transparent outline-offset-2 focus-visible:ring-2 disabled:pointer-events-none disabled:opacity-50 aria-disabled:pointer-events-none aria-disabled:opacity-50 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0\",\n        \"data-[active=true]:bg-sidebar-accent data-[active=true]:text-sidebar-accent-foreground\",\n        size === \"sm\" && \"text-xs\",\n        size === \"md\" && \"text-sm\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nexport {\n  Sidebar,\n  SidebarContent,\n  SidebarFooter,\n  SidebarGroup,\n  SidebarGroupAction,\n  SidebarGroupContent,\n  SidebarGroupLabel,\n  SidebarHeader,\n  SidebarInput,\n  SidebarInset,\n  SidebarMenu,\n  SidebarMenuAction,\n  SidebarMenuBadge,\n  SidebarMenuButton,\n  SidebarMenuItem,\n  SidebarMenuSkeleton,\n  SidebarMenuSub,\n  SidebarMenuSubButton,\n  SidebarMenuSubItem,\n  SidebarProvider,\n  SidebarRail,\n  SidebarSeparator,\n  SidebarTrigger,\n  useSidebar,\n}\n","path":null,"size_bytes":21846,"size_tokens":null},"postcss.config.js":{"content":"export default {\n  plugins: {\n    tailwindcss: {},\n    autoprefixer: {},\n  },\n}\n","path":null,"size_bytes":80,"size_tokens":null},"attached_assets/ReservationActionDialog_1763670896227.tsx":{"content":"\nimport { useState } from \"react\";\nimport { Dialog, DialogContent, DialogHeader, DialogTitle, DialogFooter } from \"@/components/ui/dialog\";\nimport { Button } from \"@/components/ui/button\";\nimport { Label } from \"@/components/ui/label\";\nimport { Textarea } from \"@/components/ui/textarea\";\n\ninterface ReservationActionDialogProps {\n  open: boolean;\n  onClose: () => void;\n  onSubmit: (data: { rejectionReason?: string; itemConditionOnReturn?: string }) => void;\n  action: 'reject' | 'complete';\n  itemName: string;\n}\n\nexport default function ReservationActionDialog({\n  open,\n  onClose,\n  onSubmit,\n  action,\n  itemName\n}: ReservationActionDialogProps) {\n  const [reason, setReason] = useState(\"\");\n\n  const handleSubmit = (e: React.FormEvent) => {\n    e.preventDefault();\n    if (action === 'reject') {\n      onSubmit({ rejectionReason: reason.trim() || undefined });\n    } else {\n      onSubmit({ itemConditionOnReturn: reason.trim() || undefined });\n    }\n    setReason(\"\");\n    onClose();\n  };\n\n  return (\n    <Dialog open={open} onOpenChange={onClose}>\n      <DialogContent className=\"max-w-md\">\n        <DialogHeader>\n          <DialogTitle>\n            {action === 'reject' ? 'Reject Reservation' : 'Mark as Returned'}\n          </DialogTitle>\n        </DialogHeader>\n        <form onSubmit={handleSubmit} className=\"space-y-4\">\n          <div className=\"space-y-2\">\n            <p className=\"text-sm text-muted-foreground\">\n              Item: <strong>{itemName}</strong>\n            </p>\n          </div>\n          \n          <div className=\"space-y-2\">\n            <Label htmlFor=\"reason\">\n              {action === 'reject' ? 'Rejection Reason *' : 'Item Condition Notes (Optional)'}\n            </Label>\n            <Textarea\n              id=\"reason\"\n              value={reason}\n              onChange={(e) => setReason(e.target.value)}\n              placeholder={\n                action === 'reject' \n                  ? \"Please provide a reason for rejection...\" \n                  : \"Note any damage or issues with the returned item...\"\n              }\n              rows={4}\n              required={action === 'reject'}\n            />\n          </div>\n\n          <DialogFooter>\n            <Button type=\"button\" variant=\"outline\" onClick={() => {\n              setReason(\"\");\n              onClose();\n            }}>\n              Cancel\n            </Button>\n            <Button \n              type=\"submit\" \n              variant={action === 'reject' ? 'destructive' : 'default'}\n              disabled={action === 'reject' && !reason.trim()}\n            >\n              {action === 'reject' ? 'Reject Reservation' : 'Mark as Returned'}\n            </Button>\n          </DialogFooter>\n        </form>\n      </DialogContent>\n    </Dialog>\n  );\n}\n","path":null,"size_bytes":2764,"size_tokens":null},"client/src/lib/translations.ts":{"content":"export type Language = 'en' | 'ar';\n\nexport const translations = {\n  en: {\n    // Header\n    categories: 'Categories',\n    allItems: 'All Items',\n    menu: 'Menu',\n    navigation: 'Navigation',\n    language: 'Language',\n    inventory_manager: 'Inventory Manager',\n    inventory: 'Inventory',\n    reservations: 'Reservations',\n    activityLog: 'Activity Log',\n    qrCodes: 'QR Codes',\n    maintenance: 'Maintenance',\n    userManagement: 'User Management',\n    logout: 'Logout',\n\n    // Notifications\n    notifications: 'Notifications',\n    markAllRead: 'Mark all read',\n    noNotifications: 'No notifications',\n\n    // Login\n    login: 'Login',\n    username: 'Username',\n    password: 'Password',\n    signIn: 'Sign In',\n\n    // Items\n    addItem: 'Add Item',\n    editItem: 'Edit Item',\n    deleteItem: 'Delete Item',\n    productName: 'Product Name',\n    barcode: 'Barcode',\n    status: 'Status',\n    category: 'Category',\n    available: 'Available',\n    inUse: 'In Use',\n    reserved: 'Reserved',\n    disabled: 'Disabled',\n\n    // Reservations\n    newReservation: 'New Reservation',\n    startDate: 'Start Date',\n    returnDate: 'Return Date',\n    notes: 'Notes',\n    approve: 'Approve',\n    reject: 'Reject',\n    pending: 'Pending',\n    approved: 'Approved',\n    rejected: 'Rejected',\n    completed: 'Completed',\n\n    // Common\n    save: 'Save',\n    cancel: 'Cancel',\n    delete: 'Delete',\n    edit: 'Edit',\n    close: 'Close',\n    search: 'Search',\n    actions: 'Actions',\n    loading: 'Loading...',\n    error: 'Error',\n\n    // User Management\n    user_management: 'User Management',\n    users: 'Users',\n    add_user: 'Add User',\n    activity_logs: 'Activity Logs',\n    \n    // Activity Logs\n    activityLogHistory: 'Activity Log & History',\n    completeAuditTrail: 'Complete audit trail of all inventory activities',\n    editHistory: 'Edit History',\n    itemEditHistory: 'Item Edit History',\n    noEditHistory: 'No edit history found',\n    loadingActivityLogs: 'Loading activity logs...',\n    errorLoadingLogs: 'Error loading activity logs. Please try again.',\n    noActivityLogs: 'No activity logs found.',\n    by: 'by',\n    \n    // QR Codes\n    qrCodeGeneration: 'QR Code Generation',\n    generateAllQRCodes: 'Generate All QR Codes',\n    downloadQRCode: 'Download QR Code',\n    publicScanUrl: 'Public Scan URL',\n    downloadAll: 'Download All',\n    generatingQRCodes: 'Generating QR codes...',\n    noItemsFound: 'No items found',\n    scanQRCodes: 'Scan QR codes to check items in/out instantly',\n    \n    // Maintenance\n    maintenanceManagement: 'Maintenance Management',\n    itemsInMaintenance: 'Items in Maintenance',\n    sendToMaintenance: 'Send to Maintenance',\n    returnFromMaintenance: 'Return from Maintenance',\n    itemsInMaintenanceSubtitle: 'Items currently undergoing maintenance or repair',\n    itemsInMaintenanceCount: 'item(s) in maintenance',\n    noItemsInMaintenance: 'No items in maintenance',\n    allEquipmentWorking: 'All equipment is in working order',\n    searchMaintenanceItems: 'Search maintenance items...',\n    \n    // Inventory Page\n    equipmentCategories: 'Equipment Categories',\n    browseInventory: 'Browse our complete inventory organized by equipment type',\n    searchCategories: 'Search categories...',\n    tableView: 'Table View',\n    cardView: 'Card View',\n    addCategory: 'Add Category',\n    allInUse: 'All In Use',\n    type: 'Type',\n    totalItems: 'Total Items',\n    items: 'items',\n    scanItem: 'Scan Item',\n    searchItems: 'Search items...',\n    noItems: 'No items',\n    location: 'Location',\n    name: 'Name',\n    \n    // Reservations Page\n    equipmentReservations: 'Equipment Reservations',\n    requestManageReservations: 'Request and manage equipment reservations professionally',\n    backToInventory: 'Back to Inventory',\n    all_items: 'All Items',\n    all: 'All',\n    noReservationsFound: 'No reservations found',\n    tryChangingFilter: 'Try changing the filter',\n    createFirstReservation: 'Create your first reservation request',\n    start: 'Start',\n    return: 'Return',\n    requested: 'Requested',\n    responded: 'Responded',\n    markReturned: 'Mark Returned',\n    \n    // User Management\n    createManageUsers: 'Create and manage user accounts for your team',\n    totalUsers: 'Total Users',\n    addNewUser: 'Add New User',\n    fullName: 'Full Name',\n    email: 'Email',\n    department: 'Department',\n    role: 'Role',\n    user: 'User',\n    admin: 'Admin',\n    creating: 'Creating...',\n    createUser: 'Create User',\n    areYouSureDeleteUser: 'Are you sure you want to delete user',\n    \n    // Maintenance Additional\n    maintenance_title: 'Maintenance Management',\n    maintenance_subtitle: 'Items currently undergoing maintenance or repair',\n    item_count_maintenance: 'item(s) in maintenance',\n    no_items_in_maintenance: 'No items in maintenance',\n    all_equipment_in_order: 'All equipment is in working order',\n    \n    // Additional Common\n    checkout: 'Check Out',\n    checkin: 'Check In',\n    reserve: 'Reserve',\n    \n    // Column Visibility\n    columnVisibility: 'Column Visibility',\n    quantity: 'Quantity',\n    \n    // Item Form\n    quantity_label: 'Quantity *',\n    location_label: 'Location',\n    \n    // Item Card\n    quantity_display: 'Quantity:',\n    notes_display: 'Notes:',\n    \n    // Reservations\n    confirmEquipmentPickup: 'Confirm Equipment Pickup',\n    describeDamage: 'Please describe the damage or missing items *',\n    confirmReceipt: 'Confirm Receipt',\n    \n    // Maintenance\n    areYouSureDeleteItem: 'Are you sure you want to delete this item?',\n    \n    // User Management Confirmations\n    areYouSureDeleteUserMessage: 'Are you sure you want to delete user',\n    loginFailedMessage: 'Login failed. Please try again.',\n    tryAgain: 'Please try again',\n    \n    // Reports Page\n    damageReports: 'Damage Reports',\n    viewAllDamageReports: 'View all damage reports from equipment checkout and return inspections',\n    viewDamageReportsReceived: 'View damage reports for equipment you received',\n    \n    // Checkout/Return Dialog\n    equipment: 'Equipment',\n    pickupDateTime: 'Pickup Date & Time',\n    returnDateTime: 'Return Date & Time',\n    purpose: 'Purpose',\n    equipmentCondition: 'Equipment Condition *',\n    good: 'Good',\n    damageOrMissing: 'Damage or Missing',\n    describeDamageDetails: 'Describe what damage or items are missing...',\n    all_items: 'All Items',\n    \n    // Notifications\n    notifications: 'Notifications',\n    markAllRead: 'Mark all read',\n    noNotifications: 'No notifications',\n  },\n  ar: {\n    // Header\n    categories: 'Ø§Ù„ÙØ¦Ø§Øª',\n    allItems: 'Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¹Ù†Ø§ØµØ±',\n    menu: 'Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©',\n    navigation: 'Ø§Ù„ØªÙ†Ù‚Ù„',\n    language: 'Ø§Ù„Ù„ØºØ©',\n    inventory_manager: 'Ù…Ø¯ÙŠØ± Ø§Ù„Ù…Ø®Ø²ÙˆÙ†',\n    inventory: 'Ø§Ù„Ù…Ø®Ø²ÙˆÙ†',\n    reservations: 'Ø§Ù„Ø­Ø¬ÙˆØ²Ø§Øª',\n    activityLog: 'Ø³Ø¬Ù„ Ø§Ù„Ù†Ø´Ø§Ø·',\n    qrCodes: 'Ø±Ù…ÙˆØ² QR',\n    maintenance: 'Ø§Ù„ØµÙŠØ§Ù†Ø©',\n    userManagement: 'Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†',\n    logout: 'ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬',\n\n    // Notifications\n    notifications: 'Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª',\n    markAllRead: 'ÙˆØ¶Ø¹ Ø¹Ù„Ø§Ù…Ø© Ù…Ù‚Ø±ÙˆØ¡ Ø¹Ù„Ù‰ Ø§Ù„ÙƒÙ„',\n    noNotifications: 'Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¥Ø´Ø¹Ø§Ø±Ø§Øª',\n\n    // Login\n    login: 'ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„',\n    username: 'Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…',\n    password: 'ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±',\n    signIn: 'Ø¯Ø®ÙˆÙ„',\n\n    // Items\n    addItem: 'Ø¥Ø¶Ø§ÙØ© Ø¹Ù†ØµØ±',\n    editItem: 'ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ø¹Ù†ØµØ±',\n    deleteItem: 'Ø­Ø°Ù Ø§Ù„Ø¹Ù†ØµØ±',\n    productName: 'Ø§Ø³Ù… Ø§Ù„Ù…Ù†ØªØ¬',\n    barcode: 'Ø§Ù„Ø¨Ø§Ø±ÙƒÙˆØ¯',\n    status: 'Ø§Ù„Ø­Ø§Ù„Ø©',\n    category: 'Ø§Ù„ÙØ¦Ø©',\n    available: 'Ù…ØªØ§Ø­',\n    inUse: 'Ù‚ÙŠØ¯ Ø§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù…',\n    reserved: 'Ù…Ø­Ø¬ÙˆØ²',\n    disabled: 'Ù…Ø¹Ø·Ù„',\n\n    // Reservations\n    newReservation: 'Ø­Ø¬Ø² Ø¬Ø¯ÙŠØ¯',\n    startDate: 'ØªØ§Ø±ÙŠØ® Ø§Ù„Ø¨Ø¯Ø¡',\n    returnDate: 'ØªØ§Ø±ÙŠØ® Ø§Ù„Ø¥Ø±Ø¬Ø§Ø¹',\n    notes: 'Ù…Ù„Ø§Ø­Ø¸Ø§Øª',\n    approve: 'Ù…ÙˆØ§ÙÙ‚Ø©',\n    reject: 'Ø±ÙØ¶',\n    pending: 'Ù‚ÙŠØ¯ Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø±',\n    approved: 'Ù…ÙˆØ§ÙÙ‚ Ø¹Ù„ÙŠÙ‡',\n    rejected: 'Ù…Ø±ÙÙˆØ¶',\n    completed: 'Ù…ÙƒØªÙ…Ù„',\n\n    // Common\n    save: 'Ø­ÙØ¸',\n    cancel: 'Ø¥Ù„ØºØ§Ø¡',\n    delete: 'Ø­Ø°Ù',\n    edit: 'ØªØ¹Ø¯ÙŠÙ„',\n    close: 'Ø¥ØºÙ„Ø§Ù‚',\n    search: 'Ø¨Ø­Ø«',\n    actions: 'Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª',\n    loading: 'Ø¬Ø§Ø± Ø§Ù„ØªØ­Ù…ÙŠÙ„...',\n    error: 'Ø®Ø·Ø£',\n\n    // User Management\n    user_management: 'Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†',\n    users: 'Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙˆÙ†',\n    add_user: 'Ø¥Ø¶Ø§ÙØ© Ù…Ø³ØªØ®Ø¯Ù…',\n    activity_logs: 'Ø³Ø¬Ù„Ø§Øª Ø§Ù„Ù†Ø´Ø§Ø·',\n    \n    // Activity Logs\n    activityLogHistory: 'Ø³Ø¬Ù„ Ø§Ù„Ù†Ø´Ø§Ø· ÙˆØ§Ù„ØªØ§Ø±ÙŠØ®',\n    completeAuditTrail: 'Ø³Ø¬Ù„ ØªØ¯Ù‚ÙŠÙ‚ ÙƒØ§Ù…Ù„ Ù„Ø¬Ù…ÙŠØ¹ Ø£Ù†Ø´Ø·Ø© Ø§Ù„Ù…Ø®Ø²ÙˆÙ†',\n    editHistory: 'Ø³Ø¬Ù„ Ø§Ù„ØªØ¹Ø¯ÙŠÙ„Ø§Øª',\n    itemEditHistory: 'Ø³Ø¬Ù„ ØªØ¹Ø¯ÙŠÙ„Ø§Øª Ø§Ù„Ø¹Ù†ØµØ±',\n    noEditHistory: 'Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø³Ø¬Ù„ ØªØ¹Ø¯ÙŠÙ„Ø§Øª',\n    loadingActivityLogs: 'Ø¬Ø§Ø± ØªØ­Ù…ÙŠÙ„ Ø³Ø¬Ù„Ø§Øª Ø§Ù„Ù†Ø´Ø§Ø·...',\n    errorLoadingLogs: 'Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø³Ø¬Ù„Ø§Øª Ø§Ù„Ù†Ø´Ø§Ø·. ÙŠØ±Ø¬Ù‰ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù…Ø±Ø© Ø£Ø®Ø±Ù‰.',\n    noActivityLogs: 'Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø³Ø¬Ù„Ø§Øª Ù†Ø´Ø§Ø·.',\n    by: 'Ø¨ÙˆØ§Ø³Ø·Ø©',\n    \n    // QR Codes\n    qrCodeGeneration: 'Ø¥Ù†Ø´Ø§Ø¡ Ø±Ù…Ø² Ø§Ù„Ø§Ø³ØªØ¬Ø§Ø¨Ø© Ø§Ù„Ø³Ø±ÙŠØ¹Ø©',\n    generateAllQRCodes: 'Ø¥Ù†Ø´Ø§Ø¡ Ø¬Ù…ÙŠØ¹ Ø±Ù…ÙˆØ² QR',\n    downloadQRCode: 'ØªØ­Ù…ÙŠÙ„ Ø±Ù…Ø² QR',\n    publicScanUrl: 'Ø±Ø§Ø¨Ø· Ø§Ù„Ù…Ø³Ø­ Ø§Ù„Ø¹Ø§Ù…',\n    downloadAll: 'ØªØ­Ù…ÙŠÙ„ Ø§Ù„ÙƒÙ„',\n    generatingQRCodes: 'Ø¬Ø§Ø± Ø¥Ù†Ø´Ø§Ø¡ Ø±Ù…ÙˆØ² QR...',\n    noItemsFound: 'Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø¹Ù†Ø§ØµØ±',\n    scanQRCodes: 'Ø§Ù…Ø³Ø­ Ø±Ù…ÙˆØ² QR Ù„ØªØ³Ø¬ÙŠÙ„ Ø¯Ø®ÙˆÙ„/Ø®Ø±ÙˆØ¬ Ø§Ù„Ø¹Ù†Ø§ØµØ± ÙÙˆØ±Ø§Ù‹',\n    \n    // Maintenance\n    maintenanceManagement: 'Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„ØµÙŠØ§Ù†Ø©',\n    itemsInMaintenance: 'Ø§Ù„Ø¹Ù†Ø§ØµØ± Ù‚ÙŠØ¯ Ø§Ù„ØµÙŠØ§Ù†Ø©',\n    sendToMaintenance: 'Ø¥Ø±Ø³Ø§Ù„ Ù„Ù„ØµÙŠØ§Ù†Ø©',\n    returnFromMaintenance: 'Ø§Ù„Ø¹ÙˆØ¯Ø© Ù…Ù† Ø§Ù„ØµÙŠØ§Ù†Ø©',\n    itemsInMaintenanceSubtitle: 'Ø§Ù„Ø¹Ù†Ø§ØµØ± Ø§Ù„ØªÙŠ ØªØ®Ø¶Ø¹ Ø­Ø§Ù„ÙŠØ§Ù‹ Ù„Ù„ØµÙŠØ§Ù†Ø© Ø£Ùˆ Ø§Ù„Ø¥ØµÙ„Ø§Ø­',\n    itemsInMaintenanceCount: 'Ø¹Ù†ØµØ± Ù‚ÙŠØ¯ Ø§Ù„ØµÙŠØ§Ù†Ø©',\n    noItemsInMaintenance: 'Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¹Ù†Ø§ØµØ± Ù‚ÙŠØ¯ Ø§Ù„ØµÙŠØ§Ù†Ø©',\n    allEquipmentWorking: 'Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ø¹Ø¯Ø§Øª ØªØ¹Ù…Ù„ Ø¨Ø´ÙƒÙ„ ØµØ­ÙŠØ­',\n    searchMaintenanceItems: 'Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† Ø¹Ù†Ø§ØµØ± Ø§Ù„ØµÙŠØ§Ù†Ø©...',\n    \n    // Inventory Page\n    equipmentCategories: 'ÙØ¦Ø§Øª Ø§Ù„Ù…Ø¹Ø¯Ø§Øª',\n    browseInventory: 'ØªØµÙØ­ Ø§Ù„Ù…Ø®Ø²ÙˆÙ† Ø§Ù„ÙƒØ§Ù…Ù„ Ù…Ù†Ø¸Ù… Ø­Ø³Ø¨ Ù†ÙˆØ¹ Ø§Ù„Ù…Ø¹Ø¯Ø§Øª',\n    searchCategories: 'Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† Ø§Ù„ÙØ¦Ø§Øª...',\n    tableView: 'Ø¹Ø±Ø¶ Ø§Ù„Ø¬Ø¯ÙˆÙ„',\n    cardView: 'Ø¹Ø±Ø¶ Ø§Ù„Ø¨Ø·Ø§Ù‚Ø§Øª',\n    addCategory: 'Ø¥Ø¶Ø§ÙØ© ÙØ¦Ø©',\n    allInUse: 'Ø§Ù„ÙƒÙ„ Ù‚ÙŠØ¯ Ø§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù…',\n    type: 'Ø§Ù„Ù†ÙˆØ¹',\n    totalItems: 'Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø¹Ù†Ø§ØµØ±',\n    items: 'Ø¹Ù†Ø§ØµØ±',\n    scanItem: 'Ù…Ø³Ø­ Ø§Ù„Ø¹Ù†ØµØ±',\n    searchItems: 'Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† Ø§Ù„Ø¹Ù†Ø§ØµØ±...',\n    noItems: 'Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¹Ù†Ø§ØµØ±',\n    location: 'Ø§Ù„Ù…ÙˆÙ‚Ø¹',\n    name: 'Ø§Ù„Ø§Ø³Ù…',\n    \n    // Reservations Page\n    equipmentReservations: 'Ø­Ø¬ÙˆØ²Ø§Øª Ø§Ù„Ù…Ø¹Ø¯Ø§Øª',\n    requestManageReservations: 'Ø·Ù„Ø¨ ÙˆØ¥Ø¯Ø§Ø±Ø© Ø­Ø¬ÙˆØ²Ø§Øª Ø§Ù„Ù…Ø¹Ø¯Ø§Øª Ø¨Ø´ÙƒÙ„ Ø§Ø­ØªØ±Ø§ÙÙŠ',\n    backToInventory: 'Ø§Ù„Ø¹ÙˆØ¯Ø© Ø¥Ù„Ù‰ Ø§Ù„Ù…Ø®Ø²ÙˆÙ†',\n    all: 'Ø§Ù„ÙƒÙ„',\n    noReservationsFound: 'Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø­Ø¬ÙˆØ²Ø§Øª',\n    tryChangingFilter: 'Ø­Ø§ÙˆÙ„ ØªØºÙŠÙŠØ± Ø§Ù„ÙÙ„ØªØ±',\n    createFirstReservation: 'Ø¥Ù†Ø´Ø§Ø¡ Ø·Ù„Ø¨ Ø§Ù„Ø­Ø¬Ø² Ø§Ù„Ø£ÙˆÙ„',\n    start: 'Ø§Ù„Ø¨Ø¯Ø¡',\n    return: 'Ø§Ù„Ø¥Ø±Ø¬Ø§Ø¹',\n    requested: 'Ù…Ø·Ù„ÙˆØ¨',\n    responded: 'ØªÙ…Øª Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø©',\n    decline: 'Ø±ÙØ¶',\n    markReturned: 'ÙˆØ¶Ø¹ Ø¹Ù„Ø§Ù…Ø© ÙƒÙ…Ø±Ø¬Ø¹',\n    \n    // User Management\n    createManageUsers: 'Ø¥Ù†Ø´Ø§Ø¡ ÙˆØ¥Ø¯Ø§Ø±Ø© Ø­Ø³Ø§Ø¨Ø§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† Ù„ÙØ±ÙŠÙ‚Ùƒ',\n    totalUsers: 'Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†',\n    addNewUser: 'Ø¥Ø¶Ø§ÙØ© Ù…Ø³ØªØ®Ø¯Ù… Ø¬Ø¯ÙŠØ¯',\n    fullName: 'Ø§Ù„Ø§Ø³Ù… Ø§Ù„ÙƒØ§Ù…Ù„',\n    email: 'Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ',\n    department: 'Ø§Ù„Ù‚Ø³Ù…',\n    role: 'Ø§Ù„Ø¯ÙˆØ±',\n    user: 'Ù…Ø³ØªØ®Ø¯Ù…',\n    admin: 'Ù…Ø³Ø¤ÙˆÙ„',\n    creating: 'Ø¬Ø§Ø± Ø§Ù„Ø¥Ù†Ø´Ø§Ø¡...',\n    createUser: 'Ø¥Ù†Ø´Ø§Ø¡ Ù…Ø³ØªØ®Ø¯Ù…',\n    areYouSureDeleteUser: 'Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…',\n    \n    // Maintenance Additional\n    maintenance_title: 'Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„ØµÙŠØ§Ù†Ø©',\n    maintenance_subtitle: 'Ø§Ù„Ø¹Ù†Ø§ØµØ± Ø§Ù„ØªÙŠ ØªØ®Ø¶Ø¹ Ø­Ø§Ù„ÙŠØ§Ù‹ Ù„Ù„ØµÙŠØ§Ù†Ø© Ø£Ùˆ Ø§Ù„Ø¥ØµÙ„Ø§Ø­',\n    item_count_maintenance: 'Ø¹Ù†ØµØ± Ù‚ÙŠØ¯ Ø§Ù„ØµÙŠØ§Ù†Ø©',\n    no_items_in_maintenance: 'Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¹Ù†Ø§ØµØ± Ù‚ÙŠØ¯ Ø§Ù„ØµÙŠØ§Ù†Ø©',\n    all_equipment_in_order: 'Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ø¹Ø¯Ø§Øª ØªØ¹Ù…Ù„ Ø¨Ø´ÙƒÙ„ ØµØ­ÙŠØ­',\n    \n    // Additional Common\n    checkout: 'ØªØ³Ø¬ÙŠÙ„ Ø®Ø±ÙˆØ¬',\n    checkin: 'ØªØ³Ø¬ÙŠÙ„ Ø¯Ø®ÙˆÙ„',\n    reserve: 'Ø­Ø¬Ø²',\n    \n    // Column Visibility\n    columnVisibility: 'Ø±Ø¤ÙŠØ© Ø§Ù„Ø£Ø¹Ù…Ø¯Ø©',\n    quantity: 'Ø§Ù„ÙƒÙ…ÙŠØ©',\n    \n    // Item Form\n    quantity_label: 'Ø§Ù„ÙƒÙ…ÙŠØ© *',\n    location_label: 'Ø§Ù„Ù…ÙˆÙ‚Ø¹',\n    \n    // Item Card\n    quantity_display: 'Ø§Ù„ÙƒÙ…ÙŠØ©:',\n    notes_display: 'Ù…Ù„Ø§Ø­Ø¸Ø§Øª:',\n    \n    // Reservations\n    confirmEquipmentPickup: 'ØªØ£ÙƒÙŠØ¯ Ø§Ø³ØªÙ„Ø§Ù… Ø§Ù„Ù…Ø¹Ø¯Ø§Øª',\n    describeDamage: 'ÙŠØ±Ø¬Ù‰ ÙˆØµÙ Ø§Ù„Ø¶Ø±Ø± Ø£Ùˆ Ø§Ù„Ø¹Ù†Ø§ØµØ± Ø§Ù„Ù…ÙÙ‚ÙˆØ¯Ø© *',\n    confirmReceipt: 'ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø§Ø³ØªÙ„Ø§Ù…',\n    \n    // Maintenance\n    areYouSureDeleteItem: 'Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ù‡Ø°Ø§ Ø§Ù„Ø¹Ù†ØµØ±ØŸ',\n    \n    // User Management Confirmations\n    areYouSureDeleteUserMessage: 'Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…',\n    loginFailedMessage: 'ÙØ´Ù„ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„. ÙŠØ±Ø¬Ù‰ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù…Ø±Ø© Ø£Ø®Ø±Ù‰.',\n    tryAgain: 'ÙŠØ±Ø¬Ù‰ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù…Ø±Ø© Ø£Ø®Ø±Ù‰',\n    \n    // Reports Page\n    damageReports: 'ØªÙ‚Ø§Ø±ÙŠØ± Ø§Ù„Ø£Ø¶Ø±Ø§Ø±',\n    viewAllDamageReports: 'Ø¹Ø±Ø¶ Ø¬Ù…ÙŠØ¹ ØªÙ‚Ø§Ø±ÙŠØ± Ø§Ù„Ø£Ø¶Ø±Ø§Ø± Ù…Ù† Ø¹Ù…Ù„ÙŠØ§Øª ÙØ­Øµ Ø§Ù„Ø§Ø³ØªÙ„Ø§Ù… ÙˆØ§Ù„Ø¥Ø±Ø¬Ø§Ø¹ Ù„Ù„Ù…Ø¹Ø¯Ø§Øª',\n    viewDamageReportsReceived: 'Ø¹Ø±Ø¶ ØªÙ‚Ø§Ø±ÙŠØ± Ø§Ù„Ø£Ø¶Ø±Ø§Ø± Ù„Ù„Ù…Ø¹Ø¯Ø§Øª Ø§Ù„ØªÙŠ Ø§Ø³ØªÙ„Ù…ØªÙ‡Ø§',\n    \n    // Checkout/Return Dialog\n    equipment: 'Ø§Ù„Ù…Ø¹Ø¯Ø§Øª',\n    pickupDateTime: 'ØªØ§Ø±ÙŠØ® ÙˆÙ‚Øª Ø§Ù„Ø§Ù„ØªÙ‚Ø§Ø·',\n    returnDateTime: 'ØªØ§Ø±ÙŠØ® ÙˆÙ‚Øª Ø§Ù„Ø¥Ø±Ø¬Ø§Ø¹',\n    purpose: 'Ø§Ù„ØºØ±Ø¶',\n    equipmentCondition: 'Ø­Ø§Ù„Ø© Ø§Ù„Ù…Ø¹Ø¯Ø§Øª *',\n    good: 'Ø¬ÙŠØ¯Ø©',\n    damageOrMissing: 'ØªØ§Ù„ÙØ© Ø£Ùˆ Ù…ÙÙ‚ÙˆØ¯Ø©',\n    describeDamageDetails: 'ØµÙ Ø§Ù„Ø¶Ø±Ø± Ø£Ùˆ Ø§Ù„Ø¹Ù†Ø§ØµØ± Ø§Ù„Ù…ÙÙ‚ÙˆØ¯Ø©...',\n    all_items: 'Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¹Ù†Ø§ØµØ±',\n    \n    // Notifications\n    notifications: 'Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª',\n    markAllRead: 'ØªØ­Ø¯ÙŠØ¯ Ø§Ù„ÙƒÙ„ ÙƒÙ…Ù‚Ø±ÙˆØ¡',\n    noNotifications: 'Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¥Ø´Ø¹Ø§Ø±Ø§Øª',\n  }\n};\n\nexport const useTranslation = (language?: Language) => {\n  const lang = language || 'en';\n  return (key: keyof typeof translations.en): string => {\n    return translations[lang]?.[key] || key;\n  };\n};","path":null,"size_bytes":14999,"size_tokens":null},"attached_assets/context-menu_1763670951633.tsx":{"content":"import * as React from \"react\"\nimport * as ContextMenuPrimitive from \"@radix-ui/react-context-menu\"\nimport { Check, ChevronRight, Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ContextMenu = ContextMenuPrimitive.Root\n\nconst ContextMenuTrigger = ContextMenuPrimitive.Trigger\n\nconst ContextMenuGroup = ContextMenuPrimitive.Group\n\nconst ContextMenuPortal = ContextMenuPrimitive.Portal\n\nconst ContextMenuSub = ContextMenuPrimitive.Sub\n\nconst ContextMenuRadioGroup = ContextMenuPrimitive.RadioGroup\n\nconst ContextMenuSubTrigger = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.SubTrigger>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.SubTrigger> & {\n    inset?: boolean\n  }\n>(({ className, inset, children, ...props }, ref) => (\n  <ContextMenuPrimitive.SubTrigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <ChevronRight className=\"ml-auto h-4 w-4\" />\n  </ContextMenuPrimitive.SubTrigger>\n))\nContextMenuSubTrigger.displayName = ContextMenuPrimitive.SubTrigger.displayName\n\nconst ContextMenuSubContent = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.SubContent>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.SubContent>\n>(({ className, ...props }, ref) => (\n  <ContextMenuPrimitive.SubContent\n    ref={ref}\n    className={cn(\n      \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-context-menu-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nContextMenuSubContent.displayName = ContextMenuPrimitive.SubContent.displayName\n\nconst ContextMenuContent = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <ContextMenuPrimitive.Portal>\n    <ContextMenuPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"z-50 max-h-[--radix-context-menu-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md animate-in fade-in-80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-context-menu-content-transform-origin]\",\n        className\n      )}\n      {...props}\n    />\n  </ContextMenuPrimitive.Portal>\n))\nContextMenuContent.displayName = ContextMenuPrimitive.Content.displayName\n\nconst ContextMenuItem = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Item> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <ContextMenuPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nContextMenuItem.displayName = ContextMenuPrimitive.Item.displayName\n\nconst ContextMenuCheckboxItem = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.CheckboxItem>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.CheckboxItem>\n>(({ className, children, checked, ...props }, ref) => (\n  <ContextMenuPrimitive.CheckboxItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    checked={checked}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <ContextMenuPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </ContextMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </ContextMenuPrimitive.CheckboxItem>\n))\nContextMenuCheckboxItem.displayName =\n  ContextMenuPrimitive.CheckboxItem.displayName\n\nconst ContextMenuRadioItem = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.RadioItem>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.RadioItem>\n>(({ className, children, ...props }, ref) => (\n  <ContextMenuPrimitive.RadioItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <ContextMenuPrimitive.ItemIndicator>\n        <Circle className=\"h-2 w-2 fill-current\" />\n      </ContextMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </ContextMenuPrimitive.RadioItem>\n))\nContextMenuRadioItem.displayName = ContextMenuPrimitive.RadioItem.displayName\n\nconst ContextMenuLabel = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Label> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <ContextMenuPrimitive.Label\n    ref={ref}\n    className={cn(\n      \"px-2 py-1.5 text-sm font-semibold text-foreground\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nContextMenuLabel.displayName = ContextMenuPrimitive.Label.displayName\n\nconst ContextMenuSeparator = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <ContextMenuPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-border\", className)}\n    {...props}\n  />\n))\nContextMenuSeparator.displayName = ContextMenuPrimitive.Separator.displayName\n\nconst ContextMenuShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\n        \"ml-auto text-xs tracking-widest text-muted-foreground\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\nContextMenuShortcut.displayName = \"ContextMenuShortcut\"\n\nexport {\n  ContextMenu,\n  ContextMenuTrigger,\n  ContextMenuContent,\n  ContextMenuItem,\n  ContextMenuCheckboxItem,\n  ContextMenuRadioItem,\n  ContextMenuLabel,\n  ContextMenuSeparator,\n  ContextMenuShortcut,\n  ContextMenuGroup,\n  ContextMenuPortal,\n  ContextMenuSub,\n  ContextMenuSubContent,\n  ContextMenuSubTrigger,\n  ContextMenuRadioGroup,\n}\n","path":null,"size_bytes":7428,"size_tokens":null},"vite.config.ts":{"content":"import { defineConfig } from \"vite\";\nimport react from \"@vitejs/plugin-react\";\nimport path from \"path\";\nimport runtimeErrorOverlay from \"@replit/vite-plugin-runtime-error-modal\";\n\nexport default defineConfig({\n  plugins: [\n    react(),\n    runtimeErrorOverlay(),\n    ...(process.env.NODE_ENV !== \"production\" &&\n    process.env.REPL_ID !== undefined\n      ? [\n          await import(\"@replit/vite-plugin-cartographer\").then((m) =>\n            m.cartographer(),\n          ),\n          await import(\"@replit/vite-plugin-dev-banner\").then((m) =>\n            m.devBanner(),\n          ),\n        ]\n      : []),\n  ],\n  resolve: {\n    alias: {\n      \"@\": path.resolve(import.meta.dirname, \"client\", \"src\"),\n      \"@shared\": path.resolve(import.meta.dirname, \"shared\"),\n      \"@assets\": path.resolve(import.meta.dirname, \"attached_assets\"),\n    },\n  },\n  root: path.resolve(import.meta.dirname, \"client\"),\n  build: {\n    outDir: path.resolve(import.meta.dirname, \"dist/public\"),\n    emptyOutDir: true,\n  },\n  server: {\n    fs: {\n      strict: true,\n      deny: [\"**/.*\"],\n    },\n  },\n});\n","path":null,"size_bytes":1080,"size_tokens":null},"attached_assets/App_1763670802182.tsx":{"content":"import { useState, useEffect } from \"react\";\nimport { QueryClientProvider } from \"@tanstack/react-query\";\nimport { queryClient } from \"./lib/queryClient\";\nimport { Toaster } from \"@/components/ui/toaster\";\nimport { TooltipProvider } from \"@/components/ui/tooltip\";\nimport Login from \"@/pages/Login\";\nimport Inventory from \"@/pages/Inventory\";\nimport Reservations from \"@/pages/Reservations\";\nimport ActivityLogs from \"@/pages/ActivityLogs\";\nimport QRCodes from \"@/pages/QRCodes\";\nimport Maintenance from \"@/pages/Maintenance\";\nimport UserManagement from \"@/pages/UserManagement\";\nimport type { Language } from \"@/lib/translations\";\n\ntype View = 'login' | 'inventory' | 'reservations' | 'activity-logs' | 'qr-codes' | 'maintenance' | 'users';\n\nfunction App() {\n  const [isAuthenticated, setIsAuthenticated] = useState(false);\n  const [currentView, setCurrentView] = useState<View>('login');\n  const [language, setLanguage] = useState<Language>('en');\n  const [currentUser, setCurrentUser] = useState<{\n    id: string;\n    username: string;\n    role: string;\n    name: string;\n  } | null>(null);\n\n  const handleLogin = (user: any) => {\n    setCurrentUser(user);\n    setIsAuthenticated(true);\n    // Admin sees inventory (categories) first, users see inventory too\n    setCurrentView('inventory');\n  };\n\n  const handleLogout = () => {\n    setCurrentUser(null);\n    setIsAuthenticated(false);\n    setCurrentView('login');\n  };\n\n  const handleNavigateToReservations = () => {\n    setCurrentView('reservations');\n  };\n\n  const handleNavigateToActivityLogs = () => {\n    setCurrentView('activity-logs');\n  };\n\n  const handleNavigateToQRCodes = () => {\n    setCurrentView('qr-codes');\n  };\n\n  const handleNavigateToMaintenance = () => {\n    setCurrentView('maintenance');\n  };\n\n  const handleNavigateToInventory = () => {\n    setCurrentView('inventory');\n  };\n\n  const checkSession = async () => {\n    try {\n      const response = await fetch('/api/auth/session');\n      if (response.ok) {\n        const user = await response.json();\n        handleLogin(user);\n      } else {\n        setIsAuthenticated(false);\n      }\n    } catch (error) {\n      console.error(\"Session check failed:\", error);\n      setIsAuthenticated(false);\n    }\n  };\n\n  useEffect(() => {\n    checkSession();\n    // Load saved language preference\n    const savedLanguage = localStorage.getItem('language') as Language;\n    if (savedLanguage) {\n      setLanguage(savedLanguage);\n      document.documentElement.dir = savedLanguage === 'ar' ? 'rtl' : 'ltr';\n    }\n    // Expose navigate functions for header\n    (window as any).navigateToUsers = () => setCurrentView('users');\n  }, []);\n\n  const handleLanguageChange = (newLanguage: Language) => {\n    setLanguage(newLanguage);\n    localStorage.setItem('language', newLanguage);\n    document.documentElement.dir = newLanguage === 'ar' ? 'rtl' : 'ltr';\n  };\n\n  return (\n    <QueryClientProvider client={queryClient}>\n      <TooltipProvider>\n        <Toaster />\n        {!isAuthenticated ? (\n          <Login onLogin={handleLogin} language={language} onLanguageChange={handleLanguageChange} />\n        ) : currentView === 'inventory' ? (\n          <Inventory\n            userName={currentUser?.name || ''}\n            userRole={currentUser?.role || ''}\n            userId={currentUser?.id || ''}\n            onLogout={handleLogout}\n            onNavigateToReservations={handleNavigateToReservations}\n            onNavigateToActivityLogs={handleNavigateToActivityLogs}\n            onNavigateToQRCodes={handleNavigateToQRCodes}\n            onNavigateToMaintenance={handleNavigateToMaintenance}\n            currentLanguage={language}\n            onLanguageChange={handleLanguageChange}\n          />\n        ) : currentView === 'reservations' ? (\n          <Reservations\n            userName={currentUser?.name || ''}\n            userRole={currentUser?.role || ''}\n            userId={currentUser?.id || ''}\n            onLogout={handleLogout}\n            onNavigateToInventory={handleNavigateToInventory}\n            currentLanguage={language}\n            onLanguageChange={handleLanguageChange}\n          />\n        ) : currentView === 'activity-logs' ? (\n          <ActivityLogs\n            userName={currentUser?.name || ''}\n            userRole={currentUser?.role || ''}\n            onLogout={handleLogout}\n            onNavigateBack={handleNavigateToInventory}\n            currentLanguage={language}\n            onLanguageChange={handleLanguageChange}\n          />\n        ) : currentView === 'qr-codes' ? (\n          <QRCodes\n            userName={currentUser?.name || ''}\n            userRole={currentUser?.role || ''}\n            onLogout={handleLogout}\n            onNavigateBack={handleNavigateToInventory}\n            currentLanguage={language}\n            onLanguageChange={handleLanguageChange}\n          />\n        ) : currentView === 'maintenance' ? (\n          <Maintenance\n            userName={currentUser?.name || ''}\n            userRole={currentUser?.role || ''}\n            userId={currentUser?.id || ''}\n            onLogout={handleLogout}\n            onNavigateToReservations={handleNavigateToReservations}\n            onNavigateToActivityLogs={handleNavigateToActivityLogs}\n            onNavigateToQRCodes={handleNavigateToQRCodes}\n            onNavigateToInventory={handleNavigateToInventory}\n            currentLanguage={language}\n            onLanguageChange={handleLanguageChange}\n          />\n        ) : currentView === 'users' && currentUser && currentUser.role === 'admin' ? (\n          <UserManagement\n            userName={currentUser.name}\n            userRole={currentUser.role}\n            onLogout={handleLogout}\n            onNavigateToInventory={handleNavigateToInventory}\n            currentLanguage={language}\n            onLanguageChange={handleLanguageChange}\n          />\n        ) : null}\n      </TooltipProvider>\n    </QueryClientProvider>\n  );\n}\n\nexport default App;","path":null,"size_bytes":5919,"size_tokens":null},"client/src/components/CategoryFormDialog.tsx":{"content":"\nimport { useState, useEffect } from \"react\";\nimport { Dialog, DialogContent, DialogHeader, DialogTitle, DialogFooter } from \"@/components/ui/dialog\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { X } from \"lucide-react\";\n\ninterface CategoryFormDialogProps {\n  open: boolean;\n  onClose: () => void;\n  onSubmit: (category: any) => void;\n  category?: {\n    id?: string;\n    name: string;\n    image: string;\n    subTypes: string[];\n  };\n  mode: 'add' | 'edit';\n  isEquipment?: boolean;\n}\n\nexport default function CategoryFormDialog({ open, onClose, onSubmit, category, mode, isEquipment = true }: CategoryFormDialogProps) {\n  const [formData, setFormData] = useState({\n    name: category?.name || '',\n    image: category?.image || '',\n    subTypes: category?.subTypes || [],\n    isEquipment: isEquipment\n  });\n  const [newSubType, setNewSubType] = useState(\"\");\n\n  useEffect(() => {\n    if (category) {\n      setFormData({\n        name: category.name,\n        image: category.image,\n        subTypes: category.subTypes,\n        isEquipment: isEquipment\n      });\n    } else {\n      setFormData({\n        name: '',\n        image: '',\n        subTypes: [],\n        isEquipment: isEquipment\n      });\n    }\n  }, [category, open, isEquipment]);\n\n  const handleAddSubType = () => {\n    if (newSubType.trim() && !formData.subTypes.includes(newSubType.trim())) {\n      setFormData({\n        ...formData,\n        subTypes: [...formData.subTypes, newSubType.trim()]\n      });\n      setNewSubType(\"\");\n    }\n  };\n\n  const handleRemoveSubType = (subType: string) => {\n    setFormData({\n      ...formData,\n      subTypes: formData.subTypes.filter(st => st !== subType)\n    });\n  };\n\n  const handleSubmit = (e: React.FormEvent) => {\n    e.preventDefault();\n    if (formData.name && formData.image && formData.subTypes.length > 0) {\n      onSubmit(formData);\n    }\n  };\n\n  return (\n    <Dialog open={open} onOpenChange={onClose}>\n      <DialogContent className=\"max-w-2xl\" data-testid={`dialog-${mode}-category`}>\n        <DialogHeader>\n          <DialogTitle>{mode === 'add' ? 'Add New Category' : 'Edit Category'}</DialogTitle>\n        </DialogHeader>\n        <form onSubmit={handleSubmit} className=\"space-y-4\">\n          <div className=\"space-y-2\">\n            <Label htmlFor=\"name\">Category Name *</Label>\n            <Input\n              id=\"name\"\n              value={formData.name}\n              onChange={(e) => setFormData({ ...formData, name: e.target.value })}\n              placeholder=\"e.g., Drones\"\n              required\n              data-testid=\"input-category-name\"\n            />\n          </div>\n\n          <div className=\"space-y-2\">\n            <Label htmlFor=\"image\">Image URL *</Label>\n            <Input\n              id=\"image\"\n              value={formData.image}\n              onChange={(e) => setFormData({ ...formData, image: e.target.value })}\n              placeholder=\"https://example.com/image.jpg\"\n              required\n              data-testid=\"input-category-image\"\n            />\n            {formData.image && (\n              <img \n                src={formData.image} \n                alt=\"Preview\" \n                className=\"w-full h-40 object-cover rounded-lg mt-2\"\n                onError={(e) => {\n                  e.currentTarget.src = 'https://via.placeholder.com/400x200?text=Invalid+Image+URL';\n                }}\n              />\n            )}\n          </div>\n\n          <div className=\"space-y-2\">\n            <Label htmlFor=\"subTypes\">Product Types *</Label>\n            <div className=\"flex gap-2\">\n              <Input\n                id=\"subTypes\"\n                value={newSubType}\n                onChange={(e) => setNewSubType(e.target.value)}\n                placeholder=\"e.g., Quadcopter\"\n                onKeyPress={(e) => {\n                  if (e.key === 'Enter') {\n                    e.preventDefault();\n                    handleAddSubType();\n                  }\n                }}\n                data-testid=\"input-subtype\"\n              />\n              <Button \n                type=\"button\" \n                onClick={handleAddSubType}\n                variant=\"outline\"\n                data-testid=\"button-add-subtype\"\n              >\n                Add\n              </Button>\n            </div>\n            <div className=\"flex flex-wrap gap-2 mt-2\">\n              {formData.subTypes.map((subType, index) => (\n                <Badge \n                  key={index} \n                  variant=\"secondary\"\n                  className=\"bg-gradient-to-r from-[#667eea] to-[#764ba2] text-white px-3 py-1\"\n                >\n                  {subType}\n                  <button\n                    type=\"button\"\n                    onClick={() => handleRemoveSubType(subType)}\n                    className=\"ml-2 hover:text-red-200\"\n                  >\n                    <X className=\"w-3 h-3\" />\n                  </button>\n                </Badge>\n              ))}\n            </div>\n          </div>\n\n          <DialogFooter>\n            <Button type=\"button\" variant=\"outline\" onClick={onClose} data-testid=\"button-cancel\">\n              Cancel\n            </Button>\n            <Button \n              type=\"submit\" \n              className=\"bg-gradient-to-r from-[#667eea] to-[#764ba2]\"\n              data-testid=\"button-submit\"\n              disabled={!formData.name || !formData.image || formData.subTypes.length === 0}\n            >\n              {mode === 'add' ? 'Add Category' : 'Save Changes'}\n            </Button>\n          </DialogFooter>\n        </form>\n      </DialogContent>\n    </Dialog>\n  );\n}\n","path":null,"size_bytes":5725,"size_tokens":null},"client/src/lib/queryClient.ts":{"content":"import { QueryClient, QueryFunction } from \"@tanstack/react-query\";\n\nasync function throwIfResNotOk(res: Response) {\n  if (!res.ok) {\n    const text = (await res.text()) || res.statusText;\n    throw new Error(`${res.status}: ${text}`);\n  }\n}\n\nexport async function apiRequest(\n  method: string,\n  url: string,\n  data?: unknown | undefined,\n): Promise<Response> {\n  const res = await fetch(url, {\n    method,\n    headers: data ? { \"Content-Type\": \"application/json\" } : {},\n    body: data ? JSON.stringify(data) : undefined,\n    credentials: \"include\",\n  });\n\n  await throwIfResNotOk(res);\n  return res;\n}\n\ntype UnauthorizedBehavior = \"returnNull\" | \"throw\";\nexport const getQueryFn: <T>(options: {\n  on401: UnauthorizedBehavior;\n}) => QueryFunction<T> =\n  ({ on401: unauthorizedBehavior }) =>\n  async ({ queryKey }) => {\n    const res = await fetch(queryKey.join(\"/\") as string, {\n      credentials: \"include\",\n    });\n\n    if (unauthorizedBehavior === \"returnNull\" && res.status === 401) {\n      return null;\n    }\n\n    await throwIfResNotOk(res);\n    return await res.json();\n  };\n\nexport const queryClient = new QueryClient({\n  defaultOptions: {\n    queries: {\n      queryFn: getQueryFn({ on401: \"throw\" }),\n      refetchInterval: false,\n      refetchOnWindowFocus: false,\n      staleTime: Infinity,\n      retry: false,\n    },\n    mutations: {\n      retry: false,\n    },\n  },\n});\n","path":null,"size_bytes":1383,"size_tokens":null},"attached_assets/navigation-menu_1763670995699.tsx":{"content":"import * as React from \"react\"\nimport * as NavigationMenuPrimitive from \"@radix-ui/react-navigation-menu\"\nimport { cva } from \"class-variance-authority\"\nimport { ChevronDown } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst NavigationMenu = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Root>\n>(({ className, children, ...props }, ref) => (\n  <NavigationMenuPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative z-10 flex max-w-max flex-1 items-center justify-center\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <NavigationMenuViewport />\n  </NavigationMenuPrimitive.Root>\n))\nNavigationMenu.displayName = NavigationMenuPrimitive.Root.displayName\n\nconst NavigationMenuList = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.List>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.List>\n>(({ className, ...props }, ref) => (\n  <NavigationMenuPrimitive.List\n    ref={ref}\n    className={cn(\n      \"group flex flex-1 list-none items-center justify-center space-x-1\",\n      className\n    )}\n    {...props}\n  />\n))\nNavigationMenuList.displayName = NavigationMenuPrimitive.List.displayName\n\nconst NavigationMenuItem = NavigationMenuPrimitive.Item\n\nconst navigationMenuTriggerStyle = cva(\n  \"group inline-flex h-10 w-max items-center justify-center rounded-md bg-background px-4 py-2 text-sm font-medium transition-colors hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground focus:outline-none disabled:pointer-events-none disabled:opacity-50 data-[state=open]:text-accent-foreground data-[state=open]:bg-accent/50 data-[state=open]:hover:bg-accent data-[state=open]:focus:bg-accent\"\n)\n\nconst NavigationMenuTrigger = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Trigger>\n>(({ className, children, ...props }, ref) => (\n  <NavigationMenuPrimitive.Trigger\n    ref={ref}\n    className={cn(navigationMenuTriggerStyle(), \"group\", className)}\n    {...props}\n  >\n    {children}{\" \"}\n    <ChevronDown\n      className=\"relative top-[1px] ml-1 h-3 w-3 transition duration-200 group-data-[state=open]:rotate-180\"\n      aria-hidden=\"true\"\n    />\n  </NavigationMenuPrimitive.Trigger>\n))\nNavigationMenuTrigger.displayName = NavigationMenuPrimitive.Trigger.displayName\n\nconst NavigationMenuContent = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <NavigationMenuPrimitive.Content\n    ref={ref}\n    className={cn(\n      \"left-0 top-0 w-full data-[motion^=from-]:animate-in data-[motion^=to-]:animate-out data-[motion^=from-]:fade-in data-[motion^=to-]:fade-out data-[motion=from-end]:slide-in-from-right-52 data-[motion=from-start]:slide-in-from-left-52 data-[motion=to-end]:slide-out-to-right-52 data-[motion=to-start]:slide-out-to-left-52 md:absolute md:w-auto \",\n      className\n    )}\n    {...props}\n  />\n))\nNavigationMenuContent.displayName = NavigationMenuPrimitive.Content.displayName\n\nconst NavigationMenuLink = NavigationMenuPrimitive.Link\n\nconst NavigationMenuViewport = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Viewport>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Viewport>\n>(({ className, ...props }, ref) => (\n  <div className={cn(\"absolute left-0 top-full flex justify-center\")}>\n    <NavigationMenuPrimitive.Viewport\n      className={cn(\n        \"origin-top-center relative mt-1.5 h-[var(--radix-navigation-menu-viewport-height)] w-full overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-90 md:w-[var(--radix-navigation-menu-viewport-width)]\",\n        className\n      )}\n      ref={ref}\n      {...props}\n    />\n  </div>\n))\nNavigationMenuViewport.displayName =\n  NavigationMenuPrimitive.Viewport.displayName\n\nconst NavigationMenuIndicator = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Indicator>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Indicator>\n>(({ className, ...props }, ref) => (\n  <NavigationMenuPrimitive.Indicator\n    ref={ref}\n    className={cn(\n      \"top-full z-[1] flex h-1.5 items-end justify-center overflow-hidden data-[state=visible]:animate-in data-[state=hidden]:animate-out data-[state=hidden]:fade-out data-[state=visible]:fade-in\",\n      className\n    )}\n    {...props}\n  >\n    <div className=\"relative top-[60%] h-2 w-2 rotate-45 rounded-tl-sm bg-border shadow-md\" />\n  </NavigationMenuPrimitive.Indicator>\n))\nNavigationMenuIndicator.displayName =\n  NavigationMenuPrimitive.Indicator.displayName\n\nexport {\n  navigationMenuTriggerStyle,\n  NavigationMenu,\n  NavigationMenuList,\n  NavigationMenuItem,\n  NavigationMenuContent,\n  NavigationMenuTrigger,\n  NavigationMenuLink,\n  NavigationMenuIndicator,\n  NavigationMenuViewport,\n}\n","path":null,"size_bytes":5128,"size_tokens":null},"client/src/components/NotificationBell.tsx":{"content":"\nimport { useState, useEffect } from \"react\";\nimport { useQuery, useMutation } from \"@tanstack/react-query\";\nimport { queryClient } from \"@/lib/queryClient\";\nimport { Button } from \"@/components/ui/button\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Popover, PopoverContent, PopoverTrigger } from \"@/components/ui/popover\";\nimport { ScrollArea } from \"@/components/ui/scroll-area\";\nimport { Bell, Check, Trash2, CheckCheck } from \"lucide-react\";\nimport { api, type Notification } from \"@/lib/api\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { format } from \"date-fns\";\nimport type { Language } from \"@/lib/translations\";\nimport { useTranslation } from \"@/lib/translations\";\n\ninterface NotificationBellProps {\n  language?: Language;\n}\n\nexport default function NotificationBell({ language = 'en' }: NotificationBellProps) {\n  const { toast } = useToast();\n  const t = useTranslation(language);\n  const [open, setOpen] = useState(false);\n\n  const { data: notifications = [] } = useQuery({\n    queryKey: ['/api/notifications'],\n    queryFn: () => api.notifications.getAll(),\n    refetchInterval: 10000, // Poll every 10 seconds\n  });\n\n  const unreadCount = notifications.filter(n => n.isRead === 'false' || n.isRead === false).length;\n\n  const markAsReadMutation = useMutation({\n    mutationFn: (id: string) => api.notifications.markAsRead(id),\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['/api/notifications'] });\n    },\n  });\n\n  const markAllAsReadMutation = useMutation({\n    mutationFn: () => api.notifications.markAllAsRead(),\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['/api/notifications'] });\n      toast({ title: \"All notifications marked as read\" });\n    },\n  });\n\n  const deleteNotificationMutation = useMutation({\n    mutationFn: (id: string) => api.notifications.delete(id),\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['/api/notifications'] });\n      toast({ title: \"Notification deleted\" });\n    },\n  });\n\n  const getNotificationIcon = (type: string) => {\n    switch (type) {\n      case 'reservation_approved':\n        return 'âœ…';\n      case 'reservation_rejected':\n        return 'âŒ';\n      case 'reservation_request':\n        return 'ðŸ“‹';\n      case 'item_damaged':\n        return 'âš ï¸';\n      default:\n        return 'ðŸ””';\n    }\n  };\n\n  return (\n    <Popover open={open} onOpenChange={setOpen}>\n      <PopoverTrigger asChild>\n        <Button variant=\"ghost\" size=\"icon\" className=\"relative\">\n          <Bell className={`h-5 w-5 ${unreadCount > 0 ? 'animate-pulse text-red-500' : ''}`} />\n          {unreadCount > 0 && (\n            <Badge className=\"absolute -top-1 -right-1 h-5 w-5 flex items-center justify-center p-0 bg-red-500 text-white text-xs\">\n              {unreadCount > 9 ? '9+' : unreadCount}\n            </Badge>\n          )}\n        </Button>\n      </PopoverTrigger>\n      <PopoverContent className=\"w-80 p-0\" align=\"end\">\n        <div className=\"flex items-center justify-between p-4 border-b\">\n          <h3 className=\"font-semibold\">{t('notifications')}</h3>\n          {unreadCount > 0 && (\n            <Button\n              variant=\"ghost\"\n              size=\"sm\"\n              onClick={() => markAllAsReadMutation.mutate()}\n              className=\"text-xs\"\n            >\n              <CheckCheck className=\"w-4 h-4 mr-1\" />\n              {t('markAllRead')}\n            </Button>\n          )}\n        </div>\n        <ScrollArea className=\"h-96\">\n          {notifications.length === 0 ? (\n            <div className=\"p-8 text-center text-muted-foreground\">\n              <Bell className=\"w-12 h-12 mx-auto mb-2 opacity-50\" />\n              <p>{t('noNotifications')}</p>\n            </div>\n          ) : (\n            <div className=\"divide-y\">\n              {notifications.map((notification) => (\n                <div\n                  key={notification.id}\n                  className={`p-4 hover:bg-muted/50 transition-colors ${\n                    notification.isRead === 'false' || notification.isRead === false ? 'bg-blue-50' : ''\n                  }`}\n                >\n                  <div className=\"flex items-start gap-3\">\n                    <span className=\"text-2xl\">{getNotificationIcon(notification.type)}</span>\n                    <div className=\"flex-1 min-w-0\">\n                      <p className=\"font-semibold text-sm\">{notification.title}</p>\n                      <p className=\"text-sm text-muted-foreground mt-1\">\n                        {notification.message}\n                      </p>\n                      <p className=\"text-xs text-muted-foreground mt-2\">\n                        {format(new Date(notification.createdAt), 'PPp')}\n                      </p>\n                    </div>\n                    <div className=\"flex gap-1\">\n                      {(notification.isRead === 'false' || notification.isRead === false) && (\n                        <Button\n                          variant=\"ghost\"\n                          size=\"icon\"\n                          className=\"h-8 w-8\"\n                          onClick={() => markAsReadMutation.mutate(notification.id)}\n                        >\n                          <Check className=\"h-4 w-4\" />\n                        </Button>\n                      )}\n                      <Button\n                        variant=\"ghost\"\n                        size=\"icon\"\n                        className=\"h-8 w-8\"\n                        onClick={() => deleteNotificationMutation.mutate(notification.id)}\n                      >\n                        <Trash2 className=\"h-4 w-4\" />\n                      </Button>\n                    </div>\n                  </div>\n                </div>\n              ))}\n            </div>\n          )}\n        </ScrollArea>\n      </PopoverContent>\n    </Popover>\n  );\n}\n","path":null,"size_bytes":5839,"size_tokens":null},"client/src/pages/Reservations.tsx":{"content":"import { useState } from \"react\";\nimport { useQuery, useMutation } from \"@tanstack/react-query\";\nimport { queryClient } from \"@/lib/queryClient\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Card } from \"@/components/ui/card\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Dialog, DialogContent, DialogHeader, DialogTitle } from \"@/components/ui/dialog\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { Label } from \"@/components/ui/label\";\nimport { Search, Plus, CheckCircle, XCircle, Clock, ArrowLeft, Calendar, User, AlertCircle } from \"lucide-react\";\nimport { format } from \"date-fns\";\nimport { api, type Reservation, type Item } from \"@/lib/api\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport ReservationFormDialog from \"@/components/ReservationFormDialog\";\nimport ReservationActionDialog from \"@/components/ReservationActionDialog\";\nimport InventoryHeader from \"@/components/InventoryHeader\";\nimport type { Language } from \"@/lib/translations\";\nimport { useTranslation } from \"@/lib/translations\";\n\ninterface ReservationsPageProps {\n  userName: string;\n  userRole: string;\n  userId: string;\n  onLogout: () => void;\n  onNavigateToInventory?: () => void;\n  onNavigateToActivityLogs?: () => void;\n  onNavigateToQRCodes?: () => void;\n  onNavigateToMaintenance?: () => void;\n  onNavigateToReports?: () => void;\n  language?: Language;\n  onLanguageChange?: (language: Language) => void;\n}\n\nexport default function Reservations({ userName, userRole, userId, onLogout, onNavigateToInventory, onNavigateToActivityLogs, onNavigateToQRCodes, onNavigateToMaintenance, onNavigateToReports, language = 'en', onLanguageChange }: ReservationsPageProps) {\n  const { toast } = useToast();\n  const t = useTranslation(language);\n  const [searchQuery, setSearchQuery] = useState(\"\");\n  const [showReservationForm, setShowReservationForm] = useState(false);\n  const [filterStatus, setFilterStatus] = useState<string>(\"all\");\n  const [actionDialog, setActionDialog] = useState<{ open: boolean; action: 'reject' | 'complete'; reservationId: string; itemName: string }>({ open: false, action: 'reject', reservationId: '', itemName: '' });\n\n  const { data: reservations = [] } = useQuery({\n    queryKey: ['/api/reservations'],\n    queryFn: () => api.reservations.getAll(),\n  });\n\n  const { data: items = [] } = useQuery({\n    queryKey: ['/api/items'],\n    queryFn: () => api.items.getAll(),\n  });\n\n  const { data: allUsers = [] } = useQuery({\n    queryKey: ['/api/users'],\n    queryFn: () => api.users.getAll(),\n  });\n\n  const [showCheckoutDialog, setShowCheckoutDialog] = useState(false);\n  const [checkoutReservation, setCheckoutReservation] = useState<any>(null);\n  const [checkoutCondition, setCheckoutCondition] = useState<'good' | 'damage' | ''>(\"\");\n  const [checkoutNotes, setCheckoutNotes] = useState(\"\");\n\n  const createReservationMutation = useMutation({\n    mutationFn: (data: { itemId: string; startDate: Date; returnDate: Date; startTime?: string; returnTime?: string; purposeOfUse?: string; notes?: string }) => api.reservations.create(data),\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['/api/reservations'] });\n      queryClient.invalidateQueries({ queryKey: ['/api/items'] });\n      setShowReservationForm(false);\n      toast({ title: \"Reservation created successfully\" });\n    },\n    onError: () => {\n      toast({ title: \"Failed to create reservation\", variant: \"destructive\" });\n    }\n  });\n\n  const updateReservationMutation = useMutation({\n    mutationFn: ({ id, data }: { id: string; data: any }) =>\n      api.reservations.update(id, data),\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['/api/reservations'] });\n      queryClient.invalidateQueries({ queryKey: ['/api/items'] });\n      toast({ title: \"Reservation updated successfully\" });\n    },\n    onError: () => {\n      toast({ title: \"Failed to update reservation\", variant: \"destructive\" });\n    }\n  });\n\n  const handleApprove = (id: string) => {\n    updateReservationMutation.mutate({\n      id,\n      data: { status: 'approved', approvalDate: new Date() }\n    });\n  };\n\n  const handleReject = (id: string, itemId: string) => {\n    const itemName = getItemName(itemId);\n    setActionDialog({ open: true, action: 'reject', reservationId: id, itemName });\n  };\n\n  const handleComplete = (id: string, itemId: string) => {\n    const itemName = getItemName(itemId);\n    setActionDialog({ open: true, action: 'complete', reservationId: id, itemName });\n  };\n\n  const handleActionSubmit = (data: { rejectionReason?: string; itemConditionOnReturn?: string; returnCondition?: 'good' | 'damage' }) => {\n    const updateData: any = {\n      approvalDate: new Date()\n    };\n\n    if (actionDialog.action === 'reject') {\n      updateData.status = 'rejected';\n      updateData.rejectionReason = data.rejectionReason;\n    } else {\n      updateData.status = 'completed';\n      const reservation = reservations.find(r => r.id === actionDialog.reservationId);\n      \n      if (data.returnCondition === 'good') {\n        updateData.itemConditionOnReturn = 'Equipment returned in good condition';\n      } else if (data.returnCondition === 'damage') {\n        const damageDescription = `Equipment returned with damage/missing items: ${data.itemConditionOnReturn}`;\n        updateData.itemConditionOnReturn = damageDescription;\n        \n        // Create damage report for admin return inspection\n        if (reservation) {\n          api.damageReports.create({\n            itemId: reservation.itemId,\n            reportedBy: userId,\n            reportType: 'admin-damage',\n            severity: 'medium',\n            description: damageDescription,\n            status: 'open'\n          }).catch(err => console.error('Failed to create return report:', err));\n        }\n      }\n    }\n\n    updateReservationMutation.mutate({\n      id: actionDialog.reservationId,\n      data: updateData\n    });\n  };\n\n  const getItemName = (itemId: string) => {\n    const item = items.find(i => i.id === itemId);\n    return item?.productName || 'Unknown Item';\n  };\n\n  const getUserName = (userId: string) => {\n    // Show the user ID - names will be resolved by backend\n    return userId.substring(0, 8) + '...';\n  };\n\n  const handleCheckout = (reservation: any) => {\n    setCheckoutReservation(reservation);\n    setCheckoutCondition(\"\");\n    setCheckoutNotes(\"\");\n    setShowCheckoutDialog(true);\n  };\n\n  const handleConfirmCheckout = () => {\n    if (!checkoutCondition) {\n      toast({ title: \"Please select equipment condition\", variant: \"destructive\" });\n      return;\n    }\n    if (checkoutCondition === 'damage' && !checkoutNotes.trim()) {\n      toast({ title: \"Please describe the damage or missing items\", variant: \"destructive\" });\n      return;\n    }\n\n    const conditionDescription = checkoutCondition === 'good' \n      ? 'Equipment received in good condition'\n      : `Equipment received with damage/missing items: ${checkoutNotes.trim()}`;\n\n    // Create damage report for user pickup\n    if (checkoutCondition === 'damage') {\n      api.damageReports.create({\n        itemId: checkoutReservation.itemId,\n        reportedBy: userId,\n        reportType: 'user-damage',\n        severity: 'medium',\n        description: conditionDescription,\n        status: 'open'\n      }).catch(err => console.error('Failed to create report:', err));\n    }\n\n    updateReservationMutation.mutate({\n      id: checkoutReservation.id,\n      data: { \n        checkoutDate: new Date().toISOString(),\n        itemConditionOnReceive: conditionDescription\n      }\n    });\n    setShowCheckoutDialog(false);\n  };\n\n  const filteredReservations = reservations\n    .filter(res => {\n      const itemName = getItemName(res.itemId).toLowerCase();\n      const matchesSearch = searchQuery === \"\" || itemName.includes(searchQuery.toLowerCase());\n      const matchesFilter = filterStatus === \"all\" || res.status === filterStatus;\n      const matchesUser = userRole === 'admin' || res.userId === userId;\n      return matchesSearch && matchesFilter && matchesUser;\n    })\n    .sort((a, b) => new Date(a.requestDate).getTime() - new Date(b.requestDate).getTime());\n\n  const getStatusColor = (status: string) => {\n    switch (status) {\n      case 'approved': return 'bg-green-500';\n      case 'pending': return 'bg-yellow-500';\n      case 'rejected': return 'bg-red-500';\n      case 'completed': return 'bg-blue-500';\n      default: return 'bg-gray-500';\n    }\n  };\n\n  const getStatusIcon = (status: string) => {\n    switch (status) {\n      case 'approved': return <CheckCircle className=\"w-4 h-4\" />;\n      case 'rejected': return <XCircle className=\"w-4 h-4\" />;\n      case 'pending': return <Clock className=\"w-4 h-4\" />;\n      default: return null;\n    }\n  };\n\n  return (\n    <div className=\"min-h-screen bg-background\">\n      <InventoryHeader\n        userName={userName}\n        userRole={userRole}\n        currentView=\"inventory\"\n        onViewChange={() => onNavigateToInventory?.()}\n        onLogout={onLogout}\n        onNavigateToActivityLogs={onNavigateToActivityLogs}\n        onNavigateToQRCodes={onNavigateToQRCodes}\n        onNavigateToMaintenance={onNavigateToMaintenance}\n        onNavigateToReports={onNavigateToReports}\n        hideViewToggle={true}\n        language={language}\n        onLanguageChange={onLanguageChange}\n      />\n\n      <main className=\"max-w-[1400px] mx-auto px-3 md:px-5 py-4 md:py-8\">\n        <div className=\"mb-6\">\n          <Button\n            variant=\"ghost\"\n            onClick={onNavigateToInventory} // This should navigate to categories, not inventory view\n            className=\"gap-2\"\n            data-testid=\"button-back-to-inventory\"\n          >\n            <ArrowLeft className=\"w-4 h-4\" />\n            {t('backToInventory')}\n          </Button>\n        </div>\n\n        <div className=\"text-center mb-10 p-10 bg-gradient-to-r from-[#667eea] to-[#764ba2] rounded-2xl text-white\">\n          <h1 className=\"text-4xl font-extrabold mb-4\">{t('equipmentReservations')}</h1>\n          <p className=\"text-lg opacity-90 max-w-2xl mx-auto\">\n            {t('requestManageReservations')}\n          </p>\n        </div>\n\n        <div className=\"flex items-center justify-between mb-6 flex-wrap gap-4\">\n          <div className=\"flex gap-3\">\n            <Button\n              variant={filterStatus === \"all\" ? \"default\" : \"outline\"}\n              onClick={() => setFilterStatus(\"all\")}\n            >\n              {t('all')}\n            </Button>\n            <Button\n              variant={filterStatus === \"pending\" ? \"default\" : \"outline\"}\n              onClick={() => setFilterStatus(\"pending\")}\n            >\n              {t('pending')}\n            </Button>\n            <Button\n              variant={filterStatus === \"approved\" ? \"default\" : \"outline\"}\n              onClick={() => setFilterStatus(\"approved\")}\n            >\n              {t('approved')}\n            </Button>\n            <Button\n              variant={filterStatus === \"completed\" ? \"default\" : \"outline\"}\n              onClick={() => setFilterStatus(\"completed\")}\n            >\n              {t('completed')}\n            </Button>\n          </div>\n          <Button\n            onClick={() => setShowReservationForm(true)}\n            className=\"bg-gradient-to-r from-[#667eea] to-[#764ba2]\"\n          >\n            <Plus className=\"w-4 h-4 mr-2\" />\n            {t('newReservation')}\n          </Button>\n        </div>\n\n        <div className=\"mb-6\">\n          <div className=\"relative max-w-md\">\n            <Search className=\"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-muted-foreground\" />\n            <Input\n              placeholder={t('search')}\n              value={searchQuery}\n              onChange={(e) => setSearchQuery(e.target.value)}\n              className=\"pl-12\"\n            />\n          </div>\n        </div>\n\n        <div className=\"grid gap-4\">\n          {filteredReservations.map((reservation) => (\n            <Card key={reservation.id} className=\"p-6\">\n              <div className=\"flex items-start justify-between gap-4 flex-wrap\">\n                <div className=\"flex-1\">\n                  <div className=\"flex items-center gap-3 mb-3\">\n                    <h3 className=\"text-xl font-bold\">{getItemName(reservation.itemId)}</h3>\n                    <Badge className={`${getStatusColor(reservation.status)} text-white`}>\n                      <span className=\"flex items-center gap-1\">\n                        {getStatusIcon(reservation.status)}\n                        {reservation.status.toUpperCase()}\n                      </span>\n                    </Badge>\n                  </div>\n                  <div className=\"grid grid-cols-1 md:grid-cols-2 gap-3 text-sm\">\n                    <div className=\"flex items-center gap-2 text-muted-foreground\">\n                      <User className=\"w-4 h-4\" />\n                      <span>\n                        <strong>Employee:</strong> {getUserName(reservation.userId)}\n                      </span>\n                    </div>\n                    <div className=\"flex items-center gap-2 text-muted-foreground\">\n                      <span>\n                        <strong>Department:</strong> {allUsers.find(u => u.id === reservation.userId)?.department || '-'}\n                      </span>\n                    </div>\n                    <div className=\"flex items-center gap-2 text-muted-foreground\">\n                      <Calendar className=\"w-4 h-4\" />\n                      <span>\n                        <strong>{t('requested')}:</strong> {format(new Date(reservation.requestDate), \"PPP\")}\n                      </span>\n                    </div>\n                    {reservation.purposeOfUse && (\n                      <div className=\"col-span-2 text-muted-foreground\">\n                        <strong>Purpose of Use:</strong> {reservation.purposeOfUse}\n                      </div>\n                    )}\n                    <div className=\"flex items-center gap-2 text-muted-foreground\">\n                      <Calendar className=\"w-4 h-4\" />\n                      <span>\n                        <strong>Pickup:</strong> {format(new Date(reservation.startDate), \"PPP\")} {reservation.startTime || \"09:00\"}\n                      </span>\n                    </div>\n                    <div className=\"flex items-center gap-2 text-muted-foreground\">\n                      <Calendar className=\"w-4 h-4\" />\n                      <span>\n                        <strong>Return:</strong> {format(new Date(reservation.returnDate), \"PPP\")} {reservation.returnTime || \"17:00\"}\n                      </span>\n                    </div>\n                    {reservation.approvalDate && (\n                      <div className=\"text-muted-foreground\">\n                        <strong>{t('responded')}:</strong> {format(new Date(reservation.approvalDate), \"PPP\")}\n                      </div>\n                    )}\n                    {reservation.notes && (\n                      <div className=\"col-span-2 text-muted-foreground\">\n                        <strong>{t('notes')}:</strong> {reservation.notes}\n                      </div>\n                    )}\n                  </div>\n                </div>\n                {userRole === 'admin' && reservation.status === 'pending' && (\n                  <div className=\"flex gap-2\">\n                    <Button\n                      size=\"sm\"\n                      variant=\"outline\"\n                      className=\"bg-green-50 hover:bg-green-100 text-green-700 border-green-200\"\n                      onClick={() => handleApprove(reservation.id)}\n                    >\n                      <CheckCircle className=\"w-4 h-4 mr-1\" />\n                      {t('approve')}\n                    </Button>\n                    <Button\n                      size=\"sm\"\n                      variant=\"outline\"\n                      className=\"bg-red-50 hover:bg-red-100 text-red-700 border-red-200\"\n                      onClick={() => handleReject(reservation.id, reservation.itemId)}\n                    >\n                      <XCircle className=\"w-4 h-4 mr-1\" />\n                      {t('decline')}\n                    </Button>\n                  </div>\n                )}\n                {reservation.status === 'approved' && (\n                  <div className=\"flex gap-2 flex-col\">\n                    {userRole !== 'admin' && (() => {\n                      const today = new Date();\n                      const todayStr = `${today.getFullYear()}-${String(today.getMonth() + 1).padStart(2, '0')}-${String(today.getDate()).padStart(2, '0')}`;\n                      \n                      const startDate = new Date(reservation.startDate);\n                      const startDateStr = `${startDate.getFullYear()}-${String(startDate.getMonth() + 1).padStart(2, '0')}-${String(startDate.getDate()).padStart(2, '0')}`;\n                      \n                      const isPickupDay = todayStr === startDateStr;\n                      const hasReceivedEquipment = reservation.checkoutDate || reservation.itemConditionOnReceive;\n                      \n                      if (hasReceivedEquipment) {\n                        return (\n                          <Button\n                            size=\"sm\"\n                            variant=\"outline\"\n                            className=\"bg-gray-100 text-gray-600 border-gray-300 cursor-not-allowed\"\n                            disabled\n                            title=\"Equipment already received\"\n                          >\n                            <CheckCircle className=\"w-4 h-4 mr-1\" />\n                            Equipment Received âœ“\n                          </Button>\n                        );\n                      }\n                      \n                      return (\n                        <Button\n                          size=\"sm\"\n                          variant=\"outline\"\n                          className=\"bg-green-50 hover:bg-green-100 text-green-700 border-green-200\"\n                          onClick={() => handleCheckout(reservation)}\n                          disabled={!isPickupDay}\n                          title={isPickupDay ? \"Click to confirm receipt\" : `Available on ${format(new Date(reservation.startDate), \"MMM dd, yyyy\")}`}\n                        >\n                          <CheckCircle className=\"w-4 h-4 mr-1\" />\n                          Receive Equipment {!isPickupDay && \"(Not Available)\"}\n                        </Button>\n                      );\n                    })()}\n                    {userRole === 'admin' && (() => {\n                      // Admin can mark as returned if:\n                      // - Equipment has been checked out (itemConditionOnReceive is set)\n                      // - Not already marked as returned (itemConditionOnReturn is not set)\n                      const hasCheckedOut = reservation.checkoutDate || reservation.itemConditionOnReceive;\n                      const alreadyMarkedReturned = reservation.itemConditionOnReturn !== undefined;\n                      \n                      if (alreadyMarkedReturned) {\n                        return null;\n                      }\n                      \n                      return (\n                        <Button\n                          size=\"sm\"\n                          variant=\"outline\"\n                          className=\"bg-blue-50 hover:bg-blue-100 text-blue-700 border-blue-200\"\n                          onClick={() => handleComplete(reservation.id, reservation.itemId)}\n                          disabled={!hasCheckedOut}\n                          title={hasCheckedOut ? \"Click to confirm return\" : \"Equipment must be checked out first\"}\n                        >\n                          <CheckCircle className=\"w-4 h-4 mr-1\" />\n                          {t('markReturned')} {!hasCheckedOut && \"(Not Available)\"}\n                        </Button>\n                      );\n                    })()}\n                  </div>\n                )}\n              </div>\n            </Card>\n          ))}\n        </div>\n\n        {filteredReservations.length === 0 && (\n          <div className=\"text-center py-12 bg-muted/30 rounded-lg\">\n            <Clock className=\"w-12 h-12 mx-auto mb-3 text-muted-foreground\" />\n            <p className=\"text-lg font-medium text-muted-foreground\">{t('noReservationsFound')}</p>\n            <p className=\"text-sm text-muted-foreground mt-1\">\n              {filterStatus !== \"all\" ? t('tryChangingFilter') : t('createFirstReservation')}\n            </p>\n          </div>\n        )}\n      </main>\n\n      <ReservationFormDialog\n        open={showReservationForm}\n        onClose={() => setShowReservationForm(false)}\n        onSubmit={(data) => createReservationMutation.mutate({ ...data, userId: userId })} // Pass the actual userId\n        items={items.filter(item => item.status !== 'Maintenance')}\n      />\n\n      <ReservationActionDialog\n        open={actionDialog.open}\n        onClose={() => setActionDialog({ ...actionDialog, open: false })}\n        onSubmit={handleActionSubmit}\n        action={actionDialog.action}\n        itemName={actionDialog.itemName}\n      />\n\n      <Dialog open={showCheckoutDialog} onOpenChange={setShowCheckoutDialog}>\n        <DialogContent className=\"max-w-2xl\">\n          <DialogHeader>\n            <DialogTitle>{t('confirmEquipmentPickup')}</DialogTitle>\n          </DialogHeader>\n          {checkoutReservation && (\n            <div className=\"space-y-6\">\n              <div className=\"bg-blue-50 dark:bg-blue-950 p-4 rounded-lg space-y-2 border border-blue-200 dark:border-blue-800\">\n                <div><strong>{t('equipment')}:</strong> {getItemName(checkoutReservation.itemId)}</div>\n                <div><strong>{t('pickupDateTime')}:</strong> {format(new Date(checkoutReservation.startDate), \"PPP\")} {checkoutReservation.startTime || \"09:00\"}</div>\n                <div><strong>{t('returnDateTime')}:</strong> {format(new Date(checkoutReservation.returnDate), \"PPP\")} {checkoutReservation.returnTime || \"17:00\"}</div>\n                <div><strong>{t('purpose')}:</strong> {checkoutReservation.purposeOfUse}</div>\n              </div>\n\n              <div className=\"space-y-3\">\n                <Label className=\"text-base font-semibold\">{t('equipmentCondition')}</Label>\n                <div className=\"space-y-3\">\n                  <div className=\"flex items-center gap-3 p-3 border rounded-lg cursor-pointer hover:bg-muted/50\" onClick={() => setCheckoutCondition('good')}>\n                    <input \n                      type=\"radio\" \n                      name=\"condition\" \n                      value=\"good\"\n                      checked={checkoutCondition === 'good'}\n                      onChange={() => setCheckoutCondition('good')}\n                      className=\"w-4 h-4\"\n                    />\n                    <Label className=\"cursor-pointer font-medium flex items-center gap-2 mb-0\">\n                      <CheckCircle className=\"w-5 h-5 text-green-600\" />\n                      {t('good')}\n                    </Label>\n                  </div>\n\n                  <div className=\"flex items-center gap-3 p-3 border rounded-lg cursor-pointer hover:bg-muted/50\" onClick={() => setCheckoutCondition('damage')}>\n                    <input \n                      type=\"radio\" \n                      name=\"condition\" \n                      value=\"damage\"\n                      checked={checkoutCondition === 'damage'}\n                      onChange={() => setCheckoutCondition('damage')}\n                      className=\"w-4 h-4\"\n                    />\n                    <Label className=\"cursor-pointer font-medium flex items-center gap-2 mb-0\">\n                      <AlertCircle className=\"w-5 h-5 text-red-600\" />\n                      {t('damageOrMissing')}\n                    </Label>\n                  </div>\n                </div>\n              </div>\n\n              {checkoutCondition === 'damage' && (\n                <div className=\"space-y-2 p-4 bg-red-50 dark:bg-red-950 rounded-lg border border-red-200 dark:border-red-800\">\n                  <Label htmlFor=\"damage-notes\" className=\"text-base font-semibold\">{t('describeDamage')}</Label>\n                  <Textarea\n                    id=\"damage-notes\"\n                    value={checkoutNotes}\n                    onChange={(e) => setCheckoutNotes(e.target.value)}\n                    placeholder={t('describeDamageDetails')}\n                    rows={3}\n                    className=\"resize-none\"\n                  />\n                </div>\n              )}\n\n              <div className=\"flex gap-3 justify-end pt-4 border-t\">\n                <Button variant=\"outline\" onClick={() => setShowCheckoutDialog(false)}>\n                  Cancel\n                </Button>\n                <Button \n                  onClick={handleConfirmCheckout}\n                  className=\"bg-gradient-to-r from-[#667eea] to-[#764ba2]\"\n                >\n                  Confirm Receipt\n                </Button>\n              </div>\n            </div>\n          )}\n        </DialogContent>\n      </Dialog>\n    </div>\n  );\n}","path":null,"size_bytes":25131,"size_tokens":null},"attached_assets/toast_1763671095571.tsx":{"content":"import * as React from \"react\"\nimport * as ToastPrimitives from \"@radix-ui/react-toast\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\nimport { X } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ToastProvider = ToastPrimitives.Provider\n\nconst ToastViewport = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Viewport>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Viewport>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Viewport\n    ref={ref}\n    className={cn(\n      \"fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]\",\n      className\n    )}\n    {...props}\n  />\n))\nToastViewport.displayName = ToastPrimitives.Viewport.displayName\n\nconst toastVariants = cva(\n  \"group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full\",\n  {\n    variants: {\n      variant: {\n        default: \"border bg-background text-foreground\",\n        destructive:\n          \"destructive group border-destructive bg-destructive text-destructive-foreground\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nconst Toast = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Root>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Root> &\n    VariantProps<typeof toastVariants>\n>(({ className, variant, ...props }, ref) => {\n  return (\n    <ToastPrimitives.Root\n      ref={ref}\n      className={cn(toastVariants({ variant }), className)}\n      {...props}\n    />\n  )\n})\nToast.displayName = ToastPrimitives.Root.displayName\n\nconst ToastAction = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Action>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Action>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Action\n    ref={ref}\n    className={cn(\n      \"inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive\",\n      className\n    )}\n    {...props}\n  />\n))\nToastAction.displayName = ToastPrimitives.Action.displayName\n\nconst ToastClose = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Close>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Close>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Close\n    ref={ref}\n    className={cn(\n      \"absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600\",\n      className\n    )}\n    toast-close=\"\"\n    {...props}\n  >\n    <X className=\"h-4 w-4\" />\n  </ToastPrimitives.Close>\n))\nToastClose.displayName = ToastPrimitives.Close.displayName\n\nconst ToastTitle = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Title>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Title>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Title\n    ref={ref}\n    className={cn(\"text-sm font-semibold\", className)}\n    {...props}\n  />\n))\nToastTitle.displayName = ToastPrimitives.Title.displayName\n\nconst ToastDescription = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Description>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Description>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Description\n    ref={ref}\n    className={cn(\"text-sm opacity-90\", className)}\n    {...props}\n  />\n))\nToastDescription.displayName = ToastPrimitives.Description.displayName\n\ntype ToastProps = React.ComponentPropsWithoutRef<typeof Toast>\n\ntype ToastActionElement = React.ReactElement<typeof ToastAction>\n\nexport {\n  type ToastProps,\n  type ToastActionElement,\n  ToastProvider,\n  ToastViewport,\n  Toast,\n  ToastTitle,\n  ToastDescription,\n  ToastClose,\n  ToastAction,\n}\n","path":null,"size_bytes":4845,"size_tokens":null},"client/src/components/ui/resizable.tsx":{"content":"\"use client\"\n\nimport { GripVertical } from \"lucide-react\"\nimport * as ResizablePrimitive from \"react-resizable-panels\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ResizablePanelGroup = ({\n  className,\n  ...props\n}: React.ComponentProps<typeof ResizablePrimitive.PanelGroup>) => (\n  <ResizablePrimitive.PanelGroup\n    className={cn(\n      \"flex h-full w-full data-[panel-group-direction=vertical]:flex-col\",\n      className\n    )}\n    {...props}\n  />\n)\n\nconst ResizablePanel = ResizablePrimitive.Panel\n\nconst ResizableHandle = ({\n  withHandle,\n  className,\n  ...props\n}: React.ComponentProps<typeof ResizablePrimitive.PanelResizeHandle> & {\n  withHandle?: boolean\n}) => (\n  <ResizablePrimitive.PanelResizeHandle\n    className={cn(\n      \"relative flex w-px items-center justify-center bg-border after:absolute after:inset-y-0 after:left-1/2 after:w-1 after:-translate-x-1/2 focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring focus-visible:ring-offset-1 data-[panel-group-direction=vertical]:h-px data-[panel-group-direction=vertical]:w-full data-[panel-group-direction=vertical]:after:left-0 data-[panel-group-direction=vertical]:after:h-1 data-[panel-group-direction=vertical]:after:w-full data-[panel-group-direction=vertical]:after:-translate-y-1/2 data-[panel-group-direction=vertical]:after:translate-x-0 [&[data-panel-group-direction=vertical]>div]:rotate-90\",\n      className\n    )}\n    {...props}\n  >\n    {withHandle && (\n      <div className=\"z-10 flex h-4 w-3 items-center justify-center rounded-sm border bg-border\">\n        <GripVertical className=\"h-2.5 w-2.5\" />\n      </div>\n    )}\n  </ResizablePrimitive.PanelResizeHandle>\n)\n\nexport { ResizablePanelGroup, ResizablePanel, ResizableHandle }\n","path":null,"size_bytes":1723,"size_tokens":null},"client/src/components/ui/table.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Table = React.forwardRef<\n  HTMLTableElement,\n  React.HTMLAttributes<HTMLTableElement>\n>(({ className, ...props }, ref) => (\n  <div className=\"relative w-full overflow-auto\">\n    <table\n      ref={ref}\n      className={cn(\"w-full caption-bottom text-sm\", className)}\n      {...props}\n    />\n  </div>\n))\nTable.displayName = \"Table\"\n\nconst TableHeader = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <thead ref={ref} className={cn(\"[&_tr]:border-b\", className)} {...props} />\n))\nTableHeader.displayName = \"TableHeader\"\n\nconst TableBody = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <tbody\n    ref={ref}\n    className={cn(\"[&_tr:last-child]:border-0\", className)}\n    {...props}\n  />\n))\nTableBody.displayName = \"TableBody\"\n\nconst TableFooter = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <tfoot\n    ref={ref}\n    className={cn(\n      \"border-t bg-muted/50 font-medium [&>tr]:last:border-b-0\",\n      className\n    )}\n    {...props}\n  />\n))\nTableFooter.displayName = \"TableFooter\"\n\nconst TableRow = React.forwardRef<\n  HTMLTableRowElement,\n  React.HTMLAttributes<HTMLTableRowElement>\n>(({ className, ...props }, ref) => (\n  <tr\n    ref={ref}\n    className={cn(\n      \"border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted\",\n      className\n    )}\n    {...props}\n  />\n))\nTableRow.displayName = \"TableRow\"\n\nconst TableHead = React.forwardRef<\n  HTMLTableCellElement,\n  React.ThHTMLAttributes<HTMLTableCellElement>\n>(({ className, ...props }, ref) => (\n  <th\n    ref={ref}\n    className={cn(\n      \"h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0\",\n      className\n    )}\n    {...props}\n  />\n))\nTableHead.displayName = \"TableHead\"\n\nconst TableCell = React.forwardRef<\n  HTMLTableCellElement,\n  React.TdHTMLAttributes<HTMLTableCellElement>\n>(({ className, ...props }, ref) => (\n  <td\n    ref={ref}\n    className={cn(\"p-4 align-middle [&:has([role=checkbox])]:pr-0\", className)}\n    {...props}\n  />\n))\nTableCell.displayName = \"TableCell\"\n\nconst TableCaption = React.forwardRef<\n  HTMLTableCaptionElement,\n  React.HTMLAttributes<HTMLTableCaptionElement>\n>(({ className, ...props }, ref) => (\n  <caption\n    ref={ref}\n    className={cn(\"mt-4 text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nTableCaption.displayName = \"TableCaption\"\n\nexport {\n  Table,\n  TableHeader,\n  TableBody,\n  TableFooter,\n  TableHead,\n  TableRow,\n  TableCell,\n  TableCaption,\n}\n","path":null,"size_bytes":2765,"size_tokens":null},"client/src/components/ui/select.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as SelectPrimitive from \"@radix-ui/react-select\"\nimport { Check, ChevronDown, ChevronUp } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Select = SelectPrimitive.Root\n\nconst SelectGroup = SelectPrimitive.Group\n\nconst SelectValue = SelectPrimitive.Value\n\nconst SelectTrigger = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Trigger>\n>(({ className, children, ...props }, ref) => (\n  <SelectPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"flex h-9 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <SelectPrimitive.Icon asChild>\n      <ChevronDown className=\"h-4 w-4 opacity-50\" />\n    </SelectPrimitive.Icon>\n  </SelectPrimitive.Trigger>\n))\nSelectTrigger.displayName = SelectPrimitive.Trigger.displayName\n\nconst SelectScrollUpButton = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.ScrollUpButton>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollUpButton>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.ScrollUpButton\n    ref={ref}\n    className={cn(\n      \"flex cursor-default items-center justify-center py-1\",\n      className\n    )}\n    {...props}\n  >\n    <ChevronUp className=\"h-4 w-4\" />\n  </SelectPrimitive.ScrollUpButton>\n))\nSelectScrollUpButton.displayName = SelectPrimitive.ScrollUpButton.displayName\n\nconst SelectScrollDownButton = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.ScrollDownButton>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollDownButton>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.ScrollDownButton\n    ref={ref}\n    className={cn(\n      \"flex cursor-default items-center justify-center py-1\",\n      className\n    )}\n    {...props}\n  >\n    <ChevronDown className=\"h-4 w-4\" />\n  </SelectPrimitive.ScrollDownButton>\n))\nSelectScrollDownButton.displayName =\n  SelectPrimitive.ScrollDownButton.displayName\n\nconst SelectContent = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Content>\n>(({ className, children, position = \"popper\", ...props }, ref) => (\n  <SelectPrimitive.Portal>\n    <SelectPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]\",\n        position === \"popper\" &&\n          \"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1\",\n        className\n      )}\n      position={position}\n      {...props}\n    >\n      <SelectScrollUpButton />\n      <SelectPrimitive.Viewport\n        className={cn(\n          \"p-1\",\n          position === \"popper\" &&\n            \"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]\"\n        )}\n      >\n        {children}\n      </SelectPrimitive.Viewport>\n      <SelectScrollDownButton />\n    </SelectPrimitive.Content>\n  </SelectPrimitive.Portal>\n))\nSelectContent.displayName = SelectPrimitive.Content.displayName\n\nconst SelectLabel = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Label>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.Label\n    ref={ref}\n    className={cn(\"py-1.5 pl-8 pr-2 text-sm font-semibold\", className)}\n    {...props}\n  />\n))\nSelectLabel.displayName = SelectPrimitive.Label.displayName\n\nconst SelectItem = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Item>\n>(({ className, children, ...props }, ref) => (\n  <SelectPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <SelectPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </SelectPrimitive.ItemIndicator>\n    </span>\n\n    <SelectPrimitive.ItemText>{children}</SelectPrimitive.ItemText>\n  </SelectPrimitive.Item>\n))\nSelectItem.displayName = SelectPrimitive.Item.displayName\n\nconst SelectSeparator = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\n    {...props}\n  />\n))\nSelectSeparator.displayName = SelectPrimitive.Separator.displayName\n\nexport {\n  Select,\n  SelectGroup,\n  SelectValue,\n  SelectTrigger,\n  SelectContent,\n  SelectLabel,\n  SelectItem,\n  SelectSeparator,\n  SelectScrollUpButton,\n  SelectScrollDownButton,\n}\n","path":null,"size_bytes":5741,"size_tokens":null},"client/src/components/ui/alert-dialog.tsx":{"content":"import * as React from \"react\"\nimport * as AlertDialogPrimitive from \"@radix-ui/react-alert-dialog\"\n\nimport { cn } from \"@/lib/utils\"\nimport { buttonVariants } from \"@/components/ui/button\"\n\nconst AlertDialog = AlertDialogPrimitive.Root\n\nconst AlertDialogTrigger = AlertDialogPrimitive.Trigger\n\nconst AlertDialogPortal = AlertDialogPrimitive.Portal\n\nconst AlertDialogOverlay = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Overlay\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n    ref={ref}\n  />\n))\nAlertDialogOverlay.displayName = AlertDialogPrimitive.Overlay.displayName\n\nconst AlertDialogContent = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPortal>\n    <AlertDialogOverlay />\n    <AlertDialogPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg\",\n        className\n      )}\n      {...props}\n    />\n  </AlertDialogPortal>\n))\nAlertDialogContent.displayName = AlertDialogPrimitive.Content.displayName\n\nconst AlertDialogHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-2 text-center sm:text-left\",\n      className\n    )}\n    {...props}\n  />\n)\nAlertDialogHeader.displayName = \"AlertDialogHeader\"\n\nconst AlertDialogFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\n      className\n    )}\n    {...props}\n  />\n)\nAlertDialogFooter.displayName = \"AlertDialogFooter\"\n\nconst AlertDialogTitle = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Title\n    ref={ref}\n    className={cn(\"text-lg font-semibold\", className)}\n    {...props}\n  />\n))\nAlertDialogTitle.displayName = AlertDialogPrimitive.Title.displayName\n\nconst AlertDialogDescription = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nAlertDialogDescription.displayName =\n  AlertDialogPrimitive.Description.displayName\n\nconst AlertDialogAction = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Action>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Action>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Action\n    ref={ref}\n    className={cn(buttonVariants(), className)}\n    {...props}\n  />\n))\nAlertDialogAction.displayName = AlertDialogPrimitive.Action.displayName\n\nconst AlertDialogCancel = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Cancel>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Cancel>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Cancel\n    ref={ref}\n    className={cn(\n      buttonVariants({ variant: \"outline\" }),\n      \"mt-2 sm:mt-0\",\n      className\n    )}\n    {...props}\n  />\n))\nAlertDialogCancel.displayName = AlertDialogPrimitive.Cancel.displayName\n\nexport {\n  AlertDialog,\n  AlertDialogPortal,\n  AlertDialogOverlay,\n  AlertDialogTrigger,\n  AlertDialogContent,\n  AlertDialogHeader,\n  AlertDialogFooter,\n  AlertDialogTitle,\n  AlertDialogDescription,\n  AlertDialogAction,\n  AlertDialogCancel,\n}\n","path":null,"size_bytes":4420,"size_tokens":null},"attached_assets/slider_1763671095568.tsx":{"content":"import * as React from \"react\"\nimport * as SliderPrimitive from \"@radix-ui/react-slider\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Slider = React.forwardRef<\n  React.ElementRef<typeof SliderPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof SliderPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <SliderPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative flex w-full touch-none select-none items-center\",\n      className\n    )}\n    {...props}\n  >\n    <SliderPrimitive.Track className=\"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary\">\n      <SliderPrimitive.Range className=\"absolute h-full bg-primary\" />\n    </SliderPrimitive.Track>\n    <SliderPrimitive.Thumb className=\"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50\" />\n  </SliderPrimitive.Root>\n))\nSlider.displayName = SliderPrimitive.Root.displayName\n\nexport { Slider }\n","path":null,"size_bytes":1077,"size_tokens":null},"tailwind.config.ts":{"content":"import type { Config } from \"tailwindcss\";\n\nexport default {\n  darkMode: [\"class\"],\n  content: [\"./client/index.html\", \"./client/src/**/*.{js,jsx,ts,tsx}\"],\n  theme: {\n    extend: {\n      borderRadius: {\n        lg: \".5625rem\", /* 9px */\n        md: \".375rem\", /* 6px */\n        sm: \".1875rem\", /* 3px */\n      },\n      colors: {\n        // Flat / base colors (regular buttons)\n        background: \"hsl(var(--background) / <alpha-value>)\",\n        foreground: \"hsl(var(--foreground) / <alpha-value>)\",\n        border: \"hsl(var(--border) / <alpha-value>)\",\n        input: \"hsl(var(--input) / <alpha-value>)\",\n        card: {\n          DEFAULT: \"hsl(var(--card) / <alpha-value>)\",\n          foreground: \"hsl(var(--card-foreground) / <alpha-value>)\",\n          border: \"hsl(var(--card-border) / <alpha-value>)\",\n        },\n        popover: {\n          DEFAULT: \"hsl(var(--popover) / <alpha-value>)\",\n          foreground: \"hsl(var(--popover-foreground) / <alpha-value>)\",\n          border: \"hsl(var(--popover-border) / <alpha-value>)\",\n        },\n        primary: {\n          DEFAULT: \"hsl(var(--primary) / <alpha-value>)\",\n          foreground: \"hsl(var(--primary-foreground) / <alpha-value>)\",\n          border: \"var(--primary-border)\",\n        },\n        secondary: {\n          DEFAULT: \"hsl(var(--secondary) / <alpha-value>)\",\n          foreground: \"hsl(var(--secondary-foreground) / <alpha-value>)\",\n          border: \"var(--secondary-border)\",\n        },\n        muted: {\n          DEFAULT: \"hsl(var(--muted) / <alpha-value>)\",\n          foreground: \"hsl(var(--muted-foreground) / <alpha-value>)\",\n          border: \"var(--muted-border)\",\n        },\n        accent: {\n          DEFAULT: \"hsl(var(--accent) / <alpha-value>)\",\n          foreground: \"hsl(var(--accent-foreground) / <alpha-value>)\",\n          border: \"var(--accent-border)\",\n        },\n        destructive: {\n          DEFAULT: \"hsl(var(--destructive) / <alpha-value>)\",\n          foreground: \"hsl(var(--destructive-foreground) / <alpha-value>)\",\n          border: \"var(--destructive-border)\",\n        },\n        ring: \"hsl(var(--ring) / <alpha-value>)\",\n        chart: {\n          \"1\": \"hsl(var(--chart-1) / <alpha-value>)\",\n          \"2\": \"hsl(var(--chart-2) / <alpha-value>)\",\n          \"3\": \"hsl(var(--chart-3) / <alpha-value>)\",\n          \"4\": \"hsl(var(--chart-4) / <alpha-value>)\",\n          \"5\": \"hsl(var(--chart-5) / <alpha-value>)\",\n        },\n        sidebar: {\n          ring: \"hsl(var(--sidebar-ring) / <alpha-value>)\",\n          DEFAULT: \"hsl(var(--sidebar) / <alpha-value>)\",\n          foreground: \"hsl(var(--sidebar-foreground) / <alpha-value>)\",\n          border: \"hsl(var(--sidebar-border) / <alpha-value>)\",\n        },\n        \"sidebar-primary\": {\n          DEFAULT: \"hsl(var(--sidebar-primary) / <alpha-value>)\",\n          foreground: \"hsl(var(--sidebar-primary-foreground) / <alpha-value>)\",\n          border: \"var(--sidebar-primary-border)\",\n        },\n        \"sidebar-accent\": {\n          DEFAULT: \"hsl(var(--sidebar-accent) / <alpha-value>)\",\n          foreground: \"hsl(var(--sidebar-accent-foreground) / <alpha-value>)\",\n          border: \"var(--sidebar-accent-border)\"\n        },\n        status: {\n          online: \"rgb(34 197 94)\",\n          away: \"rgb(245 158 11)\",\n          busy: \"rgb(239 68 68)\",\n          offline: \"rgb(156 163 175)\",\n        },\n      },\n      fontFamily: {\n        sans: [\"var(--font-sans)\"],\n        serif: [\"var(--font-serif)\"],\n        mono: [\"var(--font-mono)\"],\n      },\n      keyframes: {\n        \"accordion-down\": {\n          from: { height: \"0\" },\n          to: { height: \"var(--radix-accordion-content-height)\" },\n        },\n        \"accordion-up\": {\n          from: { height: \"var(--radix-accordion-content-height)\" },\n          to: { height: \"0\" },\n        },\n      },\n      animation: {\n        \"accordion-down\": \"accordion-down 0.2s ease-out\",\n        \"accordion-up\": \"accordion-up 0.2s ease-out\",\n      },\n    },\n  },\n  plugins: [require(\"tailwindcss-animate\"), require(\"@tailwindcss/typography\")],\n} satisfies Config;\n","path":null,"size_bytes":4050,"size_tokens":null},"attached_assets/sheet_1763671095566.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as SheetPrimitive from \"@radix-ui/react-dialog\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\nimport { X } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Sheet = SheetPrimitive.Root\n\nconst SheetTrigger = SheetPrimitive.Trigger\n\nconst SheetClose = SheetPrimitive.Close\n\nconst SheetPortal = SheetPrimitive.Portal\n\nconst SheetOverlay = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <SheetPrimitive.Overlay\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n    ref={ref}\n  />\n))\nSheetOverlay.displayName = SheetPrimitive.Overlay.displayName\n\nconst sheetVariants = cva(\n  \"fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500\",\n  {\n    variants: {\n      side: {\n        top: \"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top\",\n        bottom:\n          \"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom\",\n        left: \"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm\",\n        right:\n          \"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm\",\n      },\n    },\n    defaultVariants: {\n      side: \"right\",\n    },\n  }\n)\n\ninterface SheetContentProps\n  extends React.ComponentPropsWithoutRef<typeof SheetPrimitive.Content>,\n    VariantProps<typeof sheetVariants> {}\n\nconst SheetContent = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Content>,\n  SheetContentProps\n>(({ side = \"right\", className, children, ...props }, ref) => (\n  <SheetPortal>\n    <SheetOverlay />\n    <SheetPrimitive.Content\n      ref={ref}\n      className={cn(sheetVariants({ side }), className)}\n      {...props}\n    >\n      {children}\n      <SheetPrimitive.Close className=\"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary\">\n        <X className=\"h-4 w-4\" />\n        <span className=\"sr-only\">Close</span>\n      </SheetPrimitive.Close>\n    </SheetPrimitive.Content>\n  </SheetPortal>\n))\nSheetContent.displayName = SheetPrimitive.Content.displayName\n\nconst SheetHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-2 text-center sm:text-left\",\n      className\n    )}\n    {...props}\n  />\n)\nSheetHeader.displayName = \"SheetHeader\"\n\nconst SheetFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\n      className\n    )}\n    {...props}\n  />\n)\nSheetFooter.displayName = \"SheetFooter\"\n\nconst SheetTitle = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <SheetPrimitive.Title\n    ref={ref}\n    className={cn(\"text-lg font-semibold text-foreground\", className)}\n    {...props}\n  />\n))\nSheetTitle.displayName = SheetPrimitive.Title.displayName\n\nconst SheetDescription = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <SheetPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nSheetDescription.displayName = SheetPrimitive.Description.displayName\n\nexport {\n  Sheet,\n  SheetPortal,\n  SheetOverlay,\n  SheetTrigger,\n  SheetClose,\n  SheetContent,\n  SheetHeader,\n  SheetFooter,\n  SheetTitle,\n  SheetDescription,\n}\n","path":null,"size_bytes":4281,"size_tokens":null},"attached_assets/collapsible_1763670951632.tsx":{"content":"\"use client\"\n\nimport * as CollapsiblePrimitive from \"@radix-ui/react-collapsible\"\n\nconst Collapsible = CollapsiblePrimitive.Root\n\nconst CollapsibleTrigger = CollapsiblePrimitive.CollapsibleTrigger\n\nconst CollapsibleContent = CollapsiblePrimitive.CollapsibleContent\n\nexport { Collapsible, CollapsibleTrigger, CollapsibleContent }\n","path":null,"size_bytes":329,"size_tokens":null},"client/src/index.css":{"content":"@tailwind base;\n@tailwind components;\n@tailwind utilities;\n\n/* LIGHT MODE */\n:root {\n  --button-outline: rgba(0,0,0, .10);\n  --badge-outline: rgba(0,0,0, .05);\n  --opaque-button-border-intensity: -8;\n  --elevate-1: rgba(0,0,0, .03);\n  --elevate-2: rgba(0,0,0, .08);\n  --background: 0 0% 100%;\n  --foreground: 0 0% 9%;\n  --border: 0 0% 89%;\n  --card: 0 0% 98%;\n  --card-foreground: 0 0% 9%;\n  --card-border: 0 0% 94%;\n  --sidebar: 0 0% 96%;\n  --sidebar-foreground: 0 0% 9%;\n  --sidebar-border: 0 0% 92%;\n  --sidebar-primary: 217 91% 60%;\n  --sidebar-primary-foreground: 0 0% 98%;\n  --sidebar-accent: 0 0% 92%;\n  --sidebar-accent-foreground: 0 0% 9%;\n  --sidebar-ring: 217 91% 60%;\n  --popover: 0 0% 94%;\n  --popover-foreground: 0 0% 9%;\n  --popover-border: 0 0% 90%;\n  --primary: 217 91% 60%;\n  --primary-foreground: 0 0% 98%;\n  --secondary: 0 0% 90%;\n  --secondary-foreground: 0 0% 9%;\n  --muted: 0 0% 92%;\n  --muted-foreground: 0 0% 35%;\n  --accent: 210 8% 93%;\n  --accent-foreground: 0 0% 9%;\n  --destructive: 0 84% 60%;\n  --destructive-foreground: 0 0% 98%;\n  --input: 0 0% 70%;\n  --ring: 217 91% 60%;\n  --chart-1: 217 91% 45%;\n  --chart-2: 173 58% 39%;\n  --chart-3: 197 37% 24%;\n  --chart-4: 43 74% 49%;\n  --chart-5: 27 87% 67%;\n  --font-sans: Open Sans, sans-serif;\n  --font-serif: Georgia, serif;\n  --font-mono: Menlo, monospace;\n  --radius: .5rem;\n  --shadow-2xs: 0px 2px 0px 0px hsl(0 0% 0% / 0.00);\n  --shadow-xs: 0px 2px 0px 0px hsl(0 0% 0% / 0.00);\n  --shadow-sm: 0px 2px 0px 0px hsl(0 0% 0% / 0.00), 0px 1px 2px -1px hsl(0 0% 0% / 0.00);\n  --shadow: 0px 2px 0px 0px hsl(0 0% 0% / 0.00), 0px 1px 2px -1px hsl(0 0% 0% / 0.00);\n  --shadow-md: 0px 2px 0px 0px hsl(0 0% 0% / 0.00), 0px 2px 4px -1px hsl(0 0% 0% / 0.00);\n  --shadow-lg: 0px 2px 0px 0px hsl(0 0% 0% / 0.00), 0px 4px 6px -1px hsl(0 0% 0% / 0.00);\n  --shadow-xl: 0px 2px 0px 0px hsl(0 0% 0% / 0.00), 0px 8px 10px -1px hsl(0 0% 0% / 0.00);\n  --shadow-2xl: 0px 2px 0px 0px hsl(0 0% 0% / 0.00);\n  --tracking-normal: 0em;\n  --spacing: 0.25rem;\n\n/* Fallback for older browsers */\n  --sidebar-primary-border: hsl(var(--sidebar-primary));\n  --sidebar-primary-border: hsl(from hsl(var(--sidebar-primary)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --sidebar-accent-border: hsl(var(--sidebar-accent));\n  --sidebar-accent-border: hsl(from hsl(var(--sidebar-accent)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --primary-border: hsl(var(--primary));\n  --primary-border: hsl(from hsl(var(--primary)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --secondary-border: hsl(var(--secondary));\n  --secondary-border: hsl(from hsl(var(--secondary)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --muted-border: hsl(var(--muted));\n  --muted-border: hsl(from hsl(var(--muted)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --accent-border: hsl(var(--accent));\n  --accent-border: hsl(from hsl(var(--accent)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --destructive-border: hsl(var(--destructive));\n  --destructive-border: hsl(from hsl(var(--destructive)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n}\n\n.dark {\n  --button-outline: rgba(255,255,255, .10);\n  --badge-outline: rgba(255,255,255, .05);\n  --opaque-button-border-intensity: 9;\n  --elevate-1: rgba(255,255,255, .04);\n  --elevate-2: rgba(255,255,255, .09);\n  --background: 0 0% 9%;\n  --foreground: 0 0% 98%;\n  --border: 0 0% 18%;\n  --card: 0 0% 11%;\n  --card-foreground: 0 0% 98%;\n  --card-border: 0 0% 14%;\n  --sidebar: 0 0% 13%;\n  --sidebar-foreground: 0 0% 98%;\n  --sidebar-border: 0 0% 16%;\n  --sidebar-primary: 217 91% 60%;\n  --sidebar-primary-foreground: 0 0% 98%;\n  --sidebar-accent: 0 0% 16%;\n  --sidebar-accent-foreground: 0 0% 98%;\n  --sidebar-ring: 217 91% 60%;\n  --popover: 0 0% 15%;\n  --popover-foreground: 0 0% 98%;\n  --popover-border: 0 0% 18%;\n  --primary: 217 91% 60%;\n  --primary-foreground: 0 0% 98%;\n  --secondary: 0 0% 18%;\n  --secondary-foreground: 0 0% 98%;\n  --muted: 0 0% 17%;\n  --muted-foreground: 0 0% 65%;\n  --accent: 210 8% 16%;\n  --accent-foreground: 0 0% 98%;\n  --destructive: 0 84% 60%;\n  --destructive-foreground: 0 0% 98%;\n  --input: 0 0% 30%;\n  --ring: 217 91% 60%;\n  --chart-1: 217 91% 65%;\n  --chart-2: 173 58% 60%;\n  --chart-3: 197 37% 55%;\n  --chart-4: 43 74% 65%;\n  --chart-5: 27 87% 70%;\n  --shadow-2xs: 0px 2px 0px 0px hsl(0 0% 0% / 0.00);\n  --shadow-xs: 0px 2px 0px 0px hsl(0 0% 0% / 0.00);\n  --shadow-sm: 0px 2px 0px 0px hsl(0 0% 0% / 0.00), 0px 1px 2px -1px hsl(0 0% 0% / 0.00);\n  --shadow: 0px 2px 0px 0px hsl(0 0% 0% / 0.00), 0px 1px 2px -1px hsl(0 0% 0% / 0.00);\n  --shadow-md: 0px 2px 0px 0px hsl(0 0% 0% / 0.00), 0px 2px 4px -1px hsl(0 0% 0% / 0.00);\n  --shadow-lg: 0px 2px 0px 0px hsl(0 0% 0% / 0.00), 0px 4px 6px -1px hsl(0 0% 0% / 0.00);\n  --shadow-xl: 0px 2px 0px 0px hsl(0 0% 0% / 0.00), 0px 8px 10px -1px hsl(0 0% 0% / 0.00);\n  --shadow-2xl: 0px 2px 0px 0px hsl(0 0% 0% / 0.00);\n\n/* Fallback for older browsers */\n  --sidebar-primary-border: hsl(var(--sidebar-primary));\n  --sidebar-primary-border: hsl(from hsl(var(--sidebar-primary)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --sidebar-accent-border: hsl(var(--sidebar-accent));\n  --sidebar-accent-border: hsl(from hsl(var(--sidebar-accent)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --primary-border: hsl(var(--primary));\n  --primary-border: hsl(from hsl(var(--primary)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --secondary-border: hsl(var(--secondary));\n  --secondary-border: hsl(from hsl(var(--secondary)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --muted-border: hsl(var(--muted));\n  --muted-border: hsl(from hsl(var(--muted)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --accent-border: hsl(var(--accent));\n  --accent-border: hsl(from hsl(var(--accent)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --destructive-border: hsl(var(--destructive));\n  --destructive-border: hsl(from hsl(var(--destructive)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n}\n\n@layer base {\n  * {\n    @apply border-border;\n  }\n\n  body {\n    @apply font-sans antialiased bg-background text-foreground;\n  }\n}\n\n/**\n * Using the elevate system.\n * Automatic contrast adjustment.\n *\n * <element className=\"hover-elevate\" />\n * <element className=\"active-elevate-2\" />\n *\n * // Using the tailwind utility when a data attribute is \"on\"\n * <element className=\"toggle-elevate data-[state=on]:toggle-elevated\" />\n * // Or manually controlling the toggle state\n * <element className=\"toggle-elevate toggle-elevated\" />\n *\n * Elevation systems have to handle many states.\n * - not-hovered, vs. hovered vs. active  (three mutually exclusive states)\n * - toggled or not\n * - focused or not (this is not handled with these utilities)\n *\n * Even without handling focused or not, this is six possible combinations that\n * need to be distinguished from eachother visually.\n */\n@layer utilities {\n\n  /* Hide ugly search cancel button in Chrome until we can style it properly */\n  input[type=\"search\"]::-webkit-search-cancel-button {\n    @apply hidden;\n  }\n\n  /* Placeholder styling for contentEditable div */\n  [contenteditable][data-placeholder]:empty::before {\n    content: attr(data-placeholder);\n    color: hsl(var(--muted-foreground));\n    pointer-events: none;\n  }\n\n  /* .no-default-hover-elevate/no-default-active-elevate is an escape hatch so consumers of\n   * buttons/badges can remove the automatic brightness adjustment on interactions\n   * and program their own. */\n  .no-default-hover-elevate {}\n\n  .no-default-active-elevate {}\n\n\n  /**\n   * Toggleable backgrounds go behind the content. Hoverable/active goes on top.\n   * This way they can stack/compound. Both will overlap the parent's borders!\n   * So borders will be automatically adjusted both on toggle, and hover/active,\n   * and they will be compounded.\n   */\n  .toggle-elevate::before,\n  .toggle-elevate-2::before {\n    content: \"\";\n    pointer-events: none;\n    position: absolute;\n    inset: 0px;\n    /*border-radius: inherit;   match rounded corners */\n    border-radius: inherit;\n    z-index: -1;\n    /* sits behind content but above backdrop */\n  }\n\n  .toggle-elevate.toggle-elevated::before {\n    background-color: var(--elevate-2);\n  }\n\n  /* If there's a 1px border, adjust the inset so that it covers that parent's border */\n  .border.toggle-elevate::before {\n    inset: -1px;\n  }\n\n  /* Does not work on elements with overflow:hidden! */\n  .hover-elevate:not(.no-default-hover-elevate),\n  .active-elevate:not(.no-default-active-elevate),\n  .hover-elevate-2:not(.no-default-hover-elevate),\n  .active-elevate-2:not(.no-default-active-elevate) {\n    position: relative;\n    z-index: 0;\n  }\n\n  .hover-elevate:not(.no-default-hover-elevate)::after,\n  .active-elevate:not(.no-default-active-elevate)::after,\n  .hover-elevate-2:not(.no-default-hover-elevate)::after,\n  .active-elevate-2:not(.no-default-active-elevate)::after {\n    content: \"\";\n    pointer-events: none;\n    position: absolute;\n    inset: 0px;\n    /*border-radius: inherit;   match rounded corners */\n    border-radius: inherit;\n    z-index: 999;\n    /* sits in front of content */\n  }\n\n  .hover-elevate:hover:not(.no-default-hover-elevate)::after,\n  .active-elevate:active:not(.no-default-active-elevate)::after {\n    background-color: var(--elevate-1);\n  }\n\n  .hover-elevate-2:hover:not(.no-default-hover-elevate)::after,\n  .active-elevate-2:active:not(.no-default-active-elevate)::after {\n    background-color: var(--elevate-2);\n  }\n\n  /* If there's a 1px border, adjust the inset so that it covers that parent's border */\n  .border.hover-elevate:not(.no-hover-interaction-elevate)::after,\n  .border.active-elevate:not(.no-active-interaction-elevate)::after,\n  .border.hover-elevate-2:not(.no-hover-interaction-elevate)::after,\n  .border.active-elevate-2:not(.no-active-interaction-elevate)::after,\n  .border.hover-elevate:not(.no-hover-interaction-elevate)::after {\n    inset: -1px;\n  }\n}\n","path":null,"size_bytes":10528,"size_tokens":null},"client/src/components/ui/button.tsx":{"content":"import * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst buttonVariants = cva(\n  \"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\" +\n  \" hover-elevate active-elevate-2\",\n  {\n    variants: {\n      variant: {\n        default:\n          \"bg-primary text-primary-foreground border border-primary-border\",\n        destructive:\n          \"bg-destructive text-destructive-foreground border border-destructive-border\",\n        outline:\n          // Shows the background color of whatever card / sidebar / accent background it is inside of.\n          // Inherits the current text color.\n          \" border [border-color:var(--button-outline)]  shadow-xs active:shadow-none \",\n        secondary: \"border bg-secondary text-secondary-foreground border border-secondary-border \",\n        // Add a transparent border so that when someone toggles a border on later, it doesn't shift layout/size.\n        ghost: \"border border-transparent\",\n      },\n      // Heights are set as \"min\" heights, because sometimes Ai will place large amount of content\n      // inside buttons. With a min-height they will look appropriate with small amounts of content,\n      // but will expand to fit large amounts of content.\n      size: {\n        default: \"min-h-9 px-4 py-2\",\n        sm: \"min-h-8 rounded-md px-3 text-xs\",\n        lg: \"min-h-10 rounded-md px-8\",\n        icon: \"h-9 w-9\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  },\n)\n\nexport interface ButtonProps\n  extends React.ButtonHTMLAttributes<HTMLButtonElement>,\n    VariantProps<typeof buttonVariants> {\n  asChild?: boolean\n}\n\nconst Button = React.forwardRef<HTMLButtonElement, ButtonProps>(\n  ({ className, variant, size, asChild = false, ...props }, ref) => {\n    const Comp = asChild ? Slot : \"button\"\n    return (\n      <Comp\n        className={cn(buttonVariants({ variant, size, className }))}\n        ref={ref}\n        {...props}\n      />\n    )\n  },\n)\nButton.displayName = \"Button\"\n\nexport { Button, buttonVariants }\n","path":null,"size_bytes":2359,"size_tokens":null},"attached_assets/LoginForm_1763670896225.tsx":{"content":"\nimport { useState } from \"react\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Alert, AlertDescription } from \"@/components/ui/alert\";\nimport { Eye, EyeOff, Lock, User } from \"lucide-react\";\n\ninterface LoginFormProps {\n  onLogin: (username: string, password: string) => void;\n  isLoading?: boolean;\n  error?: string;\n}\n\nexport default function LoginForm({ onLogin, isLoading = false, error }: LoginFormProps) {\n  const [username, setUsername] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [showPassword, setShowPassword] = useState(false);\n\n  const handleSubmit = (e: React.FormEvent) => {\n    e.preventDefault();\n    onLogin(username, password);\n  };\n\n  return (\n    <div className=\"min-h-screen flex items-center justify-center p-5 relative overflow-hidden\" \n         style={{\n           background: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)'\n         }}>\n      {/* Animated background elements */}\n      <div className=\"absolute inset-0 overflow-hidden\">\n        <div className=\"absolute -top-40 -right-40 w-80 h-80 bg-white/10 rounded-full blur-3xl animate-pulse\"></div>\n        <div className=\"absolute -bottom-40 -left-40 w-80 h-80 bg-white/10 rounded-full blur-3xl animate-pulse delay-1000\"></div>\n      </div>\n\n      <Card className=\"w-full max-w-md relative z-10 shadow-2xl border-0\">\n        <CardHeader className=\"text-center space-y-6 pb-8\">\n          <div className=\"flex justify-center\">\n            <div className=\"w-20 h-20 rounded-2xl bg-gradient-to-br from-[#667eea] to-[#764ba2] flex items-center justify-center text-white font-bold text-2xl shadow-lg transform hover:scale-105 transition-transform\">\n              OMG\n            </div>\n          </div>\n          <div>\n            <CardTitle className=\"text-3xl font-bold bg-gradient-to-r from-[#667eea] to-[#764ba2] bg-clip-text text-transparent\">\n              Welcome Back\n            </CardTitle>\n            <CardDescription className=\"text-base mt-2\">\n              Sign in to access your inventory dashboard\n            </CardDescription>\n          </div>\n        </CardHeader>\n        <CardContent className=\"space-y-6\">\n          <form onSubmit={handleSubmit} className=\"space-y-5\">\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"username\" className=\"text-sm font-semibold\">Username</Label>\n              <div className=\"relative\">\n                <User className=\"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-muted-foreground\" />\n                <Input\n                  id=\"username\"\n                  type=\"text\"\n                  value={username}\n                  onChange={(e) => setUsername(e.target.value)}\n                  placeholder=\"Enter your username\"\n                  className=\"pl-10 h-12 border-2 focus:border-[#667eea]\"\n                  required\n                  data-testid=\"input-username\"\n                />\n              </div>\n            </div>\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"password\" className=\"text-sm font-semibold\">Password</Label>\n              <div className=\"relative\">\n                <Lock className=\"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-muted-foreground\" />\n                <Input\n                  id=\"password\"\n                  type={showPassword ? \"text\" : \"password\"}\n                  value={password}\n                  onChange={(e) => setPassword(e.target.value)}\n                  placeholder=\"Enter your password\"\n                  className=\"pl-10 pr-10 h-12 border-2 focus:border-[#667eea]\"\n                  required\n                  data-testid=\"input-password\"\n                />\n                <button\n                  type=\"button\"\n                  onClick={() => setShowPassword(!showPassword)}\n                  className=\"absolute right-3 top-1/2 -translate-y-1/2 text-muted-foreground hover:text-foreground\"\n                >\n                  {showPassword ? <EyeOff className=\"w-5 h-5\" /> : <Eye className=\"w-5 h-5\" />}\n                </button>\n              </div>\n            </div>\n            {error && (\n              <Alert variant=\"destructive\" data-testid=\"alert-error\" className=\"border-2\">\n                <AlertDescription className=\"font-medium\">{error}</AlertDescription>\n              </Alert>\n            )}\n            <Button\n              type=\"submit\"\n              className=\"w-full h-12 bg-gradient-to-r from-[#667eea] to-[#764ba2] text-base font-semibold shadow-lg hover:shadow-xl transition-all\"\n              disabled={isLoading}\n              data-testid=\"button-login\"\n            >\n              {isLoading ? (\n                <div className=\"flex items-center gap-2\">\n                  <div className=\"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin\"></div>\n                  Signing in...\n                </div>\n              ) : (\n                \"Sign In\"\n              )}\n            </Button>\n          </form>\n\n          <div className=\"mt-4 p-4 bg-gradient-to-r from-blue-50 to-indigo-50 border-2 border-blue-100 rounded-xl text-center\">\n            <p className=\"text-sm text-blue-900 font-medium\">\n              ðŸ”’ Secure Authentication\n            </p>\n            <p className=\"text-xs text-blue-700 mt-1\">\n              Your credentials are encrypted and protected\n            </p>\n          </div>\n        </CardContent>\n      </Card>\n    </div>\n  );\n}\n","path":null,"size_bytes":5598,"size_tokens":null},"client/src/pages/ActivityLogs.tsx":{"content":"import { useState } from \"react\";\nimport { useQuery } from \"@tanstack/react-query\";\nimport { Card, CardContent, CardHeader } from \"@/components/ui/card\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from \"@/components/ui/tabs\";\nimport { Dialog, DialogContent, DialogHeader, DialogTitle } from \"@/components/ui/dialog\";\nimport { Button } from \"@/components/ui/button\";\nimport { format } from \"date-fns\";\nimport { api, type ActivityLog } from \"@/lib/api\";\nimport { Clock, User, Package, ArrowRight, History, Trash2, RotateCcw, FileEdit } from \"lucide-react\";\nimport InventoryHeader from \"@/components/InventoryHeader\";\nimport DateRangeFilter from \"@/components/DateRangeFilter\";\nimport type { Language } from \"@/lib/translations\";\nimport { useTranslation } from \"@/lib/translations\";\n\ninterface ActivityLogsProps {\n  userName: string;\n  userRole: string;\n  onLogout: () => void;\n  onNavigateToInventory?: () => void;\n  onNavigateToReservations?: () => void;\n  onNavigateToQRCodes?: () => void;\n  onNavigateToMaintenance?: () => void;\n  onNavigateToReports?: () => void;\n  currentLanguage?: Language;\n  onLanguageChange?: (lang: Language) => void;\n}\n\nexport default function ActivityLogs({ userName, userRole, onLogout, onNavigateToInventory, onNavigateToReservations, onNavigateToQRCodes, onNavigateToMaintenance, onNavigateToReports, currentLanguage = 'en', onLanguageChange }: ActivityLogsProps) {\n  const lang: Language = currentLanguage || 'en';\n  const t = useTranslation(lang);\n  const [selectedItem, setSelectedItem] = useState<string | null>(null);\n  const [selectedReservation, setSelectedReservation] = useState<string | null>(null);\n  const [dateRange, setDateRange] = useState<{ startDate: Date; endDate: Date } | null>(null);\n\n  const buildQueryKey = () => {\n    const key = ['/api/activity-logs'];\n    if (dateRange) {\n      key.push(dateRange.startDate.toISOString(), dateRange.endDate.toISOString());\n    }\n    return key;\n  };\n\n  const { data: logs = [], isLoading, error } = useQuery({\n    queryKey: buildQueryKey(),\n    queryFn: async () => {\n      const params = new URLSearchParams();\n      if (dateRange) {\n        params.append('startDate', dateRange.startDate.toISOString());\n        params.append('endDate', dateRange.endDate.toISOString());\n      }\n      const url = `/api/activity-logs${params.toString() ? '?' + params.toString() : ''}`;\n      const response = await fetch(url);\n      if (!response.ok) throw new Error('Failed to fetch logs');\n      return response.json();\n    },\n    refetchInterval: 5000,\n  });\n\n  const { data: editHistory = [] } = useQuery({\n    queryKey: ['/api/item-edit-history', selectedItem],\n    queryFn: () => fetch(`/api/item-edit-history/${selectedItem}`).then(r => r.json()),\n    enabled: !!selectedItem,\n  });\n\n  const { data: statusHistory = [] } = useQuery({\n    queryKey: ['/api/reservation-status-history', selectedReservation],\n    queryFn: () => fetch(`/api/reservation-status-history/${selectedReservation}`).then(r => r.json()),\n    enabled: !!selectedReservation,\n  });\n\n  const getActionColor = (action: string) => {\n    if (action.includes('Checked Out') || action.includes('In Use')) return 'bg-blue-500';\n    if (action.includes('Checked In') || action.includes('Available')) return 'bg-green-500';\n    if (action.includes('Approved')) return 'bg-emerald-500';\n    if (action.includes('Rejected')) return 'bg-red-500';\n    if (action.includes('Reserved')) return 'bg-amber-500';\n    if (action.includes('Deleted')) return 'bg-gray-500';\n    if (action.includes('Restored')) return 'bg-purple-500';\n    return 'bg-gray-500';\n  };\n\n  return (\n    <div className=\"min-h-screen bg-background\" dir={lang === 'ar' ? 'rtl' : 'ltr'}>\n      <InventoryHeader\n        userName={userName}\n        userRole={userRole}\n        currentView=\"inventory\"\n        onViewChange={() => onNavigateToInventory?.()}\n        onLogout={onLogout}\n        onNavigateToReservations={onNavigateToReservations}\n        onNavigateToActivityLogs={() => {}}\n        onNavigateToQRCodes={onNavigateToQRCodes}\n        onNavigateToMaintenance={onNavigateToMaintenance}\n        onNavigateToReports={onNavigateToReports}\n        hideViewToggle={true}\n        language={lang}\n        onLanguageChange={onLanguageChange || (() => {})}\n      />\n\n      <main className=\"max-w-[1400px] mx-auto px-5 py-8\">\n        <div className=\"mb-6\">\n          <h1 className=\"text-3xl font-bold\">{t('activityLogHistory')}</h1>\n          <p className=\"text-muted-foreground\">{t('completeAuditTrail')}</p>\n        </div>\n\n        <div className=\"mb-6 flex items-center gap-4\">\n          <DateRangeFilter\n            onDateRangeChange={(range) => setDateRange(range)}\n          />\n        </div>\n\n        <Tabs defaultValue=\"activity\" className=\"space-y-4\">\n          <TabsList>\n            <TabsTrigger value=\"activity\">\n              <Package className=\"w-4 h-4 mr-2\" />\n              {t('activityLogHistory')}\n            </TabsTrigger>\n          </TabsList>\n\n          <TabsContent value=\"activity\" className=\"space-y-4\">\n            {isLoading ? (\n              <div className=\"text-center py-12\">\n                <p className=\"text-muted-foreground\">{t('loadingActivityLogs')}</p>\n              </div>\n            ) : error ? (\n              <div className=\"text-center py-12\">\n                <p className=\"text-red-500\">{t('errorLoadingLogs')}</p>\n              </div>\n            ) : logs.length === 0 ? (\n              <div className=\"text-center py-12\">\n                <p className=\"text-muted-foreground\">{t('noActivityLogs')}</p>\n              </div>\n            ) : (\n              <div className=\"space-y-4\">\n                {logs.map((log: ActivityLog) => (\n                  <Card key={log.id} className=\"hover:shadow-md transition-shadow\">\n                    <CardHeader className=\"pb-3\">\n                      <div className=\"flex items-start justify-between gap-4\">\n                        <div className=\"flex-1\">\n                          <div className=\"flex items-center gap-2 mb-2\">\n                            <Package className=\"w-4 h-4 text-muted-foreground\" />\n                            <h3 className=\"font-semibold\">{log.itemName}</h3>\n                            <Badge variant=\"outline\" className=\"text-xs\">\n                              {log.itemBarcode}\n                            </Badge>\n                            <Button\n                              variant=\"ghost\"\n                              size=\"sm\"\n                              onClick={() => setSelectedItem(log.itemId)}\n                              className=\"ml-auto\"\n                            >\n                              <History className=\"w-4 h-4 mr-1\" />\n                              {t('editHistory')}\n                            </Button>\n                          </div>\n                          <div className=\"flex items-center gap-2 text-sm text-muted-foreground flex-wrap\">\n                            <User className=\"w-4 h-4\" />\n                            <span>{log.userName}</span>\n                            <Badge variant=\"secondary\" className=\"text-xs\">\n                              {log.userRole}\n                            </Badge>\n                            {log.userDepartment && (\n                              <Badge variant=\"outline\" className=\"text-xs\">\n                                {log.userDepartment}\n                              </Badge>\n                            )}\n                          </div>\n                        </div>\n                        <div className=\"text-right\">\n                          <Badge className={`${getActionColor(log.action)} text-white`}>\n                            {log.action}\n                          </Badge>\n                          <div className=\"flex items-center gap-1 text-xs text-muted-foreground mt-2\">\n                            <Clock className=\"w-3 h-3\" />\n                            <span>{format(new Date(log.timestamp), 'MMM dd, yyyy HH:mm')}</span>\n                          </div>\n                        </div>\n                      </div>\n                    </CardHeader>\n                    <CardContent>\n                      <div className=\"flex items-center gap-3 text-sm\">\n                        {log.oldStatus && (\n                          <>\n                            <Badge variant=\"outline\">{log.oldStatus}</Badge>\n                            <ArrowRight className=\"w-4 h-4 text-muted-foreground\" />\n                          </>\n                        )}\n                        {log.newStatus && (\n                          <Badge variant=\"outline\">{log.newStatus}</Badge>\n                        )}\n                      </div>\n                      {log.notes && (\n                        <p className=\"text-sm text-muted-foreground mt-2\">{log.notes}</p>\n                      )}\n                    </CardContent>\n                  </Card>\n                ))}\n              </div>\n            )}\n          </TabsContent>\n        </Tabs>\n\n        {/* Edit History Dialog - READ ONLY */}\n        <Dialog open={!!selectedItem} onOpenChange={() => setSelectedItem(null)}>\n          <DialogContent className=\"max-w-2xl max-h-[80vh] overflow-y-auto\">\n            <DialogHeader>\n              <DialogTitle>{t('itemEditHistory')}</DialogTitle>\n            </DialogHeader>\n            <div className=\"space-y-3\">\n              {editHistory.length === 0 ? (\n                <p className=\"text-center text-muted-foreground py-8\">{t('noEditHistory')}</p>\n              ) : (\n                editHistory.map((edit: any) => (\n                  <Card key={edit.id}>\n                    <CardContent className=\"pt-4\">\n                      <div className=\"flex items-start justify-between mb-2\">\n                        <div>\n                          <Badge variant=\"outline\">{edit.fieldName}</Badge>\n                          <p className=\"text-xs text-muted-foreground mt-1\">\n                            {t('by')} {edit.userName} â€¢ {format(new Date(edit.timestamp), 'MMM dd, yyyy HH:mm')}\n                          </p>\n                        </div>\n                      </div>\n                      <div className=\"flex items-center gap-2 text-sm\">\n                        <Badge variant=\"secondary\">{edit.oldValue || 'empty'}</Badge>\n                        <ArrowRight className=\"w-4 h-4\" />\n                        <Badge variant=\"secondary\">{edit.newValue || 'empty'}</Badge>\n                      </div>\n                    </CardContent>\n                  </Card>\n                ))\n              )}\n            </div>\n          </DialogContent>\n        </Dialog>\n      </main>\n    </div>\n  );\n}","path":null,"size_bytes":10694,"size_tokens":null},"client/src/components/ui/checkbox.tsx":{"content":"import * as React from \"react\"\nimport * as CheckboxPrimitive from \"@radix-ui/react-checkbox\"\nimport { Check } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Checkbox = React.forwardRef<\n  React.ElementRef<typeof CheckboxPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof CheckboxPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <CheckboxPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground\",\n      className\n    )}\n    {...props}\n  >\n    <CheckboxPrimitive.Indicator\n      className={cn(\"flex items-center justify-center text-current\")}\n    >\n      <Check className=\"h-4 w-4\" />\n    </CheckboxPrimitive.Indicator>\n  </CheckboxPrimitive.Root>\n))\nCheckbox.displayName = CheckboxPrimitive.Root.displayName\n\nexport { Checkbox }\n","path":null,"size_bytes":1056,"size_tokens":null},"attached_assets/select_1763671095565.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as SelectPrimitive from \"@radix-ui/react-select\"\nimport { Check, ChevronDown, ChevronUp } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Select = SelectPrimitive.Root\n\nconst SelectGroup = SelectPrimitive.Group\n\nconst SelectValue = SelectPrimitive.Value\n\nconst SelectTrigger = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Trigger>\n>(({ className, children, ...props }, ref) => (\n  <SelectPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"flex h-9 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <SelectPrimitive.Icon asChild>\n      <ChevronDown className=\"h-4 w-4 opacity-50\" />\n    </SelectPrimitive.Icon>\n  </SelectPrimitive.Trigger>\n))\nSelectTrigger.displayName = SelectPrimitive.Trigger.displayName\n\nconst SelectScrollUpButton = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.ScrollUpButton>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollUpButton>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.ScrollUpButton\n    ref={ref}\n    className={cn(\n      \"flex cursor-default items-center justify-center py-1\",\n      className\n    )}\n    {...props}\n  >\n    <ChevronUp className=\"h-4 w-4\" />\n  </SelectPrimitive.ScrollUpButton>\n))\nSelectScrollUpButton.displayName = SelectPrimitive.ScrollUpButton.displayName\n\nconst SelectScrollDownButton = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.ScrollDownButton>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollDownButton>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.ScrollDownButton\n    ref={ref}\n    className={cn(\n      \"flex cursor-default items-center justify-center py-1\",\n      className\n    )}\n    {...props}\n  >\n    <ChevronDown className=\"h-4 w-4\" />\n  </SelectPrimitive.ScrollDownButton>\n))\nSelectScrollDownButton.displayName =\n  SelectPrimitive.ScrollDownButton.displayName\n\nconst SelectContent = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Content>\n>(({ className, children, position = \"popper\", ...props }, ref) => (\n  <SelectPrimitive.Portal>\n    <SelectPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]\",\n        position === \"popper\" &&\n          \"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1\",\n        className\n      )}\n      position={position}\n      {...props}\n    >\n      <SelectScrollUpButton />\n      <SelectPrimitive.Viewport\n        className={cn(\n          \"p-1\",\n          position === \"popper\" &&\n            \"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]\"\n        )}\n      >\n        {children}\n      </SelectPrimitive.Viewport>\n      <SelectScrollDownButton />\n    </SelectPrimitive.Content>\n  </SelectPrimitive.Portal>\n))\nSelectContent.displayName = SelectPrimitive.Content.displayName\n\nconst SelectLabel = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Label>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.Label\n    ref={ref}\n    className={cn(\"py-1.5 pl-8 pr-2 text-sm font-semibold\", className)}\n    {...props}\n  />\n))\nSelectLabel.displayName = SelectPrimitive.Label.displayName\n\nconst SelectItem = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Item>\n>(({ className, children, ...props }, ref) => (\n  <SelectPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <SelectPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </SelectPrimitive.ItemIndicator>\n    </span>\n\n    <SelectPrimitive.ItemText>{children}</SelectPrimitive.ItemText>\n  </SelectPrimitive.Item>\n))\nSelectItem.displayName = SelectPrimitive.Item.displayName\n\nconst SelectSeparator = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\n    {...props}\n  />\n))\nSelectSeparator.displayName = SelectPrimitive.Separator.displayName\n\nexport {\n  Select,\n  SelectGroup,\n  SelectValue,\n  SelectTrigger,\n  SelectContent,\n  SelectLabel,\n  SelectItem,\n  SelectSeparator,\n  SelectScrollUpButton,\n  SelectScrollDownButton,\n}\n","path":null,"size_bytes":5741,"size_tokens":null},"client/src/components/ui/dropdown-menu.tsx":{"content":"import * as React from \"react\"\nimport * as DropdownMenuPrimitive from \"@radix-ui/react-dropdown-menu\"\nimport { Check, ChevronRight, Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst DropdownMenu = DropdownMenuPrimitive.Root\n\nconst DropdownMenuTrigger = DropdownMenuPrimitive.Trigger\n\nconst DropdownMenuGroup = DropdownMenuPrimitive.Group\n\nconst DropdownMenuPortal = DropdownMenuPrimitive.Portal\n\nconst DropdownMenuSub = DropdownMenuPrimitive.Sub\n\nconst DropdownMenuRadioGroup = DropdownMenuPrimitive.RadioGroup\n\nconst DropdownMenuSubTrigger = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.SubTrigger>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.SubTrigger> & {\n    inset?: boolean\n  }\n>(({ className, inset, children, ...props }, ref) => (\n  <DropdownMenuPrimitive.SubTrigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <ChevronRight className=\"ml-auto\" />\n  </DropdownMenuPrimitive.SubTrigger>\n))\nDropdownMenuSubTrigger.displayName =\n  DropdownMenuPrimitive.SubTrigger.displayName\n\nconst DropdownMenuSubContent = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.SubContent>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.SubContent>\n>(({ className, ...props }, ref) => (\n  <DropdownMenuPrimitive.SubContent\n    ref={ref}\n    className={cn(\n      \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nDropdownMenuSubContent.displayName =\n  DropdownMenuPrimitive.SubContent.displayName\n\nconst DropdownMenuContent = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Content>\n>(({ className, sideOffset = 4, ...props }, ref) => (\n  <DropdownMenuPrimitive.Portal>\n    <DropdownMenuPrimitive.Content\n      ref={ref}\n      sideOffset={sideOffset}\n      className={cn(\n        \"z-50 max-h-[var(--radix-dropdown-menu-content-available-height)] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]\",\n        className\n      )}\n      {...props}\n    />\n  </DropdownMenuPrimitive.Portal>\n))\nDropdownMenuContent.displayName = DropdownMenuPrimitive.Content.displayName\n\nconst DropdownMenuItem = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Item> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <DropdownMenuPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nDropdownMenuItem.displayName = DropdownMenuPrimitive.Item.displayName\n\nconst DropdownMenuCheckboxItem = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.CheckboxItem>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.CheckboxItem>\n>(({ className, children, checked, ...props }, ref) => (\n  <DropdownMenuPrimitive.CheckboxItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    checked={checked}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <DropdownMenuPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </DropdownMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </DropdownMenuPrimitive.CheckboxItem>\n))\nDropdownMenuCheckboxItem.displayName =\n  DropdownMenuPrimitive.CheckboxItem.displayName\n\nconst DropdownMenuRadioItem = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.RadioItem>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.RadioItem>\n>(({ className, children, ...props }, ref) => (\n  <DropdownMenuPrimitive.RadioItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <DropdownMenuPrimitive.ItemIndicator>\n        <Circle className=\"h-2 w-2 fill-current\" />\n      </DropdownMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </DropdownMenuPrimitive.RadioItem>\n))\nDropdownMenuRadioItem.displayName = DropdownMenuPrimitive.RadioItem.displayName\n\nconst DropdownMenuLabel = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Label> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <DropdownMenuPrimitive.Label\n    ref={ref}\n    className={cn(\n      \"px-2 py-1.5 text-sm font-semibold\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nDropdownMenuLabel.displayName = DropdownMenuPrimitive.Label.displayName\n\nconst DropdownMenuSeparator = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <DropdownMenuPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\n    {...props}\n  />\n))\nDropdownMenuSeparator.displayName = DropdownMenuPrimitive.Separator.displayName\n\nconst DropdownMenuShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\"ml-auto text-xs tracking-widest opacity-60\", className)}\n      {...props}\n    />\n  )\n}\nDropdownMenuShortcut.displayName = \"DropdownMenuShortcut\"\n\nexport {\n  DropdownMenu,\n  DropdownMenuTrigger,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuCheckboxItem,\n  DropdownMenuRadioItem,\n  DropdownMenuLabel,\n  DropdownMenuSeparator,\n  DropdownMenuShortcut,\n  DropdownMenuGroup,\n  DropdownMenuPortal,\n  DropdownMenuSub,\n  DropdownMenuSubContent,\n  DropdownMenuSubTrigger,\n  DropdownMenuRadioGroup,\n}\n","path":null,"size_bytes":7609,"size_tokens":null},"client/src/components/QRScannerDialog.tsx":{"content":"import { useState, useEffect } from \"react\";\nimport { Dialog, DialogContent, DialogHeader, DialogTitle } from \"@/components/ui/dialog\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { Camera, Keyboard } from \"lucide-react\";\n\ninterface QRScannerDialogProps {\n  open: boolean;\n  onClose: () => void;\n  onScan: (barcode: string) => void;\n}\n\nexport default function QRScannerDialog({ open, onClose, onScan }: QRScannerDialogProps) {\n  const [manualBarcode, setManualBarcode] = useState(\"\");\n  const [scanMode, setScanMode] = useState<'camera' | 'manual'>('camera');\n\n  useEffect(() => {\n    if (!open) {\n      setManualBarcode(\"\");\n      setScanMode('camera');\n    }\n  }, [open]);\n\n  const handleManualSubmit = (e: React.FormEvent) => {\n    e.preventDefault();\n    if (manualBarcode.trim()) {\n      onScan(manualBarcode.trim());\n      setManualBarcode(\"\");\n    }\n  };\n\n  return (\n    <Dialog open={open} onOpenChange={onClose}>\n      <DialogContent className=\"max-w-lg\" data-testid=\"dialog-qr-scanner\">\n        <DialogHeader>\n          <DialogTitle>Scan Item QR Code</DialogTitle>\n        </DialogHeader>\n\n        <div className=\"space-y-4\">\n          <div className=\"flex gap-2\">\n            <Button\n              variant={scanMode === 'camera' ? 'default' : 'outline'}\n              className=\"flex-1\"\n              onClick={() => setScanMode('camera')}\n              data-testid=\"button-mode-camera\"\n            >\n              <Camera className=\"w-4 h-4 mr-2\" />\n              Camera Scan\n            </Button>\n            <Button\n              variant={scanMode === 'manual' ? 'default' : 'outline'}\n              className=\"flex-1\"\n              onClick={() => setScanMode('manual')}\n              data-testid=\"button-mode-manual\"\n            >\n              <Keyboard className=\"w-4 h-4 mr-2\" />\n              Manual Entry\n            </Button>\n          </div>\n\n          {scanMode === 'camera' ? (\n            <div className=\"space-y-4\">\n              <div className=\"aspect-video bg-muted rounded-lg flex items-center justify-center border-2 border-dashed\">\n                <div className=\"text-center p-6\">\n                  <Camera className=\"w-12 h-12 mx-auto mb-3 text-muted-foreground\" />\n                  <p className=\"text-sm text-muted-foreground\">\n                    Camera preview would appear here\n                  </p>\n                  <p className=\"text-xs text-muted-foreground mt-2\">\n                    Note: QR scanning requires camera permissions\n                  </p>\n                </div>\n              </div>\n              <p className=\"text-sm text-muted-foreground text-center\">\n                Position the QR code within the frame to scan\n              </p>\n            </div>\n          ) : (\n            <form onSubmit={handleManualSubmit} className=\"space-y-4\">\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"manual-barcode\">Enter Barcode</Label>\n                <Input\n                  id=\"manual-barcode\"\n                  value={manualBarcode}\n                  onChange={(e) => setManualBarcode(e.target.value)}\n                  placeholder=\"e.g., CAM-001-2024\"\n                  autoFocus\n                  data-testid=\"input-manual-barcode\"\n                />\n              </div>\n              <Button \n                type=\"submit\" \n                className=\"w-full\"\n                disabled={!manualBarcode.trim()}\n                data-testid=\"button-submit-barcode\"\n              >\n                Process Barcode\n              </Button>\n            </form>\n          )}\n\n          <Button \n            variant=\"outline\" \n            className=\"w-full\"\n            onClick={onClose}\n            data-testid=\"button-cancel-scan\"\n          >\n            Cancel\n          </Button>\n        </div>\n      </DialogContent>\n    </Dialog>\n  );\n}\n","path":null,"size_bytes":3921,"size_tokens":null},"client/src/components/ui/toggle-group.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as ToggleGroupPrimitive from \"@radix-ui/react-toggle-group\"\nimport { type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\nimport { toggleVariants } from \"@/components/ui/toggle\"\n\nconst ToggleGroupContext = React.createContext<\n  VariantProps<typeof toggleVariants>\n>({\n  size: \"default\",\n  variant: \"default\",\n})\n\nconst ToggleGroup = React.forwardRef<\n  React.ElementRef<typeof ToggleGroupPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ToggleGroupPrimitive.Root> &\n    VariantProps<typeof toggleVariants>\n>(({ className, variant, size, children, ...props }, ref) => (\n  <ToggleGroupPrimitive.Root\n    ref={ref}\n    className={cn(\"flex items-center justify-center gap-1\", className)}\n    {...props}\n  >\n    <ToggleGroupContext.Provider value={{ variant, size }}>\n      {children}\n    </ToggleGroupContext.Provider>\n  </ToggleGroupPrimitive.Root>\n))\n\nToggleGroup.displayName = ToggleGroupPrimitive.Root.displayName\n\nconst ToggleGroupItem = React.forwardRef<\n  React.ElementRef<typeof ToggleGroupPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof ToggleGroupPrimitive.Item> &\n    VariantProps<typeof toggleVariants>\n>(({ className, children, variant, size, ...props }, ref) => {\n  const context = React.useContext(ToggleGroupContext)\n\n  return (\n    <ToggleGroupPrimitive.Item\n      ref={ref}\n      className={cn(\n        toggleVariants({\n          variant: context.variant || variant,\n          size: context.size || size,\n        }),\n        className\n      )}\n      {...props}\n    >\n      {children}\n    </ToggleGroupPrimitive.Item>\n  )\n})\n\nToggleGroupItem.displayName = ToggleGroupPrimitive.Item.displayName\n\nexport { ToggleGroup, ToggleGroupItem }\n","path":null,"size_bytes":1753,"size_tokens":null},"attached_assets/select_1763670995703.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as SelectPrimitive from \"@radix-ui/react-select\"\nimport { Check, ChevronDown, ChevronUp } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Select = SelectPrimitive.Root\n\nconst SelectGroup = SelectPrimitive.Group\n\nconst SelectValue = SelectPrimitive.Value\n\nconst SelectTrigger = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Trigger>\n>(({ className, children, ...props }, ref) => (\n  <SelectPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"flex h-9 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <SelectPrimitive.Icon asChild>\n      <ChevronDown className=\"h-4 w-4 opacity-50\" />\n    </SelectPrimitive.Icon>\n  </SelectPrimitive.Trigger>\n))\nSelectTrigger.displayName = SelectPrimitive.Trigger.displayName\n\nconst SelectScrollUpButton = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.ScrollUpButton>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollUpButton>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.ScrollUpButton\n    ref={ref}\n    className={cn(\n      \"flex cursor-default items-center justify-center py-1\",\n      className\n    )}\n    {...props}\n  >\n    <ChevronUp className=\"h-4 w-4\" />\n  </SelectPrimitive.ScrollUpButton>\n))\nSelectScrollUpButton.displayName = SelectPrimitive.ScrollUpButton.displayName\n\nconst SelectScrollDownButton = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.ScrollDownButton>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollDownButton>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.ScrollDownButton\n    ref={ref}\n    className={cn(\n      \"flex cursor-default items-center justify-center py-1\",\n      className\n    )}\n    {...props}\n  >\n    <ChevronDown className=\"h-4 w-4\" />\n  </SelectPrimitive.ScrollDownButton>\n))\nSelectScrollDownButton.displayName =\n  SelectPrimitive.ScrollDownButton.displayName\n\nconst SelectContent = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Content>\n>(({ className, children, position = \"popper\", ...props }, ref) => (\n  <SelectPrimitive.Portal>\n    <SelectPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]\",\n        position === \"popper\" &&\n          \"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1\",\n        className\n      )}\n      position={position}\n      {...props}\n    >\n      <SelectScrollUpButton />\n      <SelectPrimitive.Viewport\n        className={cn(\n          \"p-1\",\n          position === \"popper\" &&\n            \"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]\"\n        )}\n      >\n        {children}\n      </SelectPrimitive.Viewport>\n      <SelectScrollDownButton />\n    </SelectPrimitive.Content>\n  </SelectPrimitive.Portal>\n))\nSelectContent.displayName = SelectPrimitive.Content.displayName\n\nconst SelectLabel = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Label>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.Label\n    ref={ref}\n    className={cn(\"py-1.5 pl-8 pr-2 text-sm font-semibold\", className)}\n    {...props}\n  />\n))\nSelectLabel.displayName = SelectPrimitive.Label.displayName\n\nconst SelectItem = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Item>\n>(({ className, children, ...props }, ref) => (\n  <SelectPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <SelectPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </SelectPrimitive.ItemIndicator>\n    </span>\n\n    <SelectPrimitive.ItemText>{children}</SelectPrimitive.ItemText>\n  </SelectPrimitive.Item>\n))\nSelectItem.displayName = SelectPrimitive.Item.displayName\n\nconst SelectSeparator = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\n    {...props}\n  />\n))\nSelectSeparator.displayName = SelectPrimitive.Separator.displayName\n\nexport {\n  Select,\n  SelectGroup,\n  SelectValue,\n  SelectTrigger,\n  SelectContent,\n  SelectLabel,\n  SelectItem,\n  SelectSeparator,\n  SelectScrollUpButton,\n  SelectScrollDownButton,\n}\n","path":null,"size_bytes":5741,"size_tokens":null},"client/src/hooks/use-mobile.tsx":{"content":"import * as React from \"react\"\n\nconst MOBILE_BREAKPOINT = 768\n\nexport function useIsMobile() {\n  const [isMobile, setIsMobile] = React.useState<boolean | undefined>(undefined)\n\n  React.useEffect(() => {\n    const mql = window.matchMedia(`(max-width: ${MOBILE_BREAKPOINT - 1}px)`)\n    const onChange = () => {\n      setIsMobile(window.innerWidth < MOBILE_BREAKPOINT)\n    }\n    mql.addEventListener(\"change\", onChange)\n    setIsMobile(window.innerWidth < MOBILE_BREAKPOINT)\n    return () => mql.removeEventListener(\"change\", onChange)\n  }, [])\n\n  return !!isMobile\n}\n","path":null,"size_bytes":565,"size_tokens":null},"client/src/components/ui/toggle.tsx":{"content":"import * as React from \"react\"\nimport * as TogglePrimitive from \"@radix-ui/react-toggle\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst toggleVariants = cva(\n  \"inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors hover:bg-muted hover:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=on]:bg-accent data-[state=on]:text-accent-foreground [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 gap-2\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-transparent\",\n        outline:\n          \"border border-input bg-transparent hover:bg-accent hover:text-accent-foreground\",\n      },\n      size: {\n        default: \"h-10 px-3 min-w-10\",\n        sm: \"h-9 px-2.5 min-w-9\",\n        lg: \"h-11 px-5 min-w-11\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nconst Toggle = React.forwardRef<\n  React.ElementRef<typeof TogglePrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof TogglePrimitive.Root> &\n    VariantProps<typeof toggleVariants>\n>(({ className, variant, size, ...props }, ref) => (\n  <TogglePrimitive.Root\n    ref={ref}\n    className={cn(toggleVariants({ variant, size, className }))}\n    {...props}\n  />\n))\n\nToggle.displayName = TogglePrimitive.Root.displayName\n\nexport { Toggle, toggleVariants }\n","path":null,"size_bytes":1527,"size_tokens":null},"attached_assets/drizzle.config_1763670650466.ts":{"content":"import { defineConfig } from \"drizzle-kit\";\n\nif (!process.env.DATABASE_URL) {\n  throw new Error(\"DATABASE_URL, ensure the database is provisioned\");\n}\n\nexport default defineConfig({\n  out: \"./migrations\",\n  schema: \"./shared/schema.ts\",\n  dialect: \"postgresql\",\n  dbCredentials: {\n    url: process.env.DATABASE_URL,\n  },\n});\n","path":null,"size_bytes":325,"size_tokens":null},"attached_assets/drawer_1763670951634.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport { Drawer as DrawerPrimitive } from \"vaul\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Drawer = ({\n  shouldScaleBackground = true,\n  ...props\n}: React.ComponentProps<typeof DrawerPrimitive.Root>) => (\n  <DrawerPrimitive.Root\n    shouldScaleBackground={shouldScaleBackground}\n    {...props}\n  />\n)\nDrawer.displayName = \"Drawer\"\n\nconst DrawerTrigger = DrawerPrimitive.Trigger\n\nconst DrawerPortal = DrawerPrimitive.Portal\n\nconst DrawerClose = DrawerPrimitive.Close\n\nconst DrawerOverlay = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <DrawerPrimitive.Overlay\n    ref={ref}\n    className={cn(\"fixed inset-0 z-50 bg-black/80\", className)}\n    {...props}\n  />\n))\nDrawerOverlay.displayName = DrawerPrimitive.Overlay.displayName\n\nconst DrawerContent = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Content>\n>(({ className, children, ...props }, ref) => (\n  <DrawerPortal>\n    <DrawerOverlay />\n    <DrawerPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"fixed inset-x-0 bottom-0 z-50 mt-24 flex h-auto flex-col rounded-t-[10px] border bg-background\",\n        className\n      )}\n      {...props}\n    >\n      <div className=\"mx-auto mt-4 h-2 w-[100px] rounded-full bg-muted\" />\n      {children}\n    </DrawerPrimitive.Content>\n  </DrawerPortal>\n))\nDrawerContent.displayName = \"DrawerContent\"\n\nconst DrawerHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\"grid gap-1.5 p-4 text-center sm:text-left\", className)}\n    {...props}\n  />\n)\nDrawerHeader.displayName = \"DrawerHeader\"\n\nconst DrawerFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\"mt-auto flex flex-col gap-2 p-4\", className)}\n    {...props}\n  />\n)\nDrawerFooter.displayName = \"DrawerFooter\"\n\nconst DrawerTitle = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <DrawerPrimitive.Title\n    ref={ref}\n    className={cn(\n      \"text-lg font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nDrawerTitle.displayName = DrawerPrimitive.Title.displayName\n\nconst DrawerDescription = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <DrawerPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nDrawerDescription.displayName = DrawerPrimitive.Description.displayName\n\nexport {\n  Drawer,\n  DrawerPortal,\n  DrawerOverlay,\n  DrawerTrigger,\n  DrawerClose,\n  DrawerContent,\n  DrawerHeader,\n  DrawerFooter,\n  DrawerTitle,\n  DrawerDescription,\n}\n","path":null,"size_bytes":3021,"size_tokens":null},"attached_assets/CategoryFormDialog_1763670896222.tsx":{"content":"\nimport { useState, useEffect } from \"react\";\nimport { Dialog, DialogContent, DialogHeader, DialogTitle, DialogFooter } from \"@/components/ui/dialog\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { X } from \"lucide-react\";\n\ninterface CategoryFormDialogProps {\n  open: boolean;\n  onClose: () => void;\n  onSubmit: (category: any) => void;\n  category?: {\n    id?: string;\n    name: string;\n    image: string;\n    subTypes: string[];\n  };\n  mode: 'add' | 'edit';\n}\n\nexport default function CategoryFormDialog({ open, onClose, onSubmit, category, mode }: CategoryFormDialogProps) {\n  const [formData, setFormData] = useState({\n    name: category?.name || '',\n    image: category?.image || '',\n    subTypes: category?.subTypes || []\n  });\n  const [newSubType, setNewSubType] = useState(\"\");\n\n  useEffect(() => {\n    if (category) {\n      setFormData({\n        name: category.name,\n        image: category.image,\n        subTypes: category.subTypes\n      });\n    } else {\n      setFormData({\n        name: '',\n        image: '',\n        subTypes: []\n      });\n    }\n  }, [category, open]);\n\n  const handleAddSubType = () => {\n    if (newSubType.trim() && !formData.subTypes.includes(newSubType.trim())) {\n      setFormData({\n        ...formData,\n        subTypes: [...formData.subTypes, newSubType.trim()]\n      });\n      setNewSubType(\"\");\n    }\n  };\n\n  const handleRemoveSubType = (subType: string) => {\n    setFormData({\n      ...formData,\n      subTypes: formData.subTypes.filter(st => st !== subType)\n    });\n  };\n\n  const handleSubmit = (e: React.FormEvent) => {\n    e.preventDefault();\n    if (formData.name && formData.image && formData.subTypes.length > 0) {\n      onSubmit(formData);\n    }\n  };\n\n  return (\n    <Dialog open={open} onOpenChange={onClose}>\n      <DialogContent className=\"max-w-2xl\" data-testid={`dialog-${mode}-category`}>\n        <DialogHeader>\n          <DialogTitle>{mode === 'add' ? 'Add New Category' : 'Edit Category'}</DialogTitle>\n        </DialogHeader>\n        <form onSubmit={handleSubmit} className=\"space-y-4\">\n          <div className=\"space-y-2\">\n            <Label htmlFor=\"name\">Category Name *</Label>\n            <Input\n              id=\"name\"\n              value={formData.name}\n              onChange={(e) => setFormData({ ...formData, name: e.target.value })}\n              placeholder=\"e.g., Drones\"\n              required\n              data-testid=\"input-category-name\"\n            />\n          </div>\n\n          <div className=\"space-y-2\">\n            <Label htmlFor=\"image\">Image URL *</Label>\n            <Input\n              id=\"image\"\n              value={formData.image}\n              onChange={(e) => setFormData({ ...formData, image: e.target.value })}\n              placeholder=\"https://example.com/image.jpg\"\n              required\n              data-testid=\"input-category-image\"\n            />\n            {formData.image && (\n              <img \n                src={formData.image} \n                alt=\"Preview\" \n                className=\"w-full h-40 object-cover rounded-lg mt-2\"\n                onError={(e) => {\n                  e.currentTarget.src = 'https://via.placeholder.com/400x200?text=Invalid+Image+URL';\n                }}\n              />\n            )}\n          </div>\n\n          <div className=\"space-y-2\">\n            <Label htmlFor=\"subTypes\">Product Types *</Label>\n            <div className=\"flex gap-2\">\n              <Input\n                id=\"subTypes\"\n                value={newSubType}\n                onChange={(e) => setNewSubType(e.target.value)}\n                placeholder=\"e.g., Quadcopter\"\n                onKeyPress={(e) => {\n                  if (e.key === 'Enter') {\n                    e.preventDefault();\n                    handleAddSubType();\n                  }\n                }}\n                data-testid=\"input-subtype\"\n              />\n              <Button \n                type=\"button\" \n                onClick={handleAddSubType}\n                variant=\"outline\"\n                data-testid=\"button-add-subtype\"\n              >\n                Add\n              </Button>\n            </div>\n            <div className=\"flex flex-wrap gap-2 mt-2\">\n              {formData.subTypes.map((subType, index) => (\n                <Badge \n                  key={index} \n                  variant=\"secondary\"\n                  className=\"bg-gradient-to-r from-[#667eea] to-[#764ba2] text-white px-3 py-1\"\n                >\n                  {subType}\n                  <button\n                    type=\"button\"\n                    onClick={() => handleRemoveSubType(subType)}\n                    className=\"ml-2 hover:text-red-200\"\n                  >\n                    <X className=\"w-3 h-3\" />\n                  </button>\n                </Badge>\n              ))}\n            </div>\n          </div>\n\n          <DialogFooter>\n            <Button type=\"button\" variant=\"outline\" onClick={onClose} data-testid=\"button-cancel\">\n              Cancel\n            </Button>\n            <Button \n              type=\"submit\" \n              className=\"bg-gradient-to-r from-[#667eea] to-[#764ba2]\"\n              data-testid=\"button-submit\"\n              disabled={!formData.name || !formData.image || formData.subTypes.length === 0}\n            >\n              {mode === 'add' ? 'Add Category' : 'Save Changes'}\n            </Button>\n          </DialogFooter>\n        </form>\n      </DialogContent>\n    </Dialog>\n  );\n}\n","path":null,"size_bytes":5569,"size_tokens":null},"attached_assets/Reservations_1763670809221.tsx":{"content":"import { useState } from \"react\";\nimport { useQuery, useMutation } from \"@tanstack/react-query\";\nimport { queryClient } from \"@/lib/queryClient\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Card } from \"@/components/ui/card\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Search, Plus, CheckCircle, XCircle, Clock, ArrowLeft, Calendar } from \"lucide-react\";\nimport { format } from \"date-fns\";\nimport { api, type Reservation, type Item } from \"@/lib/api\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport ReservationFormDialog from \"@/components/ReservationFormDialog\";\nimport ReservationActionDialog from \"@/components/ReservationActionDialog\";\nimport InventoryHeader from \"@/components/InventoryHeader\";\nimport type { Language } from \"@/lib/translations\";\nimport { useTranslation } from \"@/lib/translations\";\n\ninterface ReservationsPageProps {\n  userName: string;\n  userRole: string;\n  userId: string;\n  onLogout: () => void;\n  onNavigateToInventory?: () => void;\n  language?: Language;\n  onLanguageChange?: (language: Language) => void;\n}\n\nexport default function Reservations({ userName, userRole, userId, onLogout, onNavigateToInventory, language = 'en', onLanguageChange }: ReservationsPageProps) {\n  const { toast } = useToast();\n  const t = useTranslation(language);\n  const [searchQuery, setSearchQuery] = useState(\"\");\n  const [showReservationForm, setShowReservationForm] = useState(false);\n  const [filterStatus, setFilterStatus] = useState<string>(\"all\");\n  const [actionDialog, setActionDialog] = useState<{ open: boolean; action: 'reject' | 'complete'; reservationId: string; itemName: string }>({ open: false, action: 'reject', reservationId: '', itemName: '' });\n\n  const { data: reservations = [] } = useQuery({\n    queryKey: ['/api/reservations'],\n    queryFn: () => api.reservations.getAll(),\n  });\n\n  const { data: items = [] } = useQuery({\n    queryKey: ['/api/items'],\n    queryFn: () => api.items.getAll(),\n  });\n\n  const createReservationMutation = useMutation({\n    mutationFn: (data: any) => api.reservations.create(data),\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['/api/reservations'] });\n      queryClient.invalidateQueries({ queryKey: ['/api/items'] });\n      setShowReservationForm(false);\n      toast({ title: \"Reservation created successfully\" });\n    },\n    onError: () => {\n      toast({ title: \"Failed to create reservation\", variant: \"destructive\" });\n    }\n  });\n\n  const updateReservationMutation = useMutation({\n    mutationFn: ({ id, data }: { id: string; data: any }) =>\n      api.reservations.update(id, data),\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['/api/reservations'] });\n      queryClient.invalidateQueries({ queryKey: ['/api/items'] });\n      toast({ title: \"Reservation updated successfully\" });\n    },\n    onError: () => {\n      toast({ title: \"Failed to update reservation\", variant: \"destructive\" });\n    }\n  });\n\n  const handleApprove = (id: string) => {\n    updateReservationMutation.mutate({\n      id,\n      data: { status: 'approved', approvalDate: new Date() }\n    });\n  };\n\n  const handleReject = (id: string, itemId: string) => {\n    const itemName = getItemName(itemId);\n    setActionDialog({ open: true, action: 'reject', reservationId: id, itemName });\n  };\n\n  const handleComplete = (id: string, itemId: string) => {\n    const itemName = getItemName(itemId);\n    setActionDialog({ open: true, action: 'complete', reservationId: id, itemName });\n  };\n\n  const handleActionSubmit = (data: { rejectionReason?: string; itemConditionOnReturn?: string }) => {\n    const updateData: any = {\n      approvalDate: new Date()\n    };\n\n    if (actionDialog.action === 'reject') {\n      updateData.status = 'rejected';\n      updateData.rejectionReason = data.rejectionReason;\n    } else {\n      updateData.status = 'completed';\n      updateData.itemConditionOnReturn = data.itemConditionOnReturn;\n    }\n\n    updateReservationMutation.mutate({\n      id: actionDialog.reservationId,\n      data: updateData\n    });\n  };\n\n  const getItemName = (itemId: string) => {\n    const item = items.find(i => i.id === itemId);\n    return item?.productName || 'Unknown Item';\n  };\n\n  const filteredReservations = reservations.filter(res => {\n    const itemName = getItemName(res.itemId).toLowerCase();\n    const matchesSearch = searchQuery === \"\" || itemName.includes(searchQuery.toLowerCase());\n    const matchesFilter = filterStatus === \"all\" || res.status === filterStatus;\n    const matchesUser = userRole === 'admin' || res.userId === userId; // Correctly filter by userId\n    return matchesSearch && matchesFilter && matchesUser;\n  });\n\n  const getStatusColor = (status: string) => {\n    switch (status) {\n      case 'approved': return 'bg-green-500';\n      case 'pending': return 'bg-yellow-500';\n      case 'rejected': return 'bg-red-500';\n      case 'completed': return 'bg-blue-500';\n      default: return 'bg-gray-500';\n    }\n  };\n\n  const getStatusIcon = (status: string) => {\n    switch (status) {\n      case 'approved': return <CheckCircle className=\"w-4 h-4\" />;\n      case 'rejected': return <XCircle className=\"w-4 h-4\" />;\n      case 'pending': return <Clock className=\"w-4 h-4\" />;\n      default: return null;\n    }\n  };\n\n  return (\n    <div className=\"min-h-screen bg-background\">\n      <InventoryHeader\n        userName={userName}\n        userRole={userRole}\n        currentView=\"inventory\"\n        onViewChange={() => onNavigateToInventory?.()}\n        onLogout={onLogout}\n        onNavigateToReservations={() => {}}\n        hideViewToggle={true}\n        language={language}\n        onLanguageChange={onLanguageChange}\n      />\n\n      <main className=\"max-w-[1400px] mx-auto px-5 py-8\">\n        <div className=\"mb-6\">\n          <Button\n            variant=\"ghost\"\n            onClick={onNavigateToInventory} // This should navigate to categories, not inventory view\n            className=\"gap-2\"\n            data-testid=\"button-back-to-inventory\"\n          >\n            <ArrowLeft className=\"w-4 h-4\" />\n            {t('backToInventory')}\n          </Button>\n        </div>\n\n        <div className=\"text-center mb-10 p-10 bg-gradient-to-r from-[#667eea] to-[#764ba2] rounded-2xl text-white\">\n          <h1 className=\"text-4xl font-extrabold mb-4\">{t('equipmentReservations')}</h1>\n          <p className=\"text-lg opacity-90 max-w-2xl mx-auto\">\n            {t('requestManageReservations')}\n          </p>\n        </div>\n\n        <div className=\"flex items-center justify-between mb-6 flex-wrap gap-4\">\n          <div className=\"flex gap-3\">\n            <Button\n              variant={filterStatus === \"all\" ? \"default\" : \"outline\"}\n              onClick={() => setFilterStatus(\"all\")}\n            >\n              {t('all')}\n            </Button>\n            <Button\n              variant={filterStatus === \"pending\" ? \"default\" : \"outline\"}\n              onClick={() => setFilterStatus(\"pending\")}\n            >\n              {t('pending')}\n            </Button>\n            <Button\n              variant={filterStatus === \"approved\" ? \"default\" : \"outline\"}\n              onClick={() => setFilterStatus(\"approved\")}\n            >\n              {t('approved')}\n            </Button>\n            <Button\n              variant={filterStatus === \"completed\" ? \"default\" : \"outline\"}\n              onClick={() => setFilterStatus(\"completed\")}\n            >\n              {t('completed')}\n            </Button>\n          </div>\n          <Button\n            onClick={() => setShowReservationForm(true)}\n            className=\"bg-gradient-to-r from-[#667eea] to-[#764ba2]\"\n          >\n            <Plus className=\"w-4 h-4 mr-2\" />\n            {t('newReservation')}\n          </Button>\n        </div>\n\n        <div className=\"mb-6\">\n          <div className=\"relative max-w-md\">\n            <Search className=\"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-muted-foreground\" />\n            <Input\n              placeholder={t('search')}\n              value={searchQuery}\n              onChange={(e) => setSearchQuery(e.target.value)}\n              className=\"pl-12\"\n            />\n          </div>\n        </div>\n\n        <div className=\"grid gap-4\">\n          {filteredReservations.map((reservation) => (\n            <Card key={reservation.id} className=\"p-6\">\n              <div className=\"flex items-start justify-between gap-4 flex-wrap\">\n                <div className=\"flex-1\">\n                  <div className=\"flex items-center gap-3 mb-3\">\n                    <h3 className=\"text-xl font-bold\">{getItemName(reservation.itemId)}</h3>\n                    <Badge className={`${getStatusColor(reservation.status)} text-white`}>\n                      <span className=\"flex items-center gap-1\">\n                        {getStatusIcon(reservation.status)}\n                        {reservation.status.toUpperCase()}\n                      </span>\n                    </Badge>\n                  </div>\n                  <div className=\"grid grid-cols-1 md:grid-cols-2 gap-3 text-sm\">\n                    <div className=\"flex items-center gap-2 text-muted-foreground\">\n                      <Calendar className=\"w-4 h-4\" />\n                      <span>\n                        <strong>{t('start')}:</strong> {format(new Date(reservation.startDate), \"PPP\")}\n                      </span>\n                    </div>\n                    <div className=\"flex items-center gap-2 text-muted-foreground\">\n                      <Calendar className=\"w-4 h-4\" />\n                      <span>\n                        <strong>{t('return')}:</strong> {format(new Date(reservation.returnDate), \"PPP\")}\n                      </span>\n                    </div>\n                    <div className=\"text-muted-foreground\">\n                      <strong>{t('requested')}:</strong> {format(new Date(reservation.requestDate), \"PPP\")}\n                    </div>\n                    {reservation.approvalDate && (\n                      <div className=\"text-muted-foreground\">\n                        <strong>{t('responded')}:</strong> {format(new Date(reservation.approvalDate), \"PPP\")}\n                      </div>\n                    )}\n                    {reservation.notes && (\n                      <div className=\"col-span-2 text-muted-foreground\">\n                        <strong>{t('notes')}:</strong> {reservation.notes}\n                      </div>\n                    )}\n                  </div>\n                </div>\n                {userRole === 'admin' && reservation.status === 'pending' && (\n                  <div className=\"flex gap-2\">\n                    <Button\n                      size=\"sm\"\n                      variant=\"outline\"\n                      className=\"bg-green-50 hover:bg-green-100 text-green-700 border-green-200\"\n                      onClick={() => handleApprove(reservation.id)}\n                    >\n                      <CheckCircle className=\"w-4 h-4 mr-1\" />\n                      {t('approve')}\n                    </Button>\n                    <Button\n                      size=\"sm\"\n                      variant=\"outline\"\n                      className=\"bg-red-50 hover:bg-red-100 text-red-700 border-red-200\"\n                      onClick={() => handleReject(reservation.id, reservation.itemId)}\n                    >\n                      <XCircle className=\"w-4 h-4 mr-1\" />\n                      {t('decline')}\n                    </Button>\n                  </div>\n                )}\n                {userRole === 'admin' && reservation.status === 'approved' && (\n                  <Button\n                    size=\"sm\"\n                    variant=\"outline\"\n                    className=\"bg-blue-50 hover:bg-blue-100 text-blue-700 border-blue-200\"\n                    onClick={() => handleComplete(reservation.id, reservation.itemId)}\n                  >\n                    <CheckCircle className=\"w-4 h-4 mr-1\" />\n                    {t('markReturned')}\n                  </Button>\n                )}\n              </div>\n            </Card>\n          ))}\n        </div>\n\n        {filteredReservations.length === 0 && (\n          <div className=\"text-center py-12 bg-muted/30 rounded-lg\">\n            <Clock className=\"w-12 h-12 mx-auto mb-3 text-muted-foreground\" />\n            <p className=\"text-lg font-medium text-muted-foreground\">{t('noReservationsFound')}</p>\n            <p className=\"text-sm text-muted-foreground mt-1\">\n              {filterStatus !== \"all\" ? t('tryChangingFilter') : t('createFirstReservation')}\n            </p>\n          </div>\n        )}\n      </main>\n\n      <ReservationFormDialog\n        open={showReservationForm}\n        onClose={() => setShowReservationForm(false)}\n        onSubmit={(data) => createReservationMutation.mutate({ ...data, userId: userId })} // Pass the actual userId\n        items={items.filter(item => item.status !== 'Maintenance')}\n      />\n\n      <ReservationActionDialog\n        open={actionDialog.open}\n        onClose={() => setActionDialog({ ...actionDialog, open: false })}\n        onSubmit={handleActionSubmit}\n        action={actionDialog.action}\n        itemName={actionDialog.itemName}\n      />\n    </div>\n  );\n}","path":null,"size_bytes":13207,"size_tokens":null},"server/db.ts":{"content":"import pkg from 'pg';\nconst { Pool } = pkg;\nimport { drizzle } from \"drizzle-orm/node-postgres\";\nimport * as schema from \"@shared/schema\";\nimport 'dotenv/config';\n\nif (!process.env.DATABASE_URL) {\n  throw new Error(\"DATABASE_URL must be set. Did you forget to set it in .env?\");\n}\n\nexport const pool = new Pool({\n  connectionString: process.env.DATABASE_URL,\n});\n\nexport const db = drizzle(pool, { schema });\n","path":null,"size_bytes":409,"size_tokens":null},"client/src/components/ui/alert.tsx":{"content":"import * as React from \"react\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst alertVariants = cva(\n  \"relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-background text-foreground\",\n        destructive:\n          \"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nconst Alert = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement> & VariantProps<typeof alertVariants>\n>(({ className, variant, ...props }, ref) => (\n  <div\n    ref={ref}\n    role=\"alert\"\n    className={cn(alertVariants({ variant }), className)}\n    {...props}\n  />\n))\nAlert.displayName = \"Alert\"\n\nconst AlertTitle = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLHeadingElement>\n>(({ className, ...props }, ref) => (\n  <h5\n    ref={ref}\n    className={cn(\"mb-1 font-medium leading-none tracking-tight\", className)}\n    {...props}\n  />\n))\nAlertTitle.displayName = \"AlertTitle\"\n\nconst AlertDescription = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"text-sm [&_p]:leading-relaxed\", className)}\n    {...props}\n  />\n))\nAlertDescription.displayName = \"AlertDescription\"\n\nexport { Alert, AlertTitle, AlertDescription }\n","path":null,"size_bytes":1584,"size_tokens":null},"client/src/components/ui/skeleton.tsx":{"content":"import { cn } from \"@/lib/utils\"\n\nfunction Skeleton({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) {\n  return (\n    <div\n      className={cn(\"animate-pulse rounded-md bg-muted\", className)}\n      {...props}\n    />\n  )\n}\n\nexport { Skeleton }\n","path":null,"size_bytes":261,"size_tokens":null},"attached_assets/index_1763670802182.css":{"content":"@tailwind base;\n@tailwind components;\n@tailwind utilities;\n\n/* LIGHT MODE */\n:root {\n  --button-outline: rgba(0,0,0, .10);\n  --badge-outline: rgba(0,0,0, .05);\n  --opaque-button-border-intensity: -8;\n  --elevate-1: rgba(0,0,0, .03);\n  --elevate-2: rgba(0,0,0, .08);\n  --background: 0 0% 100%;\n  --foreground: 0 0% 9%;\n  --border: 0 0% 90%;\n  --card: 0 0% 98%;\n  --card-foreground: 0 0% 9%;\n  --card-border: 0 0% 94%;\n  --sidebar: 0 0% 96%;\n  --sidebar-foreground: 0 0% 9%;\n  --sidebar-border: 0 0% 92%;\n  --sidebar-primary: 221 83% 53%;\n  --sidebar-primary-foreground: 0 0% 98%;\n  --sidebar-accent: 0 0% 92%;\n  --sidebar-accent-foreground: 0 0% 9%;\n  --sidebar-ring: 221 83% 53%;\n  --popover: 0 0% 94%;\n  --popover-foreground: 0 0% 9%;\n  --popover-border: 0 0% 90%;\n  --primary: 221 83% 53%;\n  --primary-foreground: 0 0% 98%;\n  --secondary: 0 0% 90%;\n  --secondary-foreground: 0 0% 9%;\n  --muted: 0 0% 92%;\n  --muted-foreground: 0 0% 40%;\n  --accent: 210 5% 92%;\n  --accent-foreground: 0 0% 9%;\n  --destructive: 0 84% 45%;\n  --destructive-foreground: 0 0% 98%;\n  --input: 0 0% 75%;\n  --ring: 221 83% 53%;\n  --chart-1: 221 83% 45%;\n  --chart-2: 195 85% 42%;\n  --chart-3: 160 84% 39%;\n  --chart-4: 43 96% 56%;\n  --chart-5: 27 87% 52%;\n  --font-sans: Open Sans, sans-serif;\n  --font-serif: Georgia, serif;\n  --font-mono: Menlo, monospace;\n  --radius: .5rem;\n  --shadow-2xs: 0px 2px 0px 0px hsl(0 0% 0% / 0.00);\n  --shadow-xs: 0px 2px 0px 0px hsl(0 0% 0% / 0.00);\n  --shadow-sm: 0px 2px 0px 0px hsl(0 0% 0% / 0.00), 0px 1px 2px -1px hsl(0 0% 0% / 0.00);\n  --shadow: 0px 2px 0px 0px hsl(0 0% 0% / 0.00), 0px 1px 2px -1px hsl(0 0% 0% / 0.00);\n  --shadow-md: 0px 2px 0px 0px hsl(0 0% 0% / 0.00), 0px 2px 4px -1px hsl(0 0% 0% / 0.00);\n  --shadow-lg: 0px 2px 0px 0px hsl(0 0% 0% / 0.00), 0px 4px 6px -1px hsl(0 0% 0% / 0.00);\n  --shadow-xl: 0px 2px 0px 0px hsl(0 0% 0% / 0.00), 0px 8px 10px -1px hsl(0 0% 0% / 0.00);\n  --shadow-2xl: 0px 2px 0px 0px hsl(0 0% 0% / 0.00);\n  --tracking-normal: 0em;\n  --spacing: 0.25rem;\n\n/* Fallback for older browsers */\n  --sidebar-primary-border: hsl(var(--sidebar-primary));\n  --sidebar-primary-border: hsl(from hsl(var(--sidebar-primary)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --sidebar-accent-border: hsl(var(--sidebar-accent));\n  --sidebar-accent-border: hsl(from hsl(var(--sidebar-accent)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --primary-border: hsl(var(--primary));\n  --primary-border: hsl(from hsl(var(--primary)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --secondary-border: hsl(var(--secondary));\n  --secondary-border: hsl(from hsl(var(--secondary)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --muted-border: hsl(var(--muted));\n  --muted-border: hsl(from hsl(var(--muted)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --accent-border: hsl(var(--accent));\n  --accent-border: hsl(from hsl(var(--accent)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --destructive-border: hsl(var(--destructive));\n  --destructive-border: hsl(from hsl(var(--destructive)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n}\n\n.dark {\n  --button-outline: rgba(255,255,255, .10);\n  --badge-outline: rgba(255,255,255, .05);\n  --opaque-button-border-intensity: 9;\n  --elevate-1: rgba(255,255,255, .04);\n  --elevate-2: rgba(255,255,255, .09);\n  --background: 0 0% 9%;\n  --foreground: 0 0% 98%;\n  --border: 0 0% 18%;\n  --card: 0 0% 11%;\n  --card-foreground: 0 0% 98%;\n  --card-border: 0 0% 14%;\n  --sidebar: 0 0% 13%;\n  --sidebar-foreground: 0 0% 98%;\n  --sidebar-border: 0 0% 16%;\n  --sidebar-primary: 221 83% 53%;\n  --sidebar-primary-foreground: 0 0% 98%;\n  --sidebar-accent: 0 0% 16%;\n  --sidebar-accent-foreground: 0 0% 98%;\n  --sidebar-ring: 221 83% 53%;\n  --popover: 0 0% 15%;\n  --popover-foreground: 0 0% 98%;\n  --popover-border: 0 0% 18%;\n  --primary: 221 83% 53%;\n  --primary-foreground: 0 0% 98%;\n  --secondary: 0 0% 18%;\n  --secondary-foreground: 0 0% 98%;\n  --muted: 0 0% 17%;\n  --muted-foreground: 0 0% 65%;\n  --accent: 210 5% 17%;\n  --accent-foreground: 0 0% 98%;\n  --destructive: 0 84% 45%;\n  --destructive-foreground: 0 0% 98%;\n  --input: 0 0% 30%;\n  --ring: 221 83% 53%;\n  --chart-1: 221 83% 65%;\n  --chart-2: 195 85% 65%;\n  --chart-3: 160 84% 60%;\n  --chart-4: 43 96% 70%;\n  --chart-5: 27 87% 65%;\n  --shadow-2xs: 0px 2px 0px 0px hsl(0 0% 0% / 0.00);\n  --shadow-xs: 0px 2px 0px 0px hsl(0 0% 0% / 0.00);\n  --shadow-sm: 0px 2px 0px 0px hsl(0 0% 0% / 0.00), 0px 1px 2px -1px hsl(0 0% 0% / 0.00);\n  --shadow: 0px 2px 0px 0px hsl(0 0% 0% / 0.00), 0px 1px 2px -1px hsl(0 0% 0% / 0.00);\n  --shadow-md: 0px 2px 0px 0px hsl(0 0% 0% / 0.00), 0px 2px 4px -1px hsl(0 0% 0% / 0.00);\n  --shadow-lg: 0px 2px 0px 0px hsl(0 0% 0% / 0.00), 0px 4px 6px -1px hsl(0 0% 0% / 0.00);\n  --shadow-xl: 0px 2px 0px 0px hsl(0 0% 0% / 0.00), 0px 8px 10px -1px hsl(0 0% 0% / 0.00);\n  --shadow-2xl: 0px 2px 0px 0px hsl(0 0% 0% / 0.00);\n\n/* Fallback for older browsers */\n  --sidebar-primary-border: hsl(var(--sidebar-primary));\n  --sidebar-primary-border: hsl(from hsl(var(--sidebar-primary)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --sidebar-accent-border: hsl(var(--sidebar-accent));\n  --sidebar-accent-border: hsl(from hsl(var(--sidebar-accent)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --primary-border: hsl(var(--primary));\n  --primary-border: hsl(from hsl(var(--primary)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --secondary-border: hsl(var(--secondary));\n  --secondary-border: hsl(from hsl(var(--secondary)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --muted-border: hsl(var(--muted));\n  --muted-border: hsl(from hsl(var(--muted)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --accent-border: hsl(var(--accent));\n  --accent-border: hsl(from hsl(var(--accent)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --destructive-border: hsl(var(--destructive));\n  --destructive-border: hsl(from hsl(var(--destructive)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n}\n\n@layer base {\n  * {\n    @apply border-border;\n  }\n\n  body {\n    @apply font-sans antialiased bg-background text-foreground;\n  }\n}\n\n/**\n * Using the elevate system.\n * Automatic contrast adjustment.\n *\n * <element className=\"hover-elevate\" />\n * <element className=\"active-elevate-2\" />\n *\n * // Using the tailwind utility when a data attribute is \"on\"\n * <element className=\"toggle-elevate data-[state=on]:toggle-elevated\" />\n * // Or manually controlling the toggle state\n * <element className=\"toggle-elevate toggle-elevated\" />\n *\n * Elevation systems have to handle many states.\n * - not-hovered, vs. hovered vs. active  (three mutually exclusive states)\n * - toggled or not\n * - focused or not (this is not handled with these utilities)\n *\n * Even without handling focused or not, this is six possible combinations that\n * need to be distinguished from eachother visually.\n */\n@layer utilities {\n\n  /* Hide ugly search cancel button in Chrome until we can style it properly */\n  input[type=\"search\"]::-webkit-search-cancel-button {\n    @apply hidden;\n  }\n\n  /* Placeholder styling for contentEditable div */\n  [contenteditable][data-placeholder]:empty::before {\n    content: attr(data-placeholder);\n    color: hsl(var(--muted-foreground));\n    pointer-events: none;\n  }\n\n  /* .no-default-hover-elevate/no-default-active-elevate is an escape hatch so consumers of\n   * buttons/badges can remove the automatic brightness adjustment on interactions\n   * and program their own. */\n  .no-default-hover-elevate {}\n\n  .no-default-active-elevate {}\n\n\n  /**\n   * Toggleable backgrounds go behind the content. Hoverable/active goes on top.\n   * This way they can stack/compound. Both will overlap the parent's borders!\n   * So borders will be automatically adjusted both on toggle, and hover/active,\n   * and they will be compounded.\n   */\n  .toggle-elevate::before,\n  .toggle-elevate-2::before {\n    content: \"\";\n    pointer-events: none;\n    position: absolute;\n    inset: 0px;\n    /*border-radius: inherit;   match rounded corners */\n    border-radius: inherit;\n    z-index: -1;\n    /* sits behind content but above backdrop */\n  }\n\n  .toggle-elevate.toggle-elevated::before {\n    background-color: var(--elevate-2);\n  }\n\n  /* If there's a 1px border, adjust the inset so that it covers that parent's border */\n  .border.toggle-elevate::before {\n    inset: -1px;\n  }\n\n  /* Does not work on elements with overflow:hidden! */\n  .hover-elevate:not(.no-default-hover-elevate),\n  .active-elevate:not(.no-default-active-elevate),\n  .hover-elevate-2:not(.no-default-hover-elevate),\n  .active-elevate-2:not(.no-default-active-elevate) {\n    position: relative;\n    z-index: 0;\n  }\n\n  .hover-elevate:not(.no-default-hover-elevate)::after,\n  .active-elevate:not(.no-default-active-elevate)::after,\n  .hover-elevate-2:not(.no-default-hover-elevate)::after,\n  .active-elevate-2:not(.no-default-active-elevate)::after {\n    content: \"\";\n    pointer-events: none;\n    position: absolute;\n    inset: 0px;\n    /*border-radius: inherit;   match rounded corners */\n    border-radius: inherit;\n    z-index: 999;\n    /* sits in front of content */\n  }\n\n  .hover-elevate:hover:not(.no-default-hover-elevate)::after,\n  .active-elevate:active:not(.no-default-active-elevate)::after {\n    background-color: var(--elevate-1);\n  }\n\n  .hover-elevate-2:hover:not(.no-default-hover-elevate)::after,\n  .active-elevate-2:active:not(.no-default-active-elevate)::after {\n    background-color: var(--elevate-2);\n  }\n\n  /* If there's a 1px border, adjust the inset so that it covers that parent's border */\n  .border.hover-elevate:not(.no-hover-interaction-elevate)::after,\n  .border.active-elevate:not(.no-active-interaction-elevate)::after,\n  .border.hover-elevate-2:not(.no-hover-interaction-elevate)::after,\n  .border.active-elevate-2:not(.no-active-interaction-elevate)::after,\n  .border.hover-elevate:not(.no-hover-interaction-elevate)::after {\n    inset: -1px;\n  }\n}\n","path":null,"size_bytes":10528,"size_tokens":null},"attached_assets/toggle_1763671095573.tsx":{"content":"import * as React from \"react\"\nimport * as TogglePrimitive from \"@radix-ui/react-toggle\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst toggleVariants = cva(\n  \"inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors hover:bg-muted hover:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=on]:bg-accent data-[state=on]:text-accent-foreground [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 gap-2\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-transparent\",\n        outline:\n          \"border border-input bg-transparent hover:bg-accent hover:text-accent-foreground\",\n      },\n      size: {\n        default: \"h-10 px-3 min-w-10\",\n        sm: \"h-9 px-2.5 min-w-9\",\n        lg: \"h-11 px-5 min-w-11\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nconst Toggle = React.forwardRef<\n  React.ElementRef<typeof TogglePrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof TogglePrimitive.Root> &\n    VariantProps<typeof toggleVariants>\n>(({ className, variant, size, ...props }, ref) => (\n  <TogglePrimitive.Root\n    ref={ref}\n    className={cn(toggleVariants({ variant, size, className }))}\n    {...props}\n  />\n))\n\nToggle.displayName = TogglePrimitive.Root.displayName\n\nexport { Toggle, toggleVariants }\n","path":null,"size_bytes":1527,"size_tokens":null},"attached_assets/index_1763670748025.ts":{"content":"import express, { type Request, Response, NextFunction } from \"express\";\nimport session from \"express-session\";\nimport MemoryStore from \"memorystore\";\nimport { registerRoutes } from \"./routes\";\nimport { setupVite, serveStatic, log } from \"./vite\";\nimport { seedDatabase } from \"./seed\";\nimport 'dotenv/config';\nconst app = express();\nconst MemStore = MemoryStore(session);\n\ndeclare module 'http' {\n  interface IncomingMessage {\n    rawBody: unknown\n  }\n}\napp.use(express.json({\n  verify: (req, _res, buf) => {\n    req.rawBody = buf;\n  }\n}));\napp.use(express.urlencoded({ extended: false }));\n\napp.use(session({\n  secret: process.env.SESSION_SECRET || 'inventory-secret-key-change-in-production',\n  resave: false,\n  saveUninitialized: false,\n  store: new MemStore({\n    checkPeriod: 86400000\n  }),\n  cookie: {\n    maxAge: 24 * 60 * 60 * 1000,\n    httpOnly: true,\n    secure: process.env.NODE_ENV === 'production',\n    sameSite: 'lax'\n  }\n}));\n\napp.use((req, res, next) => {\n  const start = Date.now();\n  const path = req.path;\n  let capturedJsonResponse: Record<string, any> | undefined = undefined;\n\n  const originalResJson = res.json;\n  res.json = function (bodyJson, ...args) {\n    capturedJsonResponse = bodyJson;\n    return originalResJson.apply(res, [bodyJson, ...args]);\n  };\n\n  res.on(\"finish\", () => {\n    const duration = Date.now() - start;\n    if (path.startsWith(\"/api\")) {\n      let logLine = `${req.method} ${path} ${res.statusCode} in ${duration}ms`;\n      if (capturedJsonResponse) {\n        logLine += ` :: ${JSON.stringify(capturedJsonResponse)}`;\n      }\n\n      if (logLine.length > 80) {\n        logLine = logLine.slice(0, 79) + \"â€¦\";\n      }\n\n      log(logLine);\n    }\n  });\n\n  next();\n});\n\n(async () => {\n  await seedDatabase();\n  const server = await registerRoutes(app);\n\n  app.use((err: any, _req: Request, res: Response, _next: NextFunction) => {\n    const status = err.status || err.statusCode || 500;\n    const message = err.message || \"Internal Server Error\";\n\n    res.status(status).json({ message });\n    throw err;\n  });\n\n  // importantly only setup vite in development and after\n  // setting up all the other routes so the catch-all route\n  // doesn't interfere with the other routes\n  if (app.get(\"env\") === \"development\") {\n    await setupVite(app, server);\n  } else {\n    serveStatic(app);\n  }\n\n  // ALWAYS serve the app on the port specified in the environment variable PORT\n  // Other ports are firewalled. Default to 5000 if not specified.\n  // this serves both the API and the client.\n  // It is the only port that is not firewalled.\n  const port = parseInt(process.env.PORT || '5000', 10);\n  server.listen({\n    port,\n    host: \"0.0.0.0\",\n  }, () => {\n    log(`serving on port ${port}`);\n  });\n})();\n","path":null,"size_bytes":2742,"size_tokens":null},"client/src/App.tsx":{"content":"import { useState, useEffect } from \"react\";\nimport { QueryClientProvider } from \"@tanstack/react-query\";\nimport { queryClient } from \"./lib/queryClient\";\nimport { Toaster } from \"@/components/ui/toaster\";\nimport { TooltipProvider } from \"@/components/ui/tooltip\";\nimport Login from \"@/pages/Login\";\nimport Inventory from \"@/pages/Inventory\";\nimport Reservations from \"@/pages/Reservations\";\nimport ActivityLogs from \"@/pages/ActivityLogs\";\nimport QRCodes from \"@/pages/QRCodes\";\nimport Maintenance from \"@/pages/Maintenance\";\nimport UserManagement from \"@/pages/UserManagement\";\nimport Reports from \"@/pages/Reports\";\nimport type { Language } from \"@/lib/translations\";\n\ntype View = 'login' | 'inventory' | 'reservations' | 'activity-logs' | 'qr-codes' | 'maintenance' | 'users' | 'reports';\n\nfunction App() {\n  const [isAuthenticated, setIsAuthenticated] = useState(false);\n  const [currentView, setCurrentView] = useState<View>('login');\n  const [language, setLanguage] = useState<Language>('en');\n  const [currentUser, setCurrentUser] = useState<{\n    id: string;\n    username: string;\n    role: string;\n    name: string;\n  } | null>(null);\n  const [isSessionLoading, setIsSessionLoading] = useState(true);\n\n  const handleLogin = (user: any) => {\n    setCurrentUser(user);\n    setIsAuthenticated(true);\n    // Admin sees inventory (categories) first, users see inventory too\n    setCurrentView('inventory');\n  };\n\n  const handleLogout = () => {\n    setCurrentUser(null);\n    setIsAuthenticated(false);\n    setCurrentView('login');\n    localStorage.removeItem('currentUser');\n  };\n\n  const handleNavigateToReservations = () => {\n    setCurrentView('reservations');\n  };\n\n  const handleNavigateToActivityLogs = () => {\n    setCurrentView('activity-logs');\n  };\n\n  const handleNavigateToQRCodes = () => {\n    setCurrentView('qr-codes');\n  };\n\n  const handleNavigateToMaintenance = () => {\n    setCurrentView('maintenance');\n  };\n\n  const handleNavigateToInventory = () => {\n    setCurrentView('inventory');\n  };\n\n  const handleNavigateToReports = () => {\n    setCurrentView('reports');\n  };\n\n  const checkSession = async () => {\n    try {\n      const response = await fetch('/api/auth/session');\n      if (response.ok) {\n        const data = await response.json();\n        const user = data.user || data;\n        handleLogin(user);\n        // Save to localStorage as backup\n        localStorage.setItem('currentUser', JSON.stringify(user));\n      } else {\n        // Try localStorage fallback\n        const savedUser = localStorage.getItem('currentUser');\n        if (savedUser) {\n          try {\n            const user = JSON.parse(savedUser);\n            handleLogin(user);\n          } catch {\n            setIsAuthenticated(false);\n          }\n        } else {\n          setIsAuthenticated(false);\n        }\n      }\n    } catch (error) {\n      console.error(\"Session check failed:\", error);\n      // Try localStorage fallback on error\n      const savedUser = localStorage.getItem('currentUser');\n      if (savedUser) {\n        try {\n          const user = JSON.parse(savedUser);\n          handleLogin(user);\n        } catch {\n          setIsAuthenticated(false);\n        }\n      } else {\n        setIsAuthenticated(false);\n      }\n    } finally {\n      setIsSessionLoading(false);\n    }\n  };\n\n  useEffect(() => {\n    checkSession();\n    // Load saved language preference\n    const savedLanguage = localStorage.getItem('language') as Language;\n    if (savedLanguage) {\n      setLanguage(savedLanguage);\n      document.documentElement.dir = savedLanguage === 'ar' ? 'rtl' : 'ltr';\n    }\n    // Expose navigate functions for header\n    (window as any).navigateToUsers = () => setCurrentView('users');\n    (window as any).navigateToReports = () => setCurrentView('reports');\n  }, []);\n\n  const handleLanguageChange = (newLanguage: Language) => {\n    setLanguage(newLanguage);\n    localStorage.setItem('language', newLanguage);\n    document.documentElement.dir = newLanguage === 'ar' ? 'rtl' : 'ltr';\n  };\n\n  return (\n    <QueryClientProvider client={queryClient}>\n      <TooltipProvider>\n        <Toaster />\n        {isSessionLoading ? (\n          <div className=\"min-h-screen bg-background flex items-center justify-center\">\n            <div className=\"text-center\">\n              <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4\"></div>\n              <p className=\"text-muted-foreground\">Loading...</p>\n            </div>\n          </div>\n        ) : !isAuthenticated ? (\n          <Login onLogin={handleLogin} language={language} onLanguageChange={handleLanguageChange} />\n        ) : currentView === 'inventory' ? (\n          <Inventory\n            userName={currentUser?.name || ''}\n            userRole={currentUser?.role || ''}\n            userId={currentUser?.id || ''}\n            onLogout={handleLogout}\n            onNavigateToReservations={handleNavigateToReservations}\n            onNavigateToActivityLogs={handleNavigateToActivityLogs}\n            onNavigateToQRCodes={handleNavigateToQRCodes}\n            onNavigateToMaintenance={handleNavigateToMaintenance}\n            currentLanguage={language}\n            onLanguageChange={handleLanguageChange}\n          />\n        ) : currentView === 'reservations' ? (\n          <Reservations\n            userName={currentUser?.name || ''}\n            userRole={currentUser?.role || ''}\n            userId={currentUser?.id || ''}\n            onLogout={handleLogout}\n            onNavigateToInventory={handleNavigateToInventory}\n            onNavigateToActivityLogs={handleNavigateToActivityLogs}\n            onNavigateToQRCodes={handleNavigateToQRCodes}\n            onNavigateToMaintenance={handleNavigateToMaintenance}\n            onNavigateToReports={handleNavigateToReports}\n            language={language}\n            onLanguageChange={handleLanguageChange}\n          />\n        ) : currentView === 'activity-logs' ? (\n          <ActivityLogs\n            userName={currentUser?.name || ''}\n            userRole={currentUser?.role || ''}\n            onLogout={handleLogout}\n            onNavigateToInventory={handleNavigateToInventory}\n            onNavigateToReservations={handleNavigateToReservations}\n            onNavigateToQRCodes={handleNavigateToQRCodes}\n            onNavigateToMaintenance={handleNavigateToMaintenance}\n            currentLanguage={language}\n            onLanguageChange={handleLanguageChange}\n            onNavigateToReports={handleNavigateToReports}\n          />\n        ) : currentView === 'qr-codes' ? (\n          <QRCodes\n            userName={currentUser?.name || ''}\n            userRole={currentUser?.role || ''}\n            onLogout={handleLogout}\n            onNavigateToInventory={handleNavigateToInventory}\n            onNavigateToReservations={handleNavigateToReservations}\n            onNavigateToActivityLogs={handleNavigateToActivityLogs}\n            onNavigateToMaintenance={handleNavigateToMaintenance}\n            onNavigateToReports={handleNavigateToReports}\n            language={language}\n            onLanguageChange={handleLanguageChange}\n          />\n        ) : currentView === 'maintenance' ? (\n          <Maintenance\n            userName={currentUser?.name || ''}\n            userRole={currentUser?.role || ''}\n            userId={currentUser?.id || ''}\n            onLogout={handleLogout}\n            onNavigateToInventory={handleNavigateToInventory}\n            onNavigateToReservations={handleNavigateToReservations}\n            onNavigateToActivityLogs={handleNavigateToActivityLogs}\n            onNavigateToQRCodes={handleNavigateToQRCodes}\n            onNavigateToReports={handleNavigateToReports}\n            language={language}\n            onLanguageChange={handleLanguageChange}\n          />\n        ) : currentView === 'reports' ? (\n          <Reports\n            userName={currentUser?.name || ''}\n            userRole={currentUser?.role || ''}\n            userId={currentUser?.id || ''}\n            onLogout={handleLogout}\n            onNavigateToInventory={handleNavigateToInventory}\n            onNavigateToReservations={handleNavigateToReservations}\n            onNavigateToActivityLogs={handleNavigateToActivityLogs}\n            onNavigateToQRCodes={handleNavigateToQRCodes}\n            onNavigateToMaintenance={handleNavigateToMaintenance}\n            onNavigateToReports={() => {}}\n            language={language}\n            onLanguageChange={handleLanguageChange}\n          />\n        ) : currentView === 'users' && currentUser && (currentUser.role === 'admin' || currentUser.role === 'developer') ? (\n          <UserManagement\n            userName={currentUser.name}\n            userRole={currentUser.role}\n            onLogout={handleLogout}\n            onNavigateToInventory={handleNavigateToInventory}\n            onNavigateToReservations={handleNavigateToReservations}\n            onNavigateToActivityLogs={handleNavigateToActivityLogs}\n            onNavigateToQRCodes={handleNavigateToQRCodes}\n            onNavigateToMaintenance={handleNavigateToMaintenance}\n            onNavigateToReports={handleNavigateToReports}\n            language={language}\n            onLanguageChange={handleLanguageChange}\n          />\n        ) : null}\n      </TooltipProvider>\n    </QueryClientProvider>\n  );\n}\n\nexport default App;","path":null,"size_bytes":9292,"size_tokens":null},"attached_assets/switch_1763671095569.tsx":{"content":"import * as React from \"react\"\nimport * as SwitchPrimitives from \"@radix-ui/react-switch\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Switch = React.forwardRef<\n  React.ElementRef<typeof SwitchPrimitives.Root>,\n  React.ComponentPropsWithoutRef<typeof SwitchPrimitives.Root>\n>(({ className, ...props }, ref) => (\n  <SwitchPrimitives.Root\n    className={cn(\n      \"peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input\",\n      className\n    )}\n    {...props}\n    ref={ref}\n  >\n    <SwitchPrimitives.Thumb\n      className={cn(\n        \"pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0\"\n      )}\n    />\n  </SwitchPrimitives.Root>\n))\nSwitch.displayName = SwitchPrimitives.Root.displayName\n\nexport { Switch }\n","path":null,"size_bytes":1139,"size_tokens":null},"client/src/components/ui/tooltip.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as TooltipPrimitive from \"@radix-ui/react-tooltip\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst TooltipProvider = TooltipPrimitive.Provider\n\nconst Tooltip = TooltipPrimitive.Root\n\nconst TooltipTrigger = TooltipPrimitive.Trigger\n\nconst TooltipContent = React.forwardRef<\n  React.ElementRef<typeof TooltipPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof TooltipPrimitive.Content>\n>(({ className, sideOffset = 4, ...props }, ref) => (\n  <TooltipPrimitive.Content\n    ref={ref}\n    sideOffset={sideOffset}\n    className={cn(\n      \"z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-tooltip-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nTooltipContent.displayName = TooltipPrimitive.Content.displayName\n\nexport { Tooltip, TooltipTrigger, TooltipContent, TooltipProvider }\n","path":null,"size_bytes":1209,"size_tokens":null},"attached_assets/ItemCard_1763670896223.tsx":{"content":"import { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Edit, Trash2, MapPin, FileText, QrCode, Download, Pencil, Calendar, LogOut, LogIn } from \"lucide-react\";\nimport { useQuery } from \"@tanstack/react-query\";\nimport { api } from \"@/lib/api\";\nimport { useState } from \"react\";\nimport { Dialog, DialogContent, DialogHeader, DialogTitle } from \"@/components/ui/dialog\";\n\ninterface ItemCardProps {\n  id: string;\n  barcode: string;\n  productName: string;\n  productType: string;\n  status: string;\n  location?: string;\n  notes?: string;\n  onEdit?: () => void;\n  onDelete?: () => void;\n  onScan?: () => void;\n  onReserve?: () => void;\n  onCheckout?: () => void;\n  onCheckin?: () => void;\n  userRole: string;\n}\n\nconst statusColors: Record<string, string> = {\n  'Available': 'bg-green-600 hover:bg-green-700',\n  'In Use': 'bg-amber-500 hover:bg-amber-600',\n  'Reserved': 'bg-blue-600 hover:bg-blue-700',\n  'Maintenance': 'bg-red-600 hover:bg-red-700'\n};\n\nexport default function ItemCard({\n  id,\n  barcode,\n  productName,\n  productType,\n  status,\n  location,\n  notes,\n  onEdit,\n  onDelete,\n  onScan,\n  onReserve,\n  onCheckout,\n  onCheckin,\n  userRole,\n}: ItemCardProps) {\n  const [showQRDialog, setShowQRDialog] = useState(false);\n\n  const { data: qrData, isLoading: qrLoading } = useQuery({\n    queryKey: ['/api/items', id, 'qrcode'],\n    queryFn: () => api.qrCodes.getItemQRCode(id),\n    enabled: showQRDialog,\n  });\n\n  const getStatusColor = (status: string) => {\n    switch (status) {\n      case 'Available':\n        return 'bg-green-500';\n      case 'In Use':\n        return 'bg-blue-500';\n      case 'Reserved':\n        return 'bg-amber-500';\n      case 'Maintenance':\n        return 'bg-red-500';\n      default:\n        return 'bg-gray-500';\n    }\n  };\n\n  const downloadQRCode = () => {\n    if (qrData?.qrCode) {\n      const link = document.createElement('a');\n      link.href = qrData.qrCode;\n      link.download = `${barcode}-${productName}.png`;\n      link.click();\n    }\n  };\n\n  return (\n    <>\n      <Card className=\"hover:shadow-md transition-shadow\" data-testid={`card-item-${id}`}>\n        <CardHeader className=\"flex flex-row items-center justify-between gap-2 space-y-0 pb-3\">\n          <div className=\"flex-1\">\n            <h3 className=\"font-bold text-lg\" data-testid={`text-product-name-${id}`}>{productName}</h3>\n            <p className=\"text-sm text-muted-foreground\" data-testid={`text-barcode-${id}`}>Barcode: {barcode}</p>\n          </div>\n          <Badge\n            className={`${statusColors[status]} text-white`}\n            data-testid={`badge-status-${id}`}\n          >\n            {status}\n          </Badge>\n        </CardHeader>\n        <CardContent>\n          <div className=\"space-y-3\">\n            <div className=\"grid grid-cols-2 gap-3 text-sm\">\n              <div>\n                <span className=\"text-muted-foreground\">Type:</span>\n                <span className=\"ml-2 font-medium\" data-testid={`text-type-${id}`}>{productType}</span>\n              </div>\n              {location && (\n                <div>\n                  <span className=\"text-muted-foreground\">Location:</span>\n                  <span className=\"ml-2 font-medium\" data-testid={`text-location-${id}`}>{location}</span>\n                </div>\n              )}\n            </div>\n            {notes && (\n              <p className=\"text-sm text-muted-foreground\" data-testid={`text-notes-${id}`}>\n                <span className=\"font-medium\">Notes:</span> {notes}\n              </p>\n            )}\n            {userRole === 'admin' && (\n              <div className=\"flex gap-2 pt-2 flex-wrap\">\n                {status === 'Available' && (\n                  <Button\n                    onClick={onCheckout}\n                    variant=\"default\"\n                    size=\"sm\"\n                    className=\"bg-blue-600 hover:bg-blue-700 flex-1\"\n                  >\n                    <LogOut className=\"w-4 h-4 mr-2\" />\n                    Check Out\n                  </Button>\n                )}\n                {status === 'In Use' && (\n                  <Button\n                    onClick={onCheckin}\n                    variant=\"default\"\n                    size=\"sm\"\n                    className=\"bg-green-600 hover:bg-green-700 flex-1\"\n                  >\n                    <LogIn className=\"w-4 h-4 mr-2\" />\n                    Check In\n                  </Button>\n                )}\n                <Button\n                  onClick={() => setShowQRDialog(true)}\n                  variant=\"outline\"\n                  size=\"sm\"\n                  className=\"flex-1\"\n                >\n                  <QrCode className=\"w-4 h-4 mr-2\" />\n                  QR Code\n                </Button>\n                <Button\n                  onClick={onEdit}\n                  variant=\"outline\"\n                  size=\"sm\"\n                  className=\"flex-1\"\n                >\n                  <Edit className=\"w-4 h-4 mr-2\" />\n                  Edit\n                </Button>\n                <Button\n                  onClick={onDelete}\n                  variant=\"destructive\"\n                  size=\"sm\"\n                >\n                  <Trash2 className=\"w-4 h-4 mr-2\" />\n                  Delete\n                </Button>\n              </div>\n            )}\n            {userRole !== 'admin' && (\n              <div className=\"flex gap-2 pt-2\">\n                <Button\n                  variant=\"outline\"\n                  size=\"sm\"\n                  onClick={onScan}\n                  className=\"flex-1\"\n                  data-testid={`button-scan-${id}`}\n                  disabled={status !== 'Available' || !onScan}\n                >\n                  <QrCode className=\"w-4 h-4 mr-2\" />\n                  {status === 'Available' ? 'Scan to Checkout' : 'Not Available'}\n                </Button>\n                <Button\n                  variant=\"default\"\n                  size=\"sm\"\n                  onClick={onReserve}\n                  className=\"flex-1 bg-gradient-to-r from-[#667eea] to-[#764ba2]\"\n                  data-testid={`button-reserve-${id}`}\n                  disabled={status === 'Maintenance' || !onReserve}\n                >\n                  <Calendar className=\"w-4 h-4 mr-2\" />\n                  Reserve\n                </Button>\n              </div>\n            )}\n          </div>\n        </CardContent>\n      </Card>\n\n      <Dialog open={showQRDialog} onOpenChange={setShowQRDialog}>\n        <DialogContent className=\"max-w-md\">\n          <DialogHeader>\n            <DialogTitle>QR Code - {productName}</DialogTitle>\n          </DialogHeader>\n          <div className=\"space-y-4\">\n            <div className=\"bg-white p-4 rounded-lg border flex items-center justify-center\">\n              {qrLoading ? (\n                <div className=\"w-64 h-64 flex items-center justify-center\">\n                  <p className=\"text-muted-foreground\">Generating QR Code...</p>\n                </div>\n              ) : qrData?.qrCode ? (\n                <img\n                  src={qrData.qrCode}\n                  alt={`QR Code for ${productName}`}\n                  className=\"w-64 h-64\"\n                />\n              ) : (\n                <div className=\"w-64 h-64 flex items-center justify-center\">\n                  <p className=\"text-muted-foreground text-red-500\">Failed to load QR Code</p>\n                </div>\n              )}\n            </div>\n            <div className=\"text-center\">\n              <p className=\"text-sm text-muted-foreground mb-1\">Barcode</p>\n              <p className=\"font-mono font-semibold\">{barcode}</p>\n            </div>\n            <Button\n              onClick={downloadQRCode}\n              className=\"w-full bg-gradient-to-r from-[#667eea] to-[#764ba2]\"\n              disabled={!qrData?.qrCode}\n            >\n              <Download className=\"w-4 h-4 mr-2\" />\n              Download QR Code\n            </Button>\n          </div>\n        </DialogContent>\n      </Dialog>\n    </>\n  );\n}","path":null,"size_bytes":8091,"size_tokens":null},"attached_assets/carousel_1763670951629.tsx":{"content":"import * as React from \"react\"\nimport useEmblaCarousel, {\n  type UseEmblaCarouselType,\n} from \"embla-carousel-react\"\nimport { ArrowLeft, ArrowRight } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Button } from \"@/components/ui/button\"\n\ntype CarouselApi = UseEmblaCarouselType[1]\ntype UseCarouselParameters = Parameters<typeof useEmblaCarousel>\ntype CarouselOptions = UseCarouselParameters[0]\ntype CarouselPlugin = UseCarouselParameters[1]\n\ntype CarouselProps = {\n  opts?: CarouselOptions\n  plugins?: CarouselPlugin\n  orientation?: \"horizontal\" | \"vertical\"\n  setApi?: (api: CarouselApi) => void\n}\n\ntype CarouselContextProps = {\n  carouselRef: ReturnType<typeof useEmblaCarousel>[0]\n  api: ReturnType<typeof useEmblaCarousel>[1]\n  scrollPrev: () => void\n  scrollNext: () => void\n  canScrollPrev: boolean\n  canScrollNext: boolean\n} & CarouselProps\n\nconst CarouselContext = React.createContext<CarouselContextProps | null>(null)\n\nfunction useCarousel() {\n  const context = React.useContext(CarouselContext)\n\n  if (!context) {\n    throw new Error(\"useCarousel must be used within a <Carousel />\")\n  }\n\n  return context\n}\n\nconst Carousel = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement> & CarouselProps\n>(\n  (\n    {\n      orientation = \"horizontal\",\n      opts,\n      setApi,\n      plugins,\n      className,\n      children,\n      ...props\n    },\n    ref\n  ) => {\n    const [carouselRef, api] = useEmblaCarousel(\n      {\n        ...opts,\n        axis: orientation === \"horizontal\" ? \"x\" : \"y\",\n      },\n      plugins\n    )\n    const [canScrollPrev, setCanScrollPrev] = React.useState(false)\n    const [canScrollNext, setCanScrollNext] = React.useState(false)\n\n    const onSelect = React.useCallback((api: CarouselApi) => {\n      if (!api) {\n        return\n      }\n\n      setCanScrollPrev(api.canScrollPrev())\n      setCanScrollNext(api.canScrollNext())\n    }, [])\n\n    const scrollPrev = React.useCallback(() => {\n      api?.scrollPrev()\n    }, [api])\n\n    const scrollNext = React.useCallback(() => {\n      api?.scrollNext()\n    }, [api])\n\n    const handleKeyDown = React.useCallback(\n      (event: React.KeyboardEvent<HTMLDivElement>) => {\n        if (event.key === \"ArrowLeft\") {\n          event.preventDefault()\n          scrollPrev()\n        } else if (event.key === \"ArrowRight\") {\n          event.preventDefault()\n          scrollNext()\n        }\n      },\n      [scrollPrev, scrollNext]\n    )\n\n    React.useEffect(() => {\n      if (!api || !setApi) {\n        return\n      }\n\n      setApi(api)\n    }, [api, setApi])\n\n    React.useEffect(() => {\n      if (!api) {\n        return\n      }\n\n      onSelect(api)\n      api.on(\"reInit\", onSelect)\n      api.on(\"select\", onSelect)\n\n      return () => {\n        api?.off(\"select\", onSelect)\n      }\n    }, [api, onSelect])\n\n    return (\n      <CarouselContext.Provider\n        value={{\n          carouselRef,\n          api: api,\n          opts,\n          orientation:\n            orientation || (opts?.axis === \"y\" ? \"vertical\" : \"horizontal\"),\n          scrollPrev,\n          scrollNext,\n          canScrollPrev,\n          canScrollNext,\n        }}\n      >\n        <div\n          ref={ref}\n          onKeyDownCapture={handleKeyDown}\n          className={cn(\"relative\", className)}\n          role=\"region\"\n          aria-roledescription=\"carousel\"\n          {...props}\n        >\n          {children}\n        </div>\n      </CarouselContext.Provider>\n    )\n  }\n)\nCarousel.displayName = \"Carousel\"\n\nconst CarouselContent = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => {\n  const { carouselRef, orientation } = useCarousel()\n\n  return (\n    <div ref={carouselRef} className=\"overflow-hidden\">\n      <div\n        ref={ref}\n        className={cn(\n          \"flex\",\n          orientation === \"horizontal\" ? \"-ml-4\" : \"-mt-4 flex-col\",\n          className\n        )}\n        {...props}\n      />\n    </div>\n  )\n})\nCarouselContent.displayName = \"CarouselContent\"\n\nconst CarouselItem = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => {\n  const { orientation } = useCarousel()\n\n  return (\n    <div\n      ref={ref}\n      role=\"group\"\n      aria-roledescription=\"slide\"\n      className={cn(\n        \"min-w-0 shrink-0 grow-0 basis-full\",\n        orientation === \"horizontal\" ? \"pl-4\" : \"pt-4\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nCarouselItem.displayName = \"CarouselItem\"\n\nconst CarouselPrevious = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<typeof Button>\n>(({ className, variant = \"outline\", size = \"icon\", ...props }, ref) => {\n  const { orientation, scrollPrev, canScrollPrev } = useCarousel()\n\n  return (\n    <Button\n      ref={ref}\n      variant={variant}\n      size={size}\n      className={cn(\n        \"absolute  h-8 w-8 rounded-full\",\n        orientation === \"horizontal\"\n          ? \"-left-12 top-1/2 -translate-y-1/2\"\n          : \"-top-12 left-1/2 -translate-x-1/2 rotate-90\",\n        className\n      )}\n      disabled={!canScrollPrev}\n      onClick={scrollPrev}\n      {...props}\n    >\n      <ArrowLeft className=\"h-4 w-4\" />\n      <span className=\"sr-only\">Previous slide</span>\n    </Button>\n  )\n})\nCarouselPrevious.displayName = \"CarouselPrevious\"\n\nconst CarouselNext = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<typeof Button>\n>(({ className, variant = \"outline\", size = \"icon\", ...props }, ref) => {\n  const { orientation, scrollNext, canScrollNext } = useCarousel()\n\n  return (\n    <Button\n      ref={ref}\n      variant={variant}\n      size={size}\n      className={cn(\n        \"absolute h-8 w-8 rounded-full\",\n        orientation === \"horizontal\"\n          ? \"-right-12 top-1/2 -translate-y-1/2\"\n          : \"-bottom-12 left-1/2 -translate-x-1/2 rotate-90\",\n        className\n      )}\n      disabled={!canScrollNext}\n      onClick={scrollNext}\n      {...props}\n    >\n      <ArrowRight className=\"h-4 w-4\" />\n      <span className=\"sr-only\">Next slide</span>\n    </Button>\n  )\n})\nCarouselNext.displayName = \"CarouselNext\"\n\nexport {\n  type CarouselApi,\n  Carousel,\n  CarouselContent,\n  CarouselItem,\n  CarouselPrevious,\n  CarouselNext,\n}\n","path":null,"size_bytes":6210,"size_tokens":null},"client/src/components/ui/collapsible.tsx":{"content":"\"use client\"\n\nimport * as CollapsiblePrimitive from \"@radix-ui/react-collapsible\"\n\nconst Collapsible = CollapsiblePrimitive.Root\n\nconst CollapsibleTrigger = CollapsiblePrimitive.CollapsibleTrigger\n\nconst CollapsibleContent = CollapsiblePrimitive.CollapsibleContent\n\nexport { Collapsible, CollapsibleTrigger, CollapsibleContent }\n","path":null,"size_bytes":329,"size_tokens":null},"client/src/pages/Login.tsx":{"content":"import { useState } from \"react\";\nimport { useMutation } from \"@tanstack/react-query\";\nimport LoginForm from \"@/components/LoginForm\";\nimport { api } from \"@/lib/api\";\n\ninterface LoginProps {\n  onLogin: (user: any) => void;\n}\n\nexport default function Login({ onLogin }: LoginProps) {\n  const [error, setError] = useState(\"\");\n\n  const loginMutation = useMutation({\n    mutationFn: ({ username, password }: { username: string; password: string }) =>\n      api.auth.login(username, password),\n    onSuccess: (data: any) => {\n      onLogin(data.user);\n    },\n    onError: (error: any) => {\n      setError(error.message || \"Login failed. Please try again.\");\n    }\n  });\n\n  const handleLogin = async (username: string, password: string) => {\n    setError(\"\");\n    loginMutation.mutate({ username, password });\n  };\n\n  return (\n    <LoginForm\n      onLogin={handleLogin}\n      isLoading={loginMutation.isPending}\n      error={error}\n    />\n  );\n}","path":null,"size_bytes":941,"size_tokens":null},"attached_assets/vite_1763670748027.ts":{"content":"import express, { type Express } from \"express\";\nimport fs from \"fs\";\nimport path from \"path\";\nimport { createServer as createViteServer, createLogger } from \"vite\";\nimport { type Server } from \"http\";\nimport viteConfig from \"../vite.config\";\nimport { nanoid } from \"nanoid\";\n\nconst viteLogger = createLogger();\n\nexport function log(message: string, source = \"express\") {\n  const formattedTime = new Date().toLocaleTimeString(\"en-US\", {\n    hour: \"numeric\",\n    minute: \"2-digit\",\n    second: \"2-digit\",\n    hour12: true,\n  });\n\n  console.log(`${formattedTime} [${source}] ${message}`);\n}\n\nexport async function setupVite(app: Express, server: Server) {\n  const serverOptions = {\n    middlewareMode: true,\n    hmr: { server },\n    allowedHosts: true as const,\n  };\n\n  const vite = await createViteServer({\n    ...viteConfig,\n    configFile: false,\n    customLogger: {\n      ...viteLogger,\n      error: (msg, options) => {\n        viteLogger.error(msg, options);\n        process.exit(1);\n      },\n    },\n    server: serverOptions,\n    appType: \"custom\",\n  });\n\n  app.use(vite.middlewares);\n  app.use(\"*\", async (req, res, next) => {\n    const url = req.originalUrl;\n\n    try {\n      const clientTemplate = path.resolve(\n        import.meta.dirname,\n        \"..\",\n        \"client\",\n        \"index.html\",\n      );\n\n      // always reload the index.html file from disk incase it changes\n      let template = await fs.promises.readFile(clientTemplate, \"utf-8\");\n      template = template.replace(\n        `src=\"/src/main.tsx\"`,\n        `src=\"/src/main.tsx?v=${nanoid()}\"`,\n      );\n      const page = await vite.transformIndexHtml(url, template);\n      res.status(200).set({ \"Content-Type\": \"text/html\" }).end(page);\n    } catch (e) {\n      vite.ssrFixStacktrace(e as Error);\n      next(e);\n    }\n  });\n}\n\nexport function serveStatic(app: Express) {\n  const distPath = path.resolve(import.meta.dirname, \"public\");\n\n  if (!fs.existsSync(distPath)) {\n    throw new Error(\n      `Could not find the build directory: ${distPath}, make sure to build the client first`,\n    );\n  }\n\n  app.use(express.static(distPath));\n\n  // fall through to index.html if the file doesn't exist\n  app.use(\"*\", (_req, res) => {\n    res.sendFile(path.resolve(distPath, \"index.html\"));\n  });\n}\n","path":null,"size_bytes":2263,"size_tokens":null},"attached_assets/dialog_1763670951634.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as DialogPrimitive from \"@radix-ui/react-dialog\"\nimport { X } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Dialog = DialogPrimitive.Root\n\nconst DialogTrigger = DialogPrimitive.Trigger\n\nconst DialogPortal = DialogPrimitive.Portal\n\nconst DialogClose = DialogPrimitive.Close\n\nconst DialogOverlay = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Overlay\n    ref={ref}\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n  />\n))\nDialogOverlay.displayName = DialogPrimitive.Overlay.displayName\n\nconst DialogContent = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Content>\n>(({ className, children, ...props }, ref) => (\n  <DialogPortal>\n    <DialogOverlay />\n    <DialogPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg\",\n        className\n      )}\n      {...props}\n    >\n      {children}\n      <DialogPrimitive.Close className=\"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground\">\n        <X className=\"h-4 w-4\" />\n        <span className=\"sr-only\">Close</span>\n      </DialogPrimitive.Close>\n    </DialogPrimitive.Content>\n  </DialogPortal>\n))\nDialogContent.displayName = DialogPrimitive.Content.displayName\n\nconst DialogHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-1.5 text-center sm:text-left\",\n      className\n    )}\n    {...props}\n  />\n)\nDialogHeader.displayName = \"DialogHeader\"\n\nconst DialogFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\n      className\n    )}\n    {...props}\n  />\n)\nDialogFooter.displayName = \"DialogFooter\"\n\nconst DialogTitle = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Title\n    ref={ref}\n    className={cn(\n      \"text-lg font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nDialogTitle.displayName = DialogPrimitive.Title.displayName\n\nconst DialogDescription = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nDialogDescription.displayName = DialogPrimitive.Description.displayName\n\nexport {\n  Dialog,\n  DialogPortal,\n  DialogOverlay,\n  DialogClose,\n  DialogTrigger,\n  DialogContent,\n  DialogHeader,\n  DialogFooter,\n  DialogTitle,\n  DialogDescription,\n}\n","path":null,"size_bytes":3848,"size_tokens":null},"attached_assets/QRCodes_1763670809220.tsx":{"content":"import { useQuery } from \"@tanstack/react-query\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Download, Copy, ExternalLink } from \"lucide-react\";\nimport { api } from \"@/lib/api\";\nimport InventoryHeader from \"@/components/InventoryHeader\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport type { Language } from \"@/lib/translations\";\nimport { useTranslation } from \"@/lib/translations\";\n\ninterface QRCodesProps {\n  userName: string;\n  userRole: string;\n  onLogout: () => void;\n  onNavigateBack?: () => void;\n  language: Language;\n  onLanguageChange: (lang: Language) => void;\n}\n\nexport default function QRCodes({ userName, userRole, onLogout, onNavigateBack, language, onLanguageChange }: QRCodesProps) {\n  const { toast } = useToast();\n  const t = useTranslation(language);\n  const { data: qrCodes = [], isLoading } = useQuery({\n    queryKey: ['/api/qrcodes/all'],\n    queryFn: () => api.qrCodes.getAllQRCodes(),\n  });\n\n  const downloadQRCode = (qrCode: string, fileName: string) => {\n    const link = document.createElement('a');\n    link.href = qrCode;\n    link.download = `${fileName}.png`;\n    link.click();\n  };\n\n  const copyToClipboard = (text: string) => {\n    navigator.clipboard.writeText(text);\n    toast({ title: \"URL copied to clipboard!\" });\n  };\n\n  const downloadAllQRCodes = () => {\n    qrCodes.forEach((item: any, index: number) => {\n      setTimeout(() => {\n        downloadQRCode(item.qrCode, `${item.barcode}-${item.productName}`);\n      }, index * 100);\n    });\n  };\n\n  return (\n    <div className=\"min-h-screen bg-background\">\n      <InventoryHeader\n        userName={userName}\n        userRole={userRole}\n        currentView=\"inventory\"\n        onViewChange={() => {}}\n        onLogout={onLogout}\n        onNavigateToReservations={onNavigateBack}\n        hideViewToggle={true}\n        language={language}\n        onLanguageChange={onLanguageChange}\n      />\n\n      <main className=\"max-w-[1400px] mx-auto px-5 py-8\">\n        <div className=\"flex items-center justify-between mb-6\">\n          <div>\n            <h1 className=\"text-3xl font-bold\">{t('qrCodes')}</h1>\n            <p className=\"text-muted-foreground\">{t('scanQRCodes')}</p>\n          </div>\n          <div className=\"flex gap-2\">\n            <Button\n              onClick={downloadAllQRCodes}\n              variant=\"outline\"\n              disabled={qrCodes.length === 0}\n            >\n              <Download className=\"w-4 h-4 mr-2\" />\n              {t('downloadAll')}\n            </Button>\n          </div>\n        </div>\n\n        {isLoading ? (\n          <div className=\"text-center py-12\">\n            <p className=\"text-muted-foreground\">{t('generatingQRCodes')}</p>\n          </div>\n        ) : qrCodes.length === 0 ? (\n          <div className=\"text-center py-12\">\n            <p className=\"text-muted-foreground\">{t('noItemsFound')}</p>\n          </div>\n        ) : (\n          <div className=\"grid grid-cols-[repeat(auto-fill,minmax(300px,1fr))] gap-6\">\n            {qrCodes.map((item: any) => (\n              <Card key={item.id}>\n                <CardHeader>\n                  <CardTitle className=\"text-lg\">{item.productName}</CardTitle>\n                  <p className=\"text-sm text-muted-foreground\">{item.barcode}</p>\n                </CardHeader>\n                <CardContent className=\"space-y-4\">\n                  <div className=\"bg-white p-4 rounded-lg border\">\n                    <img\n                      src={item.qrCode}\n                      alt={`QR Code for ${item.productName}`}\n                      className=\"w-full h-auto\"\n                    />\n                  </div>\n\n                  {item.publicUrl && (\n                    <div className=\"space-y-2\">\n                      <p className=\"text-xs font-semibold text-muted-foreground\">Public Scan URL:</p>\n                      <div className=\"flex gap-2\">\n                        <input\n                          type=\"text\"\n                          value={item.publicUrl}\n                          readOnly\n                          className=\"flex-1 px-3 py-2 text-xs bg-muted rounded border text-muted-foreground\"\n                        />\n                        <Button\n                          size=\"sm\"\n                          variant=\"outline\"\n                          onClick={() => copyToClipboard(item.publicUrl)}\n                        >\n                          <Copy className=\"w-3 h-3\" />\n                        </Button>\n                        <Button\n                          size=\"sm\"\n                          variant=\"outline\"\n                          onClick={() => window.open(item.publicUrl, '_blank')}\n                        >\n                          <ExternalLink className=\"w-3 h-3\" />\n                        </Button>\n                      </div>\n                    </div>\n                  )}\n\n                  <Button\n                    onClick={() => downloadQRCode(item.qrCode, `${item.barcode}-${item.productName}`)}\n                    variant=\"outline\"\n                    className=\"w-full\"\n                  >\n                    <Download className=\"w-4 h-4 mr-2\" />\n                    {t('downloadQRCode')}\n                  </Button>\n                </CardContent>\n              </Card>\n            ))}\n          </div>\n        )}\n      </main>\n    </div>\n  );\n}","path":null,"size_bytes":5393,"size_tokens":null},"attached_assets/tooltip_1763671095574.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as TooltipPrimitive from \"@radix-ui/react-tooltip\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst TooltipProvider = TooltipPrimitive.Provider\n\nconst Tooltip = TooltipPrimitive.Root\n\nconst TooltipTrigger = TooltipPrimitive.Trigger\n\nconst TooltipContent = React.forwardRef<\n  React.ElementRef<typeof TooltipPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof TooltipPrimitive.Content>\n>(({ className, sideOffset = 4, ...props }, ref) => (\n  <TooltipPrimitive.Content\n    ref={ref}\n    sideOffset={sideOffset}\n    className={cn(\n      \"z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-tooltip-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nTooltipContent.displayName = TooltipPrimitive.Content.displayName\n\nexport { Tooltip, TooltipTrigger, TooltipContent, TooltipProvider }\n","path":null,"size_bytes":1209,"size_tokens":null},"attached_assets/ActivityLogs_1763670809217.tsx":{"content":"import { useState } from \"react\";\nimport { useQuery } from \"@tanstack/react-query\";\nimport { Card, CardContent, CardHeader } from \"@/components/ui/card\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from \"@/components/ui/tabs\";\nimport { Dialog, DialogContent, DialogHeader, DialogTitle } from \"@/components/ui/dialog\";\nimport { Button } from \"@/components/ui/button\";\nimport { format } from \"date-fns\";\nimport { api, type ActivityLog } from \"@/lib/api\";\nimport { Clock, User, Package, ArrowRight, History, Trash2, RotateCcw, FileEdit } from \"lucide-react\";\nimport InventoryHeader from \"@/components/InventoryHeader\";\nimport type { Language } from \"@/lib/translations\";\nimport { useTranslation } from \"@/lib/translations\";\n\ninterface ActivityLogsProps {\n  userName: string;\n  userRole: string;\n  onLogout: () => void;\n  onNavigateBack?: () => void;\n  currentLanguage: Language;\n  onLanguageChange: (lang: Language) => void;\n}\n\nexport default function ActivityLogs({ userName, userRole, onLogout, onNavigateBack, currentLanguage, onLanguageChange }: ActivityLogsProps) {\n  const t = useTranslation(currentLanguage);\n  const [selectedItem, setSelectedItem] = useState<string | null>(null);\n  const [selectedReservation, setSelectedReservation] = useState<string | null>(null);\n\n  const { data: logs = [], isLoading, error } = useQuery({\n    queryKey: ['/api/activity-logs'],\n    queryFn: () => api.activityLogs.getAll(),\n    refetchInterval: 5000,\n  });\n\n  const { data: editHistory = [] } = useQuery({\n    queryKey: ['/api/item-edit-history', selectedItem],\n    queryFn: () => fetch(`/api/item-edit-history/${selectedItem}`).then(r => r.json()),\n    enabled: !!selectedItem,\n  });\n\n  const { data: statusHistory = [] } = useQuery({\n    queryKey: ['/api/reservation-status-history', selectedReservation],\n    queryFn: () => fetch(`/api/reservation-status-history/${selectedReservation}`).then(r => r.json()),\n    enabled: !!selectedReservation,\n  });\n\n  const getActionColor = (action: string) => {\n    if (action.includes('Checked Out') || action.includes('In Use')) return 'bg-blue-500';\n    if (action.includes('Checked In') || action.includes('Available')) return 'bg-green-500';\n    if (action.includes('Approved')) return 'bg-emerald-500';\n    if (action.includes('Rejected')) return 'bg-red-500';\n    if (action.includes('Reserved')) return 'bg-amber-500';\n    if (action.includes('Deleted')) return 'bg-gray-500';\n    if (action.includes('Restored')) return 'bg-purple-500';\n    return 'bg-gray-500';\n  };\n\n  return (\n    <div className=\"min-h-screen bg-background\" dir={currentLanguage === 'ar' ? 'rtl' : 'ltr'}>\n      <InventoryHeader\n        userName={userName}\n        userRole={userRole}\n        currentView=\"inventory\"\n        onViewChange={() => {}}\n        onLogout={onLogout}\n        onNavigateToReservations={onNavigateBack}\n        hideViewToggle={true}\n        language={currentLanguage}\n        onLanguageChange={onLanguageChange}\n      />\n\n      <main className=\"max-w-[1400px] mx-auto px-5 py-8\">\n        <div className=\"mb-6\">\n          <h1 className=\"text-3xl font-bold\">{t('activityLogHistory')}</h1>\n          <p className=\"text-muted-foreground\">{t('completeAuditTrail')}</p>\n        </div>\n\n        <Tabs defaultValue=\"activity\" className=\"space-y-4\">\n          <TabsList>\n            <TabsTrigger value=\"activity\">\n              <Package className=\"w-4 h-4 mr-2\" />\n              {t('activityLogHistory')}\n            </TabsTrigger>\n          </TabsList>\n\n          <TabsContent value=\"activity\" className=\"space-y-4\">\n            {isLoading ? (\n              <div className=\"text-center py-12\">\n                <p className=\"text-muted-foreground\">{t('loadingActivityLogs')}</p>\n              </div>\n            ) : error ? (\n              <div className=\"text-center py-12\">\n                <p className=\"text-red-500\">{t('errorLoadingLogs')}</p>\n              </div>\n            ) : logs.length === 0 ? (\n              <div className=\"text-center py-12\">\n                <p className=\"text-muted-foreground\">{t('noActivityLogs')}</p>\n              </div>\n            ) : (\n              <div className=\"space-y-4\">\n                {logs.map((log: ActivityLog) => (\n                  <Card key={log.id} className=\"hover:shadow-md transition-shadow\">\n                    <CardHeader className=\"pb-3\">\n                      <div className=\"flex items-start justify-between gap-4\">\n                        <div className=\"flex-1\">\n                          <div className=\"flex items-center gap-2 mb-2\">\n                            <Package className=\"w-4 h-4 text-muted-foreground\" />\n                            <h3 className=\"font-semibold\">{log.itemName}</h3>\n                            <Badge variant=\"outline\" className=\"text-xs\">\n                              {log.itemBarcode}\n                            </Badge>\n                            <Button\n                              variant=\"ghost\"\n                              size=\"sm\"\n                              onClick={() => setSelectedItem(log.itemId)}\n                              className=\"ml-auto\"\n                            >\n                              <History className=\"w-4 h-4 mr-1\" />\n                              {t('editHistory')}\n                            </Button>\n                          </div>\n                          <div className=\"flex items-center gap-2 text-sm text-muted-foreground\">\n                            <User className=\"w-4 h-4\" />\n                            <span>{log.userName}</span>\n                            <Badge variant=\"secondary\" className=\"text-xs\">\n                              {log.userRole}\n                            </Badge>\n                          </div>\n                        </div>\n                        <div className=\"text-right\">\n                          <Badge className={`${getActionColor(log.action)} text-white`}>\n                            {log.action}\n                          </Badge>\n                          <div className=\"flex items-center gap-1 text-xs text-muted-foreground mt-2\">\n                            <Clock className=\"w-3 h-3\" />\n                            <span>{format(new Date(log.timestamp), 'MMM dd, yyyy HH:mm')}</span>\n                          </div>\n                        </div>\n                      </div>\n                    </CardHeader>\n                    <CardContent>\n                      <div className=\"flex items-center gap-3 text-sm\">\n                        {log.oldStatus && (\n                          <>\n                            <Badge variant=\"outline\">{log.oldStatus}</Badge>\n                            <ArrowRight className=\"w-4 h-4 text-muted-foreground\" />\n                          </>\n                        )}\n                        {log.newStatus && (\n                          <Badge variant=\"outline\">{log.newStatus}</Badge>\n                        )}\n                      </div>\n                      {log.notes && (\n                        <p className=\"text-sm text-muted-foreground mt-2\">{log.notes}</p>\n                      )}\n                    </CardContent>\n                  </Card>\n                ))}\n              </div>\n            )}\n          </TabsContent>\n        </Tabs>\n\n        {/* Edit History Dialog - READ ONLY */}\n        <Dialog open={!!selectedItem} onOpenChange={() => setSelectedItem(null)}>\n          <DialogContent className=\"max-w-2xl max-h-[80vh] overflow-y-auto\">\n            <DialogHeader>\n              <DialogTitle>{t('itemEditHistory')}</DialogTitle>\n            </DialogHeader>\n            <div className=\"space-y-3\">\n              {editHistory.length === 0 ? (\n                <p className=\"text-center text-muted-foreground py-8\">{t('noEditHistory')}</p>\n              ) : (\n                editHistory.map((edit: any) => (\n                  <Card key={edit.id}>\n                    <CardContent className=\"pt-4\">\n                      <div className=\"flex items-start justify-between mb-2\">\n                        <div>\n                          <Badge variant=\"outline\">{edit.fieldName}</Badge>\n                          <p className=\"text-xs text-muted-foreground mt-1\">\n                            {t('by')} {edit.userName} â€¢ {format(new Date(edit.timestamp), 'MMM dd, yyyy HH:mm')}\n                          </p>\n                        </div>\n                      </div>\n                      <div className=\"flex items-center gap-2 text-sm\">\n                        <Badge variant=\"secondary\">{edit.oldValue || 'empty'}</Badge>\n                        <ArrowRight className=\"w-4 h-4\" />\n                        <Badge variant=\"secondary\">{edit.newValue || 'empty'}</Badge>\n                      </div>\n                    </CardContent>\n                  </Card>\n                ))\n              )}\n            </div>\n          </DialogContent>\n        </Dialog>\n      </main>\n    </div>\n  );\n}","path":null,"size_bytes":8942,"size_tokens":null},"attached_assets/pagination_1763670995699.tsx":{"content":"import * as React from \"react\"\nimport { ChevronLeft, ChevronRight, MoreHorizontal } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\nimport { ButtonProps, buttonVariants } from \"@/components/ui/button\"\n\nconst Pagination = ({ className, ...props }: React.ComponentProps<\"nav\">) => (\n  <nav\n    role=\"navigation\"\n    aria-label=\"pagination\"\n    className={cn(\"mx-auto flex w-full justify-center\", className)}\n    {...props}\n  />\n)\nPagination.displayName = \"Pagination\"\n\nconst PaginationContent = React.forwardRef<\n  HTMLUListElement,\n  React.ComponentProps<\"ul\">\n>(({ className, ...props }, ref) => (\n  <ul\n    ref={ref}\n    className={cn(\"flex flex-row items-center gap-1\", className)}\n    {...props}\n  />\n))\nPaginationContent.displayName = \"PaginationContent\"\n\nconst PaginationItem = React.forwardRef<\n  HTMLLIElement,\n  React.ComponentProps<\"li\">\n>(({ className, ...props }, ref) => (\n  <li ref={ref} className={cn(\"\", className)} {...props} />\n))\nPaginationItem.displayName = \"PaginationItem\"\n\ntype PaginationLinkProps = {\n  isActive?: boolean\n} & Pick<ButtonProps, \"size\"> &\n  React.ComponentProps<\"a\">\n\nconst PaginationLink = ({\n  className,\n  isActive,\n  size = \"icon\",\n  ...props\n}: PaginationLinkProps) => (\n  <a\n    aria-current={isActive ? \"page\" : undefined}\n    className={cn(\n      buttonVariants({\n        variant: isActive ? \"outline\" : \"ghost\",\n        size,\n      }),\n      className\n    )}\n    {...props}\n  />\n)\nPaginationLink.displayName = \"PaginationLink\"\n\nconst PaginationPrevious = ({\n  className,\n  ...props\n}: React.ComponentProps<typeof PaginationLink>) => (\n  <PaginationLink\n    aria-label=\"Go to previous page\"\n    size=\"default\"\n    className={cn(\"gap-1 pl-2.5\", className)}\n    {...props}\n  >\n    <ChevronLeft className=\"h-4 w-4\" />\n    <span>Previous</span>\n  </PaginationLink>\n)\nPaginationPrevious.displayName = \"PaginationPrevious\"\n\nconst PaginationNext = ({\n  className,\n  ...props\n}: React.ComponentProps<typeof PaginationLink>) => (\n  <PaginationLink\n    aria-label=\"Go to next page\"\n    size=\"default\"\n    className={cn(\"gap-1 pr-2.5\", className)}\n    {...props}\n  >\n    <span>Next</span>\n    <ChevronRight className=\"h-4 w-4\" />\n  </PaginationLink>\n)\nPaginationNext.displayName = \"PaginationNext\"\n\nconst PaginationEllipsis = ({\n  className,\n  ...props\n}: React.ComponentProps<\"span\">) => (\n  <span\n    aria-hidden\n    className={cn(\"flex h-9 w-9 items-center justify-center\", className)}\n    {...props}\n  >\n    <MoreHorizontal className=\"h-4 w-4\" />\n    <span className=\"sr-only\">More pages</span>\n  </span>\n)\nPaginationEllipsis.displayName = \"PaginationEllipsis\"\n\nexport {\n  Pagination,\n  PaginationContent,\n  PaginationEllipsis,\n  PaginationItem,\n  PaginationLink,\n  PaginationNext,\n  PaginationPrevious,\n}\n","path":null,"size_bytes":2751,"size_tokens":null},"client/src/components/ui/breadcrumb.tsx":{"content":"import * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { ChevronRight, MoreHorizontal } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Breadcrumb = React.forwardRef<\n  HTMLElement,\n  React.ComponentPropsWithoutRef<\"nav\"> & {\n    separator?: React.ReactNode\n  }\n>(({ ...props }, ref) => <nav ref={ref} aria-label=\"breadcrumb\" {...props} />)\nBreadcrumb.displayName = \"Breadcrumb\"\n\nconst BreadcrumbList = React.forwardRef<\n  HTMLOListElement,\n  React.ComponentPropsWithoutRef<\"ol\">\n>(({ className, ...props }, ref) => (\n  <ol\n    ref={ref}\n    className={cn(\n      \"flex flex-wrap items-center gap-1.5 break-words text-sm text-muted-foreground sm:gap-2.5\",\n      className\n    )}\n    {...props}\n  />\n))\nBreadcrumbList.displayName = \"BreadcrumbList\"\n\nconst BreadcrumbItem = React.forwardRef<\n  HTMLLIElement,\n  React.ComponentPropsWithoutRef<\"li\">\n>(({ className, ...props }, ref) => (\n  <li\n    ref={ref}\n    className={cn(\"inline-flex items-center gap-1.5\", className)}\n    {...props}\n  />\n))\nBreadcrumbItem.displayName = \"BreadcrumbItem\"\n\nconst BreadcrumbLink = React.forwardRef<\n  HTMLAnchorElement,\n  React.ComponentPropsWithoutRef<\"a\"> & {\n    asChild?: boolean\n  }\n>(({ asChild, className, ...props }, ref) => {\n  const Comp = asChild ? Slot : \"a\"\n\n  return (\n    <Comp\n      ref={ref}\n      className={cn(\"transition-colors hover:text-foreground\", className)}\n      {...props}\n    />\n  )\n})\nBreadcrumbLink.displayName = \"BreadcrumbLink\"\n\nconst BreadcrumbPage = React.forwardRef<\n  HTMLSpanElement,\n  React.ComponentPropsWithoutRef<\"span\">\n>(({ className, ...props }, ref) => (\n  <span\n    ref={ref}\n    role=\"link\"\n    aria-disabled=\"true\"\n    aria-current=\"page\"\n    className={cn(\"font-normal text-foreground\", className)}\n    {...props}\n  />\n))\nBreadcrumbPage.displayName = \"BreadcrumbPage\"\n\nconst BreadcrumbSeparator = ({\n  children,\n  className,\n  ...props\n}: React.ComponentProps<\"li\">) => (\n  <li\n    role=\"presentation\"\n    aria-hidden=\"true\"\n    className={cn(\"[&>svg]:w-3.5 [&>svg]:h-3.5\", className)}\n    {...props}\n  >\n    {children ?? <ChevronRight />}\n  </li>\n)\nBreadcrumbSeparator.displayName = \"BreadcrumbSeparator\"\n\nconst BreadcrumbEllipsis = ({\n  className,\n  ...props\n}: React.ComponentProps<\"span\">) => (\n  <span\n    role=\"presentation\"\n    aria-hidden=\"true\"\n    className={cn(\"flex h-9 w-9 items-center justify-center\", className)}\n    {...props}\n  >\n    <MoreHorizontal className=\"h-4 w-4\" />\n    <span className=\"sr-only\">More</span>\n  </span>\n)\nBreadcrumbEllipsis.displayName = \"BreadcrumbElipssis\"\n\nexport {\n  Breadcrumb,\n  BreadcrumbList,\n  BreadcrumbItem,\n  BreadcrumbLink,\n  BreadcrumbPage,\n  BreadcrumbSeparator,\n  BreadcrumbEllipsis,\n}\n","path":null,"size_bytes":2712,"size_tokens":null},"attached_assets/utils_1763670820749.ts":{"content":"import { clsx, type ClassValue } from \"clsx\"\nimport { twMerge } from \"tailwind-merge\"\n\nexport function cn(...inputs: ClassValue[]) {\n  return twMerge(clsx(inputs))\n}\n","path":null,"size_bytes":166,"size_tokens":null},"client/src/components/ui/card.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Card = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\n      \"shadcn-card rounded-xl border bg-card border-card-border text-card-foreground shadow-sm\",\n      className\n    )}\n    {...props}\n  />\n));\nCard.displayName = \"Card\"\n\nconst CardHeader = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex flex-col space-y-1.5 p-6\", className)}\n    {...props}\n  />\n));\nCardHeader.displayName = \"CardHeader\"\n\nconst CardTitle = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\n      \"text-2xl font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nCardTitle.displayName = \"CardTitle\"\n\nconst CardDescription = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n));\nCardDescription.displayName = \"CardDescription\"\n\nconst CardContent = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div ref={ref} className={cn(\"p-6 pt-0\", className)} {...props} />\n))\nCardContent.displayName = \"CardContent\"\n\nconst CardFooter = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex items-center p-6 pt-0\", className)}\n    {...props}\n  />\n))\nCardFooter.displayName = \"CardFooter\"\nexport {\n  Card,\n  CardHeader,\n  CardFooter,\n  CardTitle,\n  CardDescription,\n  CardContent,\n}\n","path":null,"size_bytes":1904,"size_tokens":null},"attached_assets/email_1763670748024.ts":{"content":"\nimport nodemailer from 'nodemailer';\nimport type { Transporter } from 'nodemailer';\n\ninterface EmailConfig {\n  host: string;\n  port: number;\n  secure: boolean;\n  auth: {\n    user: string;\n    pass: string;\n  };\n}\n\n// Create reusable transporter\nlet transporter: Transporter | null = null;\n\nfunction getTransporter(): Transporter | null {\n  // Check if email is configured via environment variables\n  const emailHost = process.env.EMAIL_HOST;\n  const emailPort = process.env.EMAIL_PORT;\n  const emailUser = process.env.EMAIL_USER;\n  const emailPass = process.env.EMAIL_PASS;\n\n  if (!emailHost || !emailUser || !emailPass) {\n    console.warn('âš ï¸  Email not configured. Set EMAIL_HOST, EMAIL_PORT, EMAIL_USER, EMAIL_PASS environment variables.');\n    return null;\n  }\n\n  if (!transporter) {\n    transporter = nodemailer.createTransport({\n      host: emailHost,\n      port: parseInt(emailPort || '587'),\n      secure: emailPort === '465',\n      auth: {\n        user: emailUser,\n        pass: emailPass,\n      },\n    });\n  }\n\n  return transporter;\n}\n\nexport interface ReservationEmailData {\n  itemName: string;\n  userName: string;\n  userEmail: string;\n  startDate: string;\n  returnDate: string;\n  notes?: string;\n}\n\nexport async function sendReservationRequestEmail(\n  adminEmail: string,\n  data: ReservationEmailData\n): Promise<boolean> {\n  const transport = getTransporter();\n  if (!transport) return false;\n\n  try {\n    const mailOptions = {\n      from: process.env.EMAIL_USER,\n      to: adminEmail,\n      subject: 'New Reservation Request - Inventory Management System',\n      html: `\n        <div style=\"font-family: Arial, sans-serif; max-width: 600px; margin: 0 auto;\">\n          <h2 style=\"color: #667eea;\">New Reservation Request</h2>\n          <div style=\"background: #f9fafb; padding: 20px; border-radius: 8px; margin: 20px 0;\">\n            <p style=\"margin: 10px 0;\"><strong>Item:</strong> ${data.itemName}</p>\n            <p style=\"margin: 10px 0;\"><strong>User:</strong> ${data.userName}</p>\n            <p style=\"margin: 10px 0;\"><strong>Dates:</strong> ${data.startDate} to ${data.returnDate}</p>\n            ${data.notes ? `<p style=\"margin: 10px 0;\"><strong>Notes:</strong> ${data.notes}</p>` : ''}\n          </div>\n          <p>Please log in to the inventory system to review this request.</p>\n          <a href=\"${process.env.APP_URL || 'http://localhost:5000'}\" \n             style=\"display: inline-block; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); \n                    color: white; padding: 12px 24px; text-decoration: none; border-radius: 6px; margin-top: 10px;\">\n            Review Request\n          </a>\n        </div>\n      `,\n    };\n\n    await transport.sendMail(mailOptions);\n    console.log(`âœ… Reservation request email sent to ${adminEmail}`);\n    return true;\n  } catch (error) {\n    console.error('âŒ Failed to send reservation request email:', error);\n    return false;\n  }\n}\n\nexport async function sendReservationApprovedEmail(\n  userEmail: string,\n  data: ReservationEmailData\n): Promise<boolean> {\n  const transport = getTransporter();\n  if (!transport) return false;\n\n  try {\n    const mailOptions = {\n      from: process.env.EMAIL_USER,\n      to: userEmail,\n      subject: 'Reservation Approved - Inventory Management System',\n      html: `\n        <div style=\"font-family: Arial, sans-serif; max-width: 600px; margin: 0 auto;\">\n          <h2 style=\"color: #10b981;\">Reservation Approved! âœ…</h2>\n          <div style=\"background: #d1fae5; padding: 20px; border-radius: 8px; margin: 20px 0; border-left: 4px solid #10b981;\">\n            <p style=\"margin: 10px 0;\"><strong>Item:</strong> ${data.itemName}</p>\n            <p style=\"margin: 10px 0;\"><strong>Reserved Dates:</strong> ${data.startDate} to ${data.returnDate}</p>\n          </div>\n          <p>Your reservation request has been approved! You can pick up the item on the start date.</p>\n          <a href=\"${process.env.APP_URL || 'http://localhost:5000'}\" \n             style=\"display: inline-block; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); \n                    color: white; padding: 12px 24px; text-decoration: none; border-radius: 6px; margin-top: 10px;\">\n            View Reservation\n          </a>\n        </div>\n      `,\n    };\n\n    await transport.sendMail(mailOptions);\n    console.log(`âœ… Approval email sent to ${userEmail}`);\n    return true;\n  } catch (error) {\n    console.error('âŒ Failed to send approval email:', error);\n    return false;\n  }\n}\n\nexport async function sendReservationRejectedEmail(\n  userEmail: string,\n  data: ReservationEmailData & { rejectionReason?: string }\n): Promise<boolean> {\n  const transport = getTransporter();\n  if (!transport) return false;\n\n  try {\n    const mailOptions = {\n      from: process.env.EMAIL_USER,\n      to: userEmail,\n      subject: 'Reservation Declined - Inventory Management System',\n      html: `\n        <div style=\"font-family: Arial, sans-serif; max-width: 600px; margin: 0 auto;\">\n          <h2 style=\"color: #ef4444;\">Reservation Declined</h2>\n          <div style=\"background: #fee2e2; padding: 20px; border-radius: 8px; margin: 20px 0; border-left: 4px solid #ef4444;\">\n            <p style=\"margin: 10px 0;\"><strong>Item:</strong> ${data.itemName}</p>\n            <p style=\"margin: 10px 0;\"><strong>Requested Dates:</strong> ${data.startDate} to ${data.returnDate}</p>\n            ${data.rejectionReason ? `<p style=\"margin: 10px 0;\"><strong>Reason:</strong> ${data.rejectionReason}</p>` : ''}\n          </div>\n          <p>Unfortunately, your reservation request has been declined. Please contact the administrator for more information or submit a new request for different dates.</p>\n          <a href=\"${process.env.APP_URL || 'http://localhost:5000'}\" \n             style=\"display: inline-block; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); \n                    color: white; padding: 12px 24px; text-decoration: none; border-radius: 6px; margin-top: 10px;\">\n            Make New Request\n          </a>\n        </div>\n      `,\n    };\n\n    await transport.sendMail(mailOptions);\n    console.log(`âœ… Rejection email sent to ${userEmail}`);\n    return true;\n  } catch (error) {\n    console.error('âŒ Failed to send rejection email:', error);\n    return false;\n  }\n}\n","path":null,"size_bytes":6307,"size_tokens":null},"client/src/pages/Reports.tsx":{"content":"import { useState } from \"react\";\nimport { useQuery } from \"@tanstack/react-query\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Card } from \"@/components/ui/card\";\nimport { Search, ArrowLeft, AlertCircle } from \"lucide-react\";\nimport { format } from \"date-fns\";\nimport { api } from \"@/lib/api\";\nimport InventoryHeader from \"@/components/InventoryHeader\";\nimport DateRangeFilter from \"@/components/DateRangeFilter\";\nimport type { Language } from \"@/lib/translations\";\nimport { useTranslation } from \"@/lib/translations\";\n\ninterface ReportsPageProps {\n  userName: string;\n  userRole: string;\n  userId: string;\n  onLogout: () => void;\n  onNavigateToInventory?: () => void;\n  onNavigateToReservations?: () => void;\n  onNavigateToActivityLogs?: () => void;\n  onNavigateToQRCodes?: () => void;\n  onNavigateToMaintenance?: () => void;\n  onNavigateToReports?: () => void;\n  language?: Language;\n  onLanguageChange?: (language: Language) => void;\n}\n\nexport default function Reports({\n  userName,\n  userRole,\n  userId,\n  onLogout,\n  onNavigateToInventory,\n  onNavigateToReservations,\n  onNavigateToActivityLogs,\n  onNavigateToQRCodes,\n  onNavigateToMaintenance,\n  onNavigateToReports,\n  language = 'en',\n  onLanguageChange\n}: ReportsPageProps) {\n  const t = useTranslation(language);\n  const [searchQuery, setSearchQuery] = useState(\"\");\n  const [dateRange, setDateRange] = useState<{ startDate: Date; endDate: Date } | null>(null);\n\n  const buildQueryKey = () => {\n    const key = ['/api/damage-reports'];\n    if (dateRange) {\n      key.push(dateRange.startDate.toISOString(), dateRange.endDate.toISOString());\n    }\n    return key;\n  };\n\n  const { data: reports = [] } = useQuery({\n    queryKey: buildQueryKey(),\n    queryFn: async () => {\n      const params = new URLSearchParams();\n      if (dateRange) {\n        params.append('startDate', dateRange.startDate.toISOString());\n        params.append('endDate', dateRange.endDate.toISOString());\n      }\n      const url = `/api/damage-reports${params.toString() ? '?' + params.toString() : ''}`;\n      const response = await fetch(url);\n      if (!response.ok) throw new Error('Failed to fetch reports');\n      return response.json();\n    },\n  });\n\n  const { data: items = [] } = useQuery({\n    queryKey: ['/api/items'],\n    queryFn: () => api.items.getAll(),\n  });\n\n  const filteredReports = reports\n    .filter(report => {\n      const itemName = items.find(i => i.id === report.itemId)?.productName?.toLowerCase() || \"\";\n      const matchesSearch = searchQuery === \"\" || itemName.includes(searchQuery.toLowerCase());\n      const matchesRole = userRole === 'admin' || report.reportedBy === userId;\n      return matchesSearch && matchesRole;\n    })\n    .sort((a, b) => new Date(b.createdAt).getTime() - new Date(a.createdAt).getTime());\n\n  return (\n    <div className=\"min-h-screen bg-background\">\n      <InventoryHeader\n        userName={userName}\n        userRole={userRole}\n        currentView=\"inventory\"\n        onViewChange={() => onNavigateToInventory?.()}\n        onLogout={onLogout}\n        onNavigateToReservations={onNavigateToReservations}\n        onNavigateToActivityLogs={onNavigateToActivityLogs}\n        onNavigateToQRCodes={onNavigateToQRCodes}\n        onNavigateToMaintenance={onNavigateToMaintenance}\n        onNavigateToReports={() => {}}\n        hideViewToggle={true}\n        language={language}\n        onLanguageChange={onLanguageChange}\n      />\n\n      <main className=\"max-w-[1400px] mx-auto px-3 md:px-5 py-4 md:py-8\">\n        <div className=\"mb-6\">\n          <Button\n            variant=\"ghost\"\n            onClick={onNavigateToInventory}\n            className=\"gap-2\"\n          >\n            <ArrowLeft className=\"w-4 h-4\" />\n            {t('backToInventory')}\n          </Button>\n        </div>\n\n        <div className=\"text-center mb-10 p-6 md:p-10 bg-gradient-to-r from-[#667eea] to-[#764ba2] rounded-2xl text-white\">\n          <h1 className=\"text-3xl md:text-4xl font-extrabold mb-3 md:mb-4\">{t('damageReports')}</h1>\n          <p className=\"text-sm md:text-lg opacity-90 max-w-2xl mx-auto\">\n            {userRole === 'admin' \n              ? t('viewAllDamageReports')\n              : t('viewDamageReportsReceived')}\n          </p>\n        </div>\n\n        <div className=\"mb-6 flex flex-col md:flex-row gap-4\">\n          <div className=\"relative flex-1 max-w-md\">\n            <Search className=\"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-muted-foreground\" />\n            <Input\n              placeholder={t('searchItems')}\n              value={searchQuery}\n              onChange={(e) => setSearchQuery(e.target.value)}\n              className=\"pl-12\"\n              data-testid=\"input-search-reports\"\n            />\n          </div>\n          <DateRangeFilter\n            onDateRangeChange={(range) => setDateRange(range)}\n          />\n        </div>\n\n        {filteredReports.length === 0 ? (\n          <div className=\"text-center py-12 bg-muted/30 rounded-lg\">\n            <AlertCircle className=\"w-12 h-12 mx-auto mb-3 text-muted-foreground\" />\n            <p className=\"text-lg font-medium text-muted-foreground\">No reports found</p>\n          </div>\n        ) : (\n          <div className=\"grid gap-4\">\n            {filteredReports.map((report) => (\n              <Card key={report.id} className=\"p-4 md:p-6\">\n                <div className=\"space-y-3\">\n                  <div>\n                    <h3 className=\"text-lg md:text-xl font-bold\">\n                      {items.find(i => i.id === report.itemId)?.productName || 'Unknown Item'}\n                    </h3>\n                  </div>\n                  \n                  <div className=\"space-y-2 text-sm md:text-base\">\n                    <div><strong>Report Type:</strong> {report.reportType === 'user-damage' ? 'User Reported (Pickup)' : 'Admin Reported (Return)'}</div>\n                    <div><strong>Reported Date:</strong> {format(new Date(report.createdAt), \"PPP p\")}</div>\n                    <div className=\"bg-muted p-3 rounded\">\n                      <strong className=\"block mb-1\">Description:</strong> \n                      <p className=\"text-sm md:text-base\">{report.description}</p>\n                    </div>\n                  </div>\n                </div>\n              </Card>\n            ))}\n          </div>\n        )}\n      </main>\n    </div>\n  );\n}\n","path":null,"size_bytes":6380,"size_tokens":null},"client/src/components/ui/input-otp.tsx":{"content":"import * as React from \"react\"\nimport { OTPInput, OTPInputContext } from \"input-otp\"\nimport { Dot } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst InputOTP = React.forwardRef<\n  React.ElementRef<typeof OTPInput>,\n  React.ComponentPropsWithoutRef<typeof OTPInput>\n>(({ className, containerClassName, ...props }, ref) => (\n  <OTPInput\n    ref={ref}\n    containerClassName={cn(\n      \"flex items-center gap-2 has-[:disabled]:opacity-50\",\n      containerClassName\n    )}\n    className={cn(\"disabled:cursor-not-allowed\", className)}\n    {...props}\n  />\n))\nInputOTP.displayName = \"InputOTP\"\n\nconst InputOTPGroup = React.forwardRef<\n  React.ElementRef<\"div\">,\n  React.ComponentPropsWithoutRef<\"div\">\n>(({ className, ...props }, ref) => (\n  <div ref={ref} className={cn(\"flex items-center\", className)} {...props} />\n))\nInputOTPGroup.displayName = \"InputOTPGroup\"\n\nconst InputOTPSlot = React.forwardRef<\n  React.ElementRef<\"div\">,\n  React.ComponentPropsWithoutRef<\"div\"> & { index: number }\n>(({ index, className, ...props }, ref) => {\n  const inputOTPContext = React.useContext(OTPInputContext)\n  const { char, hasFakeCaret, isActive } = inputOTPContext.slots[index]\n\n  return (\n    <div\n      ref={ref}\n      className={cn(\n        \"relative flex h-10 w-10 items-center justify-center border-y border-r border-input text-sm transition-all first:rounded-l-md first:border-l last:rounded-r-md\",\n        isActive && \"z-10 ring-2 ring-ring ring-offset-background\",\n        className\n      )}\n      {...props}\n    >\n      {char}\n      {hasFakeCaret && (\n        <div className=\"pointer-events-none absolute inset-0 flex items-center justify-center\">\n          <div className=\"h-4 w-px animate-caret-blink bg-foreground duration-1000\" />\n        </div>\n      )}\n    </div>\n  )\n})\nInputOTPSlot.displayName = \"InputOTPSlot\"\n\nconst InputOTPSeparator = React.forwardRef<\n  React.ElementRef<\"div\">,\n  React.ComponentPropsWithoutRef<\"div\">\n>(({ ...props }, ref) => (\n  <div ref={ref} role=\"separator\" {...props}>\n    <Dot />\n  </div>\n))\nInputOTPSeparator.displayName = \"InputOTPSeparator\"\n\nexport { InputOTP, InputOTPGroup, InputOTPSlot, InputOTPSeparator }\n","path":null,"size_bytes":2154,"size_tokens":null},"attached_assets/Inventory_1763670809218.tsx":{"content":"import { useState } from \"react\";\nimport { useQuery, useMutation } from \"@tanstack/react-query\";\nimport { queryClient } from \"@/lib/queryClient\";\nimport InventoryHeader from \"@/components/InventoryHeader\";\nimport CategoryCard from \"@/components/CategoryCard\";\nimport ItemCard from \"@/components/ItemCard\";\nimport ItemFormDialog from \"@/components/ItemFormDialog\";\nimport QRScannerDialog from \"@/components/QRScannerDialog\";\nimport ScanResultDialog from \"@/components/ScanResultDialog\";\nimport CategoryFormDialog from \"@/components/CategoryFormDialog\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Table, TableBody, TableCell, TableHead, TableHeader, TableRow } from \"@/components/ui/table\";\nimport { Plus, Search, FolderPlus, Pencil, Trash2, LayoutGrid, TableIcon } from \"lucide-react\";\nimport { api, type Item } from \"@/lib/api\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport ReservationFormDialog from \"@/components/ReservationFormDialog\";\nimport type { Language } from \"@/lib/translations\";\nimport { useTranslation } from \"@/lib/translations\";\n\ninterface InventoryPageProps {\n  userName: string;\n  userRole: string;\n  userId: string;\n  onLogout: () => void;\n  onNavigateToReservations?: () => void;\n  onNavigateToActivityLogs?: () => void;\n  onNavigateToQRCodes?: () => void;\n  onNavigateToMaintenance?: () => void;\n  currentLanguage: Language;\n  onLanguageChange: (lang: Language) => void;\n}\n\nexport default function Inventory({ userName, userRole, userId, onLogout, onNavigateToReservations, onNavigateToActivityLogs, onNavigateToQRCodes, onNavigateToMaintenance, currentLanguage, onLanguageChange }: InventoryPageProps) {\n  const { toast } = useToast();\n  const t = useTranslation(currentLanguage);\n  const [currentView, setCurrentView] = useState<'categories' | 'inventory'>('categories');\n  const [searchQuery, setSearchQuery] = useState(\"\");\n  const [selectedCategory, setSelectedCategory] = useState<string | null>(null);\n  const [showItemForm, setShowItemForm] = useState(false);\n  const [showQRScanner, setShowQRScanner] = useState(false);\n  const [showScanResult, setShowScanResult] = useState(false);\n  const [editingItem, setEditingItem] = useState<Item | null>(null);\n  const [scanResult, setScanResult] = useState<any>(null);\n  const [showCategoryForm, setShowCategoryForm] = useState(false);\n  const [editingCategory, setEditingCategory] = useState<any>(null);\n  const [viewMode, setViewMode] = useState<'card' | 'table'>('card');\n  const [reservingItem, setReservingItem] = useState<Item | null>(null);\n\n  const { data: categories = [] } = useQuery({\n    queryKey: ['/api/categories'],\n    queryFn: () => api.categories.getAll(),\n    enabled: currentView === 'categories'\n  });\n\n  const { data: items = [] } = useQuery({\n    queryKey: ['/api/items', selectedCategory],\n    queryFn: () => {\n      console.log('Fetching items for category:', selectedCategory);\n      return api.items.getAll(selectedCategory || undefined);\n    },\n    enabled: currentView === 'inventory'\n  });\n\n  const createItemMutation = useMutation({\n    mutationFn: (itemData: Partial<Item>) => api.items.create(itemData),\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['/api/items'] });\n      queryClient.invalidateQueries({ queryKey: ['/api/categories'] });\n      setShowItemForm(false);\n      toast({ title: \"Item added successfully\" });\n    },\n    onError: () => {\n      toast({ title: \"Failed to add item\", variant: \"destructive\" });\n    }\n  });\n\n  const updateItemMutation = useMutation({\n    mutationFn: ({ id, data }: { id: string; data: Partial<Item> }) =>\n      api.items.update(id, data),\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['/api/items'] });\n      queryClient.invalidateQueries({ queryKey: ['/api/categories'] });\n      setShowItemForm(false);\n      setEditingItem(null);\n      toast({ title: \"Item updated successfully\" });\n    },\n    onError: () => {\n      toast({ title: \"Failed to update item\", variant: \"destructive\" });\n    }\n  });\n\n  const deleteItemMutation = useMutation({\n    mutationFn: (id: string) => api.items.delete(id),\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['/api/items'] });\n      queryClient.invalidateQueries({ queryKey: ['/api/categories'] });\n      toast({ title: \"Item deleted successfully\" });\n    },\n    onError: () => {\n      toast({ title: \"Failed to delete item\", variant: \"destructive\" });\n    }\n  });\n\n  const scanMutation = useMutation({\n    mutationFn: (barcode: string) => api.scan.process(barcode),\n    onSuccess: (data) => {\n      setScanResult(data);\n      setShowQRScanner(false);\n      setShowScanResult(true);\n      queryClient.invalidateQueries({ queryKey: ['/api/items'] });\n      queryClient.invalidateQueries({ queryKey: ['/api/categories'] });\n    },\n    onError: () => {\n      setScanResult({\n        success: false,\n        error: 'Failed to process scan'\n      });\n      setShowQRScanner(false);\n      setShowScanResult(true);\n    }\n  });\n\n  const createCategoryMutation = useMutation({\n    mutationFn: (categoryData: any) => api.customCategories.create(categoryData),\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['/api/categories'] });\n      setShowCategoryForm(false);\n      toast({ title: \"Category created successfully\" });\n    },\n    onError: () => {\n      toast({ title: \"Failed to create category\", variant: \"destructive\" });\n    }\n  });\n\n  const updateCategoryMutation = useMutation({\n    mutationFn: ({ id, data }: { id: string; data: any }) =>\n      api.customCategories.update(id, data),\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['/api/categories'] });\n      setShowCategoryForm(false);\n      setEditingCategory(null);\n      toast({ title: \"Category updated successfully\" });\n    },\n    onError: () => {\n      toast({ title: \"Failed to update category\", variant: \"destructive\" });\n    }\n  });\n\n  const deleteCategoryMutation = useMutation({\n    mutationFn: (id: string) => api.customCategories.delete(id),\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['/api/categories'] });\n      toast({ title: \"Category deleted successfully\" });\n    },\n    onError: () => {\n      toast({ title: \"Failed to delete category\", variant: \"destructive\" });\n    }\n  });\n\n  const createReservationMutation = useMutation({\n    mutationFn: (data: any) => api.reservations.create(data),\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['/api/reservations'] });\n      queryClient.invalidateQueries({ queryKey: ['/api/items'] });\n      setReservingItem(null);\n      toast({ title: \"Reservation created successfully\" });\n    },\n    onError: () => {\n      toast({ title: \"Failed to create reservation\", variant: \"destructive\" });\n      setReservingItem(null);\n    }\n  });\n\n  const handleLogout = async () => {\n    try {\n      await api.auth.logout();\n      onLogout();\n    } catch (error) {\n      console.error('Logout failed:', error);\n      onLogout();\n    }\n  };\n\n  const filteredItems = items.filter(item => {\n    const matchesSearch = searchQuery === \"\" || \n      item.productName.toLowerCase().includes(searchQuery.toLowerCase()) ||\n      item.barcode.toLowerCase().includes(searchQuery.toLowerCase());\n    return matchesSearch;\n  });\n\n  const filteredCategories = categories.filter(cat =>\n    cat.name.toLowerCase().includes(searchQuery.toLowerCase())\n  );\n\n  const handleAddItem = (itemData: any) => {\n    createItemMutation.mutate(itemData);\n  };\n\n  const handleEditItem = (itemData: any) => {\n    if (editingItem) {\n      updateItemMutation.mutate({ id: editingItem.id, data: itemData });\n    }\n  };\n\n  const handleDeleteItem = (id: string) => {\n    if (confirm('Are you sure you want to delete this item?')) {\n      deleteItemMutation.mutate(id);\n    }\n  };\n\n  const handleScan = (barcode: string) => {\n    scanMutation.mutate(barcode);\n  };\n\n  const handleAddCategory = (categoryData: any) => {\n    createCategoryMutation.mutate(categoryData);\n  };\n\n  const handleEditCategory = (categoryData: any) => {\n    if (editingCategory?.id) {\n      updateCategoryMutation.mutate({ id: editingCategory.id, data: categoryData });\n    }\n  };\n\n  const handleDeleteCategory = (id: string) => {\n    if (confirm('Are you sure you want to delete this category?')) {\n      deleteCategoryMutation.mutate(id);\n    }\n  };\n\n  const handleReserveItem = (item: Item) => {\n    setReservingItem(item);\n  };\n\n  const handleSubmitReservation = (data: any) => {\n    createReservationMutation.mutate(data);\n  };\n\n  const handleCheckout = (item: Item) => {\n    if (confirm(`Check out ${item.productName}?`)) {\n      updateItemMutation.mutate({\n        id: item.id,\n        data: { status: 'In Use' }\n      });\n    }\n  };\n\n  const handleCheckin = (item: Item) => {\n    if (confirm(`Check in ${item.productName}?`)) {\n      updateItemMutation.mutate({\n        id: item.id,\n        data: { status: 'Available' }\n      });\n    }\n  };\n\n  return (\n    <div className=\"min-h-screen bg-background\">\n      <InventoryHeader\n        userName={userName}\n        userRole={userRole}\n        currentView={currentView}\n        onViewChange={(view) => {\n          setCurrentView(view);\n          setSelectedCategory(null);\n        }}\n        onLogout={handleLogout}\n        onNavigateToReservations={onNavigateToReservations}\n        onNavigateToActivityLogs={onNavigateToActivityLogs}\n        onNavigateToQRCodes={onNavigateToQRCodes}\n        onNavigateToMaintenance={onNavigateToMaintenance}\n        language={currentLanguage}\n        onLanguageChange={onLanguageChange}\n      />\n\n      <main className=\"max-w-[1400px] mx-auto px-5 py-8\">\n        {currentView === 'categories' ? (\n          <div>\n            <div className=\"text-center mb-10 p-10 bg-gradient-to-r from-[#667eea] to-[#764ba2] rounded-2xl text-white\">\n              <h1 className=\"text-4xl font-extrabold mb-4\" data-testid=\"text-hero-title\">\n                {t('equipmentCategories')}\n              </h1>\n              <p className=\"text-lg opacity-90 max-w-2xl mx-auto\" data-testid=\"text-hero-subtitle\">\n                {t('browseInventory')}\n              </p>\n            </div>\n\n            <div className=\"max-w-2xl mx-auto mb-8\">\n              <div className=\"flex gap-3\">\n                <div className=\"relative flex-1\">\n                  <Search className=\"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-muted-foreground\" />\n                  <Input\n                    placeholder={t('searchCategories')}\n                    value={searchQuery}\n                    onChange={(e) => setSearchQuery(e.target.value)}\n                    className=\"pl-12 h-12 text-base border-2\"\n                    data-testid=\"input-search-categories\"\n                  />\n                </div>\n                <Button\n                  onClick={() => setViewMode(viewMode === 'card' ? 'table' : 'card')}\n                  variant=\"outline\"\n                  className=\"h-12\"\n                  data-testid=\"button-toggle-view\"\n                >\n                  {viewMode === 'card' ? <TableIcon className=\"w-4 h-4 mr-2\" /> : <LayoutGrid className=\"w-4 h-4 mr-2\" />}\n                  {viewMode === 'card' ? t('tableView') : t('cardView')}\n                </Button>\n                {userRole === 'admin' && (\n                  <Button\n                    onClick={() => {\n                      setEditingCategory(null);\n                      setShowCategoryForm(true);\n                    }}\n                    className=\"bg-gradient-to-r from-[#667eea] to-[#764ba2] h-12\"\n                    data-testid=\"button-add-category\"\n                  >\n                    <FolderPlus className=\"w-4 h-4 mr-2\" />\n                    {t('addCategory')}\n                  </Button>\n                )}\n              </div>\n            </div>\n\n            {viewMode === 'card' ? (\n              <div className=\"grid grid-cols-[repeat(auto-fit,minmax(350px,1fr))] gap-5\">\n                {filteredCategories.map((category) => (\n                  <div key={category.name} className=\"relative group\">\n                    <CategoryCard\n                      {...category}\n                      onClick={() => {\n                        console.log('Category clicked:', category.name);\n                        console.log('Category subTypes:', category.subTypes);\n                        setSelectedCategory(category.name);\n                        setCurrentView('inventory');\n                      }}\n                    />\n                    {userRole === 'admin' && (\n                      <div className=\"absolute top-3 left-3 flex gap-2 opacity-0 group-hover:opacity-100 transition-opacity\">\n                        <Button\n                          size=\"sm\"\n                          variant=\"secondary\"\n                          onClick={(e) => {\n                            e.stopPropagation();\n                            setEditingCategory(category);\n                            setShowCategoryForm(true);\n                          }}\n                          className=\"bg-white/90 hover:bg-white\"\n                        >\n                          <Pencil className=\"w-3 h-3\" />\n                        </Button>\n                        <Button\n                          size=\"sm\"\n                          variant=\"destructive\"\n                          onClick={(e) => {\n                            e.stopPropagation();\n                            handleDeleteCategory(category.id);\n                          }}\n                          className=\"bg-red-500/90 hover:bg-red-600\"\n                        >\n                          <Trash2 className=\"w-3 h-3\" />\n                        </Button>\n                      </div>\n                    )}\n                  </div>\n                ))}\n              </div>\n            ) : (\n              <div className=\"bg-white rounded-lg shadow overflow-hidden\">\n                <Table>\n                  <TableHeader>\n                    <TableRow>\n                      <TableHead>{t('name')}</TableHead>\n                      <TableHead>{t('type')}</TableHead>\n                      <TableHead>{t('status')}</TableHead>\n                      <TableHead>{t('totalItems')}</TableHead>\n                      <TableHead>{t('available')}</TableHead>\n                      {userRole === 'admin' && <TableHead className=\"text-right\">{t('actions')}</TableHead>}\n                    </TableRow>\n                  </TableHeader>\n                  <TableBody>\n                    {filteredCategories.map((category) => (\n                      <TableRow \n                        key={category.name}\n                        className=\"cursor-pointer hover:bg-muted/50\"\n                        onClick={() => {\n                          setSelectedCategory(category.name);\n                          setCurrentView('inventory');\n                        }}\n                      >\n                        <TableCell className=\"font-medium\">{category.name}</TableCell>\n                        <TableCell>{category.subTypes.join(', ')}</TableCell>\n                        <TableCell>\n                          <span className={`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${category.availableCount > 0 ? 'bg-green-100 text-green-800' : 'bg-gray-100 text-gray-800'}`}>\n                            {category.availableCount > 0 ? t('available') : t('allInUse')}\n                          </span>\n                        </TableCell>\n                        <TableCell>{category.totalCount}</TableCell>\n                        <TableCell>{category.availableCount}</TableCell>\n                        {userRole === 'admin' && (\n                          <TableCell className=\"text-right\">\n                            <div className=\"flex gap-2 justify-end\">\n                              <Button\n                                size=\"sm\"\n                                variant=\"outline\"\n                                onClick={(e) => {\n                                  e.stopPropagation();\n                                  setEditingCategory(category);\n                                  setShowCategoryForm(true);\n                                }}\n                              >\n                                <Pencil className=\"w-3 h-3\" />\n                              </Button>\n                              <Button\n                                size=\"sm\"\n                                variant=\"destructive\"\n                                onClick={(e) => {\n                                  e.stopPropagation();\n                                  handleDeleteCategory(category.id);\n                                }}\n                              >\n                                <Trash2 className=\"w-3 h-3\" />\n                              </Button>\n                            </div>\n                          </TableCell>\n                        )}\n                      </TableRow>\n                    ))}\n                  </TableBody>\n                </Table>\n              </div>\n            )}\n          </div>\n        ) : (\n          <div>\n            <div className=\"flex items-center justify-between mb-6 flex-wrap gap-4\">\n              <div>\n                <h1 className=\"text-3xl font-bold\" data-testid=\"text-inventory-title\">\n                  {selectedCategory || t('allItems')}\n                </h1>\n                <p className=\"text-muted-foreground\" data-testid=\"text-inventory-count\">\n                  {filteredItems.length} {t('items')}\n                </p>\n              </div>\n              <div className=\"flex gap-3\">\n                <Button\n                  onClick={() => setViewMode(viewMode === 'card' ? 'table' : 'card')}\n                  variant=\"outline\"\n                  data-testid=\"button-toggle-view-items\"\n                >\n                  {viewMode === 'card' ? <TableIcon className=\"w-4 h-4 mr-2\" /> : <LayoutGrid className=\"w-4 h-4 mr-2\" />}\n                  {viewMode === 'card' ? t('tableView') : t('cardView')}\n                </Button>\n                {userRole === 'admin' && (\n                  <>\n                    <Button\n                      onClick={() => setShowQRScanner(true)}\n                      variant=\"outline\"\n                      data-testid=\"button-scan-item\"\n                    >\n                      <Search className=\"w-4 h-4 mr-2\" />\n                      {t('scanItem')}\n                    </Button>\n                    <Button\n                      onClick={() => {\n                        setEditingItem(null);\n                        setShowItemForm(true);\n                      }}\n                      className=\"bg-gradient-to-r from-[#667eea] to-[#764ba2]\"\n                      data-testid=\"button-add-item\"\n                    >\n                      <Plus className=\"w-4 h-4 mr-2\" />\n                      {t('addItem')}\n                    </Button>\n                  </>\n                )}\n              </div>\n            </div>\n\n            <div className=\"mb-6\">\n              <div className=\"relative max-w-md\">\n                <Search className=\"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-muted-foreground\" />\n                <Input\n                  placeholder={t('searchItems')}\n                  value={searchQuery}\n                  onChange={(e) => setSearchQuery(e.target.value)}\n                  className=\"pl-12\"\n                  data-testid=\"input-search-items\"\n                />\n              </div>\n            </div>\n\n            {viewMode === 'card' ? (\n              <div className=\"grid gap-4\">\n                {filteredItems.map((item) => (\n                  <ItemCard\n                    key={item.id}\n                    id={item.id}\n                    barcode={item.barcode}\n                    productName={item.productName}\n                    productType={item.productType}\n                    status={item.status}\n                    location={item.location || undefined}\n                    notes={item.notes || undefined}\n                    userRole={userRole}\n                    onEdit={userRole === 'admin' ? () => {\n                      setEditingItem(item);\n                      setShowItemForm(true);\n                    } : undefined}\n                    onDelete={userRole === 'admin' ? () => handleDeleteItem(item.id) : undefined}\n                    onScan={userRole !== 'admin' ? () => {\n                      setShowQRScanner(true);\n                    } : undefined}\n                    onReserve={userRole !== 'admin' ? () => handleReserveItem(item) : undefined}\n                    onCheckout={userRole === 'admin' ? () => handleCheckout(item) : undefined}\n                    onCheckin={userRole === 'admin' ? () => handleCheckin(item) : undefined}\n                  />\n                ))}\n              </div>\n            ) : (\n              <div className=\"bg-white rounded-lg shadow overflow-hidden\">\n                <Table>\n                  <TableHeader>\n                    <TableRow>\n                      <TableHead>{t('barcode')}</TableHead>\n                      <TableHead>{t('name')}</TableHead>\n                      <TableHead>{t('type')}</TableHead>\n                      <TableHead>{t('status')}</TableHead>\n                      <TableHead>{t('location')}</TableHead>\n                      {userRole === 'admin' && <TableHead className=\"text-right\">{t('actions')}</TableHead>}\n                    </TableRow>\n                  </TableHeader>\n                  <TableBody>\n                    {filteredItems.map((item) => (\n                      <TableRow key={item.id}>\n                        <TableCell className=\"font-mono\">{item.barcode}</TableCell>\n                        <TableCell className=\"font-medium\">{item.productName}</TableCell>\n                        <TableCell>{item.productType}</TableCell>\n                        <TableCell>\n                          <span className={`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${\n                            item.status === 'Available' ? 'bg-green-100 text-green-800' :\n                            item.status === 'In Use' ? 'bg-blue-100 text-blue-800' :\n                            item.status === 'Reserved' ? 'bg-amber-100 text-amber-800' :\n                            'bg-red-100 text-red-800'\n                          }`}>\n                            {item.status}\n                          </span>\n                        </TableCell>\n                        <TableCell>{item.location || '-'}</TableCell>\n                        {userRole === 'admin' && (\n                          <TableCell className=\"text-right\">\n                            <div className=\"flex gap-2 justify-end\">\n                              <Button\n                                size=\"sm\"\n                                variant=\"outline\"\n                                onClick={() => {\n                                  setEditingItem(item);\n                                  setShowItemForm(true);\n                                }}\n                              >\n                                <Pencil className=\"w-3 h-3\" />\n                              </Button>\n                              <Button\n                                size=\"sm\"\n                                variant=\"destructive\"\n                                onClick={() => handleDeleteItem(item.id)}\n                              >\n                                <Trash2 className=\"w-3 h-3\" />\n                              </Button>\n                            </div>\n                          </TableCell>\n                        )}\n                      </TableRow>\n                    ))}\n                  </TableBody>\n                </Table>\n              </div>\n            )}\n\n            {filteredItems.length === 0 && (\n              <div className=\"text-center py-12\">\n                <p className=\"text-muted-foreground\" data-testid=\"text-no-items\">\n                  {t('noItemsFound')}\n                </p>\n              </div>\n            )}\n          </div>\n        )}\n      </main>\n\n      <ItemFormDialog\n        open={showItemForm}\n        onClose={() => {\n          setShowItemForm(false);\n          setEditingItem(null);\n        }}\n        onSubmit={editingItem ? handleEditItem : handleAddItem}\n        item={editingItem ? {\n          id: editingItem.id,\n          barcode: editingItem.barcode,\n          productName: editingItem.productName,\n          productType: editingItem.productType,\n          status: editingItem.status,\n          location: editingItem.location || undefined,\n          notes: editingItem.notes || undefined\n        } : undefined}\n        mode={editingItem ? 'edit' : 'add'}\n        userRole={userRole}\n      />\n\n      <QRScannerDialog\n        open={showQRScanner}\n        onClose={() => setShowQRScanner(false)}\n        onScan={handleScan}\n      />\n\n      <ScanResultDialog\n        open={showScanResult}\n        onClose={() => setShowScanResult(false)}\n        result={scanResult}\n        isLoading={scanMutation.isPending}\n      />\n\n      <CategoryFormDialog\n        open={showCategoryForm}\n        onClose={() => {\n          setShowCategoryForm(false);\n          setEditingCategory(null);\n        }}\n        onSubmit={editingCategory ? handleEditCategory : handleAddCategory}\n        category={editingCategory}\n        mode={editingCategory ? 'edit' : 'add'}\n      />\n\n      <ReservationFormDialog\n        open={!!reservingItem}\n        onClose={() => setReservingItem(null)}\n        onSubmit={(data) => createReservationMutation.mutate({ ...data, userId })}\n        items={reservingItem ? [reservingItem] : []}\n      />\n    </div>\n  );\n}\n","path":null,"size_bytes":25707,"size_tokens":null},"attached_assets/postcss.config_1763670650468.js":{"content":"export default {\n  plugins: {\n    tailwindcss: {},\n    autoprefixer: {},\n  },\n}\n","path":null,"size_bytes":80,"size_tokens":null},"client/src/components/ui/input.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Input = React.forwardRef<HTMLInputElement, React.ComponentProps<\"input\">>(\n  ({ className, type, ...props }, ref) => {\n    // h-9 to match icon buttons and default buttons.\n    return (\n      <input\n        type={type}\n        className={cn(\n          \"flex h-9 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm\",\n          className\n        )}\n        ref={ref}\n        {...props}\n      />\n    )\n  }\n)\nInput.displayName = \"Input\"\n\nexport { Input }\n","path":null,"size_bytes":844,"size_tokens":null},"client/src/components/ui/sidebar.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { cva, VariantProps } from \"class-variance-authority\"\nimport { PanelLeftIcon } from \"lucide-react\"\n\nimport { useIsMobile } from \"@/hooks/use-mobile\"\nimport { cn } from \"@/lib/utils\"\nimport { Button } from \"@/components/ui/button\"\nimport { Input } from \"@/components/ui/input\"\nimport { Separator } from \"@/components/ui/separator\"\nimport {\n  Sheet,\n  SheetContent,\n  SheetDescription,\n  SheetHeader,\n  SheetTitle,\n} from \"@/components/ui/sheet\"\nimport { Skeleton } from \"@/components/ui/skeleton\"\nimport {\n  Tooltip,\n  TooltipContent,\n  TooltipProvider,\n  TooltipTrigger,\n} from \"@/components/ui/tooltip\"\n\nconst SIDEBAR_COOKIE_NAME = \"sidebar_state\"\nconst SIDEBAR_COOKIE_MAX_AGE = 60 * 60 * 24 * 7\nconst SIDEBAR_WIDTH = \"16rem\"\nconst SIDEBAR_WIDTH_MOBILE = \"18rem\"\nconst SIDEBAR_WIDTH_ICON = \"3rem\"\nconst SIDEBAR_KEYBOARD_SHORTCUT = \"b\"\n\ntype SidebarContextProps = {\n  state: \"expanded\" | \"collapsed\"\n  open: boolean\n  setOpen: (open: boolean) => void\n  openMobile: boolean\n  setOpenMobile: (open: boolean) => void\n  isMobile: boolean\n  toggleSidebar: () => void\n}\n\nconst SidebarContext = React.createContext<SidebarContextProps | null>(null)\n\nfunction useSidebar() {\n  const context = React.useContext(SidebarContext)\n  if (!context) {\n    throw new Error(\"useSidebar must be used within a SidebarProvider.\")\n  }\n\n  return context\n}\n\nfunction SidebarProvider({\n  defaultOpen = true,\n  open: openProp,\n  onOpenChange: setOpenProp,\n  className,\n  style,\n  children,\n  ...props\n}: React.ComponentProps<\"div\"> & {\n  defaultOpen?: boolean\n  open?: boolean\n  onOpenChange?: (open: boolean) => void\n}) {\n  const isMobile = useIsMobile()\n  const [openMobile, setOpenMobile] = React.useState(false)\n\n  // This is the internal state of the sidebar.\n  // We use openProp and setOpenProp for control from outside the component.\n  const [_open, _setOpen] = React.useState(defaultOpen)\n  const open = openProp ?? _open\n  const setOpen = React.useCallback(\n    (value: boolean | ((value: boolean) => boolean)) => {\n      const openState = typeof value === \"function\" ? value(open) : value\n      if (setOpenProp) {\n        setOpenProp(openState)\n      } else {\n        _setOpen(openState)\n      }\n\n      // This sets the cookie to keep the sidebar state.\n      document.cookie = `${SIDEBAR_COOKIE_NAME}=${openState}; path=/; max-age=${SIDEBAR_COOKIE_MAX_AGE}`\n    },\n    [setOpenProp, open]\n  )\n\n  // Helper to toggle the sidebar.\n  const toggleSidebar = React.useCallback(() => {\n    return isMobile ? setOpenMobile((open) => !open) : setOpen((open) => !open)\n  }, [isMobile, setOpen, setOpenMobile])\n\n  // Adds a keyboard shortcut to toggle the sidebar.\n  React.useEffect(() => {\n    const handleKeyDown = (event: KeyboardEvent) => {\n      if (\n        event.key === SIDEBAR_KEYBOARD_SHORTCUT &&\n        (event.metaKey || event.ctrlKey)\n      ) {\n        event.preventDefault()\n        toggleSidebar()\n      }\n    }\n\n    window.addEventListener(\"keydown\", handleKeyDown)\n    return () => window.removeEventListener(\"keydown\", handleKeyDown)\n  }, [toggleSidebar])\n\n  // We add a state so that we can do data-state=\"expanded\" or \"collapsed\".\n  // This makes it easier to style the sidebar with Tailwind classes.\n  const state = open ? \"expanded\" : \"collapsed\"\n\n  const contextValue = React.useMemo<SidebarContextProps>(\n    () => ({\n      state,\n      open,\n      setOpen,\n      isMobile,\n      openMobile,\n      setOpenMobile,\n      toggleSidebar,\n    }),\n    [state, open, setOpen, isMobile, openMobile, setOpenMobile, toggleSidebar]\n  )\n\n  return (\n    <SidebarContext.Provider value={contextValue}>\n      <TooltipProvider delayDuration={0}>\n        <div\n          data-slot=\"sidebar-wrapper\"\n          style={\n            {\n              \"--sidebar-width\": SIDEBAR_WIDTH,\n              \"--sidebar-width-icon\": SIDEBAR_WIDTH_ICON,\n              ...style,\n            } as React.CSSProperties\n          }\n          className={cn(\n            \"group/sidebar-wrapper has-data-[variant=inset]:bg-sidebar flex min-h-svh w-full\",\n            className\n          )}\n          {...props}\n        >\n          {children}\n        </div>\n      </TooltipProvider>\n    </SidebarContext.Provider>\n  )\n}\n\nfunction Sidebar({\n  side = \"left\",\n  variant = \"sidebar\",\n  collapsible = \"offcanvas\",\n  className,\n  children,\n  ...props\n}: React.ComponentProps<\"div\"> & {\n  side?: \"left\" | \"right\"\n  variant?: \"sidebar\" | \"floating\" | \"inset\"\n  collapsible?: \"offcanvas\" | \"icon\" | \"none\"\n}) {\n  const { isMobile, state, openMobile, setOpenMobile } = useSidebar()\n\n  if (collapsible === \"none\") {\n    return (\n      <div\n        data-slot=\"sidebar\"\n        className={cn(\n          \"bg-sidebar text-sidebar-foreground flex h-full w-[var(--sidebar-width)] flex-col\",\n          className\n        )}\n        {...props}\n      >\n        {children}\n      </div>\n    )\n  }\n\n  if (isMobile) {\n    return (\n      <Sheet open={openMobile} onOpenChange={setOpenMobile} {...props}>\n        <SheetContent\n          data-sidebar=\"sidebar\"\n          data-slot=\"sidebar\"\n          data-mobile=\"true\"\n          className=\"bg-sidebar text-sidebar-foreground w-[var(--sidebar-width)] p-0 [&>button]:hidden\"\n          style={\n            {\n              \"--sidebar-width\": SIDEBAR_WIDTH_MOBILE,\n            } as React.CSSProperties\n          }\n          side={side}\n        >\n          <SheetHeader className=\"sr-only\">\n            <SheetTitle>Sidebar</SheetTitle>\n            <SheetDescription>Displays the mobile sidebar.</SheetDescription>\n          </SheetHeader>\n          <div className=\"flex h-full w-full flex-col\">{children}</div>\n        </SheetContent>\n      </Sheet>\n    )\n  }\n\n  return (\n    <div\n      className=\"group peer text-sidebar-foreground hidden md:block\"\n      data-state={state}\n      data-collapsible={state === \"collapsed\" ? collapsible : \"\"}\n      data-variant={variant}\n      data-side={side}\n      data-slot=\"sidebar\"\n    >\n      {/* This is what handles the sidebar gap on desktop */}\n      <div\n        data-slot=\"sidebar-gap\"\n        className={cn(\n          \"relative w-[var(--sidebar-width)] bg-transparent transition-[width] duration-200 ease-linear\",\n          \"group-data-[collapsible=offcanvas]:w-0\",\n          \"group-data-[side=right]:rotate-180\",\n          variant === \"floating\" || variant === \"inset\"\n            ? \"group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)+var(--spacing-4))]\"\n            : \"group-data-[collapsible=icon]:w-[var(--sidebar-width-icon)]\"\n        )}\n      />\n      <div\n        data-slot=\"sidebar-container\"\n        className={cn(\n          \"fixed inset-y-0 z-10 hidden h-svh w-[var(--sidebar-width)] transition-[left,right,width] duration-200 ease-linear md:flex\",\n          side === \"left\"\n            ? \"left-0 group-data-[collapsible=offcanvas]:left-[calc(var(--sidebar-width)*-1)]\"\n            : \"right-0 group-data-[collapsible=offcanvas]:right-[calc(var(--sidebar-width)*-1)]\",\n          // Adjust the padding for floating and inset variants.\n          variant === \"floating\" || variant === \"inset\"\n            ? \"p-2 group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)+var(--spacing-4)+2px)]\"\n            : \"group-data-[collapsible=icon]:w-[var(--sidebar-width-icon)] group-data-[side=left]:border-r group-data-[side=right]:border-l\",\n          className\n        )}\n        {...props}\n      >\n        <div\n          data-sidebar=\"sidebar\"\n          data-slot=\"sidebar-inner\"\n          className=\"bg-sidebar group-data-[variant=floating]:border-sidebar-border flex h-full w-full flex-col group-data-[variant=floating]:rounded-lg group-data-[variant=floating]:border group-data-[variant=floating]:shadow-sm\"\n        >\n          {children}\n        </div>\n      </div>\n    </div>\n  )\n}\n\nfunction SidebarTrigger({\n  className,\n  onClick,\n  ...props\n}: React.ComponentProps<typeof Button>) {\n  const { toggleSidebar } = useSidebar()\n\n  return (\n    <Button\n      data-sidebar=\"trigger\"\n      data-slot=\"sidebar-trigger\"\n      variant=\"ghost\"\n      size=\"icon\"\n      className={cn(\"h-7 w-7\", className)}\n      onClick={(event) => {\n        onClick?.(event)\n        toggleSidebar()\n      }}\n      {...props}\n    >\n      <PanelLeftIcon />\n      <span className=\"sr-only\">Toggle Sidebar</span>\n    </Button>\n  )\n}\n\nfunction SidebarRail({ className, ...props }: React.ComponentProps<\"button\">) {\n  const { toggleSidebar } = useSidebar()\n\n  // Note: Tailwind v3.4 doesn't support \"in-\" selectors. So the rail won't work perfectly.\n  return (\n    <button\n      data-sidebar=\"rail\"\n      data-slot=\"sidebar-rail\"\n      aria-label=\"Toggle Sidebar\"\n      tabIndex={-1}\n      onClick={toggleSidebar}\n      title=\"Toggle Sidebar\"\n      className={cn(\n        \"hover:after:bg-sidebar-border absolute inset-y-0 z-20 hidden w-4 -translate-x-1/2 transition-all ease-linear group-data-[side=left]:-right-4 group-data-[side=right]:left-0 after:absolute after:inset-y-0 after:left-1/2 after:w-[2px] sm:flex\",\n        \"in-data-[side=left]:cursor-w-resize in-data-[side=right]:cursor-e-resize\",\n        \"[[data-side=left][data-state=collapsed]_&]:cursor-e-resize [[data-side=right][data-state=collapsed]_&]:cursor-w-resize\",\n        \"hover:group-data-[collapsible=offcanvas]:bg-sidebar group-data-[collapsible=offcanvas]:translate-x-0 group-data-[collapsible=offcanvas]:after:left-full\",\n        \"[[data-side=left][data-collapsible=offcanvas]_&]:-right-2\",\n        \"[[data-side=right][data-collapsible=offcanvas]_&]:-left-2\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarInset({ className, ...props }: React.ComponentProps<\"main\">) {\n  return (\n    <main\n      data-slot=\"sidebar-inset\"\n      className={cn(\n        \"bg-background relative flex w-full flex-1 flex-col\",\n        \"md:peer-data-[variant=inset]:m-2 md:peer-data-[variant=inset]:ml-0 md:peer-data-[variant=inset]:rounded-xl md:peer-data-[variant=inset]:shadow-sm md:peer-data-[variant=inset]:peer-data-[state=collapsed]:ml-2\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarInput({\n  className,\n  ...props\n}: React.ComponentProps<typeof Input>) {\n  return (\n    <Input\n      data-slot=\"sidebar-input\"\n      data-sidebar=\"input\"\n      className={cn(\"bg-background h-8 w-full shadow-none\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarHeader({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-header\"\n      data-sidebar=\"header\"\n      className={cn(\"flex flex-col gap-2 p-2\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarFooter({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-footer\"\n      data-sidebar=\"footer\"\n      className={cn(\"flex flex-col gap-2 p-2\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarSeparator({\n  className,\n  ...props\n}: React.ComponentProps<typeof Separator>) {\n  return (\n    <Separator\n      data-slot=\"sidebar-separator\"\n      data-sidebar=\"separator\"\n      className={cn(\"bg-sidebar-border mx-2 w-auto\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarContent({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-content\"\n      data-sidebar=\"content\"\n      className={cn(\n        \"flex min-h-0 flex-1 flex-col gap-2 overflow-auto group-data-[collapsible=icon]:overflow-hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarGroup({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-group\"\n      data-sidebar=\"group\"\n      className={cn(\"relative flex w-full min-w-0 flex-col p-2\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarGroupLabel({\n  className,\n  asChild = false,\n  ...props\n}: React.ComponentProps<\"div\"> & { asChild?: boolean }) {\n  const Comp = asChild ? Slot : \"div\"\n\n  return (\n    <Comp\n      data-slot=\"sidebar-group-label\"\n      data-sidebar=\"group-label\"\n      className={cn(\n        \"text-sidebar-foreground/70 ring-sidebar-ring flex h-8 shrink-0 items-center rounded-md px-2 text-xs font-medium outline-hidden transition-[margin,opacity] duration-200 ease-linear focus-visible:ring-2 [&>svg]:h-4 [&>svg]:w-4 [&>svg]:shrink-0\",\n        \"group-data-[collapsible=icon]:-mt-8 group-data-[collapsible=icon]:opacity-0\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarGroupAction({\n  className,\n  asChild = false,\n  ...props\n}: React.ComponentProps<\"button\"> & { asChild?: boolean }) {\n  const Comp = asChild ? Slot : \"button\"\n\n  return (\n    <Comp\n      data-slot=\"sidebar-group-action\"\n      data-sidebar=\"group-action\"\n      className={cn(\n        \"text-sidebar-foreground ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground absolute top-3.5 right-3 flex aspect-square w-5 items-center justify-center rounded-md p-0 outline-hidden transition-transform focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0\",\n        // Increases the hit area of the button on mobile.\n        \"after:absolute after:-inset-2 md:after:hidden\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarGroupContent({\n  className,\n  ...props\n}: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-group-content\"\n      data-sidebar=\"group-content\"\n      className={cn(\"w-full text-sm\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenu({ className, ...props }: React.ComponentProps<\"ul\">) {\n  return (\n    <ul\n      data-slot=\"sidebar-menu\"\n      data-sidebar=\"menu\"\n      className={cn(\"flex w-full min-w-0 flex-col gap-1\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenuItem({ className, ...props }: React.ComponentProps<\"li\">) {\n  return (\n    <li\n      data-slot=\"sidebar-menu-item\"\n      data-sidebar=\"menu-item\"\n      className={cn(\"group/menu-item relative\", className)}\n      {...props}\n    />\n  )\n}\n\nconst sidebarMenuButtonVariants = cva(\n  \"peer/menu-button flex w-full items-center gap-2 overflow-hidden rounded-md p-2 text-left text-sm outline-hidden ring-sidebar-ring transition-[width,height,padding] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 group-has-data-[sidebar=menu-action]/menu-item:pr-8 aria-disabled:pointer-events-none aria-disabled:opacity-50 data-[active=true]:bg-sidebar-accent data-[active=true]:font-medium data-[active=true]:text-sidebar-accent-foreground data-[state=open]:hover:bg-sidebar-accent data-[state=open]:hover:text-sidebar-accent-foreground group-data-[collapsible=icon]:w-8! group-data-[collapsible=icon]:h-8! group-data-[collapsible=icon]:p-2! [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0\",\n  {\n    variants: {\n      variant: {\n        default: \"hover:bg-sidebar-accent hover:text-sidebar-accent-foreground\",\n        outline:\n          \"bg-background shadow-[0_0_0_1px_hsl(var(--sidebar-border))] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground hover:shadow-[0_0_0_1px_hsl(var(--sidebar-accent))]\",\n      },\n      size: {\n        default: \"h-8 text-sm\",\n        sm: \"h-7 text-xs\",\n        lg: \"h-12 text-sm group-data-[collapsible=icon]:p-0!\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nfunction SidebarMenuButton({\n  asChild = false,\n  isActive = false,\n  variant = \"default\",\n  size = \"default\",\n  tooltip,\n  className,\n  ...props\n}: React.ComponentProps<\"button\"> & {\n  asChild?: boolean\n  isActive?: boolean\n  tooltip?: string | React.ComponentProps<typeof TooltipContent>\n} & VariantProps<typeof sidebarMenuButtonVariants>) {\n  const Comp = asChild ? Slot : \"button\"\n  const { isMobile, state } = useSidebar()\n\n  const button = (\n    <Comp\n      data-slot=\"sidebar-menu-button\"\n      data-sidebar=\"menu-button\"\n      data-size={size}\n      data-active={isActive}\n      className={cn(sidebarMenuButtonVariants({ variant, size }), className)}\n      {...props}\n    />\n  )\n\n  if (!tooltip) {\n    return button\n  }\n\n  if (typeof tooltip === \"string\") {\n    tooltip = {\n      children: tooltip,\n    }\n  }\n\n  return (\n    <Tooltip>\n      <TooltipTrigger asChild>{button}</TooltipTrigger>\n      <TooltipContent\n        side=\"right\"\n        align=\"center\"\n        hidden={state !== \"collapsed\" || isMobile}\n        {...tooltip}\n      />\n    </Tooltip>\n  )\n}\n\nfunction SidebarMenuAction({\n  className,\n  asChild = false,\n  showOnHover = false,\n  ...props\n}: React.ComponentProps<\"button\"> & {\n  asChild?: boolean\n  showOnHover?: boolean\n}) {\n  const Comp = asChild ? Slot : \"button\"\n\n  return (\n    <Comp\n      data-slot=\"sidebar-menu-action\"\n      data-sidebar=\"menu-action\"\n      className={cn(\n        \"text-sidebar-foreground ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground peer-hover/menu-button:text-sidebar-accent-foreground absolute top-1.5 right-1 flex aspect-square w-5 items-center justify-center rounded-md p-0 outline-hidden transition-transform focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0\",\n        // Increases the hit area of the button on mobile.\n        \"after:absolute after:-inset-2 md:after:hidden\",\n        \"peer-data-[size=sm]/menu-button:top-1\",\n        \"peer-data-[size=default]/menu-button:top-1.5\",\n        \"peer-data-[size=lg]/menu-button:top-2.5\",\n        \"group-data-[collapsible=icon]:hidden\",\n        showOnHover &&\n          \"peer-data-[active=true]/menu-button:text-sidebar-accent-foreground group-focus-within/menu-item:opacity-100 group-hover/menu-item:opacity-100 data-[state=open]:opacity-100 md:opacity-0\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenuBadge({\n  className,\n  ...props\n}: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-menu-badge\"\n      data-sidebar=\"menu-badge\"\n      className={cn(\n        \"text-sidebar-foreground pointer-events-none absolute right-1 flex h-5 min-w-5 items-center justify-center rounded-md px-1 text-xs font-medium tabular-nums select-none\",\n        \"peer-hover/menu-button:text-sidebar-accent-foreground peer-data-[active=true]/menu-button:text-sidebar-accent-foreground\",\n        \"peer-data-[size=sm]/menu-button:top-1\",\n        \"peer-data-[size=default]/menu-button:top-1.5\",\n        \"peer-data-[size=lg]/menu-button:top-2.5\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenuSkeleton({\n  className,\n  showIcon = false,\n  ...props\n}: React.ComponentProps<\"div\"> & {\n  showIcon?: boolean\n}) {\n  // Random width between 50 to 90%.\n  const width = React.useMemo(() => {\n    return `${Math.floor(Math.random() * 40) + 50}%`\n  }, [])\n\n  return (\n    <div\n      data-slot=\"sidebar-menu-skeleton\"\n      data-sidebar=\"menu-skeleton\"\n      className={cn(\"flex h-8 items-center gap-2 rounded-md px-2\", className)}\n      {...props}\n    >\n      {showIcon && (\n        <Skeleton\n          className=\"size-4 rounded-md\"\n          data-sidebar=\"menu-skeleton-icon\"\n        />\n      )}\n      <Skeleton\n        className=\"h-4 max-w-[var(--skeleton-width)] flex-1\"\n        data-sidebar=\"menu-skeleton-text\"\n        style={\n          {\n            \"--skeleton-width\": width,\n          } as React.CSSProperties\n        }\n      />\n    </div>\n  )\n}\n\nfunction SidebarMenuSub({ className, ...props }: React.ComponentProps<\"ul\">) {\n  return (\n    <ul\n      data-slot=\"sidebar-menu-sub\"\n      data-sidebar=\"menu-sub\"\n      className={cn(\n        \"border-sidebar-border mx-3.5 flex min-w-0 translate-x-px flex-col gap-1 border-l px-2.5 py-0.5\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenuSubItem({\n  className,\n  ...props\n}: React.ComponentProps<\"li\">) {\n  return (\n    <li\n      data-slot=\"sidebar-menu-sub-item\"\n      data-sidebar=\"menu-sub-item\"\n      className={cn(\"group/menu-sub-item relative\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenuSubButton({\n  asChild = false,\n  size = \"md\",\n  isActive = false,\n  className,\n  ...props\n}: React.ComponentProps<\"a\"> & {\n  asChild?: boolean\n  size?: \"sm\" | \"md\"\n  isActive?: boolean\n}) {\n  const Comp = asChild ? Slot : \"a\"\n\n  return (\n    <Comp\n      data-slot=\"sidebar-menu-sub-button\"\n      data-sidebar=\"menu-sub-button\"\n      data-size={size}\n      data-active={isActive}\n      className={cn(\n        \"text-sidebar-foreground ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground active:bg-sidebar-accent active:text-sidebar-accent-foreground [&>svg]:text-sidebar-accent-foreground flex h-7 min-w-0 -translate-x-px items-center gap-2 overflow-hidden rounded-md px-2 outline outline-2 outline-transparent outline-offset-2 focus-visible:ring-2 disabled:pointer-events-none disabled:opacity-50 aria-disabled:pointer-events-none aria-disabled:opacity-50 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0\",\n        \"data-[active=true]:bg-sidebar-accent data-[active=true]:text-sidebar-accent-foreground\",\n        size === \"sm\" && \"text-xs\",\n        size === \"md\" && \"text-sm\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nexport {\n  Sidebar,\n  SidebarContent,\n  SidebarFooter,\n  SidebarGroup,\n  SidebarGroupAction,\n  SidebarGroupContent,\n  SidebarGroupLabel,\n  SidebarHeader,\n  SidebarInput,\n  SidebarInset,\n  SidebarMenu,\n  SidebarMenuAction,\n  SidebarMenuBadge,\n  SidebarMenuButton,\n  SidebarMenuItem,\n  SidebarMenuSkeleton,\n  SidebarMenuSub,\n  SidebarMenuSubButton,\n  SidebarMenuSubItem,\n  SidebarProvider,\n  SidebarRail,\n  SidebarSeparator,\n  SidebarTrigger,\n  useSidebar,\n}\n","path":null,"size_bytes":21846,"size_tokens":null},"attached_assets/schema_1763670658439.ts":{"content":"import { sql } from \"drizzle-orm\";\nimport { pgTable, text, varchar, timestamp, date } from \"drizzle-orm/pg-core\";\nimport { createInsertSchema } from \"drizzle-zod\";\nimport { z } from \"zod\";\nimport { relations } from \"drizzle-orm\";\n\nexport const users = pgTable(\"users\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  username: text(\"username\").notNull().unique(),\n  password: text(\"password\").notNull(),\n  role: text(\"role\").notNull().default('user'),\n  email: text(\"email\").notNull(),\n  name: text(\"name\").notNull()\n});\n\nexport const items = pgTable(\"items\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  barcode: text(\"barcode\").notNull().unique(),\n  productName: text(\"product_name\").notNull(),\n  productType: text(\"product_type\").notNull(),\n  status: text(\"status\").notNull().default('Available'),\n  location: text(\"location\"),\n  notes: text(\"notes\"),\n  createdAt: timestamp(\"created_at\").default(sql`CURRENT_TIMESTAMP`),\n  updatedAt: timestamp(\"updated_at\").default(sql`CURRENT_TIMESTAMP`)\n});\n\nexport const reservations = pgTable(\"reservations\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  itemId: varchar(\"item_id\").notNull().references(() => items.id),\n  userId: varchar(\"user_id\").notNull().references(() => users.id),\n  status: text(\"status\").notNull().default('pending'),\n  requestDate: timestamp(\"request_date\").notNull().default(sql`CURRENT_TIMESTAMP`),\n  approvalDate: timestamp(\"approval_date\"),\n  startDate: date(\"start_date\").notNull(),\n  returnDate: date(\"return_date\").notNull(),\n  notes: text(\"notes\"),\n  rejectionReason: text(\"rejection_reason\"),\n  itemConditionOnReceive: text(\"item_condition_on_receive\"),\n  itemConditionOnReturn: text(\"item_condition_on_return\")\n});\n\nexport const categories = pgTable(\"categories\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  name: text(\"name\").notNull().unique(),\n  image: text(\"image\").notNull(),\n  subTypes: text(\"sub_types\").notNull(),\n  createdAt: timestamp(\"created_at\").default(sql`CURRENT_TIMESTAMP`)\n});\n\nexport const notifications = pgTable(\"notifications\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  userId: varchar(\"user_id\").notNull().references(() => users.id),\n  type: text(\"type\").notNull(), // 'reservation_approved', 'reservation_rejected', 'reservation_request', 'item_damaged'\n  title: text(\"title\").notNull(),\n  message: text(\"message\").notNull(),\n  isRead: text(\"is_read\").notNull().default('false'),\n  relatedId: varchar(\"related_id\"), // reservation or item id\n  createdAt: timestamp(\"created_at\").default(sql`CURRENT_TIMESTAMP`)\n});\n\nexport const activityLogs = pgTable(\"activity_logs\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  itemId: varchar(\"item_id\").notNull().references(() => items.id),\n  userId: varchar(\"user_id\").notNull().references(() => users.id),\n  action: text(\"action\").notNull(),\n  oldStatus: text(\"old_status\"),\n  newStatus: text(\"new_status\"),\n  notes: text(\"notes\"),\n  timestamp: timestamp(\"timestamp\").notNull().default(sql`CURRENT_TIMESTAMP`)\n});\n\nexport const itemEditHistory = pgTable(\"item_edit_history\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  itemId: varchar(\"item_id\").notNull().references(() => items.id),\n  userId: varchar(\"user_id\").notNull().references(() => users.id),\n  fieldName: text(\"field_name\").notNull(),\n  oldValue: text(\"old_value\"),\n  newValue: text(\"new_value\"),\n  timestamp: timestamp(\"timestamp\").notNull().default(sql`CURRENT_TIMESTAMP`)\n});\n\nexport const reservationStatusHistory = pgTable(\"reservation_status_history\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  reservationId: varchar(\"reservation_id\").notNull().references(() => reservations.id),\n  userId: varchar(\"user_id\").notNull().references(() => users.id),\n  oldStatus: text(\"old_status\"),\n  newStatus: text(\"new_status\").notNull(),\n  notes: text(\"notes\"),\n  timestamp: timestamp(\"timestamp\").notNull().default(sql`CURRENT_TIMESTAMP`)\n});\n\nexport const insertUserSchema = createInsertSchema(users).omit({\n  id: true\n});\n\nexport const insertItemSchema = createInsertSchema(items).omit({\n  id: true,\n  createdAt: true,\n  updatedAt: true\n});\n\nexport const insertReservationSchema = createInsertSchema(reservations).omit({\n  id: true,\n  requestDate: true,\n  approvalDate: true\n}).extend({\n  startDate: z.coerce.date(),\n  returnDate: z.coerce.date()\n});\n\nexport const insertActivityLogSchema = createInsertSchema(activityLogs).omit({\n  id: true,\n  timestamp: true\n});\n\nexport const insertCategorySchema = createInsertSchema(categories).omit({\n  id: true,\n  createdAt: true\n});\n\nexport const insertNotificationSchema = createInsertSchema(notifications).omit({\n  id: true,\n  createdAt: true\n});\n\nexport const insertItemEditHistorySchema = createInsertSchema(itemEditHistory).omit({\n  id: true,\n  timestamp: true\n});\n\nexport const insertReservationStatusHistorySchema = createInsertSchema(reservationStatusHistory).omit({\n  id: true,\n  timestamp: true\n});\n\n// Relations\nexport const itemEditHistoryRelations = relations(itemEditHistory, ({ one }) => ({\n  item: one(items, {\n    fields: [itemEditHistory.itemId],\n    references: [items.id],\n  }),\n  user: one(users, {\n    fields: [itemEditHistory.userId],\n    references: [users.id],\n  }),\n}));\n\nexport const reservationStatusHistoryRelations = relations(reservationStatusHistory, ({ one }) => ({\n  reservation: one(reservations, {\n    fields: [reservationStatusHistory.reservationId],\n    references: [reservations.id],\n  }),\n  user: one(users, {\n    fields: [reservationStatusHistory.userId],\n    references: [users.id],\n  }),\n}));\n\nexport type InsertUser = z.infer<typeof insertUserSchema>;\nexport type User = typeof users.$inferSelect;\nexport type InsertItem = z.infer<typeof insertItemSchema>;\nexport type Item = typeof items.$inferSelect;\nexport type InsertReservation = z.infer<typeof insertReservationSchema>;\nexport type Reservation = typeof reservations.$inferSelect;\nexport type InsertActivityLog = z.infer<typeof insertActivityLogSchema>;\nexport type ActivityLog = typeof activityLogs.$inferSelect;\nexport type InsertCategory = z.infer<typeof insertCategorySchema>;\nexport type Category = typeof categories.$inferSelect;\nexport type InsertNotification = z.infer<typeof insertNotificationSchema>;\nexport type Notification = typeof notifications.$inferSelect;\nexport type InsertItemEditHistory = z.infer<typeof insertItemEditHistorySchema>;\nexport type ItemEditHistory = typeof itemEditHistory.$inferSelect;\nexport type InsertReservationStatusHistory = z.infer<typeof insertReservationStatusHistorySchema>;\nexport type ReservationStatusHistory = typeof reservationStatusHistory.$inferSelect;\n\nexport const ITEM_STATUSES = ['Available', 'In Use', 'Reserved', 'Maintenance', 'Disabled'] as const;\n\nexport const CATEGORIES = {\n  cameras: {\n    name: 'Cameras',\n    subTypes: ['Camera', 'Action Cam'] as const,\n    image: 'https://images.unsplash.com/photo-1606800052052-a08af7148866?w=800&auto=format&fit=crop'\n  },\n  lenses: {\n    name: 'Lenses',\n    subTypes: ['Lenses', 'Filter', 'Digital Filter'] as const,\n    image: 'https://images.unsplash.com/photo-1617005082133-548c4dd27f35?w=800&auto=format&fit=crop'\n  },\n  tripods_stands: {\n    name: 'Tripods & Stands',\n    subTypes: ['Stands', 'Monopod', 'Small Tripods', 'Backdrop Stands'] as const,\n    image: 'https://images.unsplash.com/photo-1492619375914-88005aa9e8fb?w=800&auto=format&fit=crop'\n  },\n  grips: {\n    name: 'Grips',\n    subTypes: ['Crane', 'Dolly / Wheels Tripod', 'Shoulder Rig', 'Spider Rig', 'Gimbal', 'Slider', 'Rig', 'Rig & Stabilization Gear', 'Camera Support Equipment'] as const,\n    image: 'https://images.unsplash.com/photo-1516035069371-29a1b244cc32?w=800&auto=format&fit=crop'\n  },\n  audio: {\n    name: 'Audio',\n    subTypes: ['Mic', 'Microphone', 'Wireless Device', 'Recorder', 'Mixer', 'Boom Arm', 'Transmitter', 'Receiver'] as const,\n    image: 'https://images.unsplash.com/photo-1590602847861-f357a9332bbc?w=800&auto=format&fit=crop'\n  },\n  lighting: {\n    name: 'Lighting',\n    subTypes: ['LED', 'LED Light', 'LED Ring', 'RGB Lights', 'Soft Box', 'Light', 'Lighting Equipment'] as const,\n    image: 'https://images.unsplash.com/photo-1598289431512-b97b0917affc?w=800&auto=format&fit=crop'\n  },\n  studio_accessories: {\n    name: 'Studio Accessories',\n    subTypes: ['Clapper', 'Reflector', 'Kit', 'Background Screen'] as const,\n    image: 'https://images.unsplash.com/photo-1625948515291-69613efd103f?w=800&auto=format&fit=crop'\n  },\n  bags_cases: {\n    name: 'Bags & Cases',\n    subTypes: ['Bag', 'Bags & Cases', 'Backpacks'] as const,\n    image: 'https://images.unsplash.com/photo-1553062407-98eeb64c6a62?w=800&auto=format&fit=crop'\n  },\n  batteries_power: {\n    name: 'Batteries & Power',\n    subTypes: ['Battery', 'Charger', 'Power Bank', 'V-Mount Battery', 'Battery Power Tester', 'Power & Accessories', 'Inverter'] as const,\n    image: 'https://images.unsplash.com/photo-1609091839311-d5365f9ff1c5?w=800&auto=format&fit=crop'\n  },\n  cables_adapters: {\n    name: 'Cables & Adapters',\n    subTypes: ['Cable', 'Socket', 'Extension'] as const,\n    image: 'https://images.unsplash.com/photo-1558618666-fcd25c85cd64?w=800&auto=format&fit=crop'\n  },\n  monitors_displays: {\n    name: 'Monitors & Displays',\n    subTypes: ['Monitor', 'Screen', 'Computing & Display'] as const,\n    image: 'https://images.unsplash.com/photo-1527443224154-c4a3942d3acf?w=800&auto=format&fit=crop'\n  },\n  storage_devices: {\n    name: 'Storage Devices',\n    subTypes: ['Storage Devices'] as const,\n    image: 'https://images.unsplash.com/photo-1597872200969-2b65d56bd16b?w=800&auto=format&fit=crop'\n  },\n  softwares: {\n    name: 'Softwares',\n    subTypes: ['Editing Software', 'Design Software', 'Office Software'] as const,\n    image: 'https://images.unsplash.com/photo-1551288049-bebda4e38f71?w=800&auto=format&fit=crop'\n  },\n  office_supplies: {\n    name: 'Office Supplies',\n    subTypes: ['Stationery', 'Desk Items', 'Printer Supplies'] as const,\n    image: 'https://images.unsplash.com/photo-1586075010923-2dd4570fb338?w=800&auto=format&fit=crop'\n  },\n  pantry: {\n    name: 'Pantry',\n    subTypes: ['Snacks', 'Disposable Items'] as const,\n    image: 'https://images.unsplash.com/photo-1556910103-1c02745aae4d?w=800&auto=format&fit=crop'\n  },\n  transportation: {\n    name: 'Transportation',\n    subTypes: ['Vehicles', 'Delivery Equipment', 'Travel Accessories'] as const,\n    image: 'https://images.unsplash.com/photo-1449965408869-eaa3f722e40d?w=800&auto=format&fit=crop'\n  },\n  furniture: {\n    name: 'Furniture',\n    subTypes: ['Chairs', 'Tables', 'Storage Units'] as const,\n    image: 'https://images.unsplash.com/photo-1538688525198-9b88f6f53126?w=800&auto=format&fit=crop'\n  },\n  communication: {\n    name: 'Communication',\n    subTypes: ['SIM Cards', 'Mobile Devices', 'Internet Devices'] as const,\n    image: 'https://images.unsplash.com/photo-1512941937669-90a1b58e7e9c?w=800&auto=format&fit=crop'\n  },\n  uniforms_branding: {\n    name: 'Uniforms & Branding',\n    subTypes: ['Uniforms', 'Badges', 'Tags', 'T-Shirts', 'Tote Bags', 'Uniform Bags'] as const,\n    image: 'https://images.unsplash.com/photo-1523381210434-271e8be1f52b?w=800&auto=format&fit=crop'\n  }\n} as const;","path":null,"size_bytes":11293,"size_tokens":null},"attached_assets/ScanResultDialog_1763670896228.tsx":{"content":"import { Dialog, DialogContent } from \"@/components/ui/dialog\";\nimport { Button } from \"@/components/ui/button\";\nimport { CheckCircle2, XCircle, Loader2 } from \"lucide-react\";\n\ninterface ScanResultDialogProps {\n  open: boolean;\n  onClose: () => void;\n  result?: {\n    success: boolean;\n    productName?: string;\n    barcode?: string;\n    oldStatus?: string;\n    newStatus?: string;\n    action?: string;\n    error?: string;\n  };\n  isLoading?: boolean;\n}\n\nexport default function ScanResultDialog({ open, onClose, result, isLoading }: ScanResultDialogProps) {\n  return (\n    <Dialog open={open} onOpenChange={onClose}>\n      <DialogContent className=\"max-w-md text-center\" data-testid=\"dialog-scan-result\">\n        <div className=\"py-6\">\n          {isLoading ? (\n            <>\n              <Loader2 className=\"w-12 h-12 mx-auto text-blue-600 animate-spin mb-4\" />\n              <h3 className=\"text-xl font-bold mb-2\">Processing Scan...</h3>\n              <p className=\"text-muted-foreground\">Please wait</p>\n            </>\n          ) : result?.success ? (\n            <>\n              <CheckCircle2 className=\"w-12 h-12 mx-auto text-green-600 mb-4\" data-testid=\"icon-success\" />\n              <h3 className=\"text-xl font-bold mb-4\">Scan Successful!</h3>\n              <div className=\"space-y-2 text-left bg-muted/50 p-4 rounded-lg\">\n                <p data-testid=\"text-product-name\">\n                  <strong className=\"font-semibold\">Product:</strong> {result.productName}\n                </p>\n                <p data-testid=\"text-barcode\">\n                  <strong className=\"font-semibold\">Barcode:</strong> {result.barcode}\n                </p>\n                <p data-testid=\"text-status-change\">\n                  <strong className=\"font-semibold\">Status:</strong> {result.oldStatus} â†’ {result.newStatus}\n                </p>\n                <p data-testid=\"text-action\">\n                  <strong className=\"font-semibold\">Action:</strong> {result.action}\n                </p>\n              </div>\n            </>\n          ) : (\n            <>\n              <XCircle className=\"w-12 h-12 mx-auto text-red-600 mb-4\" data-testid=\"icon-error\" />\n              <h3 className=\"text-xl font-bold mb-4\">Scan Failed</h3>\n              <p className=\"text-muted-foreground\" data-testid=\"text-error\">\n                {result?.error || 'Unknown error occurred'}\n              </p>\n            </>\n          )}\n\n          {!isLoading && (\n            <div className=\"flex gap-3 mt-6\">\n              <Button \n                className=\"flex-1\"\n                onClick={onClose}\n                data-testid=\"button-scan-another\"\n              >\n                Scan Another Item\n              </Button>\n              <Button \n                variant=\"outline\"\n                onClick={onClose}\n                data-testid=\"button-close\"\n              >\n                Close\n              </Button>\n            </div>\n          )}\n        </div>\n      </DialogContent>\n    </Dialog>\n  );\n}\n","path":null,"size_bytes":2990,"size_tokens":null},"attached_assets/db_1763670748024.ts":{"content":"import pkg from 'pg';\nconst { Pool } = pkg;\nimport { drizzle } from \"drizzle-orm/node-postgres\";\nimport * as schema from \"@shared/schema\";\nimport 'dotenv/config';\n\nif (!process.env.DATABASE_URL) {\n  throw new Error(\"DATABASE_URL must be set. Did you forget to set it in .env?\");\n}\n\nexport const pool = new Pool({\n  connectionString: process.env.DATABASE_URL,\n});\n\nexport const db = drizzle(pool, { schema });\n","path":null,"size_bytes":409,"size_tokens":null},"client/src/components/ui/carousel.tsx":{"content":"import * as React from \"react\"\nimport useEmblaCarousel, {\n  type UseEmblaCarouselType,\n} from \"embla-carousel-react\"\nimport { ArrowLeft, ArrowRight } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Button } from \"@/components/ui/button\"\n\ntype CarouselApi = UseEmblaCarouselType[1]\ntype UseCarouselParameters = Parameters<typeof useEmblaCarousel>\ntype CarouselOptions = UseCarouselParameters[0]\ntype CarouselPlugin = UseCarouselParameters[1]\n\ntype CarouselProps = {\n  opts?: CarouselOptions\n  plugins?: CarouselPlugin\n  orientation?: \"horizontal\" | \"vertical\"\n  setApi?: (api: CarouselApi) => void\n}\n\ntype CarouselContextProps = {\n  carouselRef: ReturnType<typeof useEmblaCarousel>[0]\n  api: ReturnType<typeof useEmblaCarousel>[1]\n  scrollPrev: () => void\n  scrollNext: () => void\n  canScrollPrev: boolean\n  canScrollNext: boolean\n} & CarouselProps\n\nconst CarouselContext = React.createContext<CarouselContextProps | null>(null)\n\nfunction useCarousel() {\n  const context = React.useContext(CarouselContext)\n\n  if (!context) {\n    throw new Error(\"useCarousel must be used within a <Carousel />\")\n  }\n\n  return context\n}\n\nconst Carousel = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement> & CarouselProps\n>(\n  (\n    {\n      orientation = \"horizontal\",\n      opts,\n      setApi,\n      plugins,\n      className,\n      children,\n      ...props\n    },\n    ref\n  ) => {\n    const [carouselRef, api] = useEmblaCarousel(\n      {\n        ...opts,\n        axis: orientation === \"horizontal\" ? \"x\" : \"y\",\n      },\n      plugins\n    )\n    const [canScrollPrev, setCanScrollPrev] = React.useState(false)\n    const [canScrollNext, setCanScrollNext] = React.useState(false)\n\n    const onSelect = React.useCallback((api: CarouselApi) => {\n      if (!api) {\n        return\n      }\n\n      setCanScrollPrev(api.canScrollPrev())\n      setCanScrollNext(api.canScrollNext())\n    }, [])\n\n    const scrollPrev = React.useCallback(() => {\n      api?.scrollPrev()\n    }, [api])\n\n    const scrollNext = React.useCallback(() => {\n      api?.scrollNext()\n    }, [api])\n\n    const handleKeyDown = React.useCallback(\n      (event: React.KeyboardEvent<HTMLDivElement>) => {\n        if (event.key === \"ArrowLeft\") {\n          event.preventDefault()\n          scrollPrev()\n        } else if (event.key === \"ArrowRight\") {\n          event.preventDefault()\n          scrollNext()\n        }\n      },\n      [scrollPrev, scrollNext]\n    )\n\n    React.useEffect(() => {\n      if (!api || !setApi) {\n        return\n      }\n\n      setApi(api)\n    }, [api, setApi])\n\n    React.useEffect(() => {\n      if (!api) {\n        return\n      }\n\n      onSelect(api)\n      api.on(\"reInit\", onSelect)\n      api.on(\"select\", onSelect)\n\n      return () => {\n        api?.off(\"select\", onSelect)\n      }\n    }, [api, onSelect])\n\n    return (\n      <CarouselContext.Provider\n        value={{\n          carouselRef,\n          api: api,\n          opts,\n          orientation:\n            orientation || (opts?.axis === \"y\" ? \"vertical\" : \"horizontal\"),\n          scrollPrev,\n          scrollNext,\n          canScrollPrev,\n          canScrollNext,\n        }}\n      >\n        <div\n          ref={ref}\n          onKeyDownCapture={handleKeyDown}\n          className={cn(\"relative\", className)}\n          role=\"region\"\n          aria-roledescription=\"carousel\"\n          {...props}\n        >\n          {children}\n        </div>\n      </CarouselContext.Provider>\n    )\n  }\n)\nCarousel.displayName = \"Carousel\"\n\nconst CarouselContent = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => {\n  const { carouselRef, orientation } = useCarousel()\n\n  return (\n    <div ref={carouselRef} className=\"overflow-hidden\">\n      <div\n        ref={ref}\n        className={cn(\n          \"flex\",\n          orientation === \"horizontal\" ? \"-ml-4\" : \"-mt-4 flex-col\",\n          className\n        )}\n        {...props}\n      />\n    </div>\n  )\n})\nCarouselContent.displayName = \"CarouselContent\"\n\nconst CarouselItem = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => {\n  const { orientation } = useCarousel()\n\n  return (\n    <div\n      ref={ref}\n      role=\"group\"\n      aria-roledescription=\"slide\"\n      className={cn(\n        \"min-w-0 shrink-0 grow-0 basis-full\",\n        orientation === \"horizontal\" ? \"pl-4\" : \"pt-4\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nCarouselItem.displayName = \"CarouselItem\"\n\nconst CarouselPrevious = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<typeof Button>\n>(({ className, variant = \"outline\", size = \"icon\", ...props }, ref) => {\n  const { orientation, scrollPrev, canScrollPrev } = useCarousel()\n\n  return (\n    <Button\n      ref={ref}\n      variant={variant}\n      size={size}\n      className={cn(\n        \"absolute  h-8 w-8 rounded-full\",\n        orientation === \"horizontal\"\n          ? \"-left-12 top-1/2 -translate-y-1/2\"\n          : \"-top-12 left-1/2 -translate-x-1/2 rotate-90\",\n        className\n      )}\n      disabled={!canScrollPrev}\n      onClick={scrollPrev}\n      {...props}\n    >\n      <ArrowLeft className=\"h-4 w-4\" />\n      <span className=\"sr-only\">Previous slide</span>\n    </Button>\n  )\n})\nCarouselPrevious.displayName = \"CarouselPrevious\"\n\nconst CarouselNext = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<typeof Button>\n>(({ className, variant = \"outline\", size = \"icon\", ...props }, ref) => {\n  const { orientation, scrollNext, canScrollNext } = useCarousel()\n\n  return (\n    <Button\n      ref={ref}\n      variant={variant}\n      size={size}\n      className={cn(\n        \"absolute h-8 w-8 rounded-full\",\n        orientation === \"horizontal\"\n          ? \"-right-12 top-1/2 -translate-y-1/2\"\n          : \"-bottom-12 left-1/2 -translate-x-1/2 rotate-90\",\n        className\n      )}\n      disabled={!canScrollNext}\n      onClick={scrollNext}\n      {...props}\n    >\n      <ArrowRight className=\"h-4 w-4\" />\n      <span className=\"sr-only\">Next slide</span>\n    </Button>\n  )\n})\nCarouselNext.displayName = \"CarouselNext\"\n\nexport {\n  type CarouselApi,\n  Carousel,\n  CarouselContent,\n  CarouselItem,\n  CarouselPrevious,\n  CarouselNext,\n}\n","path":null,"size_bytes":6210,"size_tokens":null},"attached_assets/command_1763670951632.tsx":{"content":"import * as React from \"react\"\nimport { type DialogProps } from \"@radix-ui/react-dialog\"\nimport { Command as CommandPrimitive } from \"cmdk\"\nimport { Search } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Dialog, DialogContent } from \"@/components/ui/dialog\"\n\nconst Command = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive\n    ref={ref}\n    className={cn(\n      \"flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\nCommand.displayName = CommandPrimitive.displayName\n\nconst CommandDialog = ({ children, ...props }: DialogProps) => {\n  return (\n    <Dialog {...props}>\n      <DialogContent className=\"overflow-hidden p-0 shadow-lg\">\n        <Command className=\"[&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground [&_[cmdk-group]:not([hidden])_~[cmdk-group]]:pt-0 [&_[cmdk-group]]:px-2 [&_[cmdk-input-wrapper]_svg]:h-5 [&_[cmdk-input-wrapper]_svg]:w-5 [&_[cmdk-input]]:h-12 [&_[cmdk-item]]:px-2 [&_[cmdk-item]]:py-3 [&_[cmdk-item]_svg]:h-5 [&_[cmdk-item]_svg]:w-5\">\n          {children}\n        </Command>\n      </DialogContent>\n    </Dialog>\n  )\n}\n\nconst CommandInput = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Input>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Input>\n>(({ className, ...props }, ref) => (\n  <div className=\"flex items-center border-b px-3\" cmdk-input-wrapper=\"\">\n    <Search className=\"mr-2 h-4 w-4 shrink-0 opacity-50\" />\n    <CommandPrimitive.Input\n      ref={ref}\n      className={cn(\n        \"flex h-11 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50\",\n        className\n      )}\n      {...props}\n    />\n  </div>\n))\n\nCommandInput.displayName = CommandPrimitive.Input.displayName\n\nconst CommandList = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.List>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.List>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.List\n    ref={ref}\n    className={cn(\"max-h-[300px] overflow-y-auto overflow-x-hidden\", className)}\n    {...props}\n  />\n))\n\nCommandList.displayName = CommandPrimitive.List.displayName\n\nconst CommandEmpty = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Empty>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Empty>\n>((props, ref) => (\n  <CommandPrimitive.Empty\n    ref={ref}\n    className=\"py-6 text-center text-sm\"\n    {...props}\n  />\n))\n\nCommandEmpty.displayName = CommandPrimitive.Empty.displayName\n\nconst CommandGroup = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Group>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Group>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.Group\n    ref={ref}\n    className={cn(\n      \"overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\n\nCommandGroup.displayName = CommandPrimitive.Group.displayName\n\nconst CommandSeparator = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 h-px bg-border\", className)}\n    {...props}\n  />\n))\nCommandSeparator.displayName = CommandPrimitive.Separator.displayName\n\nconst CommandItem = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Item>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[disabled=true]:pointer-events-none data-[selected='true']:bg-accent data-[selected=true]:text-accent-foreground data-[disabled=true]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n      className\n    )}\n    {...props}\n  />\n))\n\nCommandItem.displayName = CommandPrimitive.Item.displayName\n\nconst CommandShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\n        \"ml-auto text-xs tracking-widest text-muted-foreground\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\nCommandShortcut.displayName = \"CommandShortcut\"\n\nexport {\n  Command,\n  CommandDialog,\n  CommandInput,\n  CommandList,\n  CommandEmpty,\n  CommandGroup,\n  CommandItem,\n  CommandShortcut,\n  CommandSeparator,\n}\n","path":null,"size_bytes":4885,"size_tokens":null},"client/src/components/ui/command.tsx":{"content":"import * as React from \"react\"\nimport { type DialogProps } from \"@radix-ui/react-dialog\"\nimport { Command as CommandPrimitive } from \"cmdk\"\nimport { Search } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Dialog, DialogContent } from \"@/components/ui/dialog\"\n\nconst Command = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive\n    ref={ref}\n    className={cn(\n      \"flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\nCommand.displayName = CommandPrimitive.displayName\n\nconst CommandDialog = ({ children, ...props }: DialogProps) => {\n  return (\n    <Dialog {...props}>\n      <DialogContent className=\"overflow-hidden p-0 shadow-lg\">\n        <Command className=\"[&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground [&_[cmdk-group]:not([hidden])_~[cmdk-group]]:pt-0 [&_[cmdk-group]]:px-2 [&_[cmdk-input-wrapper]_svg]:h-5 [&_[cmdk-input-wrapper]_svg]:w-5 [&_[cmdk-input]]:h-12 [&_[cmdk-item]]:px-2 [&_[cmdk-item]]:py-3 [&_[cmdk-item]_svg]:h-5 [&_[cmdk-item]_svg]:w-5\">\n          {children}\n        </Command>\n      </DialogContent>\n    </Dialog>\n  )\n}\n\nconst CommandInput = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Input>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Input>\n>(({ className, ...props }, ref) => (\n  <div className=\"flex items-center border-b px-3\" cmdk-input-wrapper=\"\">\n    <Search className=\"mr-2 h-4 w-4 shrink-0 opacity-50\" />\n    <CommandPrimitive.Input\n      ref={ref}\n      className={cn(\n        \"flex h-11 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50\",\n        className\n      )}\n      {...props}\n    />\n  </div>\n))\n\nCommandInput.displayName = CommandPrimitive.Input.displayName\n\nconst CommandList = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.List>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.List>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.List\n    ref={ref}\n    className={cn(\"max-h-[300px] overflow-y-auto overflow-x-hidden\", className)}\n    {...props}\n  />\n))\n\nCommandList.displayName = CommandPrimitive.List.displayName\n\nconst CommandEmpty = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Empty>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Empty>\n>((props, ref) => (\n  <CommandPrimitive.Empty\n    ref={ref}\n    className=\"py-6 text-center text-sm\"\n    {...props}\n  />\n))\n\nCommandEmpty.displayName = CommandPrimitive.Empty.displayName\n\nconst CommandGroup = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Group>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Group>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.Group\n    ref={ref}\n    className={cn(\n      \"overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\n\nCommandGroup.displayName = CommandPrimitive.Group.displayName\n\nconst CommandSeparator = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 h-px bg-border\", className)}\n    {...props}\n  />\n))\nCommandSeparator.displayName = CommandPrimitive.Separator.displayName\n\nconst CommandItem = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Item>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[disabled=true]:pointer-events-none data-[selected='true']:bg-accent data-[selected=true]:text-accent-foreground data-[disabled=true]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n      className\n    )}\n    {...props}\n  />\n))\n\nCommandItem.displayName = CommandPrimitive.Item.displayName\n\nconst CommandShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\n        \"ml-auto text-xs tracking-widest text-muted-foreground\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\nCommandShortcut.displayName = \"CommandShortcut\"\n\nexport {\n  Command,\n  CommandDialog,\n  CommandInput,\n  CommandList,\n  CommandEmpty,\n  CommandGroup,\n  CommandItem,\n  CommandShortcut,\n  CommandSeparator,\n}\n","path":null,"size_bytes":4885,"size_tokens":null},"attached_assets/QRScannerDialog_1763670896226.tsx":{"content":"import { useState, useEffect } from \"react\";\nimport { Dialog, DialogContent, DialogHeader, DialogTitle } from \"@/components/ui/dialog\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { Camera, Keyboard } from \"lucide-react\";\n\ninterface QRScannerDialogProps {\n  open: boolean;\n  onClose: () => void;\n  onScan: (barcode: string) => void;\n}\n\nexport default function QRScannerDialog({ open, onClose, onScan }: QRScannerDialogProps) {\n  const [manualBarcode, setManualBarcode] = useState(\"\");\n  const [scanMode, setScanMode] = useState<'camera' | 'manual'>('camera');\n\n  useEffect(() => {\n    if (!open) {\n      setManualBarcode(\"\");\n      setScanMode('camera');\n    }\n  }, [open]);\n\n  const handleManualSubmit = (e: React.FormEvent) => {\n    e.preventDefault();\n    if (manualBarcode.trim()) {\n      onScan(manualBarcode.trim());\n      setManualBarcode(\"\");\n    }\n  };\n\n  return (\n    <Dialog open={open} onOpenChange={onClose}>\n      <DialogContent className=\"max-w-lg\" data-testid=\"dialog-qr-scanner\">\n        <DialogHeader>\n          <DialogTitle>Scan Item QR Code</DialogTitle>\n        </DialogHeader>\n\n        <div className=\"space-y-4\">\n          <div className=\"flex gap-2\">\n            <Button\n              variant={scanMode === 'camera' ? 'default' : 'outline'}\n              className=\"flex-1\"\n              onClick={() => setScanMode('camera')}\n              data-testid=\"button-mode-camera\"\n            >\n              <Camera className=\"w-4 h-4 mr-2\" />\n              Camera Scan\n            </Button>\n            <Button\n              variant={scanMode === 'manual' ? 'default' : 'outline'}\n              className=\"flex-1\"\n              onClick={() => setScanMode('manual')}\n              data-testid=\"button-mode-manual\"\n            >\n              <Keyboard className=\"w-4 h-4 mr-2\" />\n              Manual Entry\n            </Button>\n          </div>\n\n          {scanMode === 'camera' ? (\n            <div className=\"space-y-4\">\n              <div className=\"aspect-video bg-muted rounded-lg flex items-center justify-center border-2 border-dashed\">\n                <div className=\"text-center p-6\">\n                  <Camera className=\"w-12 h-12 mx-auto mb-3 text-muted-foreground\" />\n                  <p className=\"text-sm text-muted-foreground\">\n                    Camera preview would appear here\n                  </p>\n                  <p className=\"text-xs text-muted-foreground mt-2\">\n                    Note: QR scanning requires camera permissions\n                  </p>\n                </div>\n              </div>\n              <p className=\"text-sm text-muted-foreground text-center\">\n                Position the QR code within the frame to scan\n              </p>\n            </div>\n          ) : (\n            <form onSubmit={handleManualSubmit} className=\"space-y-4\">\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"manual-barcode\">Enter Barcode</Label>\n                <Input\n                  id=\"manual-barcode\"\n                  value={manualBarcode}\n                  onChange={(e) => setManualBarcode(e.target.value)}\n                  placeholder=\"e.g., CAM-001-2024\"\n                  autoFocus\n                  data-testid=\"input-manual-barcode\"\n                />\n              </div>\n              <Button \n                type=\"submit\" \n                className=\"w-full\"\n                disabled={!manualBarcode.trim()}\n                data-testid=\"button-submit-barcode\"\n              >\n                Process Barcode\n              </Button>\n            </form>\n          )}\n\n          <Button \n            variant=\"outline\" \n            className=\"w-full\"\n            onClick={onClose}\n            data-testid=\"button-cancel-scan\"\n          >\n            Cancel\n          </Button>\n        </div>\n      </DialogContent>\n    </Dialog>\n  );\n}\n","path":null,"size_bytes":3921,"size_tokens":null},"client/src/pages/Inventory.tsx":{"content":"import { useState } from \"react\";\nimport { useQuery, useMutation } from \"@tanstack/react-query\";\nimport { queryClient } from \"@/lib/queryClient\";\nimport InventoryHeader from \"@/components/InventoryHeader\";\nimport CategoryCard from \"@/components/CategoryCard\";\nimport ItemCard from \"@/components/ItemCard\";\nimport ItemFormDialog from \"@/components/ItemFormDialog\";\nimport QRScannerDialog from \"@/components/QRScannerDialog\";\nimport ScanResultDialog from \"@/components/ScanResultDialog\";\nimport CategoryFormDialog from \"@/components/CategoryFormDialog\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { Table, TableBody, TableCell, TableHead, TableHeader, TableRow } from \"@/components/ui/table\";\nimport { Dialog, DialogContent, DialogHeader, DialogTitle } from \"@/components/ui/dialog\";\nimport { Switch } from \"@/components/ui/switch\";\nimport { Popover, PopoverContent, PopoverTrigger } from \"@/components/ui/popover\";\nimport { Plus, Search, FolderPlus, Pencil, Trash2, LayoutGrid, TableIcon, CheckCircle, AlertCircle, Settings } from \"lucide-react\";\nimport { api, type Item } from \"@/lib/api\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport ReservationFormDialog from \"@/components/ReservationFormDialog\";\nimport type { Language } from \"@/lib/translations\";\nimport { useTranslation } from \"@/lib/translations\";\nimport { format } from \"date-fns\";\n\ninterface InventoryPageProps {\n  userName: string;\n  userRole: string;\n  userId: string;\n  onLogout: () => void;\n  onNavigateToReservations?: () => void;\n  onNavigateToActivityLogs?: () => void;\n  onNavigateToQRCodes?: () => void;\n  onNavigateToMaintenance?: () => void;\n  onNavigateToReports?: () => void;\n  currentLanguage: Language;\n  onLanguageChange: (lang: Language) => void;\n}\n\nexport default function Inventory({ userName, userRole, userId, onLogout, onNavigateToReservations, onNavigateToActivityLogs, onNavigateToQRCodes, onNavigateToMaintenance, onNavigateToReports, currentLanguage, onLanguageChange }: InventoryPageProps) {\n  const { toast } = useToast();\n  const t = useTranslation(currentLanguage);\n  const [currentView, setCurrentView] = useState<'categories' | 'inventory'>('categories');\n  const [searchQuery, setSearchQuery] = useState(\"\");\n  const [selectedCategory, setSelectedCategory] = useState<string | null>(null);\n  const [showItemForm, setShowItemForm] = useState(false);\n  const [showQRScanner, setShowQRScanner] = useState(false);\n  const [showScanResult, setShowScanResult] = useState(false);\n  const [editingItem, setEditingItem] = useState<Item | null>(null);\n  const [scanResult, setScanResult] = useState<any>(null);\n  const [showCategoryForm, setShowCategoryForm] = useState(false);\n  const [editingCategory, setEditingCategory] = useState<any>(null);\n  const [viewMode, setViewMode] = useState<'card' | 'table'>('card');\n  const [reservingItem, setReservingItem] = useState<Item | null>(null);\n  const [itemTypeFilter, setItemTypeFilter] = useState<'equipment' | 'assets'>('equipment');\n  const [showCheckoutDialog, setShowCheckoutDialog] = useState(false);\n  const [checkoutReservation, setCheckoutReservation] = useState<any>(null);\n  const [checkoutCondition, setCheckoutCondition] = useState<'good' | 'damage'>('good');\n  const [checkoutNotes, setCheckoutNotes] = useState(\"\");\n  const [showReturnDialog, setShowReturnDialog] = useState(false);\n  const [returnReservation, setReturnReservation] = useState<any>(null);\n  const [returnCondition, setReturnCondition] = useState<'good' | 'damage'>('good');\n  const [returnNotes, setReturnNotes] = useState(\"\");\n  const [showLocationColumn, setShowLocationColumn] = useState(true);\n  const [showColumnSettings, setShowColumnSettings] = useState(false);\n\n  const { data: categories = [] } = useQuery({\n    queryKey: ['/api/categories', itemTypeFilter],\n    queryFn: () => api.categories.getAll(itemTypeFilter === 'equipment')\n  });\n\n  const { data: items = [] } = useQuery({\n    queryKey: ['/api/items', selectedCategory, itemTypeFilter],\n    queryFn: () => {\n      console.log('Fetching items for category:', selectedCategory, 'type:', itemTypeFilter);\n      return api.items.getAll(selectedCategory || undefined, itemTypeFilter === 'equipment');\n    },\n    enabled: currentView === 'inventory'\n  });\n\n  const { data: reservations = [] } = useQuery({\n    queryKey: ['/api/reservations'],\n    queryFn: () => api.reservations.getAll(),\n    enabled: currentView === 'inventory'\n  });\n\n  const createItemMutation = useMutation({\n    mutationFn: (itemData: Partial<Item>) => api.items.create(itemData),\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['/api/items'] });\n      queryClient.invalidateQueries({ queryKey: ['/api/categories'] });\n      setShowItemForm(false);\n      toast({ title: \"Item added successfully\" });\n    },\n    onError: () => {\n      toast({ title: \"Failed to add item\", variant: \"destructive\" });\n    }\n  });\n\n  const updateItemMutation = useMutation({\n    mutationFn: ({ id, data }: { id: string; data: Partial<Item> }) =>\n      api.items.update(id, data),\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['/api/items'] });\n      queryClient.invalidateQueries({ queryKey: ['/api/categories'] });\n      setShowItemForm(false);\n      setEditingItem(null);\n      toast({ title: \"Item updated successfully\" });\n    },\n    onError: () => {\n      toast({ title: \"Failed to update item\", variant: \"destructive\" });\n    }\n  });\n\n  const deleteItemMutation = useMutation({\n    mutationFn: (id: string) => api.items.delete(id),\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['/api/items'] });\n      queryClient.invalidateQueries({ queryKey: ['/api/categories'] });\n      toast({ title: \"Item deleted successfully\" });\n    },\n    onError: () => {\n      toast({ title: \"Failed to delete item\", variant: \"destructive\" });\n    }\n  });\n\n  const scanMutation = useMutation({\n    mutationFn: (barcode: string) => api.scan.process(barcode),\n    onSuccess: (data) => {\n      setScanResult(data);\n      setShowQRScanner(false);\n      setShowScanResult(true);\n      queryClient.invalidateQueries({ queryKey: ['/api/items'] });\n      queryClient.invalidateQueries({ queryKey: ['/api/categories'] });\n    },\n    onError: () => {\n      setScanResult({\n        success: false,\n        error: 'Failed to process scan'\n      });\n      setShowQRScanner(false);\n      setShowScanResult(true);\n    }\n  });\n\n  const createCategoryMutation = useMutation({\n    mutationFn: (categoryData: any) => api.customCategories.create(categoryData),\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['/api/categories'] });\n      setShowCategoryForm(false);\n      toast({ title: \"Category created successfully\" });\n    },\n    onError: () => {\n      toast({ title: \"Failed to create category\", variant: \"destructive\" });\n    }\n  });\n\n  const updateCategoryMutation = useMutation({\n    mutationFn: ({ id, data }: { id: string; data: any }) =>\n      api.customCategories.update(id, data),\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['/api/categories'] });\n      setShowCategoryForm(false);\n      setEditingCategory(null);\n      toast({ title: \"Category updated successfully\" });\n    },\n    onError: () => {\n      toast({ title: \"Failed to update category\", variant: \"destructive\" });\n    }\n  });\n\n  const deleteCategoryMutation = useMutation({\n    mutationFn: (id: string) => api.customCategories.delete(id),\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['/api/categories'] });\n      toast({ title: \"Category deleted successfully\" });\n    },\n    onError: () => {\n      toast({ title: \"Failed to delete category\", variant: \"destructive\" });\n    }\n  });\n\n  const createReservationMutation = useMutation({\n    mutationFn: (data: any) => api.reservations.create(data),\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['/api/reservations'] });\n      queryClient.invalidateQueries({ queryKey: ['/api/items'] });\n      setReservingItem(null);\n      toast({ title: \"Reservation created successfully\" });\n    },\n    onError: () => {\n      toast({ title: \"Failed to create reservation\", variant: \"destructive\" });\n      setReservingItem(null);\n    }\n  });\n\n  const handleLogout = async () => {\n    try {\n      await api.auth.logout();\n      onLogout();\n    } catch (error) {\n      console.error('Logout failed:', error);\n      onLogout();\n    }\n  };\n\n  const filteredItems = items.filter(item => {\n    const matchesSearch = searchQuery === \"\" || \n      item.productName.toLowerCase().includes(searchQuery.toLowerCase()) ||\n      item.barcode.toLowerCase().includes(searchQuery.toLowerCase());\n    return matchesSearch;\n  });\n\n  // Filter categories by both equipment type AND search query for complete separation\n  const filteredCategories = categories.filter(cat => {\n    // Only show categories matching the current equipment type filter\n    if (itemTypeFilter === 'equipment' && cat.isCustom && !cat.isEquipment) return false;\n    if (itemTypeFilter === 'assets' && cat.isCustom && cat.isEquipment) return false;\n    \n    // Then filter by search query\n    return cat.name.toLowerCase().includes(searchQuery.toLowerCase());\n  });\n\n  const handleAddItem = (itemData: any) => {\n    createItemMutation.mutate(itemData);\n  };\n\n  const handleEditItem = (itemData: any) => {\n    if (editingItem) {\n      updateItemMutation.mutate({ id: editingItem.id, data: itemData });\n    }\n  };\n\n  const handleDeleteItem = (id: string) => {\n    if (confirm('Are you sure you want to delete this item?')) {\n      deleteItemMutation.mutate(id);\n    }\n  };\n\n  const handleScan = (barcode: string) => {\n    scanMutation.mutate(barcode);\n  };\n\n  const handleAddCategory = (categoryData: any) => {\n    // Add isEquipment flag based on current filter\n    createCategoryMutation.mutate({\n      ...categoryData,\n      isEquipment: itemTypeFilter === 'equipment'\n    });\n  };\n\n  const handleEditCategory = (categoryData: any) => {\n    if (editingCategory?.id) {\n      updateCategoryMutation.mutate({ \n        id: editingCategory.id, \n        data: {\n          ...categoryData,\n          isEquipment: itemTypeFilter === 'equipment'\n        }\n      });\n    }\n  };\n\n  const handleDeleteCategory = (id: string) => {\n    if (confirm('Are you sure you want to delete this category?')) {\n      deleteCategoryMutation.mutate(id);\n    }\n  };\n\n  const handleReserveItem = (item: Item) => {\n    setReservingItem(item);\n  };\n\n  const handleSubmitReservation = (data: any) => {\n    createReservationMutation.mutate(data);\n  };\n\n  const handleCheckout = (item: Item) => {\n    if (confirm(`Check out ${item.productName}?`)) {\n      updateItemMutation.mutate({\n        id: item.id,\n        data: { status: 'In Use' }\n      });\n    }\n  };\n\n  const handleCheckin = (item: Item) => {\n    if (confirm(`Check in ${item.productName}?`)) {\n      updateItemMutation.mutate({\n        id: item.id,\n        data: { status: 'Available' }\n      });\n    }\n  };\n\n  const getItemName = (itemId: string) => {\n    return items.find(item => item.id === itemId)?.productName || itemId;\n  };\n\n  const getApprovedReservationForPickup = (itemId: string) => {\n    const today = new Date();\n    const todayStr = `${today.getFullYear()}-${String(today.getMonth() + 1).padStart(2, '0')}-${String(today.getDate()).padStart(2, '0')}`;\n    \n    return reservations.find(res => {\n      if (res.itemId !== itemId || res.status !== 'approved') return false;\n      if (res.checkoutDate || res.itemConditionOnReceive) return false;\n      \n      const startDate = new Date(res.startDate);\n      const startDateStr = `${startDate.getFullYear()}-${String(startDate.getMonth() + 1).padStart(2, '0')}-${String(startDate.getDate()).padStart(2, '0')}`;\n      \n      return todayStr === startDateStr;\n    });\n  };\n\n  const handleReceiveEquipment = (item: Item) => {\n    const reservation = getApprovedReservationForPickup(item.id);\n    if (reservation) {\n      setCheckoutReservation(reservation);\n      setCheckoutCondition('good');\n      setCheckoutNotes(\"\");\n      setShowCheckoutDialog(true);\n    }\n  };\n\n  const handleConfirmCheckout = async () => {\n    if (checkoutCondition === 'damage' && !checkoutNotes.trim()) {\n      toast({ title: \"Please describe the damage or missing items\", variant: \"destructive\" });\n      return;\n    }\n\n    try {\n      await api.reservations.update(checkoutReservation.id, {\n        checkoutDate: new Date().toISOString(),\n        itemConditionOnReceive: checkoutCondition,\n        damageNotes: checkoutNotes || undefined\n      });\n      \n      queryClient.invalidateQueries({ queryKey: ['/api/reservations'] });\n      queryClient.invalidateQueries({ queryKey: ['/api/items'] });\n      setShowCheckoutDialog(false);\n      toast({ title: \"Equipment receipt confirmed successfully\" });\n    } catch (error) {\n      toast({ title: \"Failed to confirm equipment receipt\", variant: \"destructive\" });\n    }\n  };\n\n  const getPendingReturnReservation = (itemId: string) => {\n    const today = new Date();\n    const todayStr = `${today.getFullYear()}-${String(today.getMonth() + 1).padStart(2, '0')}-${String(today.getDate()).padStart(2, '0')}`;\n    \n    return reservations.find(res => {\n      if (res.itemId !== itemId || res.status !== 'approved') return false;\n      if (res.itemConditionOnReturn !== undefined) return false; // Already marked as returned\n      \n      // Check if return date has started (today >= returnDate)\n      const returnDate = new Date(res.returnDate);\n      const returnDateStr = `${returnDate.getFullYear()}-${String(returnDate.getMonth() + 1).padStart(2, '0')}-${String(returnDate.getDate()).padStart(2, '0')}`;\n      \n      return todayStr >= returnDateStr;\n    });\n  };\n\n  const handleMarkReturned = (item: Item) => {\n    const reservation = getPendingReturnReservation(item.id);\n    if (reservation) {\n      setReturnReservation(reservation);\n      setReturnCondition('good');\n      setReturnNotes(\"\");\n      setShowReturnDialog(true);\n    }\n  };\n\n  const handleConfirmReturn = async () => {\n    if (returnCondition === 'damage' && !returnNotes.trim()) {\n      toast({ title: \"Please describe the damage or missing items\", variant: \"destructive\" });\n      return;\n    }\n\n    try {\n      await api.reservations.update(returnReservation.id, {\n        status: 'completed',\n        itemConditionOnReturn: returnCondition,\n        returnNotes: returnNotes || undefined\n      });\n      \n      queryClient.invalidateQueries({ queryKey: ['/api/reservations'] });\n      queryClient.invalidateQueries({ queryKey: ['/api/items'] });\n      setShowReturnDialog(false);\n      toast({ title: \"Equipment return confirmed successfully\" });\n    } catch (error) {\n      toast({ title: \"Failed to confirm equipment return\", variant: \"destructive\" });\n    }\n  };\n\n  return (\n    <div className=\"min-h-screen bg-background\">\n      <InventoryHeader\n        userName={userName}\n        userRole={userRole}\n        currentView={currentView}\n        onViewChange={(view) => {\n          setCurrentView(view);\n          setSelectedCategory(null);\n        }}\n        onLogout={handleLogout}\n        onNavigateToReservations={onNavigateToReservations}\n        onNavigateToActivityLogs={onNavigateToActivityLogs}\n        onNavigateToQRCodes={onNavigateToQRCodes}\n        onNavigateToMaintenance={onNavigateToMaintenance}\n        onNavigateToReports={() => (window as any).navigateToReports?.()}\n        language={currentLanguage}\n        onLanguageChange={onLanguageChange}\n      />\n\n      <main className=\"max-w-[1400px] mx-auto px-3 md:px-5 py-4 md:py-8\">\n        {currentView === 'categories' ? (\n          <div>\n            <div className=\"text-center mb-10 p-10 bg-gradient-to-r from-[#667eea] to-[#764ba2] rounded-2xl text-white\">\n              <h1 className=\"text-4xl font-extrabold mb-4\" data-testid=\"text-hero-title\">\n                {itemTypeFilter === 'equipment' ? t('equipmentCategories') : 'Asset Categories'}\n              </h1>\n              <p className=\"text-lg opacity-90 max-w-2xl mx-auto\" data-testid=\"text-hero-subtitle\">\n                {t('browseInventory')}\n              </p>\n            </div>\n\n            <div className=\"flex gap-2 justify-center mb-8\">\n              <Button\n                onClick={() => setItemTypeFilter('equipment')}\n                variant={itemTypeFilter === 'equipment' ? 'default' : 'outline'}\n                data-testid=\"button-filter-equipment-categories\"\n                className={itemTypeFilter === 'equipment' ? 'bg-gradient-to-r from-[#667eea] to-[#764ba2]' : ''}\n              >\n                Equipment\n              </Button>\n              <Button\n                onClick={() => setItemTypeFilter('assets')}\n                variant={itemTypeFilter === 'assets' ? 'default' : 'outline'}\n                data-testid=\"button-filter-assets-categories\"\n                className={itemTypeFilter === 'assets' ? 'bg-gradient-to-r from-[#667eea] to-[#764ba2]' : ''}\n              >\n                Assets\n              </Button>\n            </div>\n\n            <div className=\"max-w-2xl mx-auto mb-8\">\n              <div className=\"flex gap-3\">\n                <div className=\"relative flex-1\">\n                  <Search className=\"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-muted-foreground\" />\n                  <Input\n                    placeholder={t('searchCategories')}\n                    value={searchQuery}\n                    onChange={(e) => setSearchQuery(e.target.value)}\n                    className=\"pl-12 h-12 text-base border-2\"\n                    data-testid=\"input-search-categories\"\n                  />\n                </div>\n                <Button\n                  onClick={() => setViewMode(viewMode === 'card' ? 'table' : 'card')}\n                  variant=\"outline\"\n                  className=\"h-12\"\n                  data-testid=\"button-toggle-view\"\n                >\n                  {viewMode === 'card' ? <TableIcon className=\"w-4 h-4 mr-2\" /> : <LayoutGrid className=\"w-4 h-4 mr-2\" />}\n                  {viewMode === 'card' ? t('tableView') : t('cardView')}\n                </Button>\n                {userRole === 'admin' && (\n                  <Button\n                    onClick={() => {\n                      setEditingCategory(null);\n                      setShowCategoryForm(true);\n                    }}\n                    className=\"bg-gradient-to-r from-[#667eea] to-[#764ba2] h-12\"\n                    data-testid=\"button-add-category\"\n                  >\n                    <FolderPlus className=\"w-4 h-4 mr-2\" />\n                    {t('addCategory')}\n                  </Button>\n                )}\n              </div>\n            </div>\n\n            {viewMode === 'card' ? (\n              <div className=\"grid grid-cols-[repeat(auto-fit,minmax(350px,1fr))] gap-5\">\n                {filteredCategories.map((category) => (\n                  <div key={category.name} className=\"relative group\">\n                    <CategoryCard\n                      {...category}\n                      onClick={() => {\n                        console.log('Category clicked:', category.name, 'isEquipment:', category.isEquipment);\n                        setSelectedCategory(category.name);\n                        setCurrentView('inventory');\n                        // Use isEquipment flag from API (works for both default and custom categories)\n                        setItemTypeFilter(category.isEquipment ? 'equipment' : 'assets');\n                      }}\n                    />\n                    {userRole === 'admin' && (\n                      <div className=\"absolute top-3 left-3 flex gap-2 opacity-0 group-hover:opacity-100 transition-opacity\">\n                        <Button\n                          size=\"sm\"\n                          variant=\"secondary\"\n                          onClick={(e) => {\n                            e.stopPropagation();\n                            setEditingCategory(category);\n                            setShowCategoryForm(true);\n                          }}\n                          className=\"bg-white/90 hover:bg-white\"\n                        >\n                          <Pencil className=\"w-3 h-3\" />\n                        </Button>\n                        <Button\n                          size=\"sm\"\n                          variant=\"destructive\"\n                          onClick={(e) => {\n                            e.stopPropagation();\n                            handleDeleteCategory(category.id);\n                          }}\n                          className=\"bg-red-500/90 hover:bg-red-600\"\n                        >\n                          <Trash2 className=\"w-3 h-3\" />\n                        </Button>\n                      </div>\n                    )}\n                  </div>\n                ))}\n              </div>\n            ) : (\n              <div className=\"bg-white rounded-lg shadow overflow-hidden\">\n                <Table>\n                  <TableHeader>\n                    <TableRow>\n                      <TableHead>{t('name')}</TableHead>\n                      <TableHead>{t('type')}</TableHead>\n                      <TableHead>{t('status')}</TableHead>\n                      <TableHead>{t('totalItems')}</TableHead>\n                      <TableHead>{t('available')}</TableHead>\n                      {userRole === 'admin' && <TableHead className=\"text-right\">{t('actions')}</TableHead>}\n                    </TableRow>\n                  </TableHeader>\n                  <TableBody>\n                    {filteredCategories.map((category) => (\n                      <TableRow \n                        key={category.name}\n                        className=\"cursor-pointer hover:bg-muted/50\"\n                        onClick={() => {\n                          setSelectedCategory(category.name);\n                          setCurrentView('inventory');\n                        }}\n                      >\n                        <TableCell className=\"font-medium\">{category.name}</TableCell>\n                        <TableCell>{category.subTypes.join(', ')}</TableCell>\n                        <TableCell>\n                          <span className={`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${category.availableCount > 0 ? 'bg-green-100 text-green-800' : 'bg-gray-100 text-gray-800'}`}>\n                            {category.availableCount > 0 ? t('available') : t('allInUse')}\n                          </span>\n                        </TableCell>\n                        <TableCell>{category.totalCount}</TableCell>\n                        <TableCell>{category.availableCount}</TableCell>\n                        {userRole === 'admin' && (\n                          <TableCell className=\"text-right\">\n                            <div className=\"flex gap-2 justify-end\">\n                              <Button\n                                size=\"sm\"\n                                variant=\"outline\"\n                                onClick={(e) => {\n                                  e.stopPropagation();\n                                  setEditingCategory(category);\n                                  setShowCategoryForm(true);\n                                }}\n                              >\n                                <Pencil className=\"w-3 h-3\" />\n                              </Button>\n                              <Button\n                                size=\"sm\"\n                                variant=\"destructive\"\n                                onClick={(e) => {\n                                  e.stopPropagation();\n                                  handleDeleteCategory(category.id);\n                                }}\n                              >\n                                <Trash2 className=\"w-3 h-3\" />\n                              </Button>\n                            </div>\n                          </TableCell>\n                        )}\n                      </TableRow>\n                    ))}\n                  </TableBody>\n                </Table>\n              </div>\n            )}\n          </div>\n        ) : (\n          <div>\n            <div className=\"flex items-center justify-between mb-6 flex-wrap gap-4\">\n              <div>\n                <h1 className=\"text-3xl font-bold\" data-testid=\"text-inventory-title\">\n                  {selectedCategory || t('allItems')}\n                </h1>\n                <p className=\"text-muted-foreground\" data-testid=\"text-inventory-count\">\n                  {filteredItems.length} {t('items')}\n                </p>\n              </div>\n              <div className=\"flex gap-3\">\n                <Button\n                  onClick={() => setViewMode(viewMode === 'card' ? 'table' : 'card')}\n                  variant=\"outline\"\n                  data-testid=\"button-toggle-view-items\"\n                >\n                  {viewMode === 'card' ? <TableIcon className=\"w-4 h-4 mr-2\" /> : <LayoutGrid className=\"w-4 h-4 mr-2\" />}\n                  {viewMode === 'card' ? t('tableView') : t('cardView')}\n                </Button>\n                <Popover open={showColumnSettings} onOpenChange={setShowColumnSettings}>\n                  <PopoverTrigger asChild>\n                    <Button\n                      size=\"icon\"\n                      variant=\"outline\"\n                      data-testid=\"button-column-settings\"\n                    >\n                      <Settings className=\"w-4 h-4\" />\n                    </Button>\n                  </PopoverTrigger>\n                  <PopoverContent className=\"w-56\">\n                    <div className=\"space-y-4\">\n                      <h4 className=\"font-medium text-sm\">{t('columnVisibility')}</h4>\n                      <div className=\"space-y-3\">\n                        <div className=\"flex items-center justify-between\">\n                          <label htmlFor=\"location-toggle\" className=\"text-sm cursor-pointer\">\n                            {t('location')}\n                          </label>\n                          <Switch\n                            id=\"location-toggle\"\n                            checked={showLocationColumn}\n                            onCheckedChange={setShowLocationColumn}\n                            data-testid=\"switch-location-column\"\n                          />\n                        </div>\n                      </div>\n                    </div>\n                  </PopoverContent>\n                </Popover>\n                {userRole === 'admin' && (\n                  <>\n                    {itemTypeFilter === 'equipment' && (\n                      <Button\n                        onClick={() => setShowQRScanner(true)}\n                        variant=\"outline\"\n                        data-testid=\"button-scan-item\"\n                      >\n                        <Search className=\"w-4 h-4 mr-2\" />\n                        {t('scanItem')}\n                      </Button>\n                    )}\n                    <Button\n                      onClick={() => {\n                        setEditingItem(null);\n                        setShowItemForm(true);\n                      }}\n                      className=\"bg-gradient-to-r from-[#667eea] to-[#764ba2]\"\n                      data-testid=\"button-add-item\"\n                    >\n                      <Plus className=\"w-4 h-4 mr-2\" />\n                      {t('addItem')}\n                    </Button>\n                  </>\n                )}\n              </div>\n            </div>\n\n            <div className=\"mb-6\">\n              <div className=\"relative max-w-md\">\n                <Search className=\"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-muted-foreground\" />\n                <Input\n                  placeholder={t('searchItems')}\n                  value={searchQuery}\n                  onChange={(e) => setSearchQuery(e.target.value)}\n                  className=\"pl-12\"\n                  data-testid=\"input-search-items\"\n                />\n              </div>\n            </div>\n\n            {viewMode === 'card' ? (\n              <div className=\"grid gap-4\">\n                {filteredItems.map((item) => (\n                  <ItemCard\n                    key={item.id}\n                    id={item.id}\n                    barcode={item.barcode}\n                    productName={item.productName}\n                    productType={item.productType}\n                    status={item.status}\n                    location={item.location || undefined}\n                    notes={item.notes || undefined}\n                    userRole={userRole}\n                    isEquipment={item.isEquipment}\n                    language={currentLanguage}\n                    onEdit={userRole === 'admin' ? () => {\n                      setEditingItem(item);\n                      setShowItemForm(true);\n                    } : undefined}\n                    onScan={item.isEquipment && userRole !== 'admin' ? () => {\n                      setShowQRScanner(true);\n                    } : undefined}\n                    onReserve={item.isEquipment && userRole !== 'admin' ? () => handleReserveItem(item) : undefined}\n                    onCheckout={item.isEquipment && userRole === 'admin' ? () => handleCheckout(item) : undefined}\n                    onCheckin={item.isEquipment && userRole === 'admin' ? () => handleCheckin(item) : undefined}\n                    onReceiveEquipment={item.isEquipment && userRole !== 'admin' && getApprovedReservationForPickup(item.id) ? () => handleReceiveEquipment(item) : undefined}\n                    onMarkReturned={item.isEquipment && userRole === 'admin' && getPendingReturnReservation(item.id) ? () => handleMarkReturned(item) : undefined}\n                  />\n                ))}\n              </div>\n            ) : (\n              <div className=\"bg-white rounded-lg shadow overflow-hidden\">\n                <Table>\n                  <TableHeader>\n                    <TableRow>\n                      <TableHead>{t('barcode')}</TableHead>\n                      <TableHead>{t('name')}</TableHead>\n                      <TableHead>{t('type')}</TableHead>\n                      <TableHead>{t('status')}</TableHead>\n                      {showLocationColumn && <TableHead>{t('location')}</TableHead>}\n                      {userRole === 'admin' && <TableHead className=\"text-right\">{t('actions')}</TableHead>}\n                    </TableRow>\n                  </TableHeader>\n                  <TableBody>\n                    {filteredItems.map((item) => (\n                      <TableRow key={item.id}>\n                        <TableCell className=\"font-mono\">{item.barcode}</TableCell>\n                        <TableCell className=\"font-medium\">{item.productName}</TableCell>\n                        <TableCell>{item.productType}</TableCell>\n                        <TableCell>\n                          <span className={`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${\n                            item.status === 'Available' ? 'bg-green-100 text-green-800' :\n                            item.status === 'In Use' ? 'bg-blue-100 text-blue-800' :\n                            item.status === 'Reserved' ? 'bg-amber-100 text-amber-800' :\n                            'bg-red-100 text-red-800'\n                          }`}>\n                            {item.status}\n                          </span>\n                        </TableCell>\n                        {showLocationColumn && <TableCell>{item.location || '-'}</TableCell>}\n                        {userRole === 'admin' && (\n                          <TableCell className=\"text-right\">\n                            <div className=\"flex gap-2 justify-end\">\n                              <Button\n                                size=\"sm\"\n                                variant=\"outline\"\n                                onClick={() => {\n                                  setEditingItem(item);\n                                  setShowItemForm(true);\n                                }}\n                              >\n                                <Pencil className=\"w-3 h-3\" />\n                              </Button>\n                            </div>\n                          </TableCell>\n                        )}\n                      </TableRow>\n                    ))}\n                  </TableBody>\n                </Table>\n              </div>\n            )}\n\n            {filteredItems.length === 0 && (\n              <div className=\"text-center py-12\">\n                <p className=\"text-muted-foreground\" data-testid=\"text-no-items\">\n                  {t('noItemsFound')}\n                </p>\n              </div>\n            )}\n          </div>\n        )}\n      </main>\n\n      <ItemFormDialog\n        open={showItemForm}\n        onClose={() => {\n          setShowItemForm(false);\n          setEditingItem(null);\n        }}\n        onSubmit={editingItem ? handleEditItem : handleAddItem}\n        item={editingItem ? {\n          id: editingItem.id,\n          barcode: editingItem.barcode,\n          productName: editingItem.productName,\n          productType: editingItem.productType,\n          status: editingItem.status,\n          location: editingItem.location || undefined,\n          notes: editingItem.notes || undefined,\n          isEquipment: editingItem.isEquipment\n        } : undefined}\n        mode={editingItem ? 'edit' : 'add'}\n        userRole={userRole}\n        isEquipment={itemTypeFilter === 'equipment'}\n        language={currentLanguage}\n      />\n\n      <QRScannerDialog\n        open={showQRScanner}\n        onClose={() => setShowQRScanner(false)}\n        onScan={handleScan}\n      />\n\n      <ScanResultDialog\n        open={showScanResult}\n        onClose={() => setShowScanResult(false)}\n        result={scanResult}\n        isLoading={scanMutation.isPending}\n      />\n\n      <CategoryFormDialog\n        open={showCategoryForm}\n        onClose={() => {\n          setShowCategoryForm(false);\n          setEditingCategory(null);\n        }}\n        onSubmit={editingCategory ? handleEditCategory : handleAddCategory}\n        category={editingCategory}\n        mode={editingCategory ? 'edit' : 'add'}\n        isEquipment={itemTypeFilter === 'equipment'}\n      />\n\n      <ReservationFormDialog\n        open={!!reservingItem}\n        onClose={() => setReservingItem(null)}\n        onSubmit={(data) => createReservationMutation.mutate({ ...data, userId })}\n        items={reservingItem ? [reservingItem] : []}\n      />\n\n      <Dialog open={showCheckoutDialog} onOpenChange={setShowCheckoutDialog}>\n        <DialogContent className=\"max-w-2xl\">\n          <DialogHeader>\n            <DialogTitle>{t('confirmEquipmentPickup')}</DialogTitle>\n          </DialogHeader>\n          {checkoutReservation && (\n            <div className=\"space-y-6\">\n              <div className=\"bg-blue-50 dark:bg-blue-950 p-4 rounded-lg space-y-2 border border-blue-200 dark:border-blue-800\">\n                <div><strong>{t('equipment')}:</strong> {getItemName(checkoutReservation.itemId)}</div>\n                <div><strong>{t('pickupDateTime')}:</strong> {format(new Date(checkoutReservation.startDate), \"PPP\")} {checkoutReservation.startTime || \"09:00\"}</div>\n                <div><strong>{t('returnDateTime')}:</strong> {format(new Date(checkoutReservation.returnDate), \"PPP\")} {checkoutReservation.returnTime || \"17:00\"}</div>\n                <div><strong>{t('purpose')}:</strong> {checkoutReservation.purposeOfUse}</div>\n              </div>\n\n              <div className=\"space-y-3\">\n                <Label className=\"text-base font-semibold\">{t('equipmentCondition')}</Label>\n                <div className=\"space-y-3\">\n                  <div className=\"flex items-center gap-3 p-3 border rounded-lg cursor-pointer hover:bg-muted/50\" onClick={() => setCheckoutCondition('good')}>\n                    <input \n                      type=\"radio\" \n                      name=\"condition\" \n                      value=\"good\"\n                      checked={checkoutCondition === 'good'}\n                      onChange={() => setCheckoutCondition('good')}\n                      className=\"w-4 h-4\"\n                    />\n                    <Label className=\"cursor-pointer font-medium flex items-center gap-2 mb-0\">\n                      <CheckCircle className=\"w-5 h-5 text-green-600\" />\n                      {t('good')}\n                    </Label>\n                  </div>\n\n                  <div className=\"flex items-center gap-3 p-3 border rounded-lg cursor-pointer hover:bg-muted/50\" onClick={() => setCheckoutCondition('damage')}>\n                    <input \n                      type=\"radio\" \n                      name=\"condition\" \n                      value=\"damage\"\n                      checked={checkoutCondition === 'damage'}\n                      onChange={() => setCheckoutCondition('damage')}\n                      className=\"w-4 h-4\"\n                    />\n                    <Label className=\"cursor-pointer font-medium flex items-center gap-2 mb-0\">\n                      <AlertCircle className=\"w-5 h-5 text-red-600\" />\n                      {t('damageOrMissing')}\n                    </Label>\n                  </div>\n                </div>\n              </div>\n\n              {checkoutCondition === 'damage' && (\n                <div className=\"space-y-2 p-4 bg-red-50 dark:bg-red-950 rounded-lg border border-red-200 dark:border-red-800\">\n                  <Label htmlFor=\"damage-notes\" className=\"text-base font-semibold\">{t('describeDamage')}</Label>\n                  <Textarea\n                    id=\"damage-notes\"\n                    value={checkoutNotes}\n                    onChange={(e) => setCheckoutNotes(e.target.value)}\n                    placeholder={t('describeDamageDetails')}\n                    rows={3}\n                    className=\"resize-none\"\n                  />\n                </div>\n              )}\n\n              <div className=\"flex gap-3 justify-end pt-4 border-t\">\n                <Button variant=\"outline\" onClick={() => setShowCheckoutDialog(false)}>\n                  {t('cancel')}\n                </Button>\n                <Button \n                  onClick={handleConfirmCheckout}\n                  className=\"bg-gradient-to-r from-[#667eea] to-[#764ba2]\"\n                >\n                  Confirm Receipt\n                </Button>\n              </div>\n            </div>\n          )}\n        </DialogContent>\n      </Dialog>\n\n      <Dialog open={showReturnDialog} onOpenChange={setShowReturnDialog}>\n        <DialogContent className=\"max-w-2xl\">\n          <DialogHeader>\n            <DialogTitle>Confirm Equipment Return</DialogTitle>\n          </DialogHeader>\n          {returnReservation && (\n            <div className=\"space-y-6\">\n              <div className=\"bg-blue-50 dark:bg-blue-950 p-4 rounded-lg space-y-2 border border-blue-200 dark:border-blue-800\">\n                <div><strong>Equipment:</strong> {getItemName(returnReservation.itemId)}</div>\n                <div><strong>Pickup Date & Time:</strong> {format(new Date(returnReservation.startDate), \"PPP\")} {returnReservation.startTime || \"09:00\"}</div>\n                <div><strong>Return Date & Time:</strong> {format(new Date(returnReservation.returnDate), \"PPP\")} {returnReservation.returnTime || \"17:00\"}</div>\n                <div><strong>Received Condition:</strong> {returnReservation.itemConditionOnReceive}</div>\n              </div>\n\n              <div className=\"space-y-3\">\n                <Label className=\"text-base font-semibold\">Equipment Condition on Return *</Label>\n                <div className=\"space-y-3\">\n                  <div className=\"flex items-center gap-3 p-3 border rounded-lg cursor-pointer hover:bg-muted/50\" onClick={() => setReturnCondition('good')}>\n                    <input \n                      type=\"radio\" \n                      name=\"return-condition\" \n                      value=\"good\"\n                      checked={returnCondition === 'good'}\n                      onChange={() => setReturnCondition('good')}\n                      className=\"w-4 h-4\"\n                    />\n                    <Label className=\"cursor-pointer font-medium flex items-center gap-2 mb-0\">\n                      <CheckCircle className=\"w-5 h-5 text-green-600\" />\n                      Good\n                    </Label>\n                  </div>\n\n                  <div className=\"flex items-center gap-3 p-3 border rounded-lg cursor-pointer hover:bg-muted/50\" onClick={() => setReturnCondition('damage')}>\n                    <input \n                      type=\"radio\" \n                      name=\"return-condition\" \n                      value=\"damage\"\n                      checked={returnCondition === 'damage'}\n                      onChange={() => setReturnCondition('damage')}\n                      className=\"w-4 h-4\"\n                    />\n                    <Label className=\"cursor-pointer font-medium flex items-center gap-2 mb-0\">\n                      <AlertCircle className=\"w-5 h-5 text-red-600\" />\n                      Damage or Missing\n                    </Label>\n                  </div>\n                </div>\n              </div>\n\n              {returnCondition === 'damage' && (\n                <div className=\"space-y-2 p-4 bg-red-50 dark:bg-red-950 rounded-lg border border-red-200 dark:border-red-800\">\n                  <Label htmlFor=\"return-damage-notes\" className=\"text-base font-semibold\">Please describe the damage or missing items *</Label>\n                  <Textarea\n                    id=\"return-damage-notes\"\n                    value={returnNotes}\n                    onChange={(e) => setReturnNotes(e.target.value)}\n                    placeholder={t('describeDamageDetails')}\n                    rows={3}\n                    className=\"resize-none\"\n                  />\n                </div>\n              )}\n\n              <div className=\"flex gap-3 justify-end pt-4 border-t\">\n                <Button variant=\"outline\" onClick={() => setShowReturnDialog(false)}>\n                  Cancel\n                </Button>\n                <Button \n                  onClick={handleConfirmReturn}\n                  className=\"bg-gradient-to-r from-[#667eea] to-[#764ba2]\"\n                >\n                  Confirm Return\n                </Button>\n              </div>\n            </div>\n          )}\n        </DialogContent>\n      </Dialog>\n    </div>\n  );\n}\n","path":null,"size_bytes":42509,"size_tokens":null},"attached_assets/skeleton_1763671095567.tsx":{"content":"import { cn } from \"@/lib/utils\"\n\nfunction Skeleton({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) {\n  return (\n    <div\n      className={cn(\"animate-pulse rounded-md bg-muted\", className)}\n      {...props}\n    />\n  )\n}\n\nexport { Skeleton }\n","path":null,"size_bytes":261,"size_tokens":null},"attached_assets/UserManagement_1763670809221.tsx":{"content":"import { useState } from \"react\";\nimport { useQuery, useMutation } from \"@tanstack/react-query\";\nimport { queryClient } from \"@/lib/queryClient\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { Table, TableBody, TableCell, TableHead, TableHeader, TableRow } from \"@/components/ui/table\";\nimport { Dialog, DialogContent, DialogHeader, DialogTitle, DialogFooter } from \"@/components/ui/dialog\";\nimport { Card, CardContent } from \"@/components/ui/card\";\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\nimport { UserPlus, Trash2, Users, ArrowLeft } from \"lucide-react\";\nimport { api } from \"@/lib/api\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport InventoryHeader from \"@/components/InventoryHeader\";\nimport type { Language } from \"@/lib/translations\";\nimport { useTranslation } from \"@/lib/translations\";\n\ninterface UserManagementProps {\n  userName: string;\n  userRole: string;\n  onLogout: () => void;\n  onNavigateToInventory?: () => void;\n  language: Language;\n  onLanguageChange: (language: Language) => void;\n}\n\nexport default function UserManagement({ userName, userRole, onLogout, onNavigateToInventory, language, onLanguageChange }: UserManagementProps) {\n  const { toast } = useToast();\n  const t = useTranslation(language);\n  const [showAddUser, setShowAddUser] = useState(false);\n  const [formData, setFormData] = useState({\n    username: '',\n    password: '',\n    email: '',\n    name: '',\n    role: 'user' as 'admin' | 'user',\n    department: ''\n  });\n\n  const { data: users = [] } = useQuery({\n    queryKey: ['/api/users'],\n    queryFn: () => api.users.getAll()\n  });\n\n  const createUserMutation = useMutation({\n    mutationFn: (userData: typeof formData) => api.users.create(userData),\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['/api/users'] });\n      setShowAddUser(false);\n      setFormData({\n        username: '',\n        password: '',\n        email: '',\n        name: '',\n        role: 'user',\n        department: ''\n      });\n      toast({ title: \"User created successfully\" });\n    },\n    onError: (error: any) => {\n      toast({ \n        title: \"Failed to create user\", \n        description: error.message || \"Please try again\",\n        variant: \"destructive\" \n      });\n    }\n  });\n\n  const deleteUserMutation = useMutation({\n    mutationFn: (id: string) => api.users.delete(id),\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['/api/users'] });\n      toast({ title: \"User deleted successfully\" });\n    },\n    onError: (error: any) => {\n      toast({ \n        title: \"Failed to delete user\", \n        description: error.message || \"Please try again\",\n        variant: \"destructive\" \n      });\n    }\n  });\n\n  const handleSubmit = (e: React.FormEvent) => {\n    e.preventDefault();\n    createUserMutation.mutate(formData);\n  };\n\n  const handleDeleteUser = (id: string, username: string) => {\n    if (confirm(`Are you sure you want to delete user \"${username}\"?`)) {\n      deleteUserMutation.mutate(id);\n    }\n  };\n\n  return (\n    <div className=\"min-h-screen bg-background\">\n      <InventoryHeader\n        userName={userName}\n        userRole={userRole}\n        currentView=\"categories\"\n        onViewChange={() => {}}\n        onLogout={onLogout}\n        onNavigateToReservations={() => {}}\n        onNavigateToActivityLogs={() => {}}\n        onNavigateToQRCodes={() => {}}\n        onNavigateToMaintenance={() => {}}\n        hideViewToggle={true}\n        language={language}\n        onLanguageChange={onLanguageChange}\n      />\n\n      <main className=\"max-w-[1400px] mx-auto px-5 py-8\">\n        <div className=\"mb-6\">\n          <Button\n            variant=\"ghost\"\n            onClick={onNavigateToInventory}\n            className=\"gap-2\"\n          >\n            <ArrowLeft className=\"w-4 h-4\" />\n            {t('backToInventory')}\n          </Button>\n        </div>\n\n        <div className=\"text-center mb-10 p-10 bg-gradient-to-r from-[#667eea] to-[#764ba2] rounded-2xl text-white\">\n          <h1 className=\"text-4xl font-extrabold mb-4\">{t('userManagement')}</h1>\n          <p className=\"text-lg opacity-90 max-w-2xl mx-auto\">\n            {t('createManageUsers')}\n          </p>\n        </div>\n\n        <div className=\"mb-6 flex justify-between items-center\">\n          <div className=\"flex items-center gap-3\">\n            <Users className=\"w-6 h-6 text-[#667eea]\" />\n            <h2 className=\"text-2xl font-bold\">{users.length} {t('totalUsers')}</h2>\n          </div>\n          <Button\n            onClick={() => setShowAddUser(true)}\n            className=\"bg-gradient-to-r from-[#667eea] to-[#764ba2]\"\n          >\n            <UserPlus className=\"w-4 h-4 mr-2\" />\n            {t('addNewUser')}\n          </Button>\n        </div>\n\n        <Card>\n          <CardContent className=\"p-0\">\n            <Table>\n              <TableHeader>\n                <TableRow>\n                  <TableHead>{t('username')}</TableHead>\n                  <TableHead>{t('name')}</TableHead>\n                  <TableHead>{t('email')}</TableHead>\n                  <TableHead>{t('role')}</TableHead>\n                  <TableHead className=\"text-right\">{t('actions')}</TableHead>\n                </TableRow>\n              </TableHeader>\n              <TableBody>\n                {users.map((user: any) => (\n                  <TableRow key={user.id}>\n                    <TableCell className=\"font-medium\">{user.username}</TableCell>\n                    <TableCell>{user.name}</TableCell>\n                    <TableCell>{user.email}</TableCell>\n                    <TableCell>\n                      <span className={`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${\n                        user.role === 'admin' \n                          ? 'bg-red-100 text-red-800' \n                          : 'bg-green-100 text-green-800'\n                      }`}>\n                        {user.role === 'admin' ? t('admin').toUpperCase() : t('user').toUpperCase()}\n                      </span>\n                    </TableCell>\n                    <TableCell className=\"text-right\">\n                      <Button\n                        size=\"sm\"\n                        variant=\"destructive\"\n                        onClick={() => handleDeleteUser(user.id, user.username)}\n                      >\n                        <Trash2 className=\"w-3 h-3\" />\n                      </Button>\n                    </TableCell>\n                  </TableRow>\n                ))}\n              </TableBody>\n            </Table>\n          </CardContent>\n        </Card>\n      </main>\n\n      <Dialog open={showAddUser} onOpenChange={setShowAddUser}>\n        <DialogContent className=\"max-w-md\">\n          <DialogHeader>\n            <DialogTitle>{t('addNewUser')}</DialogTitle>\n          </DialogHeader>\n          <form onSubmit={handleSubmit} className=\"space-y-4\">\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"username\">{t('username')} *</Label>\n              <Input\n                id=\"username\"\n                value={formData.username}\n                onChange={(e) => setFormData({ ...formData, username: e.target.value })}\n                placeholder=\"e.g., jsmith\"\n                required\n              />\n            </div>\n\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"password\">{t('password')} *</Label>\n              <Input\n                id=\"password\"\n                type=\"password\"\n                value={formData.password}\n                onChange={(e) => setFormData({ ...formData, password: e.target.value })}\n                placeholder={t('password')}\n                required\n              />\n            </div>\n\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"name\">{t('fullName')} *</Label>\n              <Input\n                id=\"name\"\n                value={formData.name}\n                onChange={(e) => setFormData({ ...formData, name: e.target.value })}\n                placeholder=\"e.g., John Smith\"\n                required\n              />\n            </div>\n\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"email\">{t('email')} *</Label>\n              <Input\n                id=\"email\"\n                type=\"email\"\n                value={formData.email}\n                onChange={(e) => setFormData({ ...formData, email: e.target.value })}\n                placeholder=\"e.g., jsmith@company.com\"\n                required\n              />\n            </div>\n\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"department\">{t('department')}</Label>\n              <Input\n                id=\"department\"\n                value={formData.department}\n                onChange={(e) => setFormData({ ...formData, department: e.target.value })}\n                placeholder=\"e.g., Production\"\n              />\n            </div>\n\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"role\">{t('role')} *</Label>\n              <Select\n                value={formData.role}\n                onValueChange={(value: 'admin' | 'user') => setFormData({ ...formData, role: value })}\n              >\n                <SelectTrigger>\n                  <SelectValue />\n                </SelectTrigger>\n                <SelectContent>\n                  <SelectItem value=\"user\">{t('user')}</SelectItem>\n                  <SelectItem value=\"admin\">{t('admin')}</SelectItem>\n                </SelectContent>\n              </Select>\n            </div>\n\n            <DialogFooter>\n              <Button type=\"button\" variant=\"outline\" onClick={() => setShowAddUser(false)}>\n                {t('cancel')}\n              </Button>\n              <Button \n                type=\"submit\" \n                className=\"bg-gradient-to-r from-[#667eea] to-[#764ba2]\"\n                disabled={createUserMutation.isPending}\n              >\n                {createUserMutation.isPending ? t('creating') : t('createUser')}\n              </Button>\n            </DialogFooter>\n          </form>\n        </DialogContent>\n      </Dialog>\n    </div>\n  );\n}","path":null,"size_bytes":10185,"size_tokens":null},"attached_assets/textarea_1763671095571.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Textarea = React.forwardRef<\n  HTMLTextAreaElement,\n  React.ComponentProps<\"textarea\">\n>(({ className, ...props }, ref) => {\n  return (\n    <textarea\n      className={cn(\n        \"flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm\",\n        className\n      )}\n      ref={ref}\n      {...props}\n    />\n  )\n})\nTextarea.displayName = \"Textarea\"\n\nexport { Textarea }\n","path":null,"size_bytes":689,"size_tokens":null},"attached_assets/use-mobile_1763670886704.tsx":{"content":"import * as React from \"react\"\n\nconst MOBILE_BREAKPOINT = 768\n\nexport function useIsMobile() {\n  const [isMobile, setIsMobile] = React.useState<boolean | undefined>(undefined)\n\n  React.useEffect(() => {\n    const mql = window.matchMedia(`(max-width: ${MOBILE_BREAKPOINT - 1}px)`)\n    const onChange = () => {\n      setIsMobile(window.innerWidth < MOBILE_BREAKPOINT)\n    }\n    mql.addEventListener(\"change\", onChange)\n    setIsMobile(window.innerWidth < MOBILE_BREAKPOINT)\n    return () => mql.removeEventListener(\"change\", onChange)\n  }, [])\n\n  return !!isMobile\n}\n","path":null,"size_bytes":565,"size_tokens":null},"client/src/components/ui/popover.tsx":{"content":"import * as React from \"react\"\nimport * as PopoverPrimitive from \"@radix-ui/react-popover\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Popover = PopoverPrimitive.Root\n\nconst PopoverTrigger = PopoverPrimitive.Trigger\n\nconst PopoverContent = React.forwardRef<\n  React.ElementRef<typeof PopoverPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof PopoverPrimitive.Content>\n>(({ className, align = \"center\", sideOffset = 4, ...props }, ref) => (\n  <PopoverPrimitive.Portal>\n    <PopoverPrimitive.Content\n      ref={ref}\n      align={align}\n      sideOffset={sideOffset}\n      className={cn(\n        \"z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-popover-content-transform-origin]\",\n        className\n      )}\n      {...props}\n    />\n  </PopoverPrimitive.Portal>\n))\nPopoverContent.displayName = PopoverPrimitive.Content.displayName\n\nexport { Popover, PopoverTrigger, PopoverContent }\n","path":null,"size_bytes":1280,"size_tokens":null},"client/src/components/ui/accordion.tsx":{"content":"import * as React from \"react\"\nimport * as AccordionPrimitive from \"@radix-ui/react-accordion\"\nimport { ChevronDown } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Accordion = AccordionPrimitive.Root\n\nconst AccordionItem = React.forwardRef<\n  React.ElementRef<typeof AccordionPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof AccordionPrimitive.Item>\n>(({ className, ...props }, ref) => (\n  <AccordionPrimitive.Item\n    ref={ref}\n    className={cn(\"border-b\", className)}\n    {...props}\n  />\n))\nAccordionItem.displayName = \"AccordionItem\"\n\nconst AccordionTrigger = React.forwardRef<\n  React.ElementRef<typeof AccordionPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof AccordionPrimitive.Trigger>\n>(({ className, children, ...props }, ref) => (\n  <AccordionPrimitive.Header className=\"flex\">\n    <AccordionPrimitive.Trigger\n      ref={ref}\n      className={cn(\n        \"flex flex-1 items-center justify-between py-4 font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180\",\n        className\n      )}\n      {...props}\n    >\n      {children}\n      <ChevronDown className=\"h-4 w-4 shrink-0 transition-transform duration-200\" />\n    </AccordionPrimitive.Trigger>\n  </AccordionPrimitive.Header>\n))\nAccordionTrigger.displayName = AccordionPrimitive.Trigger.displayName\n\nconst AccordionContent = React.forwardRef<\n  React.ElementRef<typeof AccordionPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof AccordionPrimitive.Content>\n>(({ className, children, ...props }, ref) => (\n  <AccordionPrimitive.Content\n    ref={ref}\n    className=\"overflow-hidden text-sm transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down\"\n    {...props}\n  >\n    <div className={cn(\"pb-4 pt-0\", className)}>{children}</div>\n  </AccordionPrimitive.Content>\n))\n\nAccordionContent.displayName = AccordionPrimitive.Content.displayName\n\nexport { Accordion, AccordionItem, AccordionTrigger, AccordionContent }\n","path":null,"size_bytes":1977,"size_tokens":null},"attached_assets/checkbox_1763670951631.tsx":{"content":"import * as React from \"react\"\nimport * as CheckboxPrimitive from \"@radix-ui/react-checkbox\"\nimport { Check } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Checkbox = React.forwardRef<\n  React.ElementRef<typeof CheckboxPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof CheckboxPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <CheckboxPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground\",\n      className\n    )}\n    {...props}\n  >\n    <CheckboxPrimitive.Indicator\n      className={cn(\"flex items-center justify-center text-current\")}\n    >\n      <Check className=\"h-4 w-4\" />\n    </CheckboxPrimitive.Indicator>\n  </CheckboxPrimitive.Root>\n))\nCheckbox.displayName = CheckboxPrimitive.Root.displayName\n\nexport { Checkbox }\n","path":null,"size_bytes":1056,"size_tokens":null},"attached_assets/accordion_1763670951623.tsx":{"content":"import * as React from \"react\"\nimport * as AccordionPrimitive from \"@radix-ui/react-accordion\"\nimport { ChevronDown } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Accordion = AccordionPrimitive.Root\n\nconst AccordionItem = React.forwardRef<\n  React.ElementRef<typeof AccordionPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof AccordionPrimitive.Item>\n>(({ className, ...props }, ref) => (\n  <AccordionPrimitive.Item\n    ref={ref}\n    className={cn(\"border-b\", className)}\n    {...props}\n  />\n))\nAccordionItem.displayName = \"AccordionItem\"\n\nconst AccordionTrigger = React.forwardRef<\n  React.ElementRef<typeof AccordionPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof AccordionPrimitive.Trigger>\n>(({ className, children, ...props }, ref) => (\n  <AccordionPrimitive.Header className=\"flex\">\n    <AccordionPrimitive.Trigger\n      ref={ref}\n      className={cn(\n        \"flex flex-1 items-center justify-between py-4 font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180\",\n        className\n      )}\n      {...props}\n    >\n      {children}\n      <ChevronDown className=\"h-4 w-4 shrink-0 transition-transform duration-200\" />\n    </AccordionPrimitive.Trigger>\n  </AccordionPrimitive.Header>\n))\nAccordionTrigger.displayName = AccordionPrimitive.Trigger.displayName\n\nconst AccordionContent = React.forwardRef<\n  React.ElementRef<typeof AccordionPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof AccordionPrimitive.Content>\n>(({ className, children, ...props }, ref) => (\n  <AccordionPrimitive.Content\n    ref={ref}\n    className=\"overflow-hidden text-sm transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down\"\n    {...props}\n  >\n    <div className={cn(\"pb-4 pt-0\", className)}>{children}</div>\n  </AccordionPrimitive.Content>\n))\n\nAccordionContent.displayName = AccordionPrimitive.Content.displayName\n\nexport { Accordion, AccordionItem, AccordionTrigger, AccordionContent }\n","path":null,"size_bytes":1977,"size_tokens":null},"drizzle.config.ts":{"content":"import { defineConfig } from \"drizzle-kit\";\n\nif (!process.env.DATABASE_URL) {\n  throw new Error(\"DATABASE_URL, ensure the database is provisioned\");\n}\n\nexport default defineConfig({\n  out: \"./migrations\",\n  schema: \"./shared/schema.ts\",\n  dialect: \"postgresql\",\n  dbCredentials: {\n    url: process.env.DATABASE_URL,\n  },\n});\n","path":null,"size_bytes":325,"size_tokens":null},"attached_assets/use-toast_1763670886705.ts":{"content":"import * as React from \"react\"\n\nimport type {\n  ToastActionElement,\n  ToastProps,\n} from \"@/components/ui/toast\"\n\nconst TOAST_LIMIT = 1\nconst TOAST_REMOVE_DELAY = 1000000\n\ntype ToasterToast = ToastProps & {\n  id: string\n  title?: React.ReactNode\n  description?: React.ReactNode\n  action?: ToastActionElement\n}\n\nconst actionTypes = {\n  ADD_TOAST: \"ADD_TOAST\",\n  UPDATE_TOAST: \"UPDATE_TOAST\",\n  DISMISS_TOAST: \"DISMISS_TOAST\",\n  REMOVE_TOAST: \"REMOVE_TOAST\",\n} as const\n\nlet count = 0\n\nfunction genId() {\n  count = (count + 1) % Number.MAX_SAFE_INTEGER\n  return count.toString()\n}\n\ntype ActionType = typeof actionTypes\n\ntype Action =\n  | {\n      type: ActionType[\"ADD_TOAST\"]\n      toast: ToasterToast\n    }\n  | {\n      type: ActionType[\"UPDATE_TOAST\"]\n      toast: Partial<ToasterToast>\n    }\n  | {\n      type: ActionType[\"DISMISS_TOAST\"]\n      toastId?: ToasterToast[\"id\"]\n    }\n  | {\n      type: ActionType[\"REMOVE_TOAST\"]\n      toastId?: ToasterToast[\"id\"]\n    }\n\ninterface State {\n  toasts: ToasterToast[]\n}\n\nconst toastTimeouts = new Map<string, ReturnType<typeof setTimeout>>()\n\nconst addToRemoveQueue = (toastId: string) => {\n  if (toastTimeouts.has(toastId)) {\n    return\n  }\n\n  const timeout = setTimeout(() => {\n    toastTimeouts.delete(toastId)\n    dispatch({\n      type: \"REMOVE_TOAST\",\n      toastId: toastId,\n    })\n  }, TOAST_REMOVE_DELAY)\n\n  toastTimeouts.set(toastId, timeout)\n}\n\nexport const reducer = (state: State, action: Action): State => {\n  switch (action.type) {\n    case \"ADD_TOAST\":\n      return {\n        ...state,\n        toasts: [action.toast, ...state.toasts].slice(0, TOAST_LIMIT),\n      }\n\n    case \"UPDATE_TOAST\":\n      return {\n        ...state,\n        toasts: state.toasts.map((t) =>\n          t.id === action.toast.id ? { ...t, ...action.toast } : t\n        ),\n      }\n\n    case \"DISMISS_TOAST\": {\n      const { toastId } = action\n\n      // ! Side effects ! - This could be extracted into a dismissToast() action,\n      // but I'll keep it here for simplicity\n      if (toastId) {\n        addToRemoveQueue(toastId)\n      } else {\n        state.toasts.forEach((toast) => {\n          addToRemoveQueue(toast.id)\n        })\n      }\n\n      return {\n        ...state,\n        toasts: state.toasts.map((t) =>\n          t.id === toastId || toastId === undefined\n            ? {\n                ...t,\n                open: false,\n              }\n            : t\n        ),\n      }\n    }\n    case \"REMOVE_TOAST\":\n      if (action.toastId === undefined) {\n        return {\n          ...state,\n          toasts: [],\n        }\n      }\n      return {\n        ...state,\n        toasts: state.toasts.filter((t) => t.id !== action.toastId),\n      }\n  }\n}\n\nconst listeners: Array<(state: State) => void> = []\n\nlet memoryState: State = { toasts: [] }\n\nfunction dispatch(action: Action) {\n  memoryState = reducer(memoryState, action)\n  listeners.forEach((listener) => {\n    listener(memoryState)\n  })\n}\n\ntype Toast = Omit<ToasterToast, \"id\">\n\nfunction toast({ ...props }: Toast) {\n  const id = genId()\n\n  const update = (props: ToasterToast) =>\n    dispatch({\n      type: \"UPDATE_TOAST\",\n      toast: { ...props, id },\n    })\n  const dismiss = () => dispatch({ type: \"DISMISS_TOAST\", toastId: id })\n\n  dispatch({\n    type: \"ADD_TOAST\",\n    toast: {\n      ...props,\n      id,\n      open: true,\n      onOpenChange: (open) => {\n        if (!open) dismiss()\n      },\n    },\n  })\n\n  return {\n    id: id,\n    dismiss,\n    update,\n  }\n}\n\nfunction useToast() {\n  const [state, setState] = React.useState<State>(memoryState)\n\n  React.useEffect(() => {\n    listeners.push(setState)\n    return () => {\n      const index = listeners.indexOf(setState)\n      if (index > -1) {\n        listeners.splice(index, 1)\n      }\n    }\n  }, [state])\n\n  return {\n    ...state,\n    toast,\n    dismiss: (toastId?: string) => dispatch({ type: \"DISMISS_TOAST\", toastId }),\n  }\n}\n\nexport { useToast, toast }\n","path":null,"size_bytes":3895,"size_tokens":null},"attached_assets/routes_1763670748026.ts":{"content":"import type { Express } from \"express\";\nimport { createServer, type Server } from \"http\";\nimport { z } from \"zod\";\nimport QRCode from \"qrcode\";\nimport { storage } from \"./storage\";\nimport { loginUser, requireAuth, requireAdmin, hashPassword } from \"./auth\";\nimport { CATEGORIES, insertItemSchema, insertReservationSchema, users, itemEditHistory, reservationStatusHistory } from \"@shared/schema\";\nimport { eq, desc } from \"drizzle-orm\";\nimport { db } from \"./db\";\nimport { sendReservationRequestEmail, sendReservationApprovedEmail, sendReservationRejectedEmail } from \"./email\";\nimport { format } from \"date-fns\";\n\nexport async function registerRoutes(app: Express): Promise<Server> {\n  // Authentication routes\n  app.post(\"/api/auth/login\", async (req, res) => {\n    try {\n      const { username, password } = req.body;\n\n      if (!username || !password) {\n        return res.status(400).json({ error: 'Username and password required' });\n      }\n\n      const result = await loginUser(username, password);\n\n      if (!result.success) {\n        return res.status(401).json({ error: result.message });\n      }\n\n      // Regenerate session to prevent session fixation attacks\n      req.session.regenerate((err) => {\n        if (err) {\n          return res.status(500).json({ error: 'Session error' });\n        }\n\n        req.session.userId = result.user!.id;\n        req.session.username = result.user!.username;\n        req.session.role = result.user!.role;\n        req.session.name = result.user!.name;\n\n        res.json({\n          user: result.user\n        });\n      });\n    } catch (error) {\n      console.error('Login error:', error);\n      res.status(500).json({ error: 'Internal server error' });\n    }\n  });\n\n  app.post(\"/api/auth/logout\", (req, res) => {\n    req.session.destroy((err) => {\n      if (err) {\n        return res.status(500).json({ error: 'Failed to logout' });\n      }\n      res.json({ success: true });\n    });\n  });\n\n  app.get(\"/api/auth/session\", (req, res) => {\n    if (!req.session?.userId) {\n      return res.status(401).json({ error: 'Not authenticated' });\n    }\n\n    res.json({\n      user: {\n        id: req.session.userId,\n        username: req.session.username,\n        role: req.session.role,\n        name: req.session.name\n      }\n    });\n  });\n\n  // Item routes\n  app.get(\"/api/items\", requireAuth, async (req, res) => {\n    try {\n      const category = req.query.category as string | undefined;\n      const allItems = await storage.getAllItems();\n\n      if (category) {\n        // Find the category configuration to get its subTypes\n        const dbCategories = await storage.getAllCategories();\n\n        // Check if it's a default category\n        const defaultCategory = Object.values(CATEGORIES).find(cat => cat.name === category);\n\n        // Check if it's a custom category\n        const customCategory = dbCategories.find(cat => cat.name === category);\n\n        let subTypes: string[] = [];\n\n        if (defaultCategory) {\n          subTypes = [...defaultCategory.subTypes];\n        } else if (customCategory) {\n          subTypes = JSON.parse(customCategory.subTypes);\n        }\n\n        // Log for debugging\n        console.log(`Filtering category: ${category}`);\n        console.log(`SubTypes for category:`, subTypes);\n        console.log(`Total items:`, allItems.length);\n\n        // Filter items whose productType matches any of the category's subTypes\n        const filteredItems = allItems.filter(item => {\n          const matches = subTypes.includes(item.productType);\n          if (matches) {\n            console.log(`âœ“ Item \"${item.productName}\" (${item.productType}) matches category`);\n          }\n          return matches;\n        });\n\n        console.log(`Filtered items count: ${filteredItems.length}`);\n        res.json(filteredItems);\n      } else {\n        res.json(allItems);\n      }\n    } catch (error) {\n      console.error('Error fetching items:', error);\n      res.status(500).json({ error: \"Failed to fetch items\" });\n    }\n  });\n\n  app.get(\"/api/items/:id\", requireAuth, async (req, res) => {\n    try {\n      const item = await storage.getItemById(req.params.id);\n      if (!item) {\n        return res.status(404).json({ error: 'Item not found' });\n      }\n      res.json(item);\n    } catch (error) {\n      console.error('Get item error:', error);\n      res.status(500).json({ error: 'Failed to fetch item' });\n    }\n  });\n\n  app.post(\"/api/items\", requireAdmin, async (req, res) => {\n    try {\n      const validatedData = insertItemSchema.parse(req.body);\n      const item = await storage.createItem(validatedData);\n\n      // Log item creation\n      try {\n        await storage.createActivityLog({\n          itemId: item.id,\n          userId: req.session.userId!,\n          action: 'Item Created',\n          oldStatus: null,\n          newStatus: item.status,\n          notes: `Item created: ${item.productName} - ${item.productType}. Created at ${new Date().toLocaleString()}`\n        });\n      } catch (logError) {\n        console.error('Failed to log item creation:', logError);\n      }\n\n      res.status(201).json(item);\n    } catch (error) {\n      if (error instanceof z.ZodError) {\n        return res.status(400).json({ error: 'Invalid item data', details: error.errors });\n      }\n      console.error('Create item error:', error);\n      res.status(500).json({ error: 'Failed to create item' });\n    }\n  });\n\n  app.patch(\"/api/items/:id\", requireAdmin, async (req, res) => {\n    try {\n      const validatedData = insertItemSchema.partial().parse(req.body);\n\n      // Get the current item state before update\n      const currentItem = await storage.getItemById(req.params.id);\n      if (!currentItem) {\n        return res.status(404).json({ error: 'Item not found' });\n      }\n\n      const item = await storage.updateItem(req.params.id, validatedData);\n\n      // Track all field changes\n      const fieldsToTrack = ['productName', 'productType', 'status', 'location', 'notes', 'barcode'];\n      for (const field of fieldsToTrack) {\n        if (validatedData[field] !== undefined && validatedData[field] !== currentItem[field]) {\n          try {\n            await storage.createItemEditHistory({\n              itemId: item.id,\n              userId: req.session.userId!,\n              fieldName: field,\n              oldValue: String(currentItem[field] || ''),\n              newValue: String(validatedData[field] || '')\n            });\n          } catch (historyError) {\n            console.error('Failed to log field change:', historyError);\n          }\n        }\n      }\n\n      // Log activity if status changed\n      if (validatedData.status && validatedData.status !== currentItem.status) {\n        let action = 'Status Updated';\n\n        if (validatedData.status === 'In Use' && currentItem.status === 'Available') {\n          action = 'Checked Out (Manual)';\n        } else if (validatedData.status === 'Available' && currentItem.status === 'In Use') {\n          action = 'Checked In (Manual)';\n        } else if (validatedData.status === 'Reserved') {\n          action = 'Marked as Reserved';\n        } else if (validatedData.status === 'Maintenance') {\n          action = 'Sent to Maintenance';\n        } else if (validatedData.status === 'Disabled') {\n          action = 'Disabled';\n        }\n\n        try {\n          await storage.createActivityLog({\n            itemId: item.id,\n            userId: req.session.userId!,\n            action,\n            oldStatus: currentItem.status,\n            newStatus: validatedData.status,\n            notes: `${item.productName}: ${currentItem.status} â†’ ${validatedData.status}. Updated at ${new Date().toLocaleString()}`\n          });\n        } catch (logError) {\n          console.error('Failed to log status change:', logError);\n        }\n      }\n\n      res.json(item);\n    } catch (error) {\n      if (error instanceof z.ZodError) {\n        return res.status(400).json({ error: 'Invalid item data', details: error.errors });\n      }\n      console.error('Update item error:', error);\n      res.status(500).json({ error: 'Failed to update item' });\n    }\n  });\n\n  app.delete(\"/api/items/:id\", requireAdmin, async (req, res) => {\n    try {\n      // Get item details before deletion\n      const item = await storage.getItemById(req.params.id);\n      if (!item) {\n        return res.status(404).json({ error: 'Item not found' });\n      }\n\n      // Soft delete the item\n      const deleted = await storage.softDeleteItem(req.params.id, req.session.userId!);\n\n      // Log deletion\n      try {\n        await storage.createActivityLog({\n          itemId: item.id,\n          userId: req.session.userId!,\n          action: 'Item Deleted (Soft)',\n          oldStatus: item.status,\n          newStatus: null,\n          notes: `${item.productName} (${item.barcode}) moved to trash. Can be restored. Deleted at ${new Date().toLocaleString()}`\n        });\n      } catch (logError) {\n        console.error('Failed to log item deletion:', logError);\n      }\n\n      res.json({ success: true, deleted });\n    } catch (error) {\n      console.error('Delete item error:', error);\n      res.status(500).json({ error: 'Failed to delete item' });\n    }\n  });\n\n  // QR Scan route (admin only)\n  app.post(\"/api/scan\", requireAdmin, async (req, res) => {\n    try {\n      const schema = z.object({\n        barcode: z.string().min(1, 'Barcode is required')\n      });\n      const { barcode } = schema.parse(req.body);\n\n      const item = await storage.getItemByBarcode(barcode);\n\n      if (!item) {\n        return res.json({\n          success: false,\n          error: `Item not found with barcode: ${barcode}`\n        });\n      }\n\n      const oldStatus = item.status;\n      let newStatus = oldStatus;\n      let action = '';\n\n      if (oldStatus === 'Available') {\n        newStatus = 'In Use';\n        action = 'Checked Out';\n      } else if (oldStatus === 'In Use') {\n        newStatus = 'Available';\n        action = 'Checked In';\n      } else {\n        return res.json({\n          success: false,\n          error: `Item is currently ${oldStatus} and cannot be scanned`\n        });\n      }\n\n      await storage.updateItem(item.id, { status: newStatus });\n\n      // Log the activity\n      try {\n        await storage.createActivityLog({\n          itemId: item.id,\n          userId: req.session.userId!,\n          action: `${action} (QR Scan)`,\n          oldStatus,\n          newStatus,\n          notes: `${item.productName} scanned via admin QR scanner. ${oldStatus} â†’ ${newStatus}. Scanned at ${new Date().toLocaleString()}`\n        });\n      } catch (logError) {\n        console.error('Failed to log QR scan:', logError);\n      }\n\n      res.json({\n        success: true,\n        productName: item.productName,\n        barcode: item.barcode,\n        oldStatus,\n        newStatus,\n        action\n      });\n    } catch (error) {\n      if (error instanceof z.ZodError) {\n        return res.status(400).json({ error: 'Invalid scan data', details: error.errors });\n      }\n      console.error('Scan error:', error);\n      res.status(500).json({ error: 'Failed to process scan' });\n    }\n  });\n\n  // Public QR Scan route (no auth required)\n  app.get(\"/public/scan/:barcode\", async (req, res) => {\n    try {\n      const { barcode } = req.params;\n      const item = await storage.getItemByBarcode(barcode);\n\n      if (!item) {\n        return res.send(`\n          <!DOCTYPE html>\n          <html>\n            <head>\n              <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n              <title>Item Not Found</title>\n              <style>\n                body { font-family: Arial, sans-serif; text-align: center; padding: 50px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; }\n                .container { background: white; color: #333; padding: 40px; border-radius: 20px; max-width: 500px; margin: 0 auto; box-shadow: 0 10px 40px rgba(0,0,0,0.2); }\n                h1 { color: #ef4444; margin-bottom: 20px; }\n                p { font-size: 18px; }\n              </style>\n            </head>\n            <body>\n              <div class=\"container\">\n                <h1>âŒ Item Not Found</h1>\n                <p>No item found with barcode: <strong>${barcode}</strong></p>\n              </div>\n            </body>\n          </html>\n        `);\n      }\n\n      const oldStatus = item.status;\n      let newStatus = oldStatus;\n      let action = '';\n      let statusColor = '#3b82f6';\n\n      if (oldStatus === 'Available') {\n        newStatus = 'In Use';\n        action = 'Checked Out';\n        statusColor = '#f59e0b';\n      } else if (oldStatus === 'In Use') {\n        newStatus = 'Available';\n        action = 'Checked In';\n        statusColor = '#10b981';\n      } else {\n        return res.send(`\n          <!DOCTYPE html>\n          <html>\n            <head>\n              <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n              <title>Cannot Process</title>\n              <style>\n                body { font-family: Arial, sans-serif; text-align: center; padding: 50px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; }\n                .container { background: white; color: #333; padding: 40px; border-radius: 20px; max-width: 500px; margin: 0 auto; box-shadow: 0 10px 40px rgba(0,0,0,0.2); }\n                h1 { color: #f59e0b; margin-bottom: 20px; }\n                .status { background: #fef3c7; padding: 10px 20px; border-radius: 10px; display: inline-block; margin: 20px 0; }\n              </style>\n            </head>\n            <body>\n              <div class=\"container\">\n                <h1>âš ï¸ Cannot Process</h1>\n                <p><strong>${item.productName}</strong></p>\n                <div class=\"status\">Current Status: ${oldStatus}</div>\n                <p>This item cannot be checked out/in at this time.</p>\n              </div>\n            </body>\n          </html>\n        `);\n      }\n\n      await storage.updateItem(item.id, { status: newStatus });\n\n      // Get a system user for logging (first admin user)\n      const systemUser = await db.query.users.findFirst({\n        where: eq(users.role, 'admin')\n      });\n\n      if (systemUser) {\n        try {\n          await storage.createActivityLog({\n            itemId: item.id,\n            userId: systemUser.id,\n            action: `${action} (Public QR)`,\n            oldStatus,\n            newStatus,\n            notes: `${item.productName} scanned via public QR code. ${oldStatus} â†’ ${newStatus}. Scanned at ${new Date().toLocaleString()}`\n          });\n        } catch (logError) {\n          console.error('Failed to log public QR scan:', logError);\n        }\n      }\n\n      const timestamp = new Date().toLocaleString('en-US', {\n        dateStyle: 'medium',\n        timeStyle: 'short'\n      });\n\n      res.send(`\n        <!DOCTYPE html>\n        <html>\n          <head>\n            <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n            <title>${action === 'Checked Out' ? 'Item Checked Out' : 'Item Returned'} Successfully</title>\n            <style>\n              * { margin: 0; padding: 0; box-sizing: border-box; }\n              body { \n                font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;\n                min-height: 100vh;\n                display: flex;\n                align-items: center;\n                justify-content: center;\n                background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n                padding: 20px;\n              }\n              .container { \n                background: white;\n                padding: 40px;\n                border-radius: 24px;\n                max-width: 500px;\n                width: 100%;\n                box-shadow: 0 20px 60px rgba(0,0,0,0.3);\n                animation: slideUp 0.4s ease-out;\n              }\n              @keyframes slideUp {\n                from { transform: translateY(20px); opacity: 0; }\n                to { transform: translateY(0); opacity: 1; }\n              }\n              .icon-container {\n                width: 80px;\n                height: 80px;\n                margin: 0 auto 24px;\n                background: ${action === 'Checked Out' ? 'linear-gradient(135deg, #f59e0b 0%, #f97316 100%)' : 'linear-gradient(135deg, #10b981 0%, #059669 100%)'};\n                border-radius: 50%;\n                display: flex;\n                align-items: center;\n                justify-content: center;\n                font-size: 40px;\n                animation: bounceIn 0.6s cubic-bezier(0.68, -0.55, 0.265, 1.55);\n              }\n              @keyframes bounceIn {\n                0% { transform: scale(0); }\n                50% { transform: scale(1.1); }\n                100% { transform: scale(1); }\n              }\n              h1 { \n                color: #111827;\n                font-size: 28px;\n                font-weight: 700;\n                text-align: center;\n                margin-bottom: 8px;\n              }\n              .subtitle {\n                text-align: center;\n                color: #6b7280;\n                font-size: 16px;\n                margin-bottom: 32px;\n              }\n              .info-card {\n                background: #f9fafb;\n                border-radius: 16px;\n                padding: 24px;\n                margin-bottom: 24px;\n              }\n              .info-row {\n                display: flex;\n                justify-content: space-between;\n                align-items: center;\n                padding: 12px 0;\n                border-bottom: 1px solid #e5e7eb;\n              }\n              .info-row:last-child { border-bottom: none; }\n              .label {\n                font-weight: 600;\n                color: #6b7280;\n                font-size: 14px;\n              }\n              .value {\n                font-weight: 700;\n                color: #111827;\n                font-size: 14px;\n                text-align: right;\n                max-width: 60%;\n                word-break: break-word;\n              }\n              .status-badge {\n                background: ${statusColor};\n                color: white;\n                padding: 6px 16px;\n                border-radius: 20px;\n                font-size: 13px;\n                font-weight: 600;\n              }\n              .action-badge {\n                background: ${action === 'Checked Out' ? '#f59e0b' : '#10b981'};\n                color: white;\n                padding: 6px 16px;\n                border-radius: 20px;\n                font-size: 13px;\n                font-weight: 600;\n              }\n              .success-message {\n                background: ${action === 'Checked Out' ? '#fef3c7' : '#d1fae5'};\n                color: ${action === 'Checked Out' ? '#92400e' : '#065f46'};\n                padding: 16px;\n                border-radius: 12px;\n                text-align: center;\n                font-weight: 600;\n                font-size: 15px;\n                border: 2px solid ${action === 'Checked Out' ? '#fbbf24' : '#34d399'};\n              }\n              .timestamp {\n                text-align: center;\n                color: #9ca3af;\n                font-size: 13px;\n                margin-top: 16px;\n              }\n            </style>\n          </head>\n          <body>\n            <div class=\"container\">\n              <div class=\"icon-container\">\n                ${action === 'Checked Out' ? 'ðŸ“¦' : 'âœ…'}\n              </div>\n              <h1>${action === 'Checked Out' ? 'Item Checked Out' : 'Item Returned'} Successfully!</h1>\n              <p class=\"subtitle\">${item.productName}</p>\n\n              <div class=\"info-card\">\n                <div class=\"info-row\">\n                  <span class=\"label\">Barcode</span>\n                  <span class=\"value\">${item.barcode}</span>\n                </div>\n                <div class=\"info-row\">\n                  <span class=\"label\">Product Type</span>\n                  <span class=\"value\">${item.productType}</span>\n                </div>\n                <div class=\"info-row\">\n                  <span class=\"label\">Action</span>\n                  <span class=\"action-badge\">${action}</span>\n                </div>\n                <div class=\"info-row\">\n                  <span class=\"label\">New Status</span>\n                  <span class=\"status-badge\">${newStatus}</span>\n                </div>\n              </div>\n\n              <div class=\"success-message\">\n                ${action === 'Checked Out' ? 'ðŸ“¦ This item is now marked as \"In Use\" in the system' : 'âœ¨ This item is now marked as \"Available\" and ready for use'}\n              </div>\n\n              <div class=\"timestamp\">\n                ${timestamp}\n              </div>\n            </div>\n          </body>\n        </html>\n      `);\n    } catch (error) {\n      console.error('Public scan error:', error);\n      res.status(500).send(`\n        <!DOCTYPE html>\n        <html>\n          <head>\n            <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n            <title>Error</title>\n            <style>\n              body { font-family: Arial, sans-serif; text-align: center; padding: 50px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; }\n              .container { background: white; color: #333; padding: 40px; border-radius: 20px; max-width: 500px; margin: 0 auto; }\n              h1 { color: #ef4444; }\n            </style>\n          </head>\n          <body>\n            <div class=\"container\">\n              <h1>Error</h1>\n              <p>Failed to process scan. Please try again.</p>\n            </div>\n          </body>\n        </html>\n      `);\n    }\n  });\n\n  // Categories route\n  app.get(\"/api/categories\", requireAuth, async (req, res) => {\n    try {\n      const allItems = await storage.getAllItems();\n      const dbCategories = await storage.getAllCategories();\n\n      // Combine default and custom categories\n      const defaultCategories = Object.values(CATEGORIES).map(cat => {\n        const categoryItems = allItems.filter(item => \n          (cat.subTypes as readonly string[]).includes(item.productType)\n        );\n\n        return {\n          name: cat.name,\n          image: cat.image,\n          subTypes: cat.subTypes,\n          totalCount: categoryItems.length,\n          availableCount: categoryItems.filter(item => item.status === 'Available').length,\n          isCustom: false\n        };\n      });\n\n      const customCategories = dbCategories.map(cat => {\n        const subTypes = JSON.parse(cat.subTypes);\n        const categoryItems = allItems.filter(item => \n          subTypes.includes(item.productType)\n        );\n\n        return {\n          id: cat.id,\n          name: cat.name,\n          image: cat.image,\n          subTypes,\n          totalCount: categoryItems.length,\n          availableCount: categoryItems.filter(item => item.status === 'Available').length,\n          isCustom: true\n        };\n      });\n\n      // Show all default categories (even with 0 items) and custom categories\n      const allCategories = [...defaultCategories, ...customCategories];\n\n      res.json(allCategories);\n    } catch (error) {\n      console.error('Get categories error:', error);\n      res.status(500).json({ error: 'Failed to fetch categories' });\n    }\n  });\n\n  // Category management routes (admin only)\n  app.post(\"/api/custom-categories\", requireAdmin, async (req, res) => {\n    try {\n      const validatedData = z.object({\n        name: z.string().min(1, \"Category name is required\"),\n        image: z.string().url(\"Valid image URL is required\"),\n        subTypes: z.array(z.string()).min(1, \"At least one product type is required\")\n      }).parse(req.body);\n\n      // Check if category name already exists\n      const existingCategories = await storage.getAllCategories();\n      const nameExists = existingCategories.some(\n        cat => cat.name.toLowerCase() === validatedData.name.toLowerCase()\n      );\n\n      if (nameExists) {\n        return res.status(400).json({ error: 'A category with this name already exists' });\n      }\n\n      const category = await storage.createCategory({\n        name: validatedData.name,\n        image: validatedData.image,\n        subTypes: JSON.stringify(validatedData.subTypes)\n      });\n\n      res.status(201).json(category);\n    } catch (error) {\n      if (error instanceof z.ZodError) {\n        return res.status(400).json({ \n          error: 'Invalid category data', \n          details: error.errors.map(e => ({ field: e.path.join('.'), message: e.message }))\n        });\n      }\n      console.error('Create category error:', error);\n      res.status(500).json({ error: 'Failed to create category' });\n    }\n  });\n\n  app.patch(\"/api/custom-categories/:id\", requireAdmin, async (req, res) => {\n    try {\n      const validatedData = z.object({\n        name: z.string().min(1).optional(),\n        image: z.string().url().optional(),\n        subTypes: z.array(z.string()).optional()\n      }).parse(req.body);\n\n      const updateData: any = { ...validatedData };\n      if (validatedData.subTypes) {\n        updateData.subTypes = JSON.stringify(validatedData.subTypes);\n      }\n\n      const category = await storage.updateCategory(req.params.id, updateData);\n      if (!category) {\n        return res.status(404).json({ error: 'Category not found' });\n      }\n      res.json(category);\n    } catch (error) {\n      if (error instanceof z.ZodError) {\n        return res.status(400).json({ error: 'Invalid category data', details: error.errors });\n      }\n      console.error('Update category error:', error);\n      res.status(500).json({ error: 'Failed to update category' });\n    }\n  });\n\n  app.delete(\"/api/custom-categories/:id\", requireAdmin, async (req, res) => {\n    try {\n      const deleted = await storage.deleteCategory(req.params.id);\n      if (!deleted) {\n        return res.status(404).json({ error: 'Category not found' });\n      }\n      res.json({ success: true });\n    } catch (error) {\n      console.error('Delete category error:', error);\n      res.status(500).json({ error: 'Failed to delete category' });\n    }\n  });\n\n  // Notification routes\n  app.get(\"/api/notifications\", requireAuth, async (req, res) => {\n    try {\n      const notifications = await storage.getNotificationsByUser(req.session.userId!);\n      res.json(notifications);\n    } catch (error) {\n      console.error('Get notifications error:', error);\n      res.status(500).json({ error: 'Failed to fetch notifications' });\n    }\n  });\n\n  app.patch(\"/api/notifications/:id/read\", requireAuth, async (req, res) => {\n    try {\n      await storage.markNotificationAsRead(req.params.id);\n      res.json({ success: true });\n    } catch (error) {\n      console.error('Mark notification as read error:', error);\n      res.status(500).json({ error: 'Failed to mark notification as read' });\n    }\n  });\n\n  app.patch(\"/api/notifications/read-all\", requireAuth, async (req, res) => {\n    try {\n      await storage.markAllNotificationsAsRead(req.session.userId!);\n      res.json({ success: true });\n    } catch (error) {\n      console.error('Mark all notifications as read error:', error);\n      res.status(500).json({ error: 'Failed to mark all notifications as read' });\n    }\n  });\n\n  app.delete(\"/api/notifications/:id\", requireAuth, async (req, res) => {\n    try {\n      await storage.deleteNotification(req.params.id);\n      res.json({ success: true });\n    } catch (error) {\n      console.error('Delete notification error:', error);\n      res.status(500).json({ error: 'Failed to delete notification' });\n    }\n  });\n\n  // Reservation routes\n  app.get(\"/api/reservations\", requireAuth, async (req, res) => {\n    try {\n      const reservations = await storage.getAllReservations();\n      res.json(reservations);\n    } catch (error) {\n      console.error('Get reservations error:', error);\n      res.status(500).json({ error: 'Failed to fetch reservations' });\n    }\n  });\n\n  app.get(\"/api/reservations/:id\", requireAuth, async (req, res) => {\n    try {\n      const reservation = await storage.getReservationById(req.params.id);\n      if (!reservation) {\n        return res.status(404).json({ error: 'Reservation not found' });\n      }\n      res.json(reservation);\n    } catch (error) {\n      console.error('Get reservation error:', error);\n      res.status(500).json({ error: 'Failed to fetch reservation' });\n    }\n  });\n\n  app.get(\"/api/reservations/item/:itemId\", requireAuth, async (req, res) => {\n    try {\n      const reservations = await storage.getReservationsByItem(req.params.itemId);\n      // Only return active reservations (pending, approved)\n      const activeReservations = reservations.filter(\n        r => r.status === 'pending' || r.status === 'approved'\n      );\n      res.json(activeReservations);\n    } catch (error) {\n      console.error('Get item reservations error:', error);\n      res.status(500).json({ error: 'Failed to fetch item reservations' });\n    }\n  });\n\n  app.post(\"/api/reservations\", requireAuth, async (req, res) => {\n    try {\n      const validatedData = insertReservationSchema.parse(req.body);\n\n      // Check for date conflicts\n      const hasConflict = await storage.checkReservationConflict(\n        validatedData.itemId,\n        validatedData.startDate,\n        validatedData.returnDate\n      );\n\n      if (hasConflict) {\n        return res.status(409).json({ \n          error: 'This item is already reserved for the selected dates. Please choose different dates.' \n        });\n      }\n\n      const reservation = await storage.createReservation(validatedData);\n\n      // Get item details\n      const item = await storage.getItemById(validatedData.itemId);\n      const oldStatus = item?.status || 'Available';\n\n      // Update item status to Reserved\n      await storage.updateItem(validatedData.itemId, { status: 'Reserved' });\n\n      // Get user details\n      const user = await db.query.users.findFirst({\n        where: eq(users.id, validatedData.userId)\n      });\n\n      // Notify all admins about new reservation request\n      try {\n        const admins = await db.query.users.findMany({\n          where: eq(users.role, 'admin')\n        });\n\n        for (const admin of admins) {\n          await storage.createNotification({\n            userId: admin.id,\n            type: 'reservation_request',\n            title: 'New Reservation Request',\n            message: `${user?.name || 'A user'} has requested ${item?.productName || 'an item'} from ${new Date(validatedData.startDate).toLocaleDateString()} to ${new Date(validatedData.returnDate).toLocaleDateString()}`,\n            relatedId: reservation.id,\n            isRead: 'false'\n          });\n\n          // Send email notification to admin\n          if (admin.email) {\n            await sendReservationRequestEmail(admin.email, {\n              itemName: item?.productName || 'Item',\n              userName: user?.name || 'User',\n              userEmail: user?.email || '',\n              startDate: format(new Date(validatedData.startDate), 'MMM dd, yyyy'),\n              returnDate: format(new Date(validatedData.returnDate), 'MMM dd, yyyy'),\n              notes: validatedData.notes\n            });\n          }\n        }\n      } catch (notifError) {\n        console.error('Failed to create admin notifications:', notifError);\n      }\n\n      // Log activity\n      try {\n        await storage.createActivityLog({\n          itemId: validatedData.itemId,\n          userId: validatedData.userId,\n          action: 'Reservation Created',\n          oldStatus,\n          newStatus: 'Reserved',\n          notes: `${item?.productName || 'Item'} reserved by ${user?.name || 'User'} from ${new Date(validatedData.startDate).toLocaleDateString()} to ${new Date(validatedData.returnDate).toLocaleDateString()}. Status: ${reservation.status}. Created at ${new Date().toLocaleString()}`\n        });\n      } catch (logError) {\n        console.error('Failed to log reservation creation:', logError);\n      }\n\n      res.status(201).json(reservation);\n    } catch (error) {\n      if (error instanceof z.ZodError) {\n        return res.status(400).json({ error: 'Invalid reservation data', details: error.errors });\n      }\n      console.error('Create reservation error:', error);\n      res.status(500).json({ error: 'Failed to create reservation' });\n    }\n  });\n\n  app.patch(\"/api/reservations/:id\", requireAuth, async (req, res) => {\n    try {\n      const validatedData = insertReservationSchema.partial().extend({\n        rejectionReason: z.string().optional(),\n        itemConditionOnReceive: z.string().optional(),\n        itemConditionOnReturn: z.string().optional()\n      }).parse(req.body);\n\n      // Get current reservation state\n      const currentReservation = await storage.getReservationById(req.params.id);\n      if (!currentReservation) {\n        return res.status(404).json({ error: 'Reservation not found' });\n      }\n\n      const reservation = await storage.updateReservation(req.params.id, validatedData);\n\n      // Track status changes\n      if (validatedData.status && validatedData.status !== currentReservation.status) {\n        try {\n          await storage.createReservationStatusHistory({\n            reservationId: reservation.id,\n            userId: req.session.userId!,\n            oldStatus: currentReservation.status,\n            newStatus: validatedData.status,\n            notes: validatedData.rejectionReason || `Status changed from ${currentReservation.status} to ${validatedData.status}`\n          });\n        } catch (historyError) {\n          console.error('Failed to log reservation status change:', historyError);\n        }\n      }\n\n      const item = await storage.getItemById(reservation.itemId);\n\n      // Update item status based on reservation status\n      if (validatedData.status === 'rejected') {\n        await storage.updateItem(reservation.itemId, { status: 'Available' });\n\n        // Create notification for user about rejection\n        try {\n          await storage.createNotification({\n            userId: reservation.userId,\n            type: 'reservation_rejected',\n            title: 'Reservation Rejected',\n            message: `Your reservation for ${item?.productName || 'item'} has been rejected${validatedData.rejectionReason ? `: ${validatedData.rejectionReason}` : '.'}`,\n            relatedId: reservation.id,\n            isRead: 'false'\n          });\n\n          // Send rejection email\n          const user = await db.query.users.findFirst({\n            where: eq(users.id, reservation.userId)\n          });\n          if (user?.email) {\n            await sendReservationRejectedEmail(user.email, {\n              itemName: item?.productName || 'Item',\n              userName: user.name,\n              userEmail: user.email,\n              startDate: format(new Date(reservation.startDate), 'MMM dd, yyyy'),\n              returnDate: format(new Date(reservation.returnDate), 'MMM dd, yyyy'),\n              rejectionReason: validatedData.rejectionReason\n            });\n          }\n        } catch (notifError) {\n          console.error('Failed to create rejection notification:', notifError);\n        }\n\n        // Log activity\n        try {\n          await storage.createActivityLog({\n            itemId: reservation.itemId,\n            userId: req.session.userId!,\n            action: 'Reservation Rejected',\n            oldStatus: item?.status || 'Reserved',\n            newStatus: 'Available',\n            notes: `${item?.productName || 'Item'} reservation rejected by ${req.session.name}${validatedData.rejectionReason ? `. Reason: ${validatedData.rejectionReason}` : ''}. Status: Reserved â†’ Available. Updated at ${new Date().toLocaleString()}`\n          });\n        } catch (logError) {\n          console.error('Failed to log reservation status change:', logError);\n        }\n      } else if (validatedData.status === 'completed') {\n        await storage.updateItem(reservation.itemId, { status: 'Available' });\n\n        // Log activity\n        try {\n          await storage.createActivityLog({\n            itemId: reservation.itemId,\n            userId: req.session.userId!,\n            action: 'Reservation Completed',\n            oldStatus: item?.status || 'Reserved',\n            newStatus: 'Available',\n            notes: `${item?.productName || 'Item'} reservation completed by ${req.session.name}. Status: Reserved â†’ Available. Updated at ${new Date().toLocaleString()}`\n          });\n        } catch (logError) {\n          console.error('Failed to log reservation status change:', logError);\n        }\n      } else if (validatedData.status === 'approved') {\n        await storage.updateItem(reservation.itemId, { status: 'Reserved' });\n\n        // Create notification for user about approval\n        try {\n          await storage.createNotification({\n            userId: reservation.userId,\n            type: 'reservation_approved',\n            title: 'Reservation Approved',\n            message: `Your reservation for ${item?.productName || 'item'} has been approved!`,\n            relatedId: reservation.id,\n            isRead: 'false'\n          });\n\n          // Send approval email\n          const user = await db.query.users.findFirst({\n            where: eq(users.id, reservation.userId)\n          });\n          if (user?.email) {\n            await sendReservationApprovedEmail(user.email, {\n              itemName: item?.productName || 'Item',\n              userName: user.name,\n              userEmail: user.email,\n              startDate: format(new Date(reservation.startDate), 'MMM dd, yyyy'),\n              returnDate: format(new Date(reservation.returnDate), 'MMM dd, yyyy')\n            });\n          }\n        } catch (notifError) {\n          console.error('Failed to create approval notification:', notifError);\n        }\n\n        // Log activity\n        try {\n          await storage.createActivityLog({\n            itemId: reservation.itemId,\n            userId: req.session.userId!,\n            action: 'Reservation Approved',\n            oldStatus: item?.status || 'Available',\n            newStatus: 'Reserved',\n            notes: `${item?.productName || 'Item'} reservation approved by ${req.session.name}. Status: ${item?.status} â†’ Reserved. Approved at ${new Date().toLocaleString()}`\n          });\n        } catch (logError) {\n          console.error('Failed to log reservation approval:', logError);\n        }\n      }\n\n      res.json(reservation);\n    } catch (error) {\n      if (error instanceof z.ZodError) {\n        return res.status(400).json({ error: 'Invalid reservation data', details: error.errors });\n      }\n      console.error('Update reservation error:', error);\n      res.status(500).json({ error: 'Failed to update reservation' });\n    }\n  });\n\n  // QR Code generation route\n  app.get(\"/api/items/:id/qrcode\", requireAuth, async (req, res) => {\n    try {\n      const item = await storage.getItemById(req.params.id);\n      if (!item) {\n        return res.status(404).json({ error: 'Item not found' });\n      }\n\n      // Generate public scan URL\n      const publicUrl = `${req.protocol}://${req.get('host')}/public/scan/${item.barcode}`;\n\n      // Generate QR code as data URL with public link\n      const qrCodeUrl = await QRCode.toDataURL(publicUrl, {\n        width: 300,\n        margin: 2,\n        color: {\n          dark: '#000000',\n          light: '#FFFFFF'\n        }\n      });\n\n      res.json({ qrCode: qrCodeUrl, barcode: item.barcode, publicUrl });\n    } catch (error) {\n      console.error('QR code generation error:', error);\n      res.status(500).json({ error: 'Failed to generate QR code' });\n    }\n  });\n\n  // Generate all QR codes\n  app.get(\"/api/qrcodes/all\", requireAdmin, async (req, res) => {\n    try {\n      const items = await storage.getAllItems();\n      const qrCodes = await Promise.all(\n        items.map(async (item) => {\n          const publicUrl = `${req.protocol}://${req.get('host')}/public/scan/${item.barcode}`;\n          const qrCode = await QRCode.toDataURL(publicUrl, {\n            width: 300,\n            margin: 2,\n            color: {\n              dark: '#000000',\n              light: '#FFFFFF'\n            }\n          });\n          return {\n            id: item.id,\n            barcode: item.barcode,\n            productName: item.productName,\n            qrCode,\n            publicUrl\n          };\n        })\n      );\n      res.json(qrCodes);\n    } catch (error) {\n      console.error('QR codes generation error:', error);\n      res.status(500).json({ error: 'Failed to generate QR codes' });\n    }\n  });\n\n  // User management routes (admin only)\n  app.get(\"/api/users\", requireAdmin, async (req, res) => {\n    try {\n      const allUsers = await db.query.users.findMany({\n        columns: {\n          id: true,\n          username: true,\n          email: true,\n          name: true,\n          role: true\n        }\n      });\n      res.json(allUsers);\n    } catch (error) {\n      console.error('Get users error:', error);\n      res.status(500).json({ error: 'Failed to fetch users' });\n    }\n  });\n\n  app.post(\"/api/users\", requireAdmin, async (req, res) => {\n    try {\n      const validatedData = z.object({\n        username: z.string().min(3, \"Username must be at least 3 characters\"),\n        password: z.string().min(3, \"Password must be at least 3 characters\"),\n        email: z.string().email(\"Valid email is required\"),\n        name: z.string().min(1, \"Name is required\"),\n        role: z.enum(['admin', 'user']).default('user'),\n        department: z.string().optional()\n      }).parse(req.body);\n\n      // Check if username already exists\n      const existingUser = await storage.getUserByUsername(validatedData.username);\n      if (existingUser) {\n        return res.status(400).json({ error: 'Username already exists' });\n      }\n\n      // Hash password\n      const hashedPassword = await hashPassword(validatedData.password);\n\n      // Create user\n      const [newUser] = await db.insert(users).values({\n        username: validatedData.username,\n        password: hashedPassword,\n        email: validatedData.email,\n        name: validatedData.name,\n        role: validatedData.role\n      }).returning({\n        id: users.id,\n        username: users.username,\n        email: users.email,\n        name: users.name,\n        role: users.role\n      });\n\n      res.status(201).json(newUser);\n    } catch (error) {\n      if (error instanceof z.ZodError) {\n        return res.status(400).json({ \n          error: 'Invalid user data', \n          details: error.errors.map(e => ({ field: e.path.join('.'), message: e.message }))\n        });\n      }\n      console.error('Create user error:', error);\n      res.status(500).json({ error: 'Failed to create user' });\n    }\n  });\n\n  app.delete(\"/api/users/:id\", requireAdmin, async (req, res) => {\n    try {\n      // Prevent deleting self\n      if (req.params.id === req.session.userId) {\n        return res.status(400).json({ error: 'Cannot delete your own account' });\n      }\n\n      await db.delete(users).where(eq(users.id, req.params.id));\n      res.json({ success: true });\n    } catch (error) {\n      console.error('Delete user error:', error);\n      res.status(500).json({ error: 'Failed to delete user' });\n    }\n  });\n\n  // Activity log routes\n  app.get(\"/api/activity-logs\", requireAdmin, async (req, res) => {\n    try {\n      const logs = await storage.getAllActivityLogs();\n      res.json(logs);\n    } catch (error) {\n      console.error('Get activity logs error:', error);\n      res.status(500).json({ error: 'Failed to fetch activity logs' });\n    }\n  });\n\n  app.get(\"/api/activity-logs/item/:itemId\", requireAuth, async (req, res) => {\n    try {\n      const logs = await storage.getActivityLogsByItem(req.params.itemId);\n      res.json(logs);\n    } catch (error) {\n      console.error('Get item activity logs error:', error);\n      res.status(500).json({ error: 'Failed to fetch item activity logs' });\n    }\n  });\n\n  // Item Edit History routes\n  app.get('/api/item-edit-history/:itemId', requireAuth, async (req, res) => {\n    try {\n      const { itemId } = req.params;\n      const history = await db\n        .select({\n          id: itemEditHistory.id,\n          fieldName: itemEditHistory.fieldName,\n          oldValue: itemEditHistory.oldValue,\n          newValue: itemEditHistory.newValue,\n          timestamp: itemEditHistory.timestamp,\n          userName: users.name,\n        })\n        .from(itemEditHistory)\n        .innerJoin(users, eq(itemEditHistory.userId, users.id))\n        .where(eq(itemEditHistory.itemId, itemId))\n        .orderBy(desc(itemEditHistory.timestamp));\n\n      res.json(history);\n    } catch (error: any) {\n      console.error('Get item edit history error:', error);\n      res.status(500).json({ error: 'Failed to get item edit history' });\n    }\n  });\n\n  // Reservation Status History routes\n  app.get('/api/reservation-status-history/:reservationId', requireAuth, async (req, res) => {\n    try {\n      const { reservationId } = req.params;\n      const history = await db\n        .select({\n          id: reservationStatusHistory.id,\n          oldStatus: reservationStatusHistory.oldStatus,\n          newStatus: reservationStatusHistory.newStatus,\n          notes: reservationStatusHistory.notes,\n          timestamp: reservationStatusHistory.timestamp,\n          userName: users.name,\n        })\n        .from(reservationStatusHistory)\n        .innerJoin(users, eq(reservationStatusHistory.userId, users.id))\n        .where(eq(reservationStatusHistory.reservationId, reservationId))\n        .orderBy(desc(reservationStatusHistory.timestamp));\n\n      res.json(history);\n    } catch (error: any) {\n      console.error('Get reservation status history error:', error);\n      res.status(500).json({ error: 'Failed to get reservation status history' });\n    }\n  });\n\n  const httpServer = createServer(app);\n  return httpServer;\n}","path":null,"size_bytes":45822,"size_tokens":null},"client/src/components/InventoryHeader.tsx":{"content":"import { useState } from \"react\";\nimport { Button } from \"@/components/ui/button\";\nimport { LogOut, Users, Calendar, ClipboardList, QrCode, Wrench, Package, Globe, AlertCircle, Menu, X } from \"lucide-react\";\nimport {\n  DropdownMenu,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuLabel,\n  DropdownMenuSeparator,\n  DropdownMenuTrigger,\n} from \"@/components/ui/dropdown-menu\";\nimport NotificationBell from \"./NotificationBell\";\nimport { useTranslation, Language } from \"@/lib/translations\";\n\ninterface InventoryHeaderProps {\n  userName: string;\n  userRole: string;\n  currentView: 'categories' | 'inventory';\n  onViewChange: (view: 'categories' | 'inventory') => void;\n  onLogout: () => void;\n  onNavigateToReservations?: () => void;\n  onNavigateToActivityLogs?: () => void;\n  onNavigateToQRCodes?: () => void;\n  onNavigateToMaintenance?: () => void;\n  onNavigateToReports?: () => void;\n  hideViewToggle?: boolean;\n  language?: Language;\n  onLanguageChange?: (language: Language) => void;\n}\n\nexport default function InventoryHeader({\n  userName,\n  userRole,\n  currentView,\n  onViewChange,\n  onLogout,\n  onNavigateToReservations,\n  onNavigateToActivityLogs,\n  onNavigateToQRCodes,\n  onNavigateToMaintenance,\n  onNavigateToReports,\n  hideViewToggle = false,\n  language = 'en',\n  onLanguageChange\n}: InventoryHeaderProps) {\n  const t = useTranslation(language);\n  const [mobileMenuOpen, setMobileMenuOpen] = useState(false);\n\n  return (\n    <header className=\"bg-gradient-to-r from-[#667eea] to-[#764ba2] text-white shadow-lg sticky top-0 z-50\">\n      <div className=\"max-w-[1400px] mx-auto px-3 md:px-5 py-3 md:py-4\">\n        {/* Top Row */}\n        <div className=\"flex items-center justify-between\">\n          {/* Logo and Title */}\n          <div className=\"flex items-center gap-2 md:gap-3 min-w-0\">\n            <Package className=\"w-6 md:w-8 h-6 md:h-8 flex-shrink-0\" />\n            <div className=\"min-w-0\">\n              <h1 className=\"text-lg md:text-2xl font-bold truncate\" data-testid=\"text-app-title\">{t('inventory_manager')}</h1>\n              <p className=\"text-xs md:text-sm opacity-90 truncate\" data-testid=\"text-user-info\">\n                {userName} â€¢ {userRole}\n              </p>\n            </div>\n          </div>\n\n          {/* Desktop Menu */}\n          <div className=\"hidden md:flex items-center gap-1\">\n            {!hideViewToggle && (\n              <div className=\"flex gap-1 bg-white/10 rounded-lg p-1 mr-2\">\n                <Button\n                  variant={currentView === 'categories' ? 'secondary' : 'ghost'}\n                  size=\"sm\"\n                  onClick={() => onViewChange('categories')}\n                  className={currentView === 'categories' ? '' : 'text-white hover:bg-white/20'}\n                  data-testid=\"button-view-categories\"\n                >\n                  {t('categories')}\n                </Button>\n              </div>\n            )}\n\n            <NotificationBell language={language} />\n\n            {/* Language Toggle */}\n            <DropdownMenu>\n              <DropdownMenuTrigger asChild>\n                <Button\n                  variant=\"ghost\"\n                  size=\"sm\"\n                  className=\"text-white hover:bg-white/20 gap-2\"\n                >\n                  <Globe className=\"w-4 h-4\" />\n                  <span>{language === 'en' ? 'EN' : 'AR'}</span>\n                </Button>\n              </DropdownMenuTrigger>\n              <DropdownMenuContent align=\"end\" className=\"w-32\">\n                <DropdownMenuItem \n                  onClick={() => onLanguageChange?.('en')} \n                  className={language === 'en' ? 'bg-accent' : ''}\n                >\n                  English\n                </DropdownMenuItem>\n                <DropdownMenuItem \n                  onClick={() => onLanguageChange?.('ar')} \n                  className={language === 'ar' ? 'bg-accent' : ''}\n                >\n                  Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©\n                </DropdownMenuItem>\n              </DropdownMenuContent>\n            </DropdownMenu>\n\n            {/* Main Menu */}\n            <DropdownMenu>\n              <DropdownMenuTrigger asChild>\n                <Button\n                  variant=\"ghost\"\n                  size=\"sm\"\n                  className=\"text-white hover:bg-white/20\"\n                >\n                  <Users className=\"w-4 h-4\" />\n                  <span className=\"ml-1\">{t('menu')}</span>\n                </Button>\n              </DropdownMenuTrigger>\n              <DropdownMenuContent align=\"end\" className=\"w-56\">\n                <DropdownMenuLabel>{t('navigation')}</DropdownMenuLabel>\n                <DropdownMenuSeparator />\n\n                <DropdownMenuItem onClick={() => onViewChange('categories')}>\n                  <Package className=\"w-4 h-4 mr-2\" />\n                  {t('categories')}\n                </DropdownMenuItem>\n\n                {onNavigateToReservations && (\n                  <DropdownMenuItem onClick={onNavigateToReservations}>\n                    <Calendar className=\"w-4 h-4 mr-2\" />\n                    {t('reservations')}\n                  </DropdownMenuItem>\n                )}\n\n                {onNavigateToReports && (\n                  <DropdownMenuItem onClick={onNavigateToReports}>\n                    <AlertCircle className=\"w-4 h-4 mr-2\" />\n                    {t('damageReports')}\n                  </DropdownMenuItem>\n                )}\n\n                {userRole === 'admin' && onNavigateToActivityLogs && (\n                  <DropdownMenuItem onClick={onNavigateToActivityLogs}>\n                    <ClipboardList className=\"w-4 h-4 mr-2\" />\n                    {t('activityLog')}\n                  </DropdownMenuItem>\n                )}\n\n                {userRole === 'admin' && onNavigateToQRCodes && (\n                  <DropdownMenuItem onClick={onNavigateToQRCodes}>\n                    <QrCode className=\"w-4 h-4 mr-2\" />\n                    {t('qrCodes')}\n                  </DropdownMenuItem>\n                )}\n\n                {userRole === 'admin' && onNavigateToMaintenance && (\n                  <DropdownMenuItem onClick={onNavigateToMaintenance}>\n                    <Wrench className=\"w-4 h-4 mr-2\" />\n                    {t('maintenance')}\n                  </DropdownMenuItem>\n                )}\n\n                {(userRole === 'admin' || userRole === 'developer') && (\n                  <DropdownMenuItem onClick={() => (window as any).navigateToUsers?.()}>\n                    <Users className=\"w-4 h-4 mr-2\" />\n                    {t('userManagement')}\n                  </DropdownMenuItem>\n                )}\n\n                <DropdownMenuSeparator />\n\n                <DropdownMenuItem onClick={onLogout}>\n                  <LogOut className=\"w-4 h-4 mr-2\" />\n                  {t('logout')}\n                </DropdownMenuItem>\n              </DropdownMenuContent>\n            </DropdownMenu>\n          </div>\n\n          {/* Mobile Menu Toggle */}\n          <Button\n            variant=\"ghost\"\n            size=\"icon\"\n            className=\"md:hidden text-white hover:bg-white/20\"\n            onClick={() => setMobileMenuOpen(!mobileMenuOpen)}\n          >\n            {mobileMenuOpen ? <X className=\"w-5 h-5\" /> : <Menu className=\"w-5 h-5\" />}\n          </Button>\n        </div>\n\n        {/* Mobile Menu */}\n        {mobileMenuOpen && (\n          <div className=\"md:hidden mt-3 space-y-2 pb-3 border-t border-white/20 pt-3\">\n            {!hideViewToggle && (\n              <div className=\"flex gap-2 bg-white/10 rounded-lg p-2\">\n                <Button\n                  variant={currentView === 'categories' ? 'secondary' : 'ghost'}\n                  size=\"sm\"\n                  onClick={() => {\n                    onViewChange('categories');\n                    setMobileMenuOpen(false);\n                  }}\n                  className={`flex-1 ${currentView === 'categories' ? '' : 'text-white hover:bg-white/20'}`}\n                >\n                  {t('categories')}\n                </Button>\n              </div>\n            )}\n\n            <div className=\"space-y-1\">\n              {onNavigateToReservations && (\n                <Button\n                  variant=\"ghost\"\n                  size=\"sm\"\n                  onClick={() => {\n                    onNavigateToReservations();\n                    setMobileMenuOpen(false);\n                  }}\n                  className=\"w-full justify-start text-white hover:bg-white/20\"\n                >\n                  <Calendar className=\"w-4 h-4 mr-2\" />\n                  {t('reservations')}\n                </Button>\n              )}\n              {onNavigateToReports && (\n                <Button\n                  variant=\"ghost\"\n                  size=\"sm\"\n                  onClick={() => {\n                    onNavigateToReports();\n                    setMobileMenuOpen(false);\n                  }}\n                  className=\"w-full justify-start text-white hover:bg-white/20\"\n                >\n                  <AlertCircle className=\"w-4 h-4 mr-2\" />\n                  {t('damageReports')}\n                </Button>\n              )}\n              {onNavigateToActivityLogs && (\n                <Button\n                  variant=\"ghost\"\n                  size=\"sm\"\n                  onClick={() => {\n                    onNavigateToActivityLogs();\n                    setMobileMenuOpen(false);\n                  }}\n                  className=\"w-full justify-start text-white hover:bg-white/20\"\n                >\n                  <ClipboardList className=\"w-4 h-4 mr-2\" />\n                  {t('activity_logs')}\n                </Button>\n              )}\n              {onNavigateToQRCodes && (\n                <Button\n                  variant=\"ghost\"\n                  size=\"sm\"\n                  onClick={() => {\n                    onNavigateToQRCodes();\n                    setMobileMenuOpen(false);\n                  }}\n                  className=\"w-full justify-start text-white hover:bg-white/20\"\n                >\n                  <QrCode className=\"w-4 h-4 mr-2\" />\n                  QR Codes\n                </Button>\n              )}\n              {onNavigateToMaintenance && (\n                <Button\n                  variant=\"ghost\"\n                  size=\"sm\"\n                  onClick={() => {\n                    onNavigateToMaintenance();\n                    setMobileMenuOpen(false);\n                  }}\n                  className=\"w-full justify-start text-white hover:bg-white/20\"\n                >\n                  <Wrench className=\"w-4 h-4 mr-2\" />\n                  {t('maintenance')}\n                </Button>\n              )}\n              <div className=\"border-t border-white/20 pt-2 mt-2\">\n                <Button\n                  variant=\"ghost\"\n                  size=\"sm\"\n                  onClick={onLogout}\n                  className=\"w-full justify-start text-white hover:bg-red-500/20\"\n                >\n                  <LogOut className=\"w-4 h-4 mr-2\" />\n                  {t('logout')}\n                </Button>\n              </div>\n            </div>\n          </div>\n        )}\n      </div>\n    </header>\n  );\n}\n","path":null,"size_bytes":11123,"size_tokens":null},"client/src/components/ui/chart.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as RechartsPrimitive from \"recharts\"\n\nimport { cn } from \"@/lib/utils\"\n\n// Format: { THEME_NAME: CSS_SELECTOR }\nconst THEMES = { light: \"\", dark: \".dark\" } as const\n\nexport type ChartConfig = {\n  [k in string]: {\n    label?: React.ReactNode\n    icon?: React.ComponentType\n  } & (\n    | { color?: string; theme?: never }\n    | { color?: never; theme: Record<keyof typeof THEMES, string> }\n  )\n}\n\ntype ChartContextProps = {\n  config: ChartConfig\n}\n\nconst ChartContext = React.createContext<ChartContextProps | null>(null)\n\nfunction useChart() {\n  const context = React.useContext(ChartContext)\n\n  if (!context) {\n    throw new Error(\"useChart must be used within a <ChartContainer />\")\n  }\n\n  return context\n}\n\nconst ChartContainer = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> & {\n    config: ChartConfig\n    children: React.ComponentProps<\n      typeof RechartsPrimitive.ResponsiveContainer\n    >[\"children\"]\n  }\n>(({ id, className, children, config, ...props }, ref) => {\n  const uniqueId = React.useId()\n  const chartId = `chart-${id || uniqueId.replace(/:/g, \"\")}`\n\n  return (\n    <ChartContext.Provider value={{ config }}>\n      <div\n        data-chart={chartId}\n        ref={ref}\n        className={cn(\n          \"flex aspect-video justify-center text-xs [&_.recharts-cartesian-axis-tick_text]:fill-muted-foreground [&_.recharts-cartesian-grid_line[stroke='#ccc']]:stroke-border/50 [&_.recharts-curve.recharts-tooltip-cursor]:stroke-border [&_.recharts-dot[stroke='#fff']]:stroke-transparent [&_.recharts-layer]:outline-none [&_.recharts-polar-grid_[stroke='#ccc']]:stroke-border [&_.recharts-radial-bar-background-sector]:fill-muted [&_.recharts-rectangle.recharts-tooltip-cursor]:fill-muted [&_.recharts-reference-line_[stroke='#ccc']]:stroke-border [&_.recharts-sector[stroke='#fff']]:stroke-transparent [&_.recharts-sector]:outline-none [&_.recharts-surface]:outline-none\",\n          className\n        )}\n        {...props}\n      >\n        <ChartStyle id={chartId} config={config} />\n        <RechartsPrimitive.ResponsiveContainer>\n          {children}\n        </RechartsPrimitive.ResponsiveContainer>\n      </div>\n    </ChartContext.Provider>\n  )\n})\nChartContainer.displayName = \"Chart\"\n\nconst ChartStyle = ({ id, config }: { id: string; config: ChartConfig }) => {\n  const colorConfig = Object.entries(config).filter(\n    ([, config]) => config.theme || config.color\n  )\n\n  if (!colorConfig.length) {\n    return null\n  }\n\n  return (\n    <style\n      dangerouslySetInnerHTML={{\n        __html: Object.entries(THEMES)\n          .map(\n            ([theme, prefix]) => `\n${prefix} [data-chart=${id}] {\n${colorConfig\n  .map(([key, itemConfig]) => {\n    const color =\n      itemConfig.theme?.[theme as keyof typeof itemConfig.theme] ||\n      itemConfig.color\n    return color ? `  --color-${key}: ${color};` : null\n  })\n  .join(\"\\n\")}\n}\n`\n          )\n          .join(\"\\n\"),\n      }}\n    />\n  )\n}\n\nconst ChartTooltip = RechartsPrimitive.Tooltip\n\nconst ChartTooltipContent = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<typeof RechartsPrimitive.Tooltip> &\n    React.ComponentProps<\"div\"> & {\n      hideLabel?: boolean\n      hideIndicator?: boolean\n      indicator?: \"line\" | \"dot\" | \"dashed\"\n      nameKey?: string\n      labelKey?: string\n    }\n>(\n  (\n    {\n      active,\n      payload,\n      className,\n      indicator = \"dot\",\n      hideLabel = false,\n      hideIndicator = false,\n      label,\n      labelFormatter,\n      labelClassName,\n      formatter,\n      color,\n      nameKey,\n      labelKey,\n    },\n    ref\n  ) => {\n    const { config } = useChart()\n\n    const tooltipLabel = React.useMemo(() => {\n      if (hideLabel || !payload?.length) {\n        return null\n      }\n\n      const [item] = payload\n      const key = `${labelKey || item?.dataKey || item?.name || \"value\"}`\n      const itemConfig = getPayloadConfigFromPayload(config, item, key)\n      const value =\n        !labelKey && typeof label === \"string\"\n          ? config[label as keyof typeof config]?.label || label\n          : itemConfig?.label\n\n      if (labelFormatter) {\n        return (\n          <div className={cn(\"font-medium\", labelClassName)}>\n            {labelFormatter(value, payload)}\n          </div>\n        )\n      }\n\n      if (!value) {\n        return null\n      }\n\n      return <div className={cn(\"font-medium\", labelClassName)}>{value}</div>\n    }, [\n      label,\n      labelFormatter,\n      payload,\n      hideLabel,\n      labelClassName,\n      config,\n      labelKey,\n    ])\n\n    if (!active || !payload?.length) {\n      return null\n    }\n\n    const nestLabel = payload.length === 1 && indicator !== \"dot\"\n\n    return (\n      <div\n        ref={ref}\n        className={cn(\n          \"grid min-w-[8rem] items-start gap-1.5 rounded-lg border border-border/50 bg-background px-2.5 py-1.5 text-xs shadow-xl\",\n          className\n        )}\n      >\n        {!nestLabel ? tooltipLabel : null}\n        <div className=\"grid gap-1.5\">\n          {payload.map((item, index) => {\n            const key = `${nameKey || item.name || item.dataKey || \"value\"}`\n            const itemConfig = getPayloadConfigFromPayload(config, item, key)\n            const indicatorColor = color || item.payload.fill || item.color\n\n            return (\n              <div\n                key={item.dataKey}\n                className={cn(\n                  \"flex w-full flex-wrap items-stretch gap-2 [&>svg]:h-2.5 [&>svg]:w-2.5 [&>svg]:text-muted-foreground\",\n                  indicator === \"dot\" && \"items-center\"\n                )}\n              >\n                {formatter && item?.value !== undefined && item.name ? (\n                  formatter(item.value, item.name, item, index, item.payload)\n                ) : (\n                  <>\n                    {itemConfig?.icon ? (\n                      <itemConfig.icon />\n                    ) : (\n                      !hideIndicator && (\n                        <div\n                          className={cn(\n                            \"shrink-0 rounded-[2px] border-[--color-border] bg-[--color-bg]\",\n                            {\n                              \"h-2.5 w-2.5\": indicator === \"dot\",\n                              \"w-1\": indicator === \"line\",\n                              \"w-0 border-[1.5px] border-dashed bg-transparent\":\n                                indicator === \"dashed\",\n                              \"my-0.5\": nestLabel && indicator === \"dashed\",\n                            }\n                          )}\n                          style={\n                            {\n                              \"--color-bg\": indicatorColor,\n                              \"--color-border\": indicatorColor,\n                            } as React.CSSProperties\n                          }\n                        />\n                      )\n                    )}\n                    <div\n                      className={cn(\n                        \"flex flex-1 justify-between leading-none\",\n                        nestLabel ? \"items-end\" : \"items-center\"\n                      )}\n                    >\n                      <div className=\"grid gap-1.5\">\n                        {nestLabel ? tooltipLabel : null}\n                        <span className=\"text-muted-foreground\">\n                          {itemConfig?.label || item.name}\n                        </span>\n                      </div>\n                      {item.value && (\n                        <span className=\"font-mono font-medium tabular-nums text-foreground\">\n                          {item.value.toLocaleString()}\n                        </span>\n                      )}\n                    </div>\n                  </>\n                )}\n              </div>\n            )\n          })}\n        </div>\n      </div>\n    )\n  }\n)\nChartTooltipContent.displayName = \"ChartTooltip\"\n\nconst ChartLegend = RechartsPrimitive.Legend\n\nconst ChartLegendContent = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> &\n    Pick<RechartsPrimitive.LegendProps, \"payload\" | \"verticalAlign\"> & {\n      hideIcon?: boolean\n      nameKey?: string\n    }\n>(\n  (\n    { className, hideIcon = false, payload, verticalAlign = \"bottom\", nameKey },\n    ref\n  ) => {\n    const { config } = useChart()\n\n    if (!payload?.length) {\n      return null\n    }\n\n    return (\n      <div\n        ref={ref}\n        className={cn(\n          \"flex items-center justify-center gap-4\",\n          verticalAlign === \"top\" ? \"pb-3\" : \"pt-3\",\n          className\n        )}\n      >\n        {payload.map((item) => {\n          const key = `${nameKey || item.dataKey || \"value\"}`\n          const itemConfig = getPayloadConfigFromPayload(config, item, key)\n\n          return (\n            <div\n              key={item.value}\n              className={cn(\n                \"flex items-center gap-1.5 [&>svg]:h-3 [&>svg]:w-3 [&>svg]:text-muted-foreground\"\n              )}\n            >\n              {itemConfig?.icon && !hideIcon ? (\n                <itemConfig.icon />\n              ) : (\n                <div\n                  className=\"h-2 w-2 shrink-0 rounded-[2px]\"\n                  style={{\n                    backgroundColor: item.color,\n                  }}\n                />\n              )}\n              {itemConfig?.label}\n            </div>\n          )\n        })}\n      </div>\n    )\n  }\n)\nChartLegendContent.displayName = \"ChartLegend\"\n\n// Helper to extract item config from a payload.\nfunction getPayloadConfigFromPayload(\n  config: ChartConfig,\n  payload: unknown,\n  key: string\n) {\n  if (typeof payload !== \"object\" || payload === null) {\n    return undefined\n  }\n\n  const payloadPayload =\n    \"payload\" in payload &&\n    typeof payload.payload === \"object\" &&\n    payload.payload !== null\n      ? payload.payload\n      : undefined\n\n  let configLabelKey: string = key\n\n  if (\n    key in payload &&\n    typeof payload[key as keyof typeof payload] === \"string\"\n  ) {\n    configLabelKey = payload[key as keyof typeof payload] as string\n  } else if (\n    payloadPayload &&\n    key in payloadPayload &&\n    typeof payloadPayload[key as keyof typeof payloadPayload] === \"string\"\n  ) {\n    configLabelKey = payloadPayload[\n      key as keyof typeof payloadPayload\n    ] as string\n  }\n\n  return configLabelKey in config\n    ? config[configLabelKey]\n    : config[key as keyof typeof config]\n}\n\nexport {\n  ChartContainer,\n  ChartTooltip,\n  ChartTooltipContent,\n  ChartLegend,\n  ChartLegendContent,\n  ChartStyle,\n}\n","path":null,"size_bytes":10481,"size_tokens":null},"server/auth.ts":{"content":"import { type Request, type Response, type NextFunction } from \"express\";\nimport bcrypt from \"bcrypt\";\nimport { storage } from \"./storage\";\n\nexport async function hashPassword(password: string): Promise<string> {\n  return bcrypt.hash(password, 10);\n}\n\nexport async function comparePassword(password: string, hash: string): Promise<boolean> {\n  return bcrypt.compare(password, hash);\n}\n\nexport async function loginUser(username: string, password: string) {\n  const user = await storage.getUserByUsername(username);\n  \n  if (!user) {\n    return { success: false, message: 'Invalid username or password' };\n  }\n\n  const isValid = await comparePassword(password, user.password);\n  \n  if (!isValid) {\n    return { success: false, message: 'Invalid username or password' };\n  }\n\n  return {\n    success: true,\n    user: {\n      id: user.id,\n      username: user.username,\n      role: user.role,\n      email: user.email,\n      name: user.name,\n      department: user.department\n    }\n  };\n}\n\nexport function requireAuth(req: Request, res: Response, next: NextFunction) {\n  if (!req.session?.userId) {\n    return res.status(401).json({ error: 'Unauthorized' });\n  }\n  next();\n}\n\nexport function requireAdmin(req: Request, res: Response, next: NextFunction) {\n  if (!req.session?.userId) {\n    return res.status(401).json({ error: 'Unauthorized' });\n  }\n  if (req.session.role !== 'admin' && req.session.role !== 'developer') {\n    return res.status(403).json({ error: 'Forbidden - Admin access required' });\n  }\n  next();\n}\n","path":null,"size_bytes":1515,"size_tokens":null},"client/src/components/ui/progress.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as ProgressPrimitive from \"@radix-ui/react-progress\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Progress = React.forwardRef<\n  React.ElementRef<typeof ProgressPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ProgressPrimitive.Root>\n>(({ className, value, ...props }, ref) => (\n  <ProgressPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative h-4 w-full overflow-hidden rounded-full bg-secondary\",\n      className\n    )}\n    {...props}\n  >\n    <ProgressPrimitive.Indicator\n      className=\"h-full w-full flex-1 bg-primary transition-all\"\n      style={{ transform: `translateX(-${100 - (value || 0)}%)` }}\n    />\n  </ProgressPrimitive.Root>\n))\nProgress.displayName = ProgressPrimitive.Root.displayName\n\nexport { Progress }\n","path":null,"size_bytes":791,"size_tokens":null},"attached_assets/translations_1763670820749.ts":{"content":"export type Language = 'en' | 'ar';\n\nexport const translations = {\n  en: {\n    // Header\n    categories: 'Categories',\n    allItems: 'All Items',\n    menu: 'Menu',\n    navigation: 'Navigation',\n    language: 'Language',\n    inventory_manager: 'Inventory Manager',\n    inventory: 'Inventory',\n    reservations: 'Reservations',\n    activityLog: 'Activity Log',\n    qrCodes: 'QR Codes',\n    maintenance: 'Maintenance',\n    userManagement: 'User Management',\n    logout: 'Logout',\n\n    // Notifications\n    notifications: 'Notifications',\n    markAllRead: 'Mark all read',\n    noNotifications: 'No notifications',\n\n    // Login\n    login: 'Login',\n    username: 'Username',\n    password: 'Password',\n    signIn: 'Sign In',\n\n    // Items\n    addItem: 'Add Item',\n    editItem: 'Edit Item',\n    deleteItem: 'Delete Item',\n    productName: 'Product Name',\n    barcode: 'Barcode',\n    status: 'Status',\n    category: 'Category',\n    available: 'Available',\n    inUse: 'In Use',\n    reserved: 'Reserved',\n    disabled: 'Disabled',\n\n    // Reservations\n    newReservation: 'New Reservation',\n    startDate: 'Start Date',\n    returnDate: 'Return Date',\n    notes: 'Notes',\n    approve: 'Approve',\n    reject: 'Reject',\n    pending: 'Pending',\n    approved: 'Approved',\n    rejected: 'Rejected',\n    completed: 'Completed',\n\n    // Common\n    save: 'Save',\n    cancel: 'Cancel',\n    delete: 'Delete',\n    edit: 'Edit',\n    close: 'Close',\n    search: 'Search',\n    actions: 'Actions',\n    loading: 'Loading...',\n    error: 'Error',\n\n    // User Management\n    user_management: 'User Management',\n    users: 'Users',\n    add_user: 'Add User',\n    activity_logs: 'Activity Logs',\n    \n    // Activity Logs\n    activityLogHistory: 'Activity Log & History',\n    completeAuditTrail: 'Complete audit trail of all inventory activities',\n    editHistory: 'Edit History',\n    itemEditHistory: 'Item Edit History',\n    noEditHistory: 'No edit history found',\n    loadingActivityLogs: 'Loading activity logs...',\n    errorLoadingLogs: 'Error loading activity logs. Please try again.',\n    noActivityLogs: 'No activity logs found.',\n    by: 'by',\n    \n    // QR Codes\n    qrCodeGeneration: 'QR Code Generation',\n    generateAllQRCodes: 'Generate All QR Codes',\n    downloadQRCode: 'Download QR Code',\n    publicScanUrl: 'Public Scan URL',\n    downloadAll: 'Download All',\n    generatingQRCodes: 'Generating QR codes...',\n    noItemsFound: 'No items found',\n    scanQRCodes: 'Scan QR codes to check items in/out instantly',\n    \n    // Maintenance\n    maintenanceManagement: 'Maintenance Management',\n    itemsInMaintenance: 'Items in Maintenance',\n    sendToMaintenance: 'Send to Maintenance',\n    returnFromMaintenance: 'Return from Maintenance',\n    itemsInMaintenanceSubtitle: 'Items currently undergoing maintenance or repair',\n    itemsInMaintenanceCount: 'item(s) in maintenance',\n    noItemsInMaintenance: 'No items in maintenance',\n    allEquipmentWorking: 'All equipment is in working order',\n    searchMaintenanceItems: 'Search maintenance items...',\n    \n    // Inventory Page\n    equipmentCategories: 'Equipment Categories',\n    browseInventory: 'Browse our complete inventory organized by equipment type',\n    searchCategories: 'Search categories...',\n    tableView: 'Table View',\n    cardView: 'Card View',\n    addCategory: 'Add Category',\n    allInUse: 'All In Use',\n    type: 'Type',\n    totalItems: 'Total Items',\n    items: 'items',\n    scanItem: 'Scan Item',\n    searchItems: 'Search items...',\n    noItems: 'No items',\n    location: 'Location',\n    name: 'Name',\n    \n    // Reservations Page\n    equipmentReservations: 'Equipment Reservations',\n    requestManageReservations: 'Request and manage equipment reservations professionally',\n    backToInventory: 'Back to Inventory',\n    all: 'All',\n    noReservationsFound: 'No reservations found',\n    tryChangingFilter: 'Try changing the filter',\n    createFirstReservation: 'Create your first reservation request',\n    start: 'Start',\n    return: 'Return',\n    requested: 'Requested',\n    responded: 'Responded',\n    approve: 'Approve',\n    decline: 'Decline',\n    markReturned: 'Mark Returned',\n    \n    // User Management\n    createManageUsers: 'Create and manage user accounts for your team',\n    totalUsers: 'Total Users',\n    addNewUser: 'Add New User',\n    fullName: 'Full Name',\n    email: 'Email',\n    department: 'Department',\n    role: 'Role',\n    user: 'User',\n    admin: 'Admin',\n    creating: 'Creating...',\n    createUser: 'Create User',\n    areYouSureDeleteUser: 'Are you sure you want to delete user',\n    \n    // Maintenance Additional\n    maintenance_title: 'Maintenance Management',\n    maintenance_subtitle: 'Items currently undergoing maintenance or repair',\n    item_count_maintenance: 'item(s) in maintenance',\n    no_items_in_maintenance: 'No items in maintenance',\n    all_equipment_in_order: 'All equipment is in working order',\n    \n    // Additional Common\n    checkout: 'Check Out',\n    checkin: 'Check In',\n    reserve: 'Reserve',\n  },\n  ar: {\n    // Header\n    categories: 'Ø§Ù„ÙØ¦Ø§Øª',\n    allItems: 'Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¹Ù†Ø§ØµØ±',\n    menu: 'Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©',\n    navigation: 'Ø§Ù„ØªÙ†Ù‚Ù„',\n    language: 'Ø§Ù„Ù„ØºØ©',\n    inventory_manager: 'Ù…Ø¯ÙŠØ± Ø§Ù„Ù…Ø®Ø²ÙˆÙ†',\n    inventory: 'Ø§Ù„Ù…Ø®Ø²ÙˆÙ†',\n    reservations: 'Ø§Ù„Ø­Ø¬ÙˆØ²Ø§Øª',\n    activityLog: 'Ø³Ø¬Ù„ Ø§Ù„Ù†Ø´Ø§Ø·',\n    qrCodes: 'Ø±Ù…ÙˆØ² QR',\n    maintenance: 'Ø§Ù„ØµÙŠØ§Ù†Ø©',\n    userManagement: 'Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†',\n    logout: 'ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬',\n\n    // Notifications\n    notifications: 'Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª',\n    markAllRead: 'ÙˆØ¶Ø¹ Ø¹Ù„Ø§Ù…Ø© Ù…Ù‚Ø±ÙˆØ¡ Ø¹Ù„Ù‰ Ø§Ù„ÙƒÙ„',\n    noNotifications: 'Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¥Ø´Ø¹Ø§Ø±Ø§Øª',\n\n    // Login\n    login: 'ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„',\n    username: 'Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…',\n    password: 'ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±',\n    signIn: 'Ø¯Ø®ÙˆÙ„',\n\n    // Items\n    addItem: 'Ø¥Ø¶Ø§ÙØ© Ø¹Ù†ØµØ±',\n    editItem: 'ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ø¹Ù†ØµØ±',\n    deleteItem: 'Ø­Ø°Ù Ø§Ù„Ø¹Ù†ØµØ±',\n    productName: 'Ø§Ø³Ù… Ø§Ù„Ù…Ù†ØªØ¬',\n    barcode: 'Ø§Ù„Ø¨Ø§Ø±ÙƒÙˆØ¯',\n    status: 'Ø§Ù„Ø­Ø§Ù„Ø©',\n    category: 'Ø§Ù„ÙØ¦Ø©',\n    available: 'Ù…ØªØ§Ø­',\n    inUse: 'Ù‚ÙŠØ¯ Ø§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù…',\n    reserved: 'Ù…Ø­Ø¬ÙˆØ²',\n    disabled: 'Ù…Ø¹Ø·Ù„',\n\n    // Reservations\n    newReservation: 'Ø­Ø¬Ø² Ø¬Ø¯ÙŠØ¯',\n    startDate: 'ØªØ§Ø±ÙŠØ® Ø§Ù„Ø¨Ø¯Ø¡',\n    returnDate: 'ØªØ§Ø±ÙŠØ® Ø§Ù„Ø¥Ø±Ø¬Ø§Ø¹',\n    notes: 'Ù…Ù„Ø§Ø­Ø¸Ø§Øª',\n    approve: 'Ù…ÙˆØ§ÙÙ‚Ø©',\n    reject: 'Ø±ÙØ¶',\n    pending: 'Ù‚ÙŠØ¯ Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø±',\n    approved: 'Ù…ÙˆØ§ÙÙ‚ Ø¹Ù„ÙŠÙ‡',\n    rejected: 'Ù…Ø±ÙÙˆØ¶',\n    completed: 'Ù…ÙƒØªÙ…Ù„',\n\n    // Common\n    save: 'Ø­ÙØ¸',\n    cancel: 'Ø¥Ù„ØºØ§Ø¡',\n    delete: 'Ø­Ø°Ù',\n    edit: 'ØªØ¹Ø¯ÙŠÙ„',\n    close: 'Ø¥ØºÙ„Ø§Ù‚',\n    search: 'Ø¨Ø­Ø«',\n    actions: 'Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª',\n    loading: 'Ø¬Ø§Ø± Ø§Ù„ØªØ­Ù…ÙŠÙ„...',\n    error: 'Ø®Ø·Ø£',\n\n    // User Management\n    user_management: 'Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†',\n    users: 'Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙˆÙ†',\n    add_user: 'Ø¥Ø¶Ø§ÙØ© Ù…Ø³ØªØ®Ø¯Ù…',\n    activity_logs: 'Ø³Ø¬Ù„Ø§Øª Ø§Ù„Ù†Ø´Ø§Ø·',\n    \n    // Activity Logs\n    activityLogHistory: 'Ø³Ø¬Ù„ Ø§Ù„Ù†Ø´Ø§Ø· ÙˆØ§Ù„ØªØ§Ø±ÙŠØ®',\n    completeAuditTrail: 'Ø³Ø¬Ù„ ØªØ¯Ù‚ÙŠÙ‚ ÙƒØ§Ù…Ù„ Ù„Ø¬Ù…ÙŠØ¹ Ø£Ù†Ø´Ø·Ø© Ø§Ù„Ù…Ø®Ø²ÙˆÙ†',\n    editHistory: 'Ø³Ø¬Ù„ Ø§Ù„ØªØ¹Ø¯ÙŠÙ„Ø§Øª',\n    itemEditHistory: 'Ø³Ø¬Ù„ ØªØ¹Ø¯ÙŠÙ„Ø§Øª Ø§Ù„Ø¹Ù†ØµØ±',\n    noEditHistory: 'Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø³Ø¬Ù„ ØªØ¹Ø¯ÙŠÙ„Ø§Øª',\n    loadingActivityLogs: 'Ø¬Ø§Ø± ØªØ­Ù…ÙŠÙ„ Ø³Ø¬Ù„Ø§Øª Ø§Ù„Ù†Ø´Ø§Ø·...',\n    errorLoadingLogs: 'Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø³Ø¬Ù„Ø§Øª Ø§Ù„Ù†Ø´Ø§Ø·. ÙŠØ±Ø¬Ù‰ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù…Ø±Ø© Ø£Ø®Ø±Ù‰.',\n    noActivityLogs: 'Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø³Ø¬Ù„Ø§Øª Ù†Ø´Ø§Ø·.',\n    by: 'Ø¨ÙˆØ§Ø³Ø·Ø©',\n    \n    // QR Codes\n    qrCodeGeneration: 'Ø¥Ù†Ø´Ø§Ø¡ Ø±Ù…Ø² Ø§Ù„Ø§Ø³ØªØ¬Ø§Ø¨Ø© Ø§Ù„Ø³Ø±ÙŠØ¹Ø©',\n    generateAllQRCodes: 'Ø¥Ù†Ø´Ø§Ø¡ Ø¬Ù…ÙŠØ¹ Ø±Ù…ÙˆØ² QR',\n    downloadQRCode: 'ØªØ­Ù…ÙŠÙ„ Ø±Ù…Ø² QR',\n    publicScanUrl: 'Ø±Ø§Ø¨Ø· Ø§Ù„Ù…Ø³Ø­ Ø§Ù„Ø¹Ø§Ù…',\n    downloadAll: 'ØªØ­Ù…ÙŠÙ„ Ø§Ù„ÙƒÙ„',\n    generatingQRCodes: 'Ø¬Ø§Ø± Ø¥Ù†Ø´Ø§Ø¡ Ø±Ù…ÙˆØ² QR...',\n    noItemsFound: 'Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø¹Ù†Ø§ØµØ±',\n    scanQRCodes: 'Ø§Ù…Ø³Ø­ Ø±Ù…ÙˆØ² QR Ù„ØªØ³Ø¬ÙŠÙ„ Ø¯Ø®ÙˆÙ„/Ø®Ø±ÙˆØ¬ Ø§Ù„Ø¹Ù†Ø§ØµØ± ÙÙˆØ±Ø§Ù‹',\n    \n    // Maintenance\n    maintenanceManagement: 'Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„ØµÙŠØ§Ù†Ø©',\n    itemsInMaintenance: 'Ø§Ù„Ø¹Ù†Ø§ØµØ± Ù‚ÙŠØ¯ Ø§Ù„ØµÙŠØ§Ù†Ø©',\n    sendToMaintenance: 'Ø¥Ø±Ø³Ø§Ù„ Ù„Ù„ØµÙŠØ§Ù†Ø©',\n    returnFromMaintenance: 'Ø§Ù„Ø¹ÙˆØ¯Ø© Ù…Ù† Ø§Ù„ØµÙŠØ§Ù†Ø©',\n    itemsInMaintenanceSubtitle: 'Ø§Ù„Ø¹Ù†Ø§ØµØ± Ø§Ù„ØªÙŠ ØªØ®Ø¶Ø¹ Ø­Ø§Ù„ÙŠØ§Ù‹ Ù„Ù„ØµÙŠØ§Ù†Ø© Ø£Ùˆ Ø§Ù„Ø¥ØµÙ„Ø§Ø­',\n    itemsInMaintenanceCount: 'Ø¹Ù†ØµØ± Ù‚ÙŠØ¯ Ø§Ù„ØµÙŠØ§Ù†Ø©',\n    noItemsInMaintenance: 'Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¹Ù†Ø§ØµØ± Ù‚ÙŠØ¯ Ø§Ù„ØµÙŠØ§Ù†Ø©',\n    allEquipmentWorking: 'Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ø¹Ø¯Ø§Øª ØªØ¹Ù…Ù„ Ø¨Ø´ÙƒÙ„ ØµØ­ÙŠØ­',\n    searchMaintenanceItems: 'Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† Ø¹Ù†Ø§ØµØ± Ø§Ù„ØµÙŠØ§Ù†Ø©...',\n    \n    // Inventory Page\n    equipmentCategories: 'ÙØ¦Ø§Øª Ø§Ù„Ù…Ø¹Ø¯Ø§Øª',\n    browseInventory: 'ØªØµÙØ­ Ø§Ù„Ù…Ø®Ø²ÙˆÙ† Ø§Ù„ÙƒØ§Ù…Ù„ Ù…Ù†Ø¸Ù… Ø­Ø³Ø¨ Ù†ÙˆØ¹ Ø§Ù„Ù…Ø¹Ø¯Ø§Øª',\n    searchCategories: 'Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† Ø§Ù„ÙØ¦Ø§Øª...',\n    tableView: 'Ø¹Ø±Ø¶ Ø§Ù„Ø¬Ø¯ÙˆÙ„',\n    cardView: 'Ø¹Ø±Ø¶ Ø§Ù„Ø¨Ø·Ø§Ù‚Ø§Øª',\n    addCategory: 'Ø¥Ø¶Ø§ÙØ© ÙØ¦Ø©',\n    allInUse: 'Ø§Ù„ÙƒÙ„ Ù‚ÙŠØ¯ Ø§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù…',\n    type: 'Ø§Ù„Ù†ÙˆØ¹',\n    totalItems: 'Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø¹Ù†Ø§ØµØ±',\n    items: 'Ø¹Ù†Ø§ØµØ±',\n    scanItem: 'Ù…Ø³Ø­ Ø§Ù„Ø¹Ù†ØµØ±',\n    searchItems: 'Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† Ø§Ù„Ø¹Ù†Ø§ØµØ±...',\n    noItems: 'Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¹Ù†Ø§ØµØ±',\n    location: 'Ø§Ù„Ù…ÙˆÙ‚Ø¹',\n    name: 'Ø§Ù„Ø§Ø³Ù…',\n    \n    // Reservations Page\n    equipmentReservations: 'Ø­Ø¬ÙˆØ²Ø§Øª Ø§Ù„Ù…Ø¹Ø¯Ø§Øª',\n    requestManageReservations: 'Ø·Ù„Ø¨ ÙˆØ¥Ø¯Ø§Ø±Ø© Ø­Ø¬ÙˆØ²Ø§Øª Ø§Ù„Ù…Ø¹Ø¯Ø§Øª Ø¨Ø´ÙƒÙ„ Ø§Ø­ØªØ±Ø§ÙÙŠ',\n    backToInventory: 'Ø§Ù„Ø¹ÙˆØ¯Ø© Ø¥Ù„Ù‰ Ø§Ù„Ù…Ø®Ø²ÙˆÙ†',\n    all: 'Ø§Ù„ÙƒÙ„',\n    noReservationsFound: 'Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø­Ø¬ÙˆØ²Ø§Øª',\n    tryChangingFilter: 'Ø­Ø§ÙˆÙ„ ØªØºÙŠÙŠØ± Ø§Ù„ÙÙ„ØªØ±',\n    createFirstReservation: 'Ø¥Ù†Ø´Ø§Ø¡ Ø·Ù„Ø¨ Ø§Ù„Ø­Ø¬Ø² Ø§Ù„Ø£ÙˆÙ„',\n    start: 'Ø§Ù„Ø¨Ø¯Ø¡',\n    return: 'Ø§Ù„Ø¥Ø±Ø¬Ø§Ø¹',\n    requested: 'Ù…Ø·Ù„ÙˆØ¨',\n    responded: 'ØªÙ…Øª Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø©',\n    approve: 'Ù…ÙˆØ§ÙÙ‚Ø©',\n    decline: 'Ø±ÙØ¶',\n    markReturned: 'ÙˆØ¶Ø¹ Ø¹Ù„Ø§Ù…Ø© ÙƒÙ…Ø±Ø¬Ø¹',\n    \n    // User Management\n    createManageUsers: 'Ø¥Ù†Ø´Ø§Ø¡ ÙˆØ¥Ø¯Ø§Ø±Ø© Ø­Ø³Ø§Ø¨Ø§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† Ù„ÙØ±ÙŠÙ‚Ùƒ',\n    totalUsers: 'Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†',\n    addNewUser: 'Ø¥Ø¶Ø§ÙØ© Ù…Ø³ØªØ®Ø¯Ù… Ø¬Ø¯ÙŠØ¯',\n    fullName: 'Ø§Ù„Ø§Ø³Ù… Ø§Ù„ÙƒØ§Ù…Ù„',\n    email: 'Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ',\n    department: 'Ø§Ù„Ù‚Ø³Ù…',\n    role: 'Ø§Ù„Ø¯ÙˆØ±',\n    user: 'Ù…Ø³ØªØ®Ø¯Ù…',\n    admin: 'Ù…Ø³Ø¤ÙˆÙ„',\n    creating: 'Ø¬Ø§Ø± Ø§Ù„Ø¥Ù†Ø´Ø§Ø¡...',\n    createUser: 'Ø¥Ù†Ø´Ø§Ø¡ Ù…Ø³ØªØ®Ø¯Ù…',\n    areYouSureDeleteUser: 'Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…',\n    \n    // Maintenance Additional\n    maintenance_title: 'Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„ØµÙŠØ§Ù†Ø©',\n    maintenance_subtitle: 'Ø§Ù„Ø¹Ù†Ø§ØµØ± Ø§Ù„ØªÙŠ ØªØ®Ø¶Ø¹ Ø­Ø§Ù„ÙŠØ§Ù‹ Ù„Ù„ØµÙŠØ§Ù†Ø© Ø£Ùˆ Ø§Ù„Ø¥ØµÙ„Ø§Ø­',\n    item_count_maintenance: 'Ø¹Ù†ØµØ± Ù‚ÙŠØ¯ Ø§Ù„ØµÙŠØ§Ù†Ø©',\n    no_items_in_maintenance: 'Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¹Ù†Ø§ØµØ± Ù‚ÙŠØ¯ Ø§Ù„ØµÙŠØ§Ù†Ø©',\n    all_equipment_in_order: 'Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ø¹Ø¯Ø§Øª ØªØ¹Ù…Ù„ Ø¨Ø´ÙƒÙ„ ØµØ­ÙŠØ­',\n    \n    // Additional Common\n    checkout: 'ØªØ³Ø¬ÙŠÙ„ Ø®Ø±ÙˆØ¬',\n    checkin: 'ØªØ³Ø¬ÙŠÙ„ Ø¯Ø®ÙˆÙ„',\n    reserve: 'Ø­Ø¬Ø²',\n  }\n};\n\nexport const useTranslation = (language: Language) => {\n  return (key: keyof typeof translations.en): string => {\n    return translations[language][key] || key;\n  };\n};","path":null,"size_bytes":11577,"size_tokens":null},"attached_assets/ItemFormDialog_1763670896224.tsx":{"content":"\nimport { useState, useEffect } from \"react\";\nimport { useQuery } from \"@tanstack/react-query\";\nimport { Dialog, DialogContent, DialogHeader, DialogTitle, DialogFooter } from \"@/components/ui/dialog\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { CATEGORIES, ITEM_STATUSES } from \"@shared/schema\";\nimport { api } from \"@/lib/api\";\nimport { Plus } from \"lucide-react\";\n\ninterface ItemFormDialogProps {\n  open: boolean;\n  onClose: () => void;\n  onSubmit: (item: any) => void;\n  item?: {\n    id?: string;\n    barcode: string;\n    productName: string;\n    productType: string;\n    status: string;\n    location?: string;\n    notes?: string;\n  };\n  mode: 'add' | 'edit';\n  userRole?: string;\n}\n\nexport default function ItemFormDialog({ open, onClose, onSubmit, item, mode, userRole }: ItemFormDialogProps) {\n  const [formData, setFormData] = useState({\n    barcode: item?.barcode || '',\n    productName: item?.productName || '',\n    productType: item?.productType || '',\n    status: item?.status || 'Available',\n    location: item?.location || '',\n    notes: item?.notes || ''\n  });\n\n  const [showAddType, setShowAddType] = useState(false);\n  const [newTypeName, setNewTypeName] = useState('');\n\n  // Fetch all categories to get custom subTypes\n  const { data: categories = [] } = useQuery({\n    queryKey: ['/api/categories'],\n    queryFn: () => api.categories.getAll(),\n    enabled: open\n  });\n\n  // Combine all subTypes from default and custom categories\n  const allSubTypes = [\n    ...Object.values(CATEGORIES).flatMap(cat => cat.subTypes),\n    ...categories\n      .filter(cat => cat.isCustom)\n      .flatMap(cat => cat.subTypes)\n  ];\n  const uniqueSubTypes = Array.from(new Set(allSubTypes)).sort();\n\n  useEffect(() => {\n    if (item) {\n      setFormData({\n        barcode: item.barcode,\n        productName: item.productName,\n        productType: item.productType,\n        status: item.status,\n        location: item.location || '',\n        notes: item.notes || ''\n      });\n    } else {\n      setFormData({\n        barcode: '',\n        productName: '',\n        productType: '',\n        status: 'Available',\n        location: '',\n        notes: ''\n      });\n    }\n  }, [item, open]);\n\n  const handleSubmit = (e: React.FormEvent) => {\n    e.preventDefault();\n    onSubmit(formData);\n  };\n\n  const handleAddNewType = () => {\n    if (newTypeName.trim()) {\n      setFormData({ ...formData, productType: newTypeName.trim() });\n      setNewTypeName('');\n      setShowAddType(false);\n    }\n  };\n\n  return (\n    <Dialog open={open} onOpenChange={onClose}>\n      <DialogContent className=\"max-w-2xl\" data-testid={`dialog-${mode}-item`}>\n        <DialogHeader>\n          <DialogTitle>{mode === 'add' ? 'Add New Item' : 'Edit Item'}</DialogTitle>\n        </DialogHeader>\n        <form onSubmit={handleSubmit} className=\"space-y-4\">\n          <div className=\"grid grid-cols-2 gap-4\">\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"barcode\">Barcode *</Label>\n              <Input\n                id=\"barcode\"\n                value={formData.barcode}\n                onChange={(e) => setFormData({ ...formData, barcode: e.target.value })}\n                placeholder=\"e.g., CAM-001-2024\"\n                required\n                data-testid=\"input-barcode\"\n              />\n            </div>\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"productName\">Product Name *</Label>\n              <Input\n                id=\"productName\"\n                value={formData.productName}\n                onChange={(e) => setFormData({ ...formData, productName: e.target.value })}\n                placeholder=\"e.g., Canon EOS R5\"\n                required\n                data-testid=\"input-product-name\"\n              />\n            </div>\n          </div>\n\n          <div className=\"grid grid-cols-2 gap-4\">\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"productType\">Product Type *</Label>\n              {!showAddType ? (\n                <div className=\"space-y-2\">\n                  <Select\n                    value={formData.productType}\n                    onValueChange={(value) => {\n                      if (value === '__add_new__') {\n                        setShowAddType(true);\n                      } else {\n                        setFormData({ ...formData, productType: value });\n                      }\n                    }}\n                  >\n                    <SelectTrigger data-testid=\"select-product-type\">\n                      <SelectValue placeholder=\"Select type\" />\n                    </SelectTrigger>\n                    <SelectContent>\n                      {uniqueSubTypes.map((type) => (\n                        <SelectItem key={type} value={type}>\n                          {type}\n                        </SelectItem>\n                      ))}\n                      {userRole === 'admin' && (\n                        <SelectItem value=\"__add_new__\" className=\"text-blue-600 font-medium\">\n                          <div className=\"flex items-center\">\n                            <Plus className=\"w-4 h-4 mr-2\" />\n                            Add New Type\n                          </div>\n                        </SelectItem>\n                      )}\n                    </SelectContent>\n                  </Select>\n                </div>\n              ) : (\n                <div className=\"flex gap-2\">\n                  <Input\n                    value={newTypeName}\n                    onChange={(e) => setNewTypeName(e.target.value)}\n                    placeholder=\"Enter new product type\"\n                    onKeyDown={(e) => {\n                      if (e.key === 'Enter') {\n                        e.preventDefault();\n                        handleAddNewType();\n                      }\n                    }}\n                    autoFocus\n                  />\n                  <Button\n                    type=\"button\"\n                    onClick={handleAddNewType}\n                    disabled={!newTypeName.trim()}\n                    size=\"sm\"\n                  >\n                    Add\n                  </Button>\n                  <Button\n                    type=\"button\"\n                    variant=\"outline\"\n                    onClick={() => {\n                      setShowAddType(false);\n                      setNewTypeName('');\n                    }}\n                    size=\"sm\"\n                  >\n                    Cancel\n                  </Button>\n                </div>\n              )}\n            </div>\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"status\">Status *</Label>\n              <Select\n                value={formData.status}\n                onValueChange={(value) => setFormData({ ...formData, status: value })}\n              >\n                <SelectTrigger data-testid=\"select-status\">\n                  <SelectValue placeholder=\"Select status\" />\n                </SelectTrigger>\n                <SelectContent>\n                  {ITEM_STATUSES.map((status) => (\n                    <SelectItem key={status} value={status}>\n                      {status}\n                    </SelectItem>\n                  ))}\n                </SelectContent>\n              </Select>\n            </div>\n          </div>\n\n          <div className=\"space-y-2\">\n            <Label htmlFor=\"location\">Location</Label>\n            <Input\n              id=\"location\"\n              value={formData.location}\n              onChange={(e) => setFormData({ ...formData, location: e.target.value })}\n              placeholder=\"e.g., Studio A - Shelf 2\"\n              data-testid=\"input-location\"\n            />\n          </div>\n\n          <div className=\"space-y-2\">\n            <Label htmlFor=\"notes\">Notes</Label>\n            <Textarea\n              id=\"notes\"\n              value={formData.notes}\n              onChange={(e) => setFormData({ ...formData, notes: e.target.value })}\n              placeholder=\"Additional notes about the item\"\n              rows={3}\n              data-testid=\"textarea-notes\"\n            />\n          </div>\n\n          <DialogFooter>\n            <Button type=\"button\" variant=\"outline\" onClick={onClose} data-testid=\"button-cancel\">\n              Cancel\n            </Button>\n            <Button \n              type=\"submit\" \n              className=\"bg-gradient-to-r from-[#667eea] to-[#764ba2]\"\n              data-testid=\"button-submit\"\n            >\n              {mode === 'add' ? 'Add Item' : 'Save Changes'}\n            </Button>\n          </DialogFooter>\n        </form>\n      </DialogContent>\n    </Dialog>\n  );\n}\n","path":null,"size_bytes":8838,"size_tokens":null},"client/src/components/LanguageToggle.tsx":{"content":"\nimport { Button } from \"@/components/ui/button\";\nimport { Globe } from \"lucide-react\";\nimport {\n  DropdownMenu,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuTrigger,\n} from \"@/components/ui/dropdown-menu\";\nimport type { Language } from \"@/lib/translations\";\n\ninterface LanguageToggleProps {\n  currentLanguage: Language;\n  onLanguageChange: (language: Language) => void;\n}\n\nexport default function LanguageToggle({ currentLanguage, onLanguageChange }: LanguageToggleProps) {\n  return (\n    <DropdownMenu>\n      <DropdownMenuTrigger asChild>\n        <Button variant=\"ghost\" size=\"icon\" className=\"text-white hover:bg-white/20\">\n          <Globe className=\"h-5 w-5\" />\n        </Button>\n      </DropdownMenuTrigger>\n      <DropdownMenuContent align=\"end\">\n        <DropdownMenuItem \n          onClick={() => onLanguageChange('en')}\n          className={currentLanguage === 'en' ? 'bg-accent' : ''}\n        >\n          English\n        </DropdownMenuItem>\n        <DropdownMenuItem \n          onClick={() => onLanguageChange('ar')}\n          className={currentLanguage === 'ar' ? 'bg-accent' : ''}\n        >\n          Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©\n        </DropdownMenuItem>\n      </DropdownMenuContent>\n    </DropdownMenu>\n  );\n}\n","path":null,"size_bytes":1225,"size_tokens":null},"attached_assets/separator_1763671095565.tsx":{"content":"import * as React from \"react\"\nimport * as SeparatorPrimitive from \"@radix-ui/react-separator\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Separator = React.forwardRef<\n  React.ElementRef<typeof SeparatorPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof SeparatorPrimitive.Root>\n>(\n  (\n    { className, orientation = \"horizontal\", decorative = true, ...props },\n    ref\n  ) => (\n    <SeparatorPrimitive.Root\n      ref={ref}\n      decorative={decorative}\n      orientation={orientation}\n      className={cn(\n        \"shrink-0 bg-border\",\n        orientation === \"horizontal\" ? \"h-[1px] w-full\" : \"h-full w-[1px]\",\n        className\n      )}\n      {...props}\n    />\n  )\n)\nSeparator.displayName = SeparatorPrimitive.Root.displayName\n\nexport { Separator }\n","path":null,"size_bytes":756,"size_tokens":null},"client/src/hooks/use-toast.ts":{"content":"import * as React from \"react\"\n\nimport type {\n  ToastActionElement,\n  ToastProps,\n} from \"@/components/ui/toast\"\n\nconst TOAST_LIMIT = 1\nconst TOAST_REMOVE_DELAY = 1000000\n\ntype ToasterToast = ToastProps & {\n  id: string\n  title?: React.ReactNode\n  description?: React.ReactNode\n  action?: ToastActionElement\n}\n\nconst actionTypes = {\n  ADD_TOAST: \"ADD_TOAST\",\n  UPDATE_TOAST: \"UPDATE_TOAST\",\n  DISMISS_TOAST: \"DISMISS_TOAST\",\n  REMOVE_TOAST: \"REMOVE_TOAST\",\n} as const\n\nlet count = 0\n\nfunction genId() {\n  count = (count + 1) % Number.MAX_SAFE_INTEGER\n  return count.toString()\n}\n\ntype ActionType = typeof actionTypes\n\ntype Action =\n  | {\n      type: ActionType[\"ADD_TOAST\"]\n      toast: ToasterToast\n    }\n  | {\n      type: ActionType[\"UPDATE_TOAST\"]\n      toast: Partial<ToasterToast>\n    }\n  | {\n      type: ActionType[\"DISMISS_TOAST\"]\n      toastId?: ToasterToast[\"id\"]\n    }\n  | {\n      type: ActionType[\"REMOVE_TOAST\"]\n      toastId?: ToasterToast[\"id\"]\n    }\n\ninterface State {\n  toasts: ToasterToast[]\n}\n\nconst toastTimeouts = new Map<string, ReturnType<typeof setTimeout>>()\n\nconst addToRemoveQueue = (toastId: string) => {\n  if (toastTimeouts.has(toastId)) {\n    return\n  }\n\n  const timeout = setTimeout(() => {\n    toastTimeouts.delete(toastId)\n    dispatch({\n      type: \"REMOVE_TOAST\",\n      toastId: toastId,\n    })\n  }, TOAST_REMOVE_DELAY)\n\n  toastTimeouts.set(toastId, timeout)\n}\n\nexport const reducer = (state: State, action: Action): State => {\n  switch (action.type) {\n    case \"ADD_TOAST\":\n      return {\n        ...state,\n        toasts: [action.toast, ...state.toasts].slice(0, TOAST_LIMIT),\n      }\n\n    case \"UPDATE_TOAST\":\n      return {\n        ...state,\n        toasts: state.toasts.map((t) =>\n          t.id === action.toast.id ? { ...t, ...action.toast } : t\n        ),\n      }\n\n    case \"DISMISS_TOAST\": {\n      const { toastId } = action\n\n      // ! Side effects ! - This could be extracted into a dismissToast() action,\n      // but I'll keep it here for simplicity\n      if (toastId) {\n        addToRemoveQueue(toastId)\n      } else {\n        state.toasts.forEach((toast) => {\n          addToRemoveQueue(toast.id)\n        })\n      }\n\n      return {\n        ...state,\n        toasts: state.toasts.map((t) =>\n          t.id === toastId || toastId === undefined\n            ? {\n                ...t,\n                open: false,\n              }\n            : t\n        ),\n      }\n    }\n    case \"REMOVE_TOAST\":\n      if (action.toastId === undefined) {\n        return {\n          ...state,\n          toasts: [],\n        }\n      }\n      return {\n        ...state,\n        toasts: state.toasts.filter((t) => t.id !== action.toastId),\n      }\n  }\n}\n\nconst listeners: Array<(state: State) => void> = []\n\nlet memoryState: State = { toasts: [] }\n\nfunction dispatch(action: Action) {\n  memoryState = reducer(memoryState, action)\n  listeners.forEach((listener) => {\n    listener(memoryState)\n  })\n}\n\ntype Toast = Omit<ToasterToast, \"id\">\n\nfunction toast({ ...props }: Toast) {\n  const id = genId()\n\n  const update = (props: ToasterToast) =>\n    dispatch({\n      type: \"UPDATE_TOAST\",\n      toast: { ...props, id },\n    })\n  const dismiss = () => dispatch({ type: \"DISMISS_TOAST\", toastId: id })\n\n  dispatch({\n    type: \"ADD_TOAST\",\n    toast: {\n      ...props,\n      id,\n      open: true,\n      onOpenChange: (open) => {\n        if (!open) dismiss()\n      },\n    },\n  })\n\n  return {\n    id: id,\n    dismiss,\n    update,\n  }\n}\n\nfunction useToast() {\n  const [state, setState] = React.useState<State>(memoryState)\n\n  React.useEffect(() => {\n    listeners.push(setState)\n    return () => {\n      const index = listeners.indexOf(setState)\n      if (index > -1) {\n        listeners.splice(index, 1)\n      }\n    }\n  }, [state])\n\n  return {\n    ...state,\n    toast,\n    dismiss: (toastId?: string) => dispatch({ type: \"DISMISS_TOAST\", toastId }),\n  }\n}\n\nexport { useToast, toast }\n","path":null,"size_bytes":3895,"size_tokens":null},"client/src/components/ui/form.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as LabelPrimitive from \"@radix-ui/react-label\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport {\n  Controller,\n  FormProvider,\n  useFormContext,\n  type ControllerProps,\n  type FieldPath,\n  type FieldValues,\n} from \"react-hook-form\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Label } from \"@/components/ui/label\"\n\nconst Form = FormProvider\n\ntype FormFieldContextValue<\n  TFieldValues extends FieldValues = FieldValues,\n  TName extends FieldPath<TFieldValues> = FieldPath<TFieldValues>\n> = {\n  name: TName\n}\n\nconst FormFieldContext = React.createContext<FormFieldContextValue>(\n  {} as FormFieldContextValue\n)\n\nconst FormField = <\n  TFieldValues extends FieldValues = FieldValues,\n  TName extends FieldPath<TFieldValues> = FieldPath<TFieldValues>\n>({\n  ...props\n}: ControllerProps<TFieldValues, TName>) => {\n  return (\n    <FormFieldContext.Provider value={{ name: props.name }}>\n      <Controller {...props} />\n    </FormFieldContext.Provider>\n  )\n}\n\nconst useFormField = () => {\n  const fieldContext = React.useContext(FormFieldContext)\n  const itemContext = React.useContext(FormItemContext)\n  const { getFieldState, formState } = useFormContext()\n\n  const fieldState = getFieldState(fieldContext.name, formState)\n\n  if (!fieldContext) {\n    throw new Error(\"useFormField should be used within <FormField>\")\n  }\n\n  const { id } = itemContext\n\n  return {\n    id,\n    name: fieldContext.name,\n    formItemId: `${id}-form-item`,\n    formDescriptionId: `${id}-form-item-description`,\n    formMessageId: `${id}-form-item-message`,\n    ...fieldState,\n  }\n}\n\ntype FormItemContextValue = {\n  id: string\n}\n\nconst FormItemContext = React.createContext<FormItemContextValue>(\n  {} as FormItemContextValue\n)\n\nconst FormItem = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => {\n  const id = React.useId()\n\n  return (\n    <FormItemContext.Provider value={{ id }}>\n      <div ref={ref} className={cn(\"space-y-2\", className)} {...props} />\n    </FormItemContext.Provider>\n  )\n})\nFormItem.displayName = \"FormItem\"\n\nconst FormLabel = React.forwardRef<\n  React.ElementRef<typeof LabelPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof LabelPrimitive.Root>\n>(({ className, ...props }, ref) => {\n  const { error, formItemId } = useFormField()\n\n  return (\n    <Label\n      ref={ref}\n      className={cn(error && \"text-destructive\", className)}\n      htmlFor={formItemId}\n      {...props}\n    />\n  )\n})\nFormLabel.displayName = \"FormLabel\"\n\nconst FormControl = React.forwardRef<\n  React.ElementRef<typeof Slot>,\n  React.ComponentPropsWithoutRef<typeof Slot>\n>(({ ...props }, ref) => {\n  const { error, formItemId, formDescriptionId, formMessageId } = useFormField()\n\n  return (\n    <Slot\n      ref={ref}\n      id={formItemId}\n      aria-describedby={\n        !error\n          ? `${formDescriptionId}`\n          : `${formDescriptionId} ${formMessageId}`\n      }\n      aria-invalid={!!error}\n      {...props}\n    />\n  )\n})\nFormControl.displayName = \"FormControl\"\n\nconst FormDescription = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, ...props }, ref) => {\n  const { formDescriptionId } = useFormField()\n\n  return (\n    <p\n      ref={ref}\n      id={formDescriptionId}\n      className={cn(\"text-sm text-muted-foreground\", className)}\n      {...props}\n    />\n  )\n})\nFormDescription.displayName = \"FormDescription\"\n\nconst FormMessage = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, children, ...props }, ref) => {\n  const { error, formMessageId } = useFormField()\n  const body = error ? String(error?.message ?? \"\") : children\n\n  if (!body) {\n    return null\n  }\n\n  return (\n    <p\n      ref={ref}\n      id={formMessageId}\n      className={cn(\"text-sm font-medium text-destructive\", className)}\n      {...props}\n    >\n      {body}\n    </p>\n  )\n})\nFormMessage.displayName = \"FormMessage\"\n\nexport {\n  useFormField,\n  Form,\n  FormItem,\n  FormLabel,\n  FormControl,\n  FormDescription,\n  FormMessage,\n  FormField,\n}\n","path":null,"size_bytes":4120,"size_tokens":null},"attached_assets/not-found_1763670809219.tsx":{"content":"import { Card, CardContent } from \"@/components/ui/card\";\nimport { AlertCircle } from \"lucide-react\";\n\nexport default function NotFound() {\n  return (\n    <div className=\"min-h-screen w-full flex items-center justify-center bg-gray-50\">\n      <Card className=\"w-full max-w-md mx-4\">\n        <CardContent className=\"pt-6\">\n          <div className=\"flex mb-4 gap-2\">\n            <AlertCircle className=\"h-8 w-8 text-red-500\" />\n            <h1 className=\"text-2xl font-bold text-gray-900\">404 Page Not Found</h1>\n          </div>\n\n          <p className=\"mt-4 text-sm text-gray-600\">\n            Did you forget to add the page to the router?\n          </p>\n        </CardContent>\n      </Card>\n    </div>\n  );\n}\n","path":null,"size_bytes":711,"size_tokens":null},"attached_assets/popover_1763670995700.tsx":{"content":"import * as React from \"react\"\nimport * as PopoverPrimitive from \"@radix-ui/react-popover\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Popover = PopoverPrimitive.Root\n\nconst PopoverTrigger = PopoverPrimitive.Trigger\n\nconst PopoverContent = React.forwardRef<\n  React.ElementRef<typeof PopoverPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof PopoverPrimitive.Content>\n>(({ className, align = \"center\", sideOffset = 4, ...props }, ref) => (\n  <PopoverPrimitive.Portal>\n    <PopoverPrimitive.Content\n      ref={ref}\n      align={align}\n      sideOffset={sideOffset}\n      className={cn(\n        \"z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-popover-content-transform-origin]\",\n        className\n      )}\n      {...props}\n    />\n  </PopoverPrimitive.Portal>\n))\nPopoverContent.displayName = PopoverPrimitive.Content.displayName\n\nexport { Popover, PopoverTrigger, PopoverContent }\n","path":null,"size_bytes":1280,"size_tokens":null},"attached_assets/scroll-area_1763671095564.tsx":{"content":"import * as React from \"react\"\nimport * as ScrollAreaPrimitive from \"@radix-ui/react-scroll-area\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ScrollArea = React.forwardRef<\n  React.ElementRef<typeof ScrollAreaPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ScrollAreaPrimitive.Root>\n>(({ className, children, ...props }, ref) => (\n  <ScrollAreaPrimitive.Root\n    ref={ref}\n    className={cn(\"relative overflow-hidden\", className)}\n    {...props}\n  >\n    <ScrollAreaPrimitive.Viewport className=\"h-full w-full rounded-[inherit]\">\n      {children}\n    </ScrollAreaPrimitive.Viewport>\n    <ScrollBar />\n    <ScrollAreaPrimitive.Corner />\n  </ScrollAreaPrimitive.Root>\n))\nScrollArea.displayName = ScrollAreaPrimitive.Root.displayName\n\nconst ScrollBar = React.forwardRef<\n  React.ElementRef<typeof ScrollAreaPrimitive.ScrollAreaScrollbar>,\n  React.ComponentPropsWithoutRef<typeof ScrollAreaPrimitive.ScrollAreaScrollbar>\n>(({ className, orientation = \"vertical\", ...props }, ref) => (\n  <ScrollAreaPrimitive.ScrollAreaScrollbar\n    ref={ref}\n    orientation={orientation}\n    className={cn(\n      \"flex touch-none select-none transition-colors\",\n      orientation === \"vertical\" &&\n        \"h-full w-2.5 border-l border-l-transparent p-[1px]\",\n      orientation === \"horizontal\" &&\n        \"h-2.5 flex-col border-t border-t-transparent p-[1px]\",\n      className\n    )}\n    {...props}\n  >\n    <ScrollAreaPrimitive.ScrollAreaThumb className=\"relative flex-1 rounded-full bg-border\" />\n  </ScrollAreaPrimitive.ScrollAreaScrollbar>\n))\nScrollBar.displayName = ScrollAreaPrimitive.ScrollAreaScrollbar.displayName\n\nexport { ScrollArea, ScrollBar }\n","path":null,"size_bytes":1642,"size_tokens":null},"client/src/components/CategoryCard.tsx":{"content":"import { Card } from \"@/components/ui/card\";\nimport { Badge } from \"@/components/ui/badge\";\n\ninterface CategoryCardProps {\n  name: string;\n  image: string;\n  totalCount: number;\n  availableCount: number;\n  subTypes: readonly string[];\n  onClick?: () => void;\n}\n\nexport default function CategoryCard({\n  name,\n  image,\n  totalCount,\n  availableCount,\n  subTypes,\n  onClick\n}: CategoryCardProps) {\n  return (\n    <Card \n      className=\"overflow-hidden cursor-pointer transition-all duration-300 hover:-translate-y-1 hover:shadow-xl\"\n      onClick={onClick}\n      data-testid={`card-category-${name.toLowerCase().replace(/\\s+/g, '-')}`}\n    >\n      <div \n        className=\"h-[180px] bg-cover bg-center relative\"\n        style={{ backgroundImage: `url(${image})` }}\n      >\n        <Badge \n          className=\"absolute top-3 right-3 bg-green-600 hover:bg-green-700\"\n          data-testid={`badge-available-${name.toLowerCase().replace(/\\s+/g, '-')}`}\n        >\n          {availableCount} Available\n        </Badge>\n      </div>\n      <div className=\"p-5\">\n        <h3 className=\"text-lg font-bold mb-2 text-card-foreground\" data-testid={`text-category-name-${name.toLowerCase().replace(/\\s+/g, '-')}`}>\n          {name}\n        </h3>\n        <p className=\"text-sm text-muted-foreground mb-3\" data-testid={`text-category-count-${name.toLowerCase().replace(/\\s+/g, '-')}`}>\n          {totalCount} total items\n        </p>\n        <div className=\"flex flex-wrap gap-1.5\">\n          {subTypes.map((subType, index) => (\n            <Badge \n              key={index} \n              variant=\"secondary\"\n              className=\"bg-gradient-to-r from-[#667eea] to-[#764ba2] text-white text-[11px] px-2 py-0.5\"\n              data-testid={`badge-subtype-${subType.toLowerCase().replace(/\\s+/g, '-')}`}\n            >\n              {subType}\n            </Badge>\n          ))}\n        </div>\n      </div>\n    </Card>\n  );\n}\n","path":null,"size_bytes":1911,"size_tokens":null},"client/src/components/LoginForm.tsx":{"content":"\nimport { useState } from \"react\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Alert, AlertDescription } from \"@/components/ui/alert\";\nimport { Eye, EyeOff, Lock, User, Package } from \"lucide-react\";\n\nconst styles = `\n  @keyframes subtleGlow {\n    0%, 100% { opacity: 0.4; }\n    50% { opacity: 0.8; }\n  }\n  \n  @keyframes shimmer {\n    0% { background-position: -1000px 0; }\n    100% { background-position: 1000px 0; }\n  }\n  \n  @keyframes fadeInUp {\n    from {\n      opacity: 0;\n      transform: translateY(20px);\n    }\n    to {\n      opacity: 1;\n      transform: translateY(0);\n    }\n  }\n  \n  .glow-effect {\n    animation: subtleGlow 4s ease-in-out infinite;\n  }\n  \n  .shimmer-effect {\n    background: linear-gradient(90deg, transparent, rgba(255,255,255,0.1), transparent);\n    background-size: 1000px 100%;\n    animation: shimmer 3s infinite;\n  }\n  \n  .fade-in-up {\n    animation: fadeInUp 0.8s ease-out forwards;\n  }\n  \n  .fade-in-up-delay-1 {\n    animation: fadeInUp 0.8s ease-out 0.1s forwards;\n    opacity: 0;\n  }\n  \n  .fade-in-up-delay-2 {\n    animation: fadeInUp 0.8s ease-out 0.2s forwards;\n    opacity: 0;\n  }\n`;\n\ninterface LoginFormProps {\n  onLogin: (username: string, password: string) => void;\n  isLoading?: boolean;\n  error?: string;\n}\n\nexport default function LoginForm({ onLogin, isLoading = false, error }: LoginFormProps) {\n  const [username, setUsername] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [showPassword, setShowPassword] = useState(false);\n\n  const handleSubmit = (e: React.FormEvent) => {\n    e.preventDefault();\n    onLogin(username, password);\n  };\n\n  return (\n    <>\n      <style>{styles}</style>\n      <div className=\"min-h-screen flex items-center justify-center p-5 relative overflow-hidden\" \n           style={{\n             background: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)'\n           }}>\n        {/* Lighting effects - optimized for performance */}\n        {/* Radial glow from center - light to dark */}\n        <div className=\"absolute inset-0 glow-effect\" style={{\n          background: 'radial-gradient(ellipse 1200px 800px at 50% 30%, rgba(255,255,255,0.15) 0%, rgba(255,255,255,0.05) 25%, transparent 70%)'\n        }}></div>\n        \n        {/* Vignette effect - darken edges */}\n        <div className=\"absolute inset-0\" style={{\n          background: 'radial-gradient(ellipse at 50% 50%, transparent 0%, rgba(0,0,0,0.3) 100%)'\n        }}></div>\n        \n        {/* Subtle top-to-bottom lighting */}\n        <div className=\"absolute inset-0 bg-gradient-to-b from-white/10 via-transparent to-black/20\"></div>\n        \n        {/* Shimmer overlay - very subtle */}\n        <div className=\"absolute inset-0 shimmer-effect pointer-events-none\"></div>\n\n        <Card className=\"w-full max-w-md relative z-10 shadow-2xl border-0 fade-in-up\">\n        <CardHeader className=\"text-center space-y-6 pb-8 fade-in-up-delay-1\">\n          <div className=\"flex justify-center\">\n            <div className=\"w-16 h-16 rounded-2xl bg-gradient-to-br from-[#667eea] to-[#764ba2] flex items-center justify-center text-white font-bold text-2xl shadow-lg transform hover:scale-105 transition-transform\">\n              <Package className=\"w-8 h-8\" />\n            </div>\n          </div>\n          <div>\n            <CardTitle className=\"text-3xl font-bold text-gray-900\">\n              Inventory System\n            </CardTitle>\n            <CardDescription className=\"text-base mt-2\">\n              Sign in to access your inventory dashboard\n            </CardDescription>\n          </div>\n        </CardHeader>\n        <CardContent className=\"space-y-6 fade-in-up-delay-2\">\n          <form onSubmit={handleSubmit} className=\"space-y-5\">\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"username\" className=\"text-sm font-semibold\">Username</Label>\n              <div className=\"relative\">\n                <User className=\"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-muted-foreground\" />\n                <Input\n                  id=\"username\"\n                  type=\"text\"\n                  value={username}\n                  onChange={(e) => setUsername(e.target.value)}\n                  placeholder=\"Enter your username\"\n                  className=\"pl-10 h-12 border-2 focus:border-[#667eea]\"\n                  required\n                  data-testid=\"input-username\"\n                />\n              </div>\n            </div>\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"password\" className=\"text-sm font-semibold\">Password</Label>\n              <div className=\"relative\">\n                <Lock className=\"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-muted-foreground\" />\n                <Input\n                  id=\"password\"\n                  type={showPassword ? \"text\" : \"password\"}\n                  value={password}\n                  onChange={(e) => setPassword(e.target.value)}\n                  placeholder=\"Enter your password\"\n                  className=\"pl-10 pr-10 h-12 border-2 focus:border-[#667eea]\"\n                  required\n                  data-testid=\"input-password\"\n                />\n                <button\n                  type=\"button\"\n                  onClick={() => setShowPassword(!showPassword)}\n                  className=\"absolute right-3 top-1/2 -translate-y-1/2 text-muted-foreground hover:text-foreground\"\n                >\n                  {showPassword ? <EyeOff className=\"w-5 h-5\" /> : <Eye className=\"w-5 h-5\" />}\n                </button>\n              </div>\n            </div>\n            {error && (\n              <Alert variant=\"destructive\" data-testid=\"alert-error\" className=\"border-2\">\n                <AlertDescription className=\"font-medium\">{error}</AlertDescription>\n              </Alert>\n            )}\n            <Button\n              type=\"submit\"\n              className=\"w-full h-12 bg-gradient-to-r from-[#667eea] to-[#764ba2] text-base font-semibold shadow-lg hover:shadow-xl transition-all\"\n              disabled={isLoading}\n              data-testid=\"button-login\"\n            >\n              {isLoading ? (\n                <div className=\"flex items-center gap-2\">\n                  <div className=\"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin\"></div>\n                  Signing in...\n                </div>\n              ) : (\n                \"Sign In\"\n              )}\n            </Button>\n          </form>\n\n          <div className=\"mt-4 p-4 bg-gradient-to-r from-blue-50 to-indigo-50 border-2 border-blue-100 rounded-xl text-center\">\n            <p className=\"text-sm text-blue-900 font-medium\">\n              Secure Authentication\n            </p>\n            <p className=\"text-xs text-blue-700 mt-1\">\n              Your credentials are encrypted and protected\n            </p>\n          </div>\n        </CardContent>\n      </Card>\n      </div>\n    </>\n  );\n}\n","path":null,"size_bytes":7110,"size_tokens":null},"attached_assets/auth_1763670748023.ts":{"content":"import { type Request, type Response, type NextFunction } from \"express\";\nimport bcrypt from \"bcrypt\";\nimport { storage } from \"./storage\";\n\nexport async function hashPassword(password: string): Promise<string> {\n  return bcrypt.hash(password, 10);\n}\n\nexport async function comparePassword(password: string, hash: string): Promise<boolean> {\n  return bcrypt.compare(password, hash);\n}\n\nexport async function loginUser(username: string, password: string) {\n  const user = await storage.getUserByUsername(username);\n  \n  if (!user) {\n    return { success: false, message: 'Invalid username or password' };\n  }\n\n  const isValid = await comparePassword(password, user.password);\n  \n  if (!isValid) {\n    return { success: false, message: 'Invalid username or password' };\n  }\n\n  return {\n    success: true,\n    user: {\n      id: user.id,\n      username: user.username,\n      role: user.role,\n      email: user.email,\n      name: user.name\n    }\n  };\n}\n\nexport function requireAuth(req: Request, res: Response, next: NextFunction) {\n  if (!req.session?.userId) {\n    return res.status(401).json({ error: 'Unauthorized' });\n  }\n  next();\n}\n\nexport function requireAdmin(req: Request, res: Response, next: NextFunction) {\n  if (!req.session?.userId) {\n    return res.status(401).json({ error: 'Unauthorized' });\n  }\n  if (req.session.role !== 'admin') {\n    return res.status(403).json({ error: 'Forbidden - Admin access required' });\n  }\n  next();\n}\n","path":null,"size_bytes":1444,"size_tokens":null},"attached_assets/dropdown-menu_1763670995693.tsx":{"content":"import * as React from \"react\"\nimport * as DropdownMenuPrimitive from \"@radix-ui/react-dropdown-menu\"\nimport { Check, ChevronRight, Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst DropdownMenu = DropdownMenuPrimitive.Root\n\nconst DropdownMenuTrigger = DropdownMenuPrimitive.Trigger\n\nconst DropdownMenuGroup = DropdownMenuPrimitive.Group\n\nconst DropdownMenuPortal = DropdownMenuPrimitive.Portal\n\nconst DropdownMenuSub = DropdownMenuPrimitive.Sub\n\nconst DropdownMenuRadioGroup = DropdownMenuPrimitive.RadioGroup\n\nconst DropdownMenuSubTrigger = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.SubTrigger>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.SubTrigger> & {\n    inset?: boolean\n  }\n>(({ className, inset, children, ...props }, ref) => (\n  <DropdownMenuPrimitive.SubTrigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <ChevronRight className=\"ml-auto\" />\n  </DropdownMenuPrimitive.SubTrigger>\n))\nDropdownMenuSubTrigger.displayName =\n  DropdownMenuPrimitive.SubTrigger.displayName\n\nconst DropdownMenuSubContent = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.SubContent>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.SubContent>\n>(({ className, ...props }, ref) => (\n  <DropdownMenuPrimitive.SubContent\n    ref={ref}\n    className={cn(\n      \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nDropdownMenuSubContent.displayName =\n  DropdownMenuPrimitive.SubContent.displayName\n\nconst DropdownMenuContent = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Content>\n>(({ className, sideOffset = 4, ...props }, ref) => (\n  <DropdownMenuPrimitive.Portal>\n    <DropdownMenuPrimitive.Content\n      ref={ref}\n      sideOffset={sideOffset}\n      className={cn(\n        \"z-50 max-h-[var(--radix-dropdown-menu-content-available-height)] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]\",\n        className\n      )}\n      {...props}\n    />\n  </DropdownMenuPrimitive.Portal>\n))\nDropdownMenuContent.displayName = DropdownMenuPrimitive.Content.displayName\n\nconst DropdownMenuItem = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Item> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <DropdownMenuPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nDropdownMenuItem.displayName = DropdownMenuPrimitive.Item.displayName\n\nconst DropdownMenuCheckboxItem = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.CheckboxItem>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.CheckboxItem>\n>(({ className, children, checked, ...props }, ref) => (\n  <DropdownMenuPrimitive.CheckboxItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    checked={checked}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <DropdownMenuPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </DropdownMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </DropdownMenuPrimitive.CheckboxItem>\n))\nDropdownMenuCheckboxItem.displayName =\n  DropdownMenuPrimitive.CheckboxItem.displayName\n\nconst DropdownMenuRadioItem = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.RadioItem>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.RadioItem>\n>(({ className, children, ...props }, ref) => (\n  <DropdownMenuPrimitive.RadioItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <DropdownMenuPrimitive.ItemIndicator>\n        <Circle className=\"h-2 w-2 fill-current\" />\n      </DropdownMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </DropdownMenuPrimitive.RadioItem>\n))\nDropdownMenuRadioItem.displayName = DropdownMenuPrimitive.RadioItem.displayName\n\nconst DropdownMenuLabel = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Label> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <DropdownMenuPrimitive.Label\n    ref={ref}\n    className={cn(\n      \"px-2 py-1.5 text-sm font-semibold\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nDropdownMenuLabel.displayName = DropdownMenuPrimitive.Label.displayName\n\nconst DropdownMenuSeparator = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <DropdownMenuPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\n    {...props}\n  />\n))\nDropdownMenuSeparator.displayName = DropdownMenuPrimitive.Separator.displayName\n\nconst DropdownMenuShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\"ml-auto text-xs tracking-widest opacity-60\", className)}\n      {...props}\n    />\n  )\n}\nDropdownMenuShortcut.displayName = \"DropdownMenuShortcut\"\n\nexport {\n  DropdownMenu,\n  DropdownMenuTrigger,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuCheckboxItem,\n  DropdownMenuRadioItem,\n  DropdownMenuLabel,\n  DropdownMenuSeparator,\n  DropdownMenuShortcut,\n  DropdownMenuGroup,\n  DropdownMenuPortal,\n  DropdownMenuSub,\n  DropdownMenuSubContent,\n  DropdownMenuSubTrigger,\n  DropdownMenuRadioGroup,\n}\n","path":null,"size_bytes":7609,"size_tokens":null},"client/src/components/ui/aspect-ratio.tsx":{"content":"import * as AspectRatioPrimitive from \"@radix-ui/react-aspect-ratio\"\n\nconst AspectRatio = AspectRatioPrimitive.Root\n\nexport { AspectRatio }\n","path":null,"size_bytes":140,"size_tokens":null},"attached_assets/chart_1763670951630.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as RechartsPrimitive from \"recharts\"\n\nimport { cn } from \"@/lib/utils\"\n\n// Format: { THEME_NAME: CSS_SELECTOR }\nconst THEMES = { light: \"\", dark: \".dark\" } as const\n\nexport type ChartConfig = {\n  [k in string]: {\n    label?: React.ReactNode\n    icon?: React.ComponentType\n  } & (\n    | { color?: string; theme?: never }\n    | { color?: never; theme: Record<keyof typeof THEMES, string> }\n  )\n}\n\ntype ChartContextProps = {\n  config: ChartConfig\n}\n\nconst ChartContext = React.createContext<ChartContextProps | null>(null)\n\nfunction useChart() {\n  const context = React.useContext(ChartContext)\n\n  if (!context) {\n    throw new Error(\"useChart must be used within a <ChartContainer />\")\n  }\n\n  return context\n}\n\nconst ChartContainer = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> & {\n    config: ChartConfig\n    children: React.ComponentProps<\n      typeof RechartsPrimitive.ResponsiveContainer\n    >[\"children\"]\n  }\n>(({ id, className, children, config, ...props }, ref) => {\n  const uniqueId = React.useId()\n  const chartId = `chart-${id || uniqueId.replace(/:/g, \"\")}`\n\n  return (\n    <ChartContext.Provider value={{ config }}>\n      <div\n        data-chart={chartId}\n        ref={ref}\n        className={cn(\n          \"flex aspect-video justify-center text-xs [&_.recharts-cartesian-axis-tick_text]:fill-muted-foreground [&_.recharts-cartesian-grid_line[stroke='#ccc']]:stroke-border/50 [&_.recharts-curve.recharts-tooltip-cursor]:stroke-border [&_.recharts-dot[stroke='#fff']]:stroke-transparent [&_.recharts-layer]:outline-none [&_.recharts-polar-grid_[stroke='#ccc']]:stroke-border [&_.recharts-radial-bar-background-sector]:fill-muted [&_.recharts-rectangle.recharts-tooltip-cursor]:fill-muted [&_.recharts-reference-line_[stroke='#ccc']]:stroke-border [&_.recharts-sector[stroke='#fff']]:stroke-transparent [&_.recharts-sector]:outline-none [&_.recharts-surface]:outline-none\",\n          className\n        )}\n        {...props}\n      >\n        <ChartStyle id={chartId} config={config} />\n        <RechartsPrimitive.ResponsiveContainer>\n          {children}\n        </RechartsPrimitive.ResponsiveContainer>\n      </div>\n    </ChartContext.Provider>\n  )\n})\nChartContainer.displayName = \"Chart\"\n\nconst ChartStyle = ({ id, config }: { id: string; config: ChartConfig }) => {\n  const colorConfig = Object.entries(config).filter(\n    ([, config]) => config.theme || config.color\n  )\n\n  if (!colorConfig.length) {\n    return null\n  }\n\n  return (\n    <style\n      dangerouslySetInnerHTML={{\n        __html: Object.entries(THEMES)\n          .map(\n            ([theme, prefix]) => `\n${prefix} [data-chart=${id}] {\n${colorConfig\n  .map(([key, itemConfig]) => {\n    const color =\n      itemConfig.theme?.[theme as keyof typeof itemConfig.theme] ||\n      itemConfig.color\n    return color ? `  --color-${key}: ${color};` : null\n  })\n  .join(\"\\n\")}\n}\n`\n          )\n          .join(\"\\n\"),\n      }}\n    />\n  )\n}\n\nconst ChartTooltip = RechartsPrimitive.Tooltip\n\nconst ChartTooltipContent = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<typeof RechartsPrimitive.Tooltip> &\n    React.ComponentProps<\"div\"> & {\n      hideLabel?: boolean\n      hideIndicator?: boolean\n      indicator?: \"line\" | \"dot\" | \"dashed\"\n      nameKey?: string\n      labelKey?: string\n    }\n>(\n  (\n    {\n      active,\n      payload,\n      className,\n      indicator = \"dot\",\n      hideLabel = false,\n      hideIndicator = false,\n      label,\n      labelFormatter,\n      labelClassName,\n      formatter,\n      color,\n      nameKey,\n      labelKey,\n    },\n    ref\n  ) => {\n    const { config } = useChart()\n\n    const tooltipLabel = React.useMemo(() => {\n      if (hideLabel || !payload?.length) {\n        return null\n      }\n\n      const [item] = payload\n      const key = `${labelKey || item?.dataKey || item?.name || \"value\"}`\n      const itemConfig = getPayloadConfigFromPayload(config, item, key)\n      const value =\n        !labelKey && typeof label === \"string\"\n          ? config[label as keyof typeof config]?.label || label\n          : itemConfig?.label\n\n      if (labelFormatter) {\n        return (\n          <div className={cn(\"font-medium\", labelClassName)}>\n            {labelFormatter(value, payload)}\n          </div>\n        )\n      }\n\n      if (!value) {\n        return null\n      }\n\n      return <div className={cn(\"font-medium\", labelClassName)}>{value}</div>\n    }, [\n      label,\n      labelFormatter,\n      payload,\n      hideLabel,\n      labelClassName,\n      config,\n      labelKey,\n    ])\n\n    if (!active || !payload?.length) {\n      return null\n    }\n\n    const nestLabel = payload.length === 1 && indicator !== \"dot\"\n\n    return (\n      <div\n        ref={ref}\n        className={cn(\n          \"grid min-w-[8rem] items-start gap-1.5 rounded-lg border border-border/50 bg-background px-2.5 py-1.5 text-xs shadow-xl\",\n          className\n        )}\n      >\n        {!nestLabel ? tooltipLabel : null}\n        <div className=\"grid gap-1.5\">\n          {payload.map((item, index) => {\n            const key = `${nameKey || item.name || item.dataKey || \"value\"}`\n            const itemConfig = getPayloadConfigFromPayload(config, item, key)\n            const indicatorColor = color || item.payload.fill || item.color\n\n            return (\n              <div\n                key={item.dataKey}\n                className={cn(\n                  \"flex w-full flex-wrap items-stretch gap-2 [&>svg]:h-2.5 [&>svg]:w-2.5 [&>svg]:text-muted-foreground\",\n                  indicator === \"dot\" && \"items-center\"\n                )}\n              >\n                {formatter && item?.value !== undefined && item.name ? (\n                  formatter(item.value, item.name, item, index, item.payload)\n                ) : (\n                  <>\n                    {itemConfig?.icon ? (\n                      <itemConfig.icon />\n                    ) : (\n                      !hideIndicator && (\n                        <div\n                          className={cn(\n                            \"shrink-0 rounded-[2px] border-[--color-border] bg-[--color-bg]\",\n                            {\n                              \"h-2.5 w-2.5\": indicator === \"dot\",\n                              \"w-1\": indicator === \"line\",\n                              \"w-0 border-[1.5px] border-dashed bg-transparent\":\n                                indicator === \"dashed\",\n                              \"my-0.5\": nestLabel && indicator === \"dashed\",\n                            }\n                          )}\n                          style={\n                            {\n                              \"--color-bg\": indicatorColor,\n                              \"--color-border\": indicatorColor,\n                            } as React.CSSProperties\n                          }\n                        />\n                      )\n                    )}\n                    <div\n                      className={cn(\n                        \"flex flex-1 justify-between leading-none\",\n                        nestLabel ? \"items-end\" : \"items-center\"\n                      )}\n                    >\n                      <div className=\"grid gap-1.5\">\n                        {nestLabel ? tooltipLabel : null}\n                        <span className=\"text-muted-foreground\">\n                          {itemConfig?.label || item.name}\n                        </span>\n                      </div>\n                      {item.value && (\n                        <span className=\"font-mono font-medium tabular-nums text-foreground\">\n                          {item.value.toLocaleString()}\n                        </span>\n                      )}\n                    </div>\n                  </>\n                )}\n              </div>\n            )\n          })}\n        </div>\n      </div>\n    )\n  }\n)\nChartTooltipContent.displayName = \"ChartTooltip\"\n\nconst ChartLegend = RechartsPrimitive.Legend\n\nconst ChartLegendContent = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> &\n    Pick<RechartsPrimitive.LegendProps, \"payload\" | \"verticalAlign\"> & {\n      hideIcon?: boolean\n      nameKey?: string\n    }\n>(\n  (\n    { className, hideIcon = false, payload, verticalAlign = \"bottom\", nameKey },\n    ref\n  ) => {\n    const { config } = useChart()\n\n    if (!payload?.length) {\n      return null\n    }\n\n    return (\n      <div\n        ref={ref}\n        className={cn(\n          \"flex items-center justify-center gap-4\",\n          verticalAlign === \"top\" ? \"pb-3\" : \"pt-3\",\n          className\n        )}\n      >\n        {payload.map((item) => {\n          const key = `${nameKey || item.dataKey || \"value\"}`\n          const itemConfig = getPayloadConfigFromPayload(config, item, key)\n\n          return (\n            <div\n              key={item.value}\n              className={cn(\n                \"flex items-center gap-1.5 [&>svg]:h-3 [&>svg]:w-3 [&>svg]:text-muted-foreground\"\n              )}\n            >\n              {itemConfig?.icon && !hideIcon ? (\n                <itemConfig.icon />\n              ) : (\n                <div\n                  className=\"h-2 w-2 shrink-0 rounded-[2px]\"\n                  style={{\n                    backgroundColor: item.color,\n                  }}\n                />\n              )}\n              {itemConfig?.label}\n            </div>\n          )\n        })}\n      </div>\n    )\n  }\n)\nChartLegendContent.displayName = \"ChartLegend\"\n\n// Helper to extract item config from a payload.\nfunction getPayloadConfigFromPayload(\n  config: ChartConfig,\n  payload: unknown,\n  key: string\n) {\n  if (typeof payload !== \"object\" || payload === null) {\n    return undefined\n  }\n\n  const payloadPayload =\n    \"payload\" in payload &&\n    typeof payload.payload === \"object\" &&\n    payload.payload !== null\n      ? payload.payload\n      : undefined\n\n  let configLabelKey: string = key\n\n  if (\n    key in payload &&\n    typeof payload[key as keyof typeof payload] === \"string\"\n  ) {\n    configLabelKey = payload[key as keyof typeof payload] as string\n  } else if (\n    payloadPayload &&\n    key in payloadPayload &&\n    typeof payloadPayload[key as keyof typeof payloadPayload] === \"string\"\n  ) {\n    configLabelKey = payloadPayload[\n      key as keyof typeof payloadPayload\n    ] as string\n  }\n\n  return configLabelKey in config\n    ? config[configLabelKey]\n    : config[key as keyof typeof config]\n}\n\nexport {\n  ChartContainer,\n  ChartTooltip,\n  ChartTooltipContent,\n  ChartLegend,\n  ChartLegendContent,\n  ChartStyle,\n}\n","path":null,"size_bytes":10481,"size_tokens":null},"client/src/components/ui/dialog.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as DialogPrimitive from \"@radix-ui/react-dialog\"\nimport { X } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Dialog = DialogPrimitive.Root\n\nconst DialogTrigger = DialogPrimitive.Trigger\n\nconst DialogPortal = DialogPrimitive.Portal\n\nconst DialogClose = DialogPrimitive.Close\n\nconst DialogOverlay = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Overlay\n    ref={ref}\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n  />\n))\nDialogOverlay.displayName = DialogPrimitive.Overlay.displayName\n\nconst DialogContent = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Content>\n>(({ className, children, ...props }, ref) => (\n  <DialogPortal>\n    <DialogOverlay />\n    <DialogPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg\",\n        className\n      )}\n      {...props}\n    >\n      {children}\n      <DialogPrimitive.Close className=\"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground\">\n        <X className=\"h-4 w-4\" />\n        <span className=\"sr-only\">Close</span>\n      </DialogPrimitive.Close>\n    </DialogPrimitive.Content>\n  </DialogPortal>\n))\nDialogContent.displayName = DialogPrimitive.Content.displayName\n\nconst DialogHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-1.5 text-center sm:text-left\",\n      className\n    )}\n    {...props}\n  />\n)\nDialogHeader.displayName = \"DialogHeader\"\n\nconst DialogFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\n      className\n    )}\n    {...props}\n  />\n)\nDialogFooter.displayName = \"DialogFooter\"\n\nconst DialogTitle = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Title\n    ref={ref}\n    className={cn(\n      \"text-lg font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nDialogTitle.displayName = DialogPrimitive.Title.displayName\n\nconst DialogDescription = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nDialogDescription.displayName = DialogPrimitive.Description.displayName\n\nexport {\n  Dialog,\n  DialogPortal,\n  DialogOverlay,\n  DialogClose,\n  DialogTrigger,\n  DialogContent,\n  DialogHeader,\n  DialogFooter,\n  DialogTitle,\n  DialogDescription,\n}\n","path":null,"size_bytes":3848,"size_tokens":null},"attached_assets/vite.config_1763670650470.ts":{"content":"import { defineConfig } from \"vite\";\nimport react from \"@vitejs/plugin-react\";\nimport path from \"path\";\nimport runtimeErrorOverlay from \"@replit/vite-plugin-runtime-error-modal\";\n\nexport default defineConfig({\n  plugins: [\n    react(),\n    runtimeErrorOverlay(),\n    ...(process.env.NODE_ENV !== \"production\" &&\n    process.env.REPL_ID !== undefined\n      ? [\n          await import(\"@replit/vite-plugin-cartographer\").then((m) =>\n            m.cartographer(),\n          ),\n          await import(\"@replit/vite-plugin-dev-banner\").then((m) =>\n            m.devBanner(),\n          ),\n        ]\n      : []),\n  ],\n  resolve: {\n    alias: {\n      \"@\": path.resolve(import.meta.dirname, \"client\", \"src\"),\n      \"@shared\": path.resolve(import.meta.dirname, \"shared\"),\n      \"@assets\": path.resolve(import.meta.dirname, \"attached_assets\"),\n    },\n  },\n  root: path.resolve(import.meta.dirname, \"client\"),\n  build: {\n    outDir: path.resolve(import.meta.dirname, \"dist/public\"),\n    emptyOutDir: true,\n  },\n  server: {\n    fs: {\n      strict: true,\n      deny: [\"**/.*\"],\n    },\n  },\n});\n","path":null,"size_bytes":1080,"size_tokens":null},"attached_assets/LanguageToggle_1763670896224.tsx":{"content":"\nimport { Button } from \"@/components/ui/button\";\nimport { Globe } from \"lucide-react\";\nimport {\n  DropdownMenu,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuTrigger,\n} from \"@/components/ui/dropdown-menu\";\nimport type { Language } from \"@/lib/translations\";\n\ninterface LanguageToggleProps {\n  currentLanguage: Language;\n  onLanguageChange: (language: Language) => void;\n}\n\nexport default function LanguageToggle({ currentLanguage, onLanguageChange }: LanguageToggleProps) {\n  return (\n    <DropdownMenu>\n      <DropdownMenuTrigger asChild>\n        <Button variant=\"ghost\" size=\"icon\" className=\"text-white hover:bg-white/20\">\n          <Globe className=\"h-5 w-5\" />\n        </Button>\n      </DropdownMenuTrigger>\n      <DropdownMenuContent align=\"end\">\n        <DropdownMenuItem \n          onClick={() => onLanguageChange('en')}\n          className={currentLanguage === 'en' ? 'bg-accent' : ''}\n        >\n          English\n        </DropdownMenuItem>\n        <DropdownMenuItem \n          onClick={() => onLanguageChange('ar')}\n          className={currentLanguage === 'ar' ? 'bg-accent' : ''}\n        >\n          Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©\n        </DropdownMenuItem>\n      </DropdownMenuContent>\n    </DropdownMenu>\n  );\n}\n","path":null,"size_bytes":1225,"size_tokens":null},"client/src/components/ui/separator.tsx":{"content":"import * as React from \"react\"\nimport * as SeparatorPrimitive from \"@radix-ui/react-separator\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Separator = React.forwardRef<\n  React.ElementRef<typeof SeparatorPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof SeparatorPrimitive.Root>\n>(\n  (\n    { className, orientation = \"horizontal\", decorative = true, ...props },\n    ref\n  ) => (\n    <SeparatorPrimitive.Root\n      ref={ref}\n      decorative={decorative}\n      orientation={orientation}\n      className={cn(\n        \"shrink-0 bg-border\",\n        orientation === \"horizontal\" ? \"h-[1px] w-full\" : \"h-full w-[1px]\",\n        className\n      )}\n      {...props}\n    />\n  )\n)\nSeparator.displayName = SeparatorPrimitive.Root.displayName\n\nexport { Separator }\n","path":null,"size_bytes":756,"size_tokens":null},"attached_assets/button_1763670951627.tsx":{"content":"import * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst buttonVariants = cva(\n  \"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\" +\n  \" hover-elevate active-elevate-2\",\n  {\n    variants: {\n      variant: {\n        default:\n          \"bg-primary text-primary-foreground border border-primary-border\",\n        destructive:\n          \"bg-destructive text-destructive-foreground border border-destructive-border\",\n        outline:\n          // Shows the background color of whatever card / sidebar / accent background it is inside of.\n          // Inherits the current text color.\n          \" border [border-color:var(--button-outline)]  shadow-xs active:shadow-none \",\n        secondary: \"border bg-secondary text-secondary-foreground border border-secondary-border \",\n        // Add a transparent border so that when someone toggles a border on later, it doesn't shift layout/size.\n        ghost: \"border border-transparent\",\n      },\n      // Heights are set as \"min\" heights, because sometimes Ai will place large amount of content\n      // inside buttons. With a min-height they will look appropriate with small amounts of content,\n      // but will expand to fit large amounts of content.\n      size: {\n        default: \"min-h-9 px-4 py-2\",\n        sm: \"min-h-8 rounded-md px-3 text-xs\",\n        lg: \"min-h-10 rounded-md px-8\",\n        icon: \"h-9 w-9\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  },\n)\n\nexport interface ButtonProps\n  extends React.ButtonHTMLAttributes<HTMLButtonElement>,\n    VariantProps<typeof buttonVariants> {\n  asChild?: boolean\n}\n\nconst Button = React.forwardRef<HTMLButtonElement, ButtonProps>(\n  ({ className, variant, size, asChild = false, ...props }, ref) => {\n    const Comp = asChild ? Slot : \"button\"\n    return (\n      <Comp\n        className={cn(buttonVariants({ variant, size, className }))}\n        ref={ref}\n        {...props}\n      />\n    )\n  },\n)\nButton.displayName = \"Button\"\n\nexport { Button, buttonVariants }\n","path":null,"size_bytes":2359,"size_tokens":null},"client/src/lib/api.ts":{"content":"import type { Item, Reservation, ActivityLog, Category, Notification } from \"@shared/schema\";\n\nexport type { Item, Reservation, ActivityLog, Category, Notification };\n\nasync function handleResponse<T>(response: Response): Promise<T> {\n  if (!response.ok) {\n    const error = await response.json().catch(() => ({ error: 'Request failed' }));\n    throw new Error(error.error || 'Request failed');\n  }\n  return response.json();\n}\n\nexport const api = {\n  auth: {\n    login: async (username: string, password: string) => {\n      const response = await fetch('/api/auth/login', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ username, password }),\n        credentials: 'include'\n      });\n      return handleResponse(response);\n    },\n    logout: async () => {\n      const response = await fetch('/api/auth/logout', {\n        method: 'POST',\n        credentials: 'include'\n      });\n      return handleResponse(response);\n    }\n  },\n  items: {\n    getAll: (category?: string, isEquipment?: boolean) => {\n      const params = new URLSearchParams();\n      if (category) params.append('category', category);\n      if (isEquipment !== undefined) params.append('isEquipment', String(isEquipment));\n      const url = params.toString() ? `/api/items?${params.toString()}` : '/api/items';\n      console.log('API request URL:', url);\n      return fetch(url, {\n        credentials: 'include'\n      }).then(handleResponse);\n    },\n    create: async (item: any) => {\n      const response = await fetch('/api/items', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify(item),\n        credentials: 'include'\n      });\n      return handleResponse(response);\n    },\n    update: async (id: string, item: any) => {\n      const response = await fetch(`/api/items/${id}`, {\n        method: 'PATCH',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify(item),\n        credentials: 'include'\n      });\n      return handleResponse(response);\n    },\n    delete: async (id: string) => {\n      const response = await fetch(`/api/items/${id}`, {\n        method: 'DELETE',\n        credentials: 'include'\n      });\n      return handleResponse(response);\n    }\n  },\n  reservations: {\n    getAll: async (): Promise<Reservation[]> => {\n      const response = await fetch('/api/reservations', { credentials: 'include' });\n      return handleResponse(response);\n    },\n    getByItem: async (itemId: string): Promise<Reservation[]> => {\n      const response = await fetch(`/api/reservations/item/${itemId}`, { credentials: 'include' });\n      return handleResponse(response);\n    },\n    create: async (reservation: any) => {\n      const response = await fetch('/api/reservations', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify(reservation),\n        credentials: 'include'\n      });\n      return handleResponse(response);\n    },\n    update: async (id: string, reservation: any) => {\n      const response = await fetch(`/api/reservations/${id}`, {\n        method: 'PATCH',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify(reservation),\n        credentials: 'include'\n      });\n      return handleResponse(response);\n    }\n  },\n  activityLogs: {\n    getAll: async (): Promise<ActivityLog[]> => {\n      const response = await fetch('/api/activity-logs', { credentials: 'include' });\n      return handleResponse(response);\n    }\n  },\n  categories: {\n    getAll: async (isEquipment?: boolean): Promise<Category[]> => {\n      const params = new URLSearchParams();\n      if (isEquipment !== undefined) params.append('isEquipment', String(isEquipment));\n      const url = params.toString() ? `/api/categories?${params.toString()}` : '/api/categories';\n      const response = await fetch(url, { credentials: 'include' });\n      return handleResponse(response);\n    }\n  },\n  customCategories: {\n    create: async (category: any) => {\n      const response = await fetch('/api/custom-categories', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify(category),\n        credentials: 'include'\n      });\n      return handleResponse(response);\n    },\n    update: async (id: string, category: any) => {\n      const response = await fetch(`/api/custom-categories/${id}`, {\n        method: 'PATCH',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify(category),\n        credentials: 'include'\n      });\n      return handleResponse(response);\n    },\n    delete: async (id: string) => {\n      const response = await fetch(`/api/custom-categories/${id}`, {\n        method: 'DELETE',\n        credentials: 'include'\n      });\n      return handleResponse(response);\n    }\n  },\n  notifications: {\n    getAll: async (): Promise<Notification[]> => {\n      const response = await fetch('/api/notifications', { credentials: 'include' });\n      return handleResponse(response);\n    },\n    markAsRead: async (id: string) => {\n      const response = await fetch(`/api/notifications/${id}/read`, {\n        method: 'PATCH',\n        credentials: 'include'\n      });\n      return handleResponse(response);\n    },\n    markAllAsRead: async () => {\n      const response = await fetch('/api/notifications/read-all', {\n        method: 'PATCH',\n        credentials: 'include'\n      });\n      return handleResponse(response);\n    },\n    delete: async (id: string) => {\n      const response = await fetch(`/api/notifications/${id}`, {\n        method: 'DELETE',\n        credentials: 'include'\n      });\n      return handleResponse(response);\n    }\n  },\n  qrCodes: {\n    getItemQRCode: async (itemId: string): Promise<{ qrCode: string; barcode: string; publicUrl: string }> => {\n      const response = await fetch(`/api/items/${itemId}/qrcode`, { credentials: 'include' });\n      return handleResponse(response);\n    },\n    getAllQRCodes: async (): Promise<Array<{ id: string; barcode: string; productName: string; qrCode: string; publicUrl: string }>> => {\n      const response = await fetch('/api/qrcodes/all', { credentials: 'include' });\n      return handleResponse(response);\n    }\n  },\n  scan: {\n    process: async (barcode: string) => {\n      const response = await fetch('/api/scan', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ barcode }),\n        credentials: 'include'\n      });\n      return handleResponse(response);\n    }\n  },\n  users: {\n    getAll: async (): Promise<any[]> => {\n      const response = await fetch('/api/users', { credentials: 'include' });\n      return handleResponse(response);\n    },\n    create: async (userData: any) => {\n      const response = await fetch('/api/users', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify(userData),\n        credentials: 'include'\n      });\n      return handleResponse(response);\n    },\n    update: async (id: string, userData: any) => {\n      const response = await fetch(`/api/users/${id}`, {\n        method: 'PATCH',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify(userData),\n        credentials: 'include'\n      });\n      return handleResponse(response);\n    },\n    delete: async (id: string) => {\n      const response = await fetch(`/api/users/${id}`, {\n        method: 'DELETE',\n        credentials: 'include'\n      });\n      return handleResponse(response);\n    }\n  },\n  damageReports: {\n    getAll: async (): Promise<any[]> => {\n      const response = await fetch('/api/damage-reports', { credentials: 'include' });\n      return handleResponse(response);\n    },\n    create: async (report: any) => {\n      const response = await fetch('/api/damage-reports', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify(report),\n        credentials: 'include'\n      });\n      return handleResponse(response);\n    },\n    resolve: async (id: string, notes: string) => {\n      const response = await fetch(`/api/damage-reports/${id}`, {\n        method: 'PATCH',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ status: 'resolved', resolutionNotes: notes }),\n        credentials: 'include'\n      });\n      return handleResponse(response);\n    }\n  }\n};","path":null,"size_bytes":8446,"size_tokens":null},"shared/schema.ts":{"content":"import { sql } from \"drizzle-orm\";\nimport { pgTable, text, varchar, timestamp, date, boolean } from \"drizzle-orm/pg-core\";\nimport { createInsertSchema } from \"drizzle-zod\";\nimport { z } from \"zod\";\nimport { relations } from \"drizzle-orm\";\n\nexport const users = pgTable(\"users\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  username: text(\"username\").notNull().unique(),\n  password: text(\"password\").notNull(),\n  role: text(\"role\").notNull().default('user'),\n  email: text(\"email\").notNull(),\n  name: text(\"name\").notNull(),\n  department: text(\"department\")\n});\n\nexport const items = pgTable(\"items\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  barcode: text(\"barcode\").notNull().unique(),\n  productName: text(\"product_name\").notNull(),\n  productType: text(\"product_type\").notNull(),\n  status: text(\"status\").notNull().default('Available'),\n  location: text(\"location\"),\n  notes: text(\"notes\"),\n  isEquipment: boolean(\"is_equipment\").notNull().default(true),\n  createdAt: timestamp(\"created_at\").default(sql`CURRENT_TIMESTAMP`),\n  updatedAt: timestamp(\"updated_at\").default(sql`CURRENT_TIMESTAMP`)\n});\n\nexport const reservations = pgTable(\"reservations\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  itemId: varchar(\"item_id\").notNull().references(() => items.id),\n  userId: varchar(\"user_id\").notNull().references(() => users.id),\n  status: text(\"status\").notNull().default('pending'),\n  requestDate: timestamp(\"request_date\").notNull().default(sql`CURRENT_TIMESTAMP`),\n  approvalDate: timestamp(\"approval_date\"),\n  startDate: date(\"start_date\").notNull(),\n  returnDate: date(\"return_date\").notNull(),\n  startTime: text(\"start_time\"),\n  returnTime: text(\"return_time\"),\n  purposeOfUse: text(\"purpose_of_use\"),\n  notes: text(\"notes\"),\n  rejectionReason: text(\"rejection_reason\"),\n  itemConditionOnReceive: text(\"item_condition_on_receive\"),\n  itemConditionOnReturn: text(\"item_condition_on_return\"),\n  returnNotes: text(\"return_notes\"),\n  checkoutDate: timestamp(\"checkout_date\"),\n  returnedDate: timestamp(\"returned_date\")\n});\n\nexport const categories = pgTable(\"categories\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  name: text(\"name\").notNull().unique(),\n  image: text(\"image\").notNull(),\n  subTypes: text(\"sub_types\").notNull(),\n  isDefault: boolean(\"is_default\").notNull().default(false),\n  isEquipment: boolean(\"is_equipment\").notNull().default(true),\n  showQuantity: boolean(\"show_quantity\").notNull().default(true),\n  showLocation: boolean(\"show_location\").notNull().default(true),\n  showNotes: boolean(\"show_notes\").notNull().default(true),\n  createdAt: timestamp(\"created_at\").default(sql`CURRENT_TIMESTAMP`)\n});\n\nexport const notifications = pgTable(\"notifications\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  userId: varchar(\"user_id\").notNull().references(() => users.id),\n  type: text(\"type\").notNull(),\n  title: text(\"title\").notNull(),\n  message: text(\"message\").notNull(),\n  isRead: text(\"is_read\").notNull().default('false'),\n  relatedId: varchar(\"related_id\"),\n  notificationFor: text(\"notification_for\").notNull().default('user'),\n  createdAt: timestamp(\"created_at\").default(sql`CURRENT_TIMESTAMP`)\n});\n\nexport const activityLogs = pgTable(\"activity_logs\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  itemId: varchar(\"item_id\").notNull().references(() => items.id),\n  userId: varchar(\"user_id\").notNull().references(() => users.id),\n  action: text(\"action\").notNull(),\n  oldStatus: text(\"old_status\"),\n  newStatus: text(\"new_status\"),\n  notes: text(\"notes\"),\n  timestamp: timestamp(\"timestamp\").notNull().default(sql`CURRENT_TIMESTAMP`)\n});\n\nexport const itemEditHistory = pgTable(\"item_edit_history\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  itemId: varchar(\"item_id\").notNull().references(() => items.id),\n  userId: varchar(\"user_id\").notNull().references(() => users.id),\n  fieldName: text(\"field_name\").notNull(),\n  oldValue: text(\"old_value\"),\n  newValue: text(\"new_value\"),\n  timestamp: timestamp(\"timestamp\").notNull().default(sql`CURRENT_TIMESTAMP`)\n});\n\nexport const reservationStatusHistory = pgTable(\"reservation_status_history\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  reservationId: varchar(\"reservation_id\").notNull().references(() => reservations.id),\n  userId: varchar(\"user_id\").notNull().references(() => users.id),\n  oldStatus: text(\"old_status\"),\n  newStatus: text(\"new_status\").notNull(),\n  notes: text(\"notes\"),\n  timestamp: timestamp(\"timestamp\").notNull().default(sql`CURRENT_TIMESTAMP`)\n});\n\nexport const damageReports = pgTable(\"damage_reports\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  itemId: varchar(\"item_id\").notNull().references(() => items.id),\n  reportedBy: varchar(\"reported_by\").notNull().references(() => users.id),\n  reportType: text(\"report_type\").notNull(),\n  severity: text(\"severity\").notNull().default('medium'),\n  description: text(\"description\").notNull(),\n  status: text(\"status\").notNull().default('open'),\n  resolutionNotes: text(\"resolution_notes\"),\n  createdAt: timestamp(\"created_at\").notNull().default(sql`CURRENT_TIMESTAMP`),\n  resolvedAt: timestamp(\"resolved_at\")\n});\n\nexport const damageReportsRelations = relations(damageReports, ({ one }) => ({\n  reportedByUser: one(users, {\n    fields: [damageReports.reportedBy],\n    references: [users.id]\n  }),\n  item: one(items, {\n    fields: [damageReports.itemId],\n    references: [items.id]\n  })\n}));\n\nexport const insertUserSchema = createInsertSchema(users).omit({\n  id: true\n});\n\nexport const insertItemSchema = createInsertSchema(items).omit({\n  id: true,\n  createdAt: true,\n  updatedAt: true\n});\n\nexport const insertReservationSchema = createInsertSchema(reservations).omit({\n  id: true,\n  requestDate: true,\n  approvalDate: true\n}).extend({\n  startDate: z.union([z.date(), z.string().transform(val => new Date(val + 'T00:00:00'))]),\n  returnDate: z.union([z.date(), z.string().transform(val => new Date(val + 'T00:00:00'))])\n});\n\nexport const insertActivityLogSchema = createInsertSchema(activityLogs).omit({\n  id: true,\n  timestamp: true\n});\n\nexport const insertCategorySchema = createInsertSchema(categories).omit({\n  id: true,\n  createdAt: true\n});\n\nexport const insertNotificationSchema = createInsertSchema(notifications).omit({\n  id: true,\n  createdAt: true\n});\n\nexport const insertItemEditHistorySchema = createInsertSchema(itemEditHistory).omit({\n  id: true,\n  timestamp: true\n});\n\nexport const insertReservationStatusHistorySchema = createInsertSchema(reservationStatusHistory).omit({\n  id: true,\n  timestamp: true\n});\n\nexport const insertDamageReportSchema = createInsertSchema(damageReports).omit({\n  id: true,\n  createdAt: true,\n  resolvedAt: true\n});\n\nexport const itemEditHistoryRelations = relations(itemEditHistory, ({ one }) => ({\n  item: one(items, {\n    fields: [itemEditHistory.itemId],\n    references: [items.id],\n  }),\n  user: one(users, {\n    fields: [itemEditHistory.userId],\n    references: [users.id],\n  }),\n}));\n\nexport const reservationStatusHistoryRelations = relations(reservationStatusHistory, ({ one }) => ({\n  reservation: one(reservations, {\n    fields: [reservationStatusHistory.reservationId],\n    references: [reservations.id],\n  }),\n  user: one(users, {\n    fields: [reservationStatusHistory.userId],\n    references: [users.id],\n  }),\n}));\n\nexport type InsertUser = z.infer<typeof insertUserSchema>;\nexport type User = typeof users.$inferSelect;\nexport type InsertItem = z.infer<typeof insertItemSchema>;\nexport type Item = typeof items.$inferSelect;\nexport type InsertReservation = z.infer<typeof insertReservationSchema>;\nexport type Reservation = typeof reservations.$inferSelect;\nexport type InsertActivityLog = z.infer<typeof insertActivityLogSchema>;\nexport type ActivityLog = typeof activityLogs.$inferSelect;\nexport type InsertCategory = z.infer<typeof insertCategorySchema>;\nexport type Category = typeof categories.$inferSelect;\nexport type InsertNotification = z.infer<typeof insertNotificationSchema>;\nexport type Notification = typeof notifications.$inferSelect;\nexport type InsertItemEditHistory = z.infer<typeof insertItemEditHistorySchema>;\nexport type ItemEditHistory = typeof itemEditHistory.$inferSelect;\nexport type InsertReservationStatusHistory = z.infer<typeof insertReservationStatusHistorySchema>;\nexport type ReservationStatusHistory = typeof reservationStatusHistory.$inferSelect;\nexport type InsertDamageReport = z.infer<typeof insertDamageReportSchema>;\nexport type DamageReport = typeof damageReports.$inferSelect;\n\nexport const ITEM_STATUSES = ['Available', 'In Use', 'Reserved', 'Maintenance', 'Disabled'] as const;\n\nexport const EQUIPMENT_CATEGORIES = {\n  cameras: {\n    name: 'Cameras',\n    subTypes: ['Camera', 'Action Cam'] as const,\n    image: 'https://images.unsplash.com/photo-1606800052052-a08af7148866?w=800&auto=format&fit=crop'\n  },\n  lenses: {\n    name: 'Lenses',\n    subTypes: ['Lenses', 'Filter', 'Digital Filter'] as const,\n    image: 'https://images.unsplash.com/photo-1617005082133-548c4dd27f35?w=800&auto=format&fit=crop'\n  },\n  tripods_stands: {\n    name: 'Tripods & Stands',\n    subTypes: ['Stands', 'Monopod', 'Small Tripods', 'Backdrop Stands'] as const,\n    image: 'https://images.unsplash.com/photo-1492619375914-88005aa9e8fb?w=800&auto=format&fit=crop'\n  },\n  grips: {\n    name: 'Grips',\n    subTypes: ['Crane', 'Dolly / Wheels Tripod', 'Shoulder Rig', 'Spider Rig', 'Gimbal', 'Slider', 'Rig', 'Rig & Stabilization Gear', 'Camera Support Equipment'] as const,\n    image: 'https://images.unsplash.com/photo-1516035069371-29a1b244cc32?w=800&auto=format&fit=crop'\n  },\n  audio: {\n    name: 'Audio',\n    subTypes: ['Mic', 'Microphone', 'Wireless Device', 'Recorder', 'Mixer', 'Boom Arm', 'Transmitter', 'Receiver'] as const,\n    image: 'https://images.unsplash.com/photo-1590602847861-f357a9332bbc?w=800&auto=format&fit=crop'\n  },\n  lighting: {\n    name: 'Lighting',\n    subTypes: ['LED', 'LED Light', 'LED Ring', 'RGB Lights', 'Soft Box', 'Light', 'Lighting Equipment'] as const,\n    image: 'https://images.unsplash.com/photo-1598289431512-b97b0917affc?w=800&auto=format&fit=crop'\n  },\n  studio_accessories: {\n    name: 'Studio Accessories',\n    subTypes: ['Clapper', 'Reflector', 'Kit', 'Background Screen'] as const,\n    image: 'https://images.unsplash.com/photo-1625948515291-69613efd103f?w=800&auto=format&fit=crop'\n  },\n  bags_cases: {\n    name: 'Bags & Cases',\n    subTypes: ['Bag', 'Bags & Cases', 'Backpacks'] as const,\n    image: 'https://images.unsplash.com/photo-1553062407-98eeb64c6a62?w=800&auto=format&fit=crop'\n  },\n  batteries_power: {\n    name: 'Batteries & Power',\n    subTypes: ['Battery', 'Charger', 'Power Bank', 'V-Mount Battery', 'Battery Power Tester', 'Power & Accessories', 'Inverter'] as const,\n    image: 'https://images.unsplash.com/photo-1609091839311-d5365f9ff1c5?w=800&auto=format&fit=crop'\n  },\n  cables_adapters: {\n    name: 'Cables & Adapters',\n    subTypes: ['Cable', 'Socket', 'Extension'] as const,\n    image: 'https://images.unsplash.com/photo-1558618666-fcd25c85cd64?w=800&auto=format&fit=crop'\n  },\n  monitors_displays: {\n    name: 'Monitors & Displays',\n    subTypes: ['Monitor', 'Screen', 'Computing & Display'] as const,\n    image: 'https://images.unsplash.com/photo-1527443224154-c4a3942d3acf?w=800&auto=format&fit=crop'\n  },\n  storage_devices: {\n    name: 'Storage Devices',\n    subTypes: ['Storage Devices'] as const,\n    image: 'https://images.unsplash.com/photo-1597872200969-2b65d56bd16b?w=800&auto=format&fit=crop'\n  }\n} as const;\n\nexport const ASSET_CATEGORIES = {\n  softwares: {\n    name: 'Softwares',\n    subTypes: ['Editing Software', 'Design Software', 'Office Software'] as const,\n    image: 'https://images.unsplash.com/photo-1551288049-bebda4e38f71?w=800&auto=format&fit=crop'\n  },\n  office_supplies: {\n    name: 'Office Supplies',\n    subTypes: ['Stationery', 'Desk Items', 'Printer Supplies'] as const,\n    image: 'https://images.unsplash.com/photo-1586075010923-2dd4570fb338?w=800&auto=format&fit=crop'\n  },\n  pantry: {\n    name: 'Pantry',\n    subTypes: ['Snacks', 'Disposable Items'] as const,\n    image: 'https://images.unsplash.com/photo-1556910103-1c02745aae4d?w=800&auto=format&fit=crop'\n  },\n  transportation: {\n    name: 'Transportation',\n    subTypes: ['Vehicles', 'Delivery Equipment', 'Travel Accessories'] as const,\n    image: 'https://images.unsplash.com/photo-1449965408869-eaa3f722e40d?w=800&auto=format&fit=crop'\n  },\n  furniture: {\n    name: 'Furniture',\n    subTypes: ['Chairs', 'Tables', 'Storage Units'] as const,\n    image: 'https://images.unsplash.com/photo-1538688525198-9b88f6f53126?w=800&auto=format&fit=crop'\n  },\n  communication: {\n    name: 'Communication',\n    subTypes: ['SIM Cards', 'Mobile Devices', 'Internet Devices'] as const,\n    image: 'https://images.unsplash.com/photo-1512941937669-90a1b58e7e9c?w=800&auto=format&fit=crop'\n  },\n  uniforms_branding: {\n    name: 'Uniforms & Branding',\n    subTypes: ['Uniforms', 'Badges', 'Tags', 'T-Shirts', 'Tote Bags', 'Uniform Bags'] as const,\n    image: 'https://images.unsplash.com/photo-1523381210434-271e8be1f52b?w=800&auto=format&fit=crop'\n  }\n} as const;\n\nexport const CATEGORIES = { ...EQUIPMENT_CATEGORIES, ...ASSET_CATEGORIES } as const;\n","path":null,"size_bytes":13346,"size_tokens":null},"client/src/components/ui/slider.tsx":{"content":"import * as React from \"react\"\nimport * as SliderPrimitive from \"@radix-ui/react-slider\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Slider = React.forwardRef<\n  React.ElementRef<typeof SliderPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof SliderPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <SliderPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative flex w-full touch-none select-none items-center\",\n      className\n    )}\n    {...props}\n  >\n    <SliderPrimitive.Track className=\"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary\">\n      <SliderPrimitive.Range className=\"absolute h-full bg-primary\" />\n    </SliderPrimitive.Track>\n    <SliderPrimitive.Thumb className=\"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50\" />\n  </SliderPrimitive.Root>\n))\nSlider.displayName = SliderPrimitive.Root.displayName\n\nexport { Slider }\n","path":null,"size_bytes":1077,"size_tokens":null},"attached_assets/tabs_1763671095570.tsx":{"content":"import * as React from \"react\"\nimport * as TabsPrimitive from \"@radix-ui/react-tabs\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Tabs = TabsPrimitive.Root\n\nconst TabsList = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.List>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.List>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.List\n    ref={ref}\n    className={cn(\n      \"inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\nTabsList.displayName = TabsPrimitive.List.displayName\n\nconst TabsTrigger = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.Trigger>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm\",\n      className\n    )}\n    {...props}\n  />\n))\nTabsTrigger.displayName = TabsPrimitive.Trigger.displayName\n\nconst TabsContent = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.Content\n    ref={ref}\n    className={cn(\n      \"mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2\",\n      className\n    )}\n    {...props}\n  />\n))\nTabsContent.displayName = TabsPrimitive.Content.displayName\n\nexport { Tabs, TabsList, TabsTrigger, TabsContent }\n","path":null,"size_bytes":1883,"size_tokens":null},"attached_assets/seed_1763670748026.ts":{"content":"\nimport { storage } from \"./storage\";\nimport { hashPassword } from \"./auth\";\n\nexport async function seedDatabase() {\n  console.log('ðŸŒ± Seeding database...');\n\n  const existingItems = await storage.getAllItems();\n  if (existingItems.length > 0) {\n    console.log('âœ… Database already seeded, skipping...');\n    return;\n  }\n\n  const users = [\n    {\n      username: 'admin',\n      password: await hashPassword('omg'),\n      role: 'admin',\n      email: 'ironhub1746@gmail.com',\n      name: 'System Administrator'\n    },\n    {\n      username: 'staff1',\n      password: await hashPassword('omg'),\n      role: 'user',\n      email: 'staff1@company.com',\n      name: 'Staff Member 1'\n    },\n    {\n      username: 'staff2',\n      password: await hashPassword('omg'),\n      role: 'user',\n      email: 'staff2@company.com',\n      name: 'Staff Member 2'\n    }\n  ];\n\n  for (const user of users) {\n    await storage.createUser(user);\n    console.log(`  âœ“ Created user: ${user.username}`);\n  }\n\n  const items = [\n    // 1. Cameras\n    { barcode: 'CAM-001', productName: 'GH4 Lumix Cameras', productType: 'Camera', status: 'Available', location: 'Studio A', notes: 'Panasonic Lumix GH4' },\n    { barcode: 'CAM-002', productName: 'Canon 70D Camera', productType: 'Camera', status: 'Available', location: 'Studio A', notes: 'Canon DSLR Camera' },\n    { barcode: 'ACAM-001', productName: 'Insta 360 One R Lens Action Cam', productType: 'Action Cam', status: 'Available', location: 'Equipment Room', notes: '360 degree action camera' },\n\n    // 2. Lenses\n    { barcode: 'LENS-001', productName: 'CANON 50MM', productType: 'Lenses', status: 'Available', location: 'Lens Cabinet', notes: 'Prime lens' },\n    { barcode: 'LENS-002', productName: 'CANON 18-55', productType: 'Lenses', status: 'Available', location: 'Lens Cabinet', notes: 'Kit lens' },\n    { barcode: 'LENS-003', productName: 'CANON 85MM', productType: 'Lenses', status: 'Available', location: 'Lens Cabinet', notes: 'Portrait lens' },\n    { barcode: 'LENS-004', productName: 'CANON 18-135MM', productType: 'Lenses', status: 'Available', location: 'Lens Cabinet', notes: 'Zoom lens' },\n    { barcode: 'LENS-005', productName: 'CANON SIGMA DC 18-200MM', productType: 'Lenses', status: 'Available', location: 'Lens Cabinet', notes: 'All-purpose zoom' },\n    { barcode: 'LENS-006', productName: 'LUMIX 20MM', productType: 'Lenses', status: 'Available', location: 'Lens Cabinet', notes: 'Pancake lens' },\n    { barcode: 'LENS-007', productName: 'LUMIX 15MM', productType: 'Lenses', status: 'Available', location: 'Lens Cabinet', notes: 'Wide angle' },\n    { barcode: 'LENS-008', productName: 'LUMIX 14-140MM HD', productType: 'Lenses', status: 'Available', location: 'Lens Cabinet', notes: 'HD zoom lens' },\n    { barcode: 'LENS-009', productName: 'LUMIX 35-100MM', productType: 'Lenses', status: 'Available', location: 'Lens Cabinet', notes: 'Telephoto zoom' },\n    { barcode: 'LENS-010', productName: 'LUMIX G12-35MM', productType: 'Lenses', status: 'Available', location: 'Lens Cabinet', notes: 'Standard zoom' },\n    { barcode: 'FILT-001', productName: 'Digital Filter', productType: 'Digital Filter', status: 'Available', location: 'Accessories Drawer', notes: 'Digital lens filter' },\n\n    // 3. Tripods & Stands\n    { barcode: 'STND-001', productName: 'LED Soft Box Stands (Average)', productType: 'Stands', status: 'Available', location: 'Stand Storage', notes: 'Medium height stands' },\n    { barcode: 'STND-002', productName: 'CAER AF2434 (H4)', productType: 'Stands', status: 'Available', location: 'Stand Storage', notes: 'Heavy duty stand' },\n    { barcode: 'STND-003', productName: 'Manfrotto 190 (Video Head Separate)', productType: 'Stands', status: 'Available', location: 'Stand Storage', notes: 'Professional tripod' },\n    { barcode: 'STND-004', productName: 'Soft Box Large Stand', productType: 'Stands', status: 'Available', location: 'Stand Storage', notes: 'Tall stand for softbox' },\n    { barcode: 'STND-005', productName: 'Sea Stands', productType: 'Stands', status: 'Available', location: 'Stand Storage', notes: 'Light stands' },\n    { barcode: 'STND-006', productName: 'Small Tripod', productType: 'Small Tripods', status: 'Available', location: 'Equipment Room', notes: 'Compact tripod' },\n    { barcode: 'STND-007', productName: 'Backdrop Stand (Large)', productType: 'Backdrop Stands', status: 'Available', location: 'Studio B', notes: 'Large backdrop support' },\n    { barcode: 'MONO-001', productName: 'CAER CF34DV with Head', productType: 'Monopod', status: 'Available', location: 'Equipment Room', notes: 'Professional monopod' },\n\n    // 4. Grips\n    { barcode: 'CRANE-001', productName: 'iFootage Minicrane M1-111', productType: 'Crane', status: 'Available', location: 'Equipment Storage', notes: 'Camera crane' },\n    { barcode: 'GIBL-001', productName: 'Crane 3 S-Pro Gimbal', productType: 'Gimbal', status: 'Available', location: 'Studio A', notes: 'Professional gimbal' },\n    { barcode: 'GIBL-002', productName: 'DJI Ronin SC Gimbal', productType: 'Gimbal', status: 'Available', location: 'Studio A', notes: 'Compact gimbal' },\n    { barcode: 'DOLLY-001', productName: 'Dolly (Wheels Tripod)', productType: 'Dolly / Wheels Tripod', status: 'Available', location: 'Equipment Storage', notes: 'Camera dolly' },\n    { barcode: 'DOLLY-002', productName: 'Dolly (Small Tripod Wheels)', productType: 'Dolly / Wheels Tripod', status: 'Available', location: 'Equipment Storage', notes: 'Small dolly' },\n    { barcode: 'SRIG-001', productName: 'Shoulder Rig Kit Film City MB600', productType: 'Shoulder Rig', status: 'Available', location: 'Equipment Room', notes: 'Professional shoulder rig' },\n    { barcode: 'SRIG-002', productName: 'Neewer Shoulder Rig', productType: 'Shoulder Rig', status: 'Available', location: 'Equipment Room', notes: 'Budget shoulder rig' },\n    { barcode: 'SRIG-003', productName: 'Local Shoulder Rig', productType: 'Shoulder Rig', status: 'Available', location: 'Equipment Room', notes: 'Custom shoulder rig' },\n    { barcode: 'SPRIG-001', productName: 'Spider Rig', productType: 'Spider Rig', status: 'Available', location: 'Equipment Storage', notes: 'Spider camera rig' },\n    { barcode: 'SLID-001', productName: 'Electronic Slider Edelkrone', productType: 'Slider', status: 'Available', location: 'Studio A', notes: 'Motorized slider' },\n    { barcode: 'SLID-002', productName: 'Neewer Slider (Head)', productType: 'Slider', status: 'Available', location: 'Studio A', notes: 'Manual slider with head' },\n    { barcode: 'SLID-003', productName: 'Benro Slider MU005583', productType: 'Slider', status: 'Available', location: 'Studio A', notes: 'Carbon fiber slider' },\n    { barcode: 'SLID-004', productName: 'Small Slider Neewer', productType: 'Slider', status: 'Available', location: 'Equipment Room', notes: 'Compact slider' },\n    { barcode: 'CSUP-001', productName: 'Manfrotto 290 XTRA Tripod', productType: 'Camera Support Equipment', status: 'Available', location: 'Stand Storage', notes: 'Professional tripod' },\n    { barcode: 'CSUP-002', productName: 'Manfrotto 190 Go Tripod', productType: 'Camera Support Equipment', status: 'Available', location: 'Stand Storage', notes: 'Travel tripod' },\n    { barcode: 'CSUP-003', productName: 'Yunteng 288 Tripod', productType: 'Camera Support Equipment', status: 'Available', location: 'Stand Storage', notes: 'Budget tripod' },\n    { barcode: 'CSUP-004', productName: 'Benro Tripod with Head', productType: 'Camera Support Equipment', status: 'Available', location: 'Stand Storage', notes: 'Tripod with fluid head' },\n    { barcode: 'RIG-001', productName: 'Froza 60C', productType: 'Rig', status: 'Available', location: 'Equipment Room', notes: 'Camera rig accessory' },\n    { barcode: 'RIG-002', productName: 'Godex 60C', productType: 'Rig', status: 'Available', location: 'Equipment Room', notes: 'Camera rig accessory' },\n    { barcode: 'RIG-003', productName: 'Crane 3 S-Pro', productType: 'Rig & Stabilization Gear', status: 'Available', location: 'Equipment Room', notes: 'Stabilization rig' },\n\n    // 5. Audio\n    { barcode: 'MIC-001', productName: 'Rode Mic', productType: 'Microphone', status: 'Available', location: 'Audio Room', notes: 'Professional microphone' },\n    { barcode: 'MIC-002', productName: 'Dodex VD-Mic', productType: 'Microphone', status: 'Available', location: 'Audio Room', notes: 'On-camera mic' },\n    { barcode: 'MIC-003', productName: 'Podcast Mic Blue', productType: 'Microphone', status: 'Available', location: 'Podcast Room', notes: 'USB podcast microphone' },\n    { barcode: 'MIC-004', productName: 'Neewer NW-700 Mic', productType: 'Microphone', status: 'Available', location: 'Audio Room', notes: 'Condenser microphone' },\n    { barcode: 'MIC-005', productName: 'LVI Lavalier Micro-Cravate MOVO', productType: 'Mic', status: 'Available', location: 'Audio Room', notes: 'Lavalier microphone' },\n    { barcode: 'MIC-006', productName: 'MOVO Wire-Mike Doll', productType: 'Mic', status: 'Available', location: 'Audio Room', notes: 'Wired lavalier' },\n    { barcode: 'WMIC-001', productName: 'Wireless Go II (Rode)', productType: 'Wireless Device', status: 'Available', location: 'Audio Room', notes: 'Wireless mic system' },\n    { barcode: 'WMIC-002', productName: 'WMIC60 Wireless Microphone', productType: 'Wireless Device', status: 'Available', location: 'Audio Room', notes: 'Wireless handheld mic' },\n    { barcode: 'REC-001', productName: 'Zoom H8 Handy Recorder', productType: 'Recorder', status: 'Available', location: 'Audio Room', notes: '8-track recorder' },\n    { barcode: 'REC-002', productName: 'Zoom H6 Handy Recorder', productType: 'Recorder', status: 'Available', location: 'Audio Room', notes: '6-track recorder' },\n    { barcode: 'MIX-001', productName: 'Mixing Console (4 Channel)', productType: 'Mixer', status: 'Available', location: 'Audio Room', notes: 'Audio mixer' },\n    { barcode: 'BOOM-001', productName: 'RODE Boom Arm', productType: 'Boom Arm', status: 'Available', location: 'Audio Room', notes: 'Studio boom arm' },\n    { barcode: 'TXRX-001', productName: 'RODE Link Transmitter RX-CAM / TX-BELT', productType: 'Transmitter', status: 'Available', location: 'Audio Room', notes: 'Wireless transmitter/receiver' },\n    { barcode: 'TXRX-002', productName: 'MOVO Kit (Transmitter/Receiver)', productType: 'Receiver', status: 'Available', location: 'Audio Room', notes: 'Wireless system' },\n\n    // 6. Lighting\n    { barcode: 'LED-001', productName: 'LED 880 NiceFoto Kit', productType: 'LED Light', status: 'Available', location: 'Lighting Room', notes: 'LED panel kit' },\n    { barcode: 'LED-002', productName: 'LED Photostudio Pro LE500ACC', productType: 'LED Light', status: 'Available', location: 'Lighting Room', notes: 'Professional LED' },\n    { barcode: 'LED-003', productName: 'Godex S600 Kit Combo', productType: 'LED', status: 'Available', location: 'Lighting Room', notes: 'Complete LED kit' },\n    { barcode: 'SOFT-001', productName: 'Godox ADS 65W Soft Box', productType: 'Soft Box', status: 'Available', location: 'Lighting Room', notes: 'Small softbox' },\n    { barcode: 'SOFT-002', productName: 'Froza Softbox SB-FMM-60', productType: 'Soft Box', status: 'Available', location: 'Lighting Room', notes: 'Medium softbox' },\n    { barcode: 'SOFT-003', productName: 'Godex Soft Box P120L', productType: 'Soft Box', status: 'Available', location: 'Lighting Room', notes: 'Large parabolic softbox' },\n    { barcode: 'LED-004', productName: 'Godex Light SL 150Pi', productType: 'Light', status: 'Available', location: 'Lighting Room', notes: 'Video LED light' },\n    { barcode: 'RING-001', productName: 'Neewer LED Ring Flash', productType: 'LED Ring', status: 'Available', location: 'Lighting Room', notes: 'Ring light for photography' },\n    { barcode: 'RGB-001', productName: 'Godox Tube Kit 30cm', productType: 'RGB Lights', status: 'Available', location: 'Lighting Room', notes: 'RGB tube light small' },\n    { barcode: 'RGB-002', productName: 'Irmai RGB LED Video Light 60cm', productType: 'RGB Lights', status: 'Available', location: 'Lighting Room', notes: 'RGB tube light large' },\n    { barcode: 'RGB-003', productName: 'Aputure MT Pro', productType: 'RGB Lights', status: 'Available', location: 'Lighting Room', notes: 'RGB mini light' },\n    { barcode: 'LED-005', productName: 'Neewer CN-LUX360', productType: 'LED', status: 'Available', location: 'Lighting Room', notes: 'Dimmable LED panel' },\n    { barcode: 'RGB-004', productName: 'Godox R1 RGB', productType: 'RGB Lights', status: 'Available', location: 'Lighting Room', notes: 'Compact RGB light' },\n    { barcode: 'LED-006', productName: 'Godox LED64', productType: 'LED', status: 'Available', location: 'Lighting Room', notes: 'On-camera LED' },\n    { barcode: 'LED-007', productName: 'Yongnuo YN300 II', productType: 'LED', status: 'Available', location: 'Lighting Room', notes: 'Portable LED panel' },\n    { barcode: 'LED-008', productName: 'LS Photography PPH79', productType: 'LED Light', status: 'Available', location: 'Lighting Room', notes: 'Photography LED' },\n    { barcode: 'LED-009', productName: 'Infrared Vision VL-36L Hak', productType: 'LED Light', status: 'Available', location: 'Lighting Room', notes: 'IR capable LED' },\n    { barcode: 'LED-010', productName: 'Genaray LED-7100T', productType: 'LED Light', status: 'Available', location: 'Lighting Room', notes: 'Bi-color LED' },\n    { barcode: 'LED-011', productName: 'JYLED300S LED Light', productType: 'LED Light', status: 'Available', location: 'Lighting Room', notes: 'Studio LED panel' },\n    { barcode: 'LED-012', productName: 'Neewer CN-160', productType: 'LED', status: 'Available', location: 'Lighting Room', notes: 'Dimmable on-camera LED' },\n    { barcode: 'LED-013', productName: 'Neewer CN-304', productType: 'LED', status: 'Available', location: 'Lighting Room', notes: 'Large LED panel' },\n    { barcode: 'LED-014', productName: 'Speedlight NW-561', productType: 'Light', status: 'Available', location: 'Lighting Room', notes: 'Camera flash speedlight' },\n    { barcode: 'LED-015', productName: 'LED Stands (Economical)', productType: 'Lighting Equipment', status: 'Available', location: 'Stand Storage', notes: 'Budget light stands' },\n    { barcode: 'LED-016', productName: 'Foldio 360 Smart Turntable Light', productType: 'Lighting Equipment', status: 'Available', location: 'Product Photography', notes: 'Product photography turntable' },\n\n    // 7. Studio Accessories\n    { barcode: 'CLAP-001', productName: 'Clapper Board', productType: 'Clapper', status: 'Available', location: 'Production Office', notes: 'Film slate' },\n    { barcode: 'REF-001', productName: 'Reflector Kit (Small)', productType: 'Reflector', status: 'Available', location: 'Lighting Storage', notes: 'Small reflector set' },\n    { barcode: 'REF-002', productName: 'Reflector Kit (Large)', productType: 'Reflector', status: 'Available', location: 'Lighting Storage', notes: 'Large reflector set' },\n    { barcode: 'REF-003', productName: 'Angler Reflector Kit', productType: 'Kit', status: 'Available', location: 'Lighting Storage', notes: 'Professional reflector kit' },\n    { barcode: 'BG-001', productName: 'Background Screen (Green/Black/White)', productType: 'Background Screen', status: 'Available', location: 'Studio B', notes: 'Triple backdrop set' },\n    { barcode: 'BG-002', productName: 'Cowboy Studio Green Screen', productType: 'Background Screen', status: 'Available', location: 'Studio B', notes: 'Chroma key backdrop' },\n\n    // 8. Bags & Cases\n    { barcode: 'BAG-001', productName: 'Equipment Bag Think Tank', productType: 'Bag', status: 'Available', location: 'Storage Room', notes: 'Professional camera bag' },\n    { barcode: 'BAG-002', productName: 'Equipment Bag Tail', productType: 'Bag', status: 'Available', location: 'Storage Room', notes: 'Equipment transport bag' },\n    { barcode: 'BAG-003', productName: 'Back Bag', productType: 'Backpacks', status: 'Available', location: 'Storage Room', notes: 'Camera backpack' },\n    { barcode: 'BAG-004', productName: 'Carry Bag Small', productType: 'Bag', status: 'Available', location: 'Storage Room', notes: 'Small equipment bag' },\n    { barcode: 'BAG-005', productName: 'Medium Bag (Customized)', productType: 'Bags & Cases', status: 'Available', location: 'Storage Room', notes: 'Custom medium case' },\n    { barcode: 'BAG-006', productName: 'Stand Bag', productType: 'Bag', status: 'Available', location: 'Stand Storage', notes: 'Bag for light stands' },\n    { barcode: 'BAG-007', productName: 'Low Eprop Bag (Medium)', productType: 'Bag', status: 'Available', location: 'Storage Room', notes: 'Medium equipment bag' },\n\n    // 9. Batteries & Power\n    { barcode: 'BAT-001', productName: 'V-Mount Battery S-8110S', productType: 'V-Mount Battery', status: 'Available', location: 'Charging Station', notes: 'High capacity V-mount' },\n    { barcode: 'BAT-002', productName: 'V-Mount Battery PB-M98S', productType: 'V-Mount Battery', status: 'Available', location: 'Charging Station', notes: 'Medium capacity V-mount' },\n    { barcode: 'BAT-003', productName: 'V-Mount Ion FB-BP-95W', productType: 'V-Mount Battery', status: 'Available', location: 'Charging Station', notes: 'Lithium ion V-mount' },\n    { barcode: 'BAT-004', productName: 'ZEGO BZ-95 Mini', productType: 'Battery', status: 'Available', location: 'Battery Cabinet', notes: 'Compact battery' },\n    { barcode: 'BAT-005', productName: 'Canon Camera Battery', productType: 'Battery', status: 'Available', location: 'Battery Cabinet', notes: 'Canon LP-E6 compatible' },\n    { barcode: 'BAT-006', productName: 'Lumix Battery GH4', productType: 'Battery', status: 'Available', location: 'Battery Cabinet', notes: 'Panasonic DMW-BLF19' },\n    { barcode: 'BAT-007', productName: 'Monitor and Light Battery', productType: 'Battery', status: 'Available', location: 'Battery Cabinet', notes: 'NP-F style battery' },\n    { barcode: 'BAT-008', productName: 'Energizer Cell AAA', productType: 'Battery', status: 'Available', location: 'Battery Cabinet', notes: 'AAA batteries pack' },\n    { barcode: 'CHG-001', productName: 'V-Mount Charger', productType: 'Charger', status: 'Available', location: 'Charging Station', notes: 'Dual bay V-mount charger' },\n    { barcode: 'CHG-002', productName: 'Energizer Cell Charger', productType: 'Charger', status: 'Available', location: 'Charging Station', notes: 'AA/AAA battery charger' },\n    { barcode: 'INV-001', productName: 'Godox LP750X Inverter', productType: 'Inverter', status: 'Available', location: 'Power Room', notes: 'Power inverter' },\n    { barcode: 'PWR-001', productName: 'Power Bank Anker PowerCore+', productType: 'Power Bank', status: 'Available', location: 'Equipment Drawer', notes: 'USB power bank' },\n    { barcode: 'TEST-001', productName: 'Battery Power Tester DLYFULLB2', productType: 'Battery Power Tester', status: 'Available', location: 'Charging Station', notes: 'Battery capacity tester' },\n    { barcode: 'EXT-001', productName: 'Extension Cords', productType: 'Power & Accessories', status: 'Available', location: 'Power Room', notes: 'Power extension set' },\n    { barcode: 'EXT-002', productName: 'Extension Roll', productType: 'Power & Accessories', status: 'Available', location: 'Power Room', notes: 'Long extension reel' },\n\n    // 10. Cables & Adapters\n    { barcode: 'CBL-001', productName: 'HDMI Cable 15ft', productType: 'Cable', status: 'Available', location: 'Cable Drawer', notes: 'High speed HDMI cable' },\n    { barcode: 'CBL-002', productName: 'Audio Scale XLR AUX 3.5 Extension', productType: 'Cable', status: 'Available', location: 'Audio Cables', notes: 'XLR to 3.5mm cable' },\n    { barcode: 'CBL-003', productName: 'Blackmagic Video Assist Cable', productType: 'Cable', status: 'Available', location: 'Cable Drawer', notes: 'Video cable set' },\n    { barcode: 'EXT-003', productName: 'Small Extension Socket', productType: 'Socket', status: 'Available', location: 'Power Room', notes: 'Power strip small' },\n    { barcode: 'EXT-004', productName: 'Power Extension Cord', productType: 'Extension', status: 'Available', location: 'Power Room', notes: 'Standard extension cord' },\n    { barcode: 'EXT-005', productName: 'Extension Roll (Large)', productType: 'Extension', status: 'Available', location: 'Power Room', notes: 'Heavy duty extension reel' },\n\n    // 11. Monitors & Displays\n    { barcode: 'MON-001', productName: 'Koolertron Small Monitor', productType: 'Monitor', status: 'Available', location: 'Equipment Room', notes: 'Portable field monitor' },\n    { barcode: 'MON-002', productName: 'iPad Pro 11\"', productType: 'Screen', status: 'Available', location: 'Office', notes: 'Tablet for monitoring' },\n    { barcode: 'DISP-001', productName: 'iMac 27\" (2019)', productType: 'Computing & Display', status: 'Available', location: 'Editing Suite', notes: 'Desktop workstation' },\n    { barcode: 'DISP-002', productName: 'Samsung LED Monitor U28', productType: 'Computing & Display', status: 'Available', location: 'Editing Suite', notes: '4K monitor' },\n\n    // 12. Storage Devices\n    { barcode: 'STO-001', productName: 'WD My Passport Ultra', productType: 'Storage Devices', status: 'Available', location: 'IT Room', notes: 'Portable HDD 2TB' },\n    { barcode: 'STO-002', productName: 'WD Elements 3221B', productType: 'Storage Devices', status: 'Available', location: 'IT Room', notes: 'Desktop HDD 3TB' },\n    { barcode: 'STO-003', productName: 'WD My Passport Wireless', productType: 'Storage Devices', status: 'Available', location: 'IT Room', notes: 'Wireless portable HDD' },\n\n    // 13. Softwares\n    { barcode: 'SOFT-101', productName: 'Adobe Premiere Pro License', productType: 'Editing Software', status: 'Available', location: 'Digital Assets', notes: 'Video editing software' },\n    { barcode: 'SOFT-102', productName: 'Final Cut Pro License', productType: 'Editing Software', status: 'Available', location: 'Digital Assets', notes: 'Apple video editing' },\n    { barcode: 'SOFT-103', productName: 'Adobe Photoshop License', productType: 'Design Software', status: 'Available', location: 'Digital Assets', notes: 'Photo editing software' },\n    { barcode: 'SOFT-104', productName: 'Adobe Illustrator License', productType: 'Design Software', status: 'Available', location: 'Digital Assets', notes: 'Vector design software' },\n    { barcode: 'SOFT-105', productName: 'Microsoft Office 365', productType: 'Office Software', status: 'Available', location: 'Digital Assets', notes: 'Office productivity suite' },\n\n    // 14. Office Supplies\n    { barcode: 'OFF-001', productName: 'Pens and Pencils Set', productType: 'Stationery', status: 'Available', location: 'Office Supply Cabinet', notes: 'Writing instruments' },\n    { barcode: 'OFF-002', productName: 'Notebooks A4', productType: 'Stationery', status: 'Available', location: 'Office Supply Cabinet', notes: 'Spiral notebooks' },\n    { barcode: 'OFF-003', productName: 'Sticky Notes Assorted', productType: 'Stationery', status: 'Available', location: 'Office Supply Cabinet', notes: 'Post-it notes' },\n    { barcode: 'OFF-004', productName: 'Desk Organizer', productType: 'Desk Items', status: 'Available', location: 'Office', notes: 'Desktop organization' },\n    { barcode: 'OFF-005', productName: 'Paper Clips & Binders', productType: 'Desk Items', status: 'Available', location: 'Office Supply Cabinet', notes: 'Office fasteners' },\n    { barcode: 'OFF-006', productName: 'Printer Paper A4 Ream', productType: 'Printer Supplies', status: 'Available', location: 'Print Room', notes: 'Copy paper 500 sheets' },\n    { barcode: 'OFF-007', productName: 'Ink Cartridges Set', productType: 'Printer Supplies', status: 'Available', location: 'Print Room', notes: 'Printer ink refills' },\n\n    // 15. Pantry\n    { barcode: 'PAN-001', productName: 'Coffee & Tea Supplies', productType: 'Snacks', status: 'Available', location: 'Pantry', notes: 'Hot beverages' },\n    { barcode: 'PAN-002', productName: 'Snack Box Assorted', productType: 'Snacks', status: 'Available', location: 'Pantry', notes: 'Mixed snacks' },\n    { barcode: 'PAN-003', productName: 'Disposable Cups Pack', productType: 'Disposable Items', status: 'Available', location: 'Pantry', notes: 'Paper cups 100 count' },\n    { barcode: 'PAN-004', productName: 'Disposable Plates & Utensils', productType: 'Disposable Items', status: 'Available', location: 'Pantry', notes: 'Disposable dinnerware' },\n\n    // 16. Transportation\n    { barcode: 'TRANS-001', productName: 'Company Van', productType: 'Vehicles', status: 'Available', location: 'Parking Lot', notes: 'Equipment transport van' },\n    { barcode: 'TRANS-002', productName: 'Delivery Dolly', productType: 'Delivery Equipment', status: 'Available', location: 'Loading Dock', notes: 'Hand truck for transport' },\n    { barcode: 'TRANS-003', productName: 'Equipment Cart', productType: 'Delivery Equipment', status: 'Available', location: 'Storage', notes: 'Rolling equipment cart' },\n    { barcode: 'TRANS-004', productName: 'Travel Case Set', productType: 'Travel Accessories', status: 'Available', location: 'Storage Room', notes: 'Protective travel cases' },\n\n    // 17. Furniture\n    { barcode: 'FURN-001', productName: 'Office Chair Ergonomic', productType: 'Chairs', status: 'Available', location: 'Office', notes: 'Adjustable office chair' },\n    { barcode: 'FURN-002', productName: 'Director Chair Set', productType: 'Chairs', status: 'Available', location: 'Studio', notes: 'Folding director chairs' },\n    { barcode: 'FURN-003', productName: 'Conference Table', productType: 'Tables', status: 'Available', location: 'Meeting Room', notes: 'Large meeting table' },\n    { barcode: 'FURN-004', productName: 'Production Desk', productType: 'Tables', status: 'Available', location: 'Studio', notes: 'Work desk' },\n    { barcode: 'FURN-005', productName: 'Storage Cabinet Metal', productType: 'Storage Units', status: 'Available', location: 'Equipment Room', notes: 'Lockable storage cabinet' },\n    { barcode: 'FURN-006', productName: 'Shelving Unit', productType: 'Storage Units', status: 'Available', location: 'Storage Room', notes: '5-tier metal shelving' },\n\n    // 18. Communication\n    { barcode: 'COMM-001', productName: 'Company SIM Card Set', productType: 'SIM Cards', status: 'Available', location: 'IT Office', notes: 'Mobile data SIM cards' },\n    { barcode: 'COMM-002', productName: 'Portable WiFi Hotspot', productType: 'Internet Devices', status: 'Available', location: 'Equipment Room', notes: 'Mobile internet device' },\n    { barcode: 'COMM-003', productName: 'Spare Mobile Phone', productType: 'Mobile Devices', status: 'Available', location: 'IT Office', notes: 'Backup communication device' },\n\n    // 19. Uniforms & Branding\n    { barcode: 'UNI-001', productName: 'Staff Uniform Shirt (S)', productType: 'Uniforms', status: 'Available', location: 'Uniform Storage', notes: 'Small size uniform' },\n    { barcode: 'UNI-002', productName: 'Staff Uniform Shirt (M)', productType: 'Uniforms', status: 'Available', location: 'Uniform Storage', notes: 'Medium size uniform' },\n    { barcode: 'UNI-003', productName: 'Staff Uniform Shirt (L)', productType: 'Uniforms', status: 'Available', location: 'Uniform Storage', notes: 'Large size uniform' },\n    { barcode: 'UNI-004', productName: 'Staff Uniform Shirt (XL)', productType: 'Uniforms', status: 'Available', location: 'Uniform Storage', notes: 'Extra large uniform' },\n    { barcode: 'BRAND-001', productName: 'Name Badges Set', productType: 'Badges', status: 'Available', location: 'HR Office', notes: 'Employee ID badges' },\n    { barcode: 'BRAND-002', productName: 'Luggage Tags', productType: 'Tags', status: 'Available', location: 'Equipment Storage', notes: 'Equipment identification tags' },\n    { barcode: 'BRAND-003', productName: 'Branded T-Shirts (Assorted)', productType: 'T-Shirts', status: 'Available', location: 'Marketing Storage', notes: 'Promotional t-shirts' },\n    { barcode: 'BRAND-004', productName: 'Branded Tote Bags', productType: 'Tote Bags', status: 'Available', location: 'Marketing Storage', notes: 'Company logo tote bags' },\n    { barcode: 'BRAND-005', productName: 'Uniform Storage Bags', productType: 'Uniform Bags', status: 'Available', location: 'Uniform Storage', notes: 'Individual uniform bags' }\n  ];\n\n  for (const item of items) {\n    await storage.createItem(item);\n    console.log(`  âœ“ Created item: ${item.productName}`);\n  }\n\n  console.log('âœ… Database seeded successfully!');\n  console.log(`ðŸ“Š Total items: ${items.length}`);\n}\n","path":null,"size_bytes":28522,"size_tokens":null},"attached_assets/table_1763671095569.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Table = React.forwardRef<\n  HTMLTableElement,\n  React.HTMLAttributes<HTMLTableElement>\n>(({ className, ...props }, ref) => (\n  <div className=\"relative w-full overflow-auto\">\n    <table\n      ref={ref}\n      className={cn(\"w-full caption-bottom text-sm\", className)}\n      {...props}\n    />\n  </div>\n))\nTable.displayName = \"Table\"\n\nconst TableHeader = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <thead ref={ref} className={cn(\"[&_tr]:border-b\", className)} {...props} />\n))\nTableHeader.displayName = \"TableHeader\"\n\nconst TableBody = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <tbody\n    ref={ref}\n    className={cn(\"[&_tr:last-child]:border-0\", className)}\n    {...props}\n  />\n))\nTableBody.displayName = \"TableBody\"\n\nconst TableFooter = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <tfoot\n    ref={ref}\n    className={cn(\n      \"border-t bg-muted/50 font-medium [&>tr]:last:border-b-0\",\n      className\n    )}\n    {...props}\n  />\n))\nTableFooter.displayName = \"TableFooter\"\n\nconst TableRow = React.forwardRef<\n  HTMLTableRowElement,\n  React.HTMLAttributes<HTMLTableRowElement>\n>(({ className, ...props }, ref) => (\n  <tr\n    ref={ref}\n    className={cn(\n      \"border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted\",\n      className\n    )}\n    {...props}\n  />\n))\nTableRow.displayName = \"TableRow\"\n\nconst TableHead = React.forwardRef<\n  HTMLTableCellElement,\n  React.ThHTMLAttributes<HTMLTableCellElement>\n>(({ className, ...props }, ref) => (\n  <th\n    ref={ref}\n    className={cn(\n      \"h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0\",\n      className\n    )}\n    {...props}\n  />\n))\nTableHead.displayName = \"TableHead\"\n\nconst TableCell = React.forwardRef<\n  HTMLTableCellElement,\n  React.TdHTMLAttributes<HTMLTableCellElement>\n>(({ className, ...props }, ref) => (\n  <td\n    ref={ref}\n    className={cn(\"p-4 align-middle [&:has([role=checkbox])]:pr-0\", className)}\n    {...props}\n  />\n))\nTableCell.displayName = \"TableCell\"\n\nconst TableCaption = React.forwardRef<\n  HTMLTableCaptionElement,\n  React.HTMLAttributes<HTMLTableCaptionElement>\n>(({ className, ...props }, ref) => (\n  <caption\n    ref={ref}\n    className={cn(\"mt-4 text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nTableCaption.displayName = \"TableCaption\"\n\nexport {\n  Table,\n  TableHeader,\n  TableBody,\n  TableFooter,\n  TableHead,\n  TableRow,\n  TableCell,\n  TableCaption,\n}\n","path":null,"size_bytes":2765,"size_tokens":null},"client/src/components/ReservationFormDialog.tsx":{"content":"\nimport { useState, useEffect } from \"react\";\nimport { useQuery } from \"@tanstack/react-query\";\nimport { Dialog, DialogContent, DialogHeader, DialogTitle } from \"@/components/ui/dialog\";\nimport { Button } from \"@/components/ui/button\";\nimport { Label } from \"@/components/ui/label\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\nimport { Calendar } from \"@/components/ui/calendar\";\nimport { Popover, PopoverContent, PopoverTrigger } from \"@/components/ui/popover\";\nimport { CalendarIcon, AlertCircle } from \"lucide-react\";\nimport { format } from \"date-fns\";\nimport { api, type Item } from \"@/lib/api\";\nimport { Alert, AlertDescription } from \"@/components/ui/alert\";\n\ninterface ReservationFormDialogProps {\n  open: boolean;\n  onClose: () => void;\n  onSubmit: (data: { itemId: string; startDate: Date; returnDate: Date; startTime?: string; returnTime?: string; purposeOfUse?: string; notes?: string }) => void;\n  items: Item[];\n}\n\nexport default function ReservationFormDialog({\n  open,\n  onClose,\n  onSubmit,\n  items\n}: ReservationFormDialogProps) {\n  const [itemId, setItemId] = useState(\"\");\n  const [startDate, setStartDate] = useState<Date>();\n  const [returnDate, setReturnDate] = useState<Date>();\n  const [startTime, setStartTime] = useState(\"09:00\");\n  const [returnTime, setReturnTime] = useState(\"17:00\");\n  const [purposeOfUse, setPurposeOfUse] = useState(\"\");\n  const [notes, setNotes] = useState(\"\");\n\n  // Auto-select item if only one item is provided (from reserve button)\n  useEffect(() => {\n    if (open && items.length === 1) {\n      setItemId(items[0].id);\n    }\n  }, [open, items]);\n\n  // Fetch existing reservations for the selected item\n  const { data: itemReservations = [] } = useQuery({\n    queryKey: ['/api/reservations/item', itemId],\n    queryFn: () => itemId ? api.reservations.getByItem(itemId) : Promise.resolve([]),\n    enabled: !!itemId,\n  });\n\n  // Reset dates when item changes\n  useEffect(() => {\n    setStartDate(undefined);\n    setReturnDate(undefined);\n  }, [itemId]);\n\n  const handleSubmit = (e: React.FormEvent) => {\n    e.preventDefault();\n    if (!itemId || !startDate || !returnDate || !purposeOfUse) {\n      alert(\"Please fill in all required fields\");\n      return;\n    }\n    \n    if (returnDate < startDate) {\n      alert(\"Return date must be after start date\");\n      return;\n    }\n    \n    // Send dates as YYYY-MM-DD strings to avoid timezone conversion\n    const startDateStr = `${startDate.getFullYear()}-${String(startDate.getMonth() + 1).padStart(2, '0')}-${String(startDate.getDate()).padStart(2, '0')}`;\n    const returnDateStr = `${returnDate.getFullYear()}-${String(returnDate.getMonth() + 1).padStart(2, '0')}-${String(returnDate.getDate()).padStart(2, '0')}`;\n    \n    onSubmit({\n      itemId,\n      startDate: startDateStr,\n      returnDate: returnDateStr,\n      startTime: startTime || undefined,\n      returnTime: returnTime || undefined,\n      purposeOfUse: purposeOfUse.trim(),\n      notes: notes.trim() || undefined\n    });\n    \n    setItemId(\"\");\n    setStartDate(undefined);\n    setReturnDate(undefined);\n    setStartTime(\"09:00\");\n    setReturnTime(\"17:00\");\n    setPurposeOfUse(\"\");\n    setNotes(\"\");\n  };\n\n  const handleClose = () => {\n    setItemId(\"\");\n    setStartDate(undefined);\n    setReturnDate(undefined);\n    setStartTime(\"09:00\");\n    setReturnTime(\"17:00\");\n    setPurposeOfUse(\"\");\n    setNotes(\"\");\n    onClose();\n  };\n\n  // Check if a date is blocked by existing reservations\n  const isDateBlocked = (date: Date) => {\n    if (!itemId) return false;\n    \n    return itemReservations.some(reservation => {\n      const resStart = new Date(reservation.startDate);\n      const resEnd = new Date(reservation.returnDate);\n      resStart.setHours(0, 0, 0, 0);\n      resEnd.setHours(0, 0, 0, 0);\n      const checkDate = new Date(date);\n      checkDate.setHours(0, 0, 0, 0);\n      \n      return checkDate >= resStart && checkDate <= resEnd;\n    });\n  };\n\n  // Check if selected dates conflict with existing reservations\n  const hasDateConflict = () => {\n    if (!startDate || !returnDate || !itemId) return false;\n\n    return itemReservations.some(reservation => {\n      const resStart = new Date(reservation.startDate);\n      const resEnd = new Date(reservation.returnDate);\n      \n      return (\n        (startDate >= resStart && startDate <= resEnd) ||\n        (returnDate >= resStart && returnDate <= resEnd) ||\n        (startDate <= resStart && returnDate >= resEnd)\n      );\n    });\n  };\n\n  return (\n    <Dialog open={open} onOpenChange={handleClose}>\n      <DialogContent className=\"max-w-md\">\n        <DialogHeader>\n          <DialogTitle>New Reservation Request</DialogTitle>\n        </DialogHeader>\n        <form onSubmit={handleSubmit} className=\"space-y-4\">\n          <div className=\"space-y-2\">\n            <Label htmlFor=\"item\">Select Item *</Label>\n            <Select value={itemId} onValueChange={setItemId} required disabled={items.length === 1}>\n              <SelectTrigger>\n                <SelectValue placeholder=\"Choose an item...\" />\n              </SelectTrigger>\n              <SelectContent>\n                {items.map((item) => (\n                  <SelectItem key={item.id} value={item.id}>\n                    {item.productName} - {item.barcode}\n                  </SelectItem>\n                ))}\n              </SelectContent>\n            </Select>\n            {items.length === 1 && (\n              <p className=\"text-sm text-muted-foreground\">\n                Reserving: {items[0].productName}\n              </p>\n            )}\n          </div>\n\n          {itemId && itemReservations.length > 0 && (\n            <Alert>\n              <AlertCircle className=\"h-4 w-4\" />\n              <AlertDescription>\n                This item has {itemReservations.length} existing reservation(s). \n                Unavailable dates are highlighted in red on the calendar.\n              </AlertDescription>\n            </Alert>\n          )}\n          \n          <div className=\"space-y-2\">\n            <Label>Pickup Date & Time *</Label>\n            <div className=\"flex gap-2\">\n              <Popover>\n                <PopoverTrigger asChild>\n                  <Button\n                    variant=\"outline\"\n                    className=\"flex-1 justify-start text-left font-normal\"\n                  >\n                    <CalendarIcon className=\"mr-2 h-4 w-4\" />\n                    {startDate ? format(startDate, \"PPP\") : <span>Pick date</span>}\n                  </Button>\n                </PopoverTrigger>\n                <PopoverContent className=\"w-auto p-0\">\n                  <Calendar\n                    mode=\"single\"\n                    selected={startDate}\n                    onSelect={setStartDate}\n                    disabled={(date) => {\n                      const today = new Date(new Date().setHours(0, 0, 0, 0));\n                      return date < today || isDateBlocked(date);\n                    }}\n                    modifiers={{\n                      blocked: (date) => isDateBlocked(date)\n                    }}\n                    modifiersClassNames={{\n                      blocked: \"bg-red-100 text-red-900 line-through\"\n                    }}\n                    initialFocus\n                  />\n                </PopoverContent>\n              </Popover>\n              <input\n                type=\"time\"\n                value={startTime}\n                onChange={(e) => setStartTime(e.target.value)}\n                className=\"border rounded-md px-3 py-2 text-sm\"\n                required\n              />\n            </div>\n          </div>\n\n          <div className=\"space-y-2\">\n            <Label>Return Date & Time *</Label>\n            <div className=\"flex gap-2\">\n              <Popover>\n                <PopoverTrigger asChild>\n                  <Button\n                    variant=\"outline\"\n                    className=\"flex-1 justify-start text-left font-normal\"\n                  >\n                    <CalendarIcon className=\"mr-2 h-4 w-4\" />\n                    {returnDate ? format(returnDate, \"PPP\") : <span>Pick date</span>}\n                  </Button>\n                </PopoverTrigger>\n                <PopoverContent className=\"w-auto p-0\">\n                  <Calendar\n                    mode=\"single\"\n                    selected={returnDate}\n                    onSelect={setReturnDate}\n                    disabled={(date) => {\n                      const today = new Date(new Date().setHours(0, 0, 0, 0));\n                      if (startDate) {\n                        return date < startDate || date < today || isDateBlocked(date);\n                      }\n                      return date < today || isDateBlocked(date);\n                    }}\n                    modifiers={{\n                      blocked: (date) => isDateBlocked(date)\n                    }}\n                    modifiersClassNames={{\n                      blocked: \"bg-red-100 text-red-900 line-through\"\n                    }}\n                    initialFocus\n                  />\n                </PopoverContent>\n              </Popover>\n              <input\n                type=\"time\"\n                value={returnTime}\n                onChange={(e) => setReturnTime(e.target.value)}\n                className=\"border rounded-md px-3 py-2 text-sm\"\n                required\n              />\n            </div>\n          </div>\n\n          {hasDateConflict() && (\n            <Alert variant=\"destructive\">\n              <AlertCircle className=\"h-4 w-4\" />\n              <AlertDescription>\n                The selected dates conflict with an existing reservation. Please choose different dates.\n              </AlertDescription>\n            </Alert>\n          )}\n\n          <div className=\"space-y-2\">\n            <Label htmlFor=\"purpose\">Purpose of Use *</Label>\n            <Textarea\n              id=\"purpose\"\n              value={purposeOfUse}\n              onChange={(e) => setPurposeOfUse(e.target.value)}\n              placeholder=\"e.g., Q4 Advertising Campaign, Product Photography, etc.\"\n              rows={2}\n              required\n            />\n          </div>\n          \n          <div className=\"space-y-2\">\n            <Label htmlFor=\"notes\">Request Notes (Optional)</Label>\n            <Textarea\n              id=\"notes\"\n              value={notes}\n              onChange={(e) => setNotes(e.target.value)}\n              placeholder=\"Add any special requests or notes...\"\n              rows={3}\n            />\n          </div>\n\n          <div className=\"flex gap-3 justify-end\">\n            <Button type=\"button\" variant=\"outline\" onClick={handleClose}>\n              Cancel\n            </Button>\n            <Button \n              type=\"submit\" \n              className=\"bg-gradient-to-r from-[#667eea] to-[#764ba2]\"\n              disabled={!itemId || !startDate || !returnDate || hasDateConflict()}\n            >\n              Submit Request\n            </Button>\n          </div>\n        </form>\n      </DialogContent>\n    </Dialog>\n  );\n}\n","path":null,"size_bytes":11098,"size_tokens":null},"client/src/components/ui/tabs.tsx":{"content":"import * as React from \"react\"\nimport * as TabsPrimitive from \"@radix-ui/react-tabs\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Tabs = TabsPrimitive.Root\n\nconst TabsList = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.List>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.List>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.List\n    ref={ref}\n    className={cn(\n      \"inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\nTabsList.displayName = TabsPrimitive.List.displayName\n\nconst TabsTrigger = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.Trigger>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm\",\n      className\n    )}\n    {...props}\n  />\n))\nTabsTrigger.displayName = TabsPrimitive.Trigger.displayName\n\nconst TabsContent = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.Content\n    ref={ref}\n    className={cn(\n      \"mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2\",\n      className\n    )}\n    {...props}\n  />\n))\nTabsContent.displayName = TabsPrimitive.Content.displayName\n\nexport { Tabs, TabsList, TabsTrigger, TabsContent }\n","path":null,"size_bytes":1883,"size_tokens":null},"attached_assets/scroll-area_1763670995703.tsx":{"content":"import * as React from \"react\"\nimport * as ScrollAreaPrimitive from \"@radix-ui/react-scroll-area\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ScrollArea = React.forwardRef<\n  React.ElementRef<typeof ScrollAreaPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ScrollAreaPrimitive.Root>\n>(({ className, children, ...props }, ref) => (\n  <ScrollAreaPrimitive.Root\n    ref={ref}\n    className={cn(\"relative overflow-hidden\", className)}\n    {...props}\n  >\n    <ScrollAreaPrimitive.Viewport className=\"h-full w-full rounded-[inherit]\">\n      {children}\n    </ScrollAreaPrimitive.Viewport>\n    <ScrollBar />\n    <ScrollAreaPrimitive.Corner />\n  </ScrollAreaPrimitive.Root>\n))\nScrollArea.displayName = ScrollAreaPrimitive.Root.displayName\n\nconst ScrollBar = React.forwardRef<\n  React.ElementRef<typeof ScrollAreaPrimitive.ScrollAreaScrollbar>,\n  React.ComponentPropsWithoutRef<typeof ScrollAreaPrimitive.ScrollAreaScrollbar>\n>(({ className, orientation = \"vertical\", ...props }, ref) => (\n  <ScrollAreaPrimitive.ScrollAreaScrollbar\n    ref={ref}\n    orientation={orientation}\n    className={cn(\n      \"flex touch-none select-none transition-colors\",\n      orientation === \"vertical\" &&\n        \"h-full w-2.5 border-l border-l-transparent p-[1px]\",\n      orientation === \"horizontal\" &&\n        \"h-2.5 flex-col border-t border-t-transparent p-[1px]\",\n      className\n    )}\n    {...props}\n  >\n    <ScrollAreaPrimitive.ScrollAreaThumb className=\"relative flex-1 rounded-full bg-border\" />\n  </ScrollAreaPrimitive.ScrollAreaScrollbar>\n))\nScrollBar.displayName = ScrollAreaPrimitive.ScrollAreaScrollbar.displayName\n\nexport { ScrollArea, ScrollBar }\n","path":null,"size_bytes":1642,"size_tokens":null},"attached_assets/api_1763670820747.ts":{"content":"import type { Item, Reservation, ActivityLog, Category, Notification } from \"@shared/schema\";\n\nexport type { Item, Reservation, ActivityLog, Category, Notification };\n\nasync function handleResponse<T>(response: Response): Promise<T> {\n  if (!response.ok) {\n    const error = await response.json().catch(() => ({ error: 'Request failed' }));\n    throw new Error(error.error || 'Request failed');\n  }\n  return response.json();\n}\n\nexport const api = {\n  auth: {\n    login: async (username: string, password: string) => {\n      const response = await fetch('/api/auth/login', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ username, password }),\n        credentials: 'include'\n      });\n      return handleResponse(response);\n    },\n    logout: async () => {\n      const response = await fetch('/api/auth/logout', {\n        method: 'POST',\n        credentials: 'include'\n      });\n      return handleResponse(response);\n    }\n  },\n  items: {\n    getAll: (category?: string) => {\n      const url = category ? `/api/items?category=${encodeURIComponent(category)}` : '/api/items';\n      console.log('API request URL:', url);\n      return fetch(url, {\n        credentials: 'include'\n      }).then(handleResponse);\n    },\n    create: async (item: any) => {\n      const response = await fetch('/api/items', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify(item),\n        credentials: 'include'\n      });\n      return handleResponse(response);\n    },\n    update: async (id: string, item: any) => {\n      const response = await fetch(`/api/items/${id}`, {\n        method: 'PATCH',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify(item),\n        credentials: 'include'\n      });\n      return handleResponse(response);\n    },\n    delete: async (id: string) => {\n      const response = await fetch(`/api/items/${id}`, {\n        method: 'DELETE',\n        credentials: 'include'\n      });\n      return handleResponse(response);\n    }\n  },\n  reservations: {\n    getAll: async (): Promise<Reservation[]> => {\n      const response = await fetch('/api/reservations', { credentials: 'include' });\n      return handleResponse(response);\n    },\n    getByItem: async (itemId: string): Promise<Reservation[]> => {\n      const response = await fetch(`/api/reservations/item/${itemId}`, { credentials: 'include' });\n      return handleResponse(response);\n    },\n    create: async (reservation: any) => {\n      const response = await fetch('/api/reservations', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify(reservation),\n        credentials: 'include'\n      });\n      return handleResponse(response);\n    },\n    update: async (id: string, reservation: any) => {\n      const response = await fetch(`/api/reservations/${id}`, {\n        method: 'PATCH',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify(reservation),\n        credentials: 'include'\n      });\n      return handleResponse(response);\n    }\n  },\n  activityLogs: {\n    getAll: async (): Promise<ActivityLog[]> => {\n      const response = await fetch('/api/activity-logs', { credentials: 'include' });\n      return handleResponse(response);\n    }\n  },\n  categories: {\n    getAll: async (): Promise<Category[]> => {\n      const response = await fetch('/api/categories', { credentials: 'include' });\n      return handleResponse(response);\n    }\n  },\n  customCategories: {\n    create: async (category: any) => {\n      const response = await fetch('/api/custom-categories', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify(category),\n        credentials: 'include'\n      });\n      return handleResponse(response);\n    },\n    update: async (id: string, category: any) => {\n      const response = await fetch(`/api/custom-categories/${id}`, {\n        method: 'PATCH',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify(category),\n        credentials: 'include'\n      });\n      return handleResponse(response);\n    },\n    delete: async (id: string) => {\n      const response = await fetch(`/api/custom-categories/${id}`, {\n        method: 'DELETE',\n        credentials: 'include'\n      });\n      return handleResponse(response);\n    }\n  },\n  notifications: {\n    getAll: async (): Promise<Notification[]> => {\n      const response = await fetch('/api/notifications', { credentials: 'include' });\n      return handleResponse(response);\n    },\n    markAsRead: async (id: string) => {\n      const response = await fetch(`/api/notifications/${id}/read`, {\n        method: 'PATCH',\n        credentials: 'include'\n      });\n      return handleResponse(response);\n    },\n    markAllAsRead: async () => {\n      const response = await fetch('/api/notifications/read-all', {\n        method: 'PATCH',\n        credentials: 'include'\n      });\n      return handleResponse(response);\n    },\n    delete: async (id: string) => {\n      const response = await fetch(`/api/notifications/${id}`, {\n        method: 'DELETE',\n        credentials: 'include'\n      });\n      return handleResponse(response);\n    }\n  },\n  qrCodes: {\n    getItemQRCode: async (itemId: string): Promise<{ qrCode: string; barcode: string; publicUrl: string }> => {\n      const response = await fetch(`/api/items/${itemId}/qrcode`, { credentials: 'include' });\n      return handleResponse(response);\n    },\n    getAllQRCodes: async (): Promise<Array<{ id: string; barcode: string; productName: string; qrCode: string; publicUrl: string }>> => {\n      const response = await fetch('/api/qrcodes/all', { credentials: 'include' });\n      return handleResponse(response);\n    }\n  },\n  scan: {\n    process: async (barcode: string) => {\n      const response = await fetch('/api/scan', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ barcode }),\n        credentials: 'include'\n      });\n      return handleResponse(response);\n    }\n  },\n  users: {\n    getAll: async (): Promise<any[]> => {\n      const response = await fetch('/api/users', { credentials: 'include' });\n      return handleResponse(response);\n    },\n    create: async (userData: any) => {\n      const response = await fetch('/api/users', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify(userData),\n        credentials: 'include'\n      });\n      return handleResponse(response);\n    },\n    delete: async (id: string) => {\n      const response = await fetch(`/api/users/${id}`, {\n        method: 'DELETE',\n        credentials: 'include'\n      });\n      return handleResponse(response);\n    }\n  }\n};","path":null,"size_bytes":6825,"size_tokens":null},"attached_assets/radio-group_1763670995701.tsx":{"content":"import * as React from \"react\"\nimport * as RadioGroupPrimitive from \"@radix-ui/react-radio-group\"\nimport { Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst RadioGroup = React.forwardRef<\n  React.ElementRef<typeof RadioGroupPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof RadioGroupPrimitive.Root>\n>(({ className, ...props }, ref) => {\n  return (\n    <RadioGroupPrimitive.Root\n      className={cn(\"grid gap-2\", className)}\n      {...props}\n      ref={ref}\n    />\n  )\n})\nRadioGroup.displayName = RadioGroupPrimitive.Root.displayName\n\nconst RadioGroupItem = React.forwardRef<\n  React.ElementRef<typeof RadioGroupPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof RadioGroupPrimitive.Item>\n>(({ className, ...props }, ref) => {\n  return (\n    <RadioGroupPrimitive.Item\n      ref={ref}\n      className={cn(\n        \"aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50\",\n        className\n      )}\n      {...props}\n    >\n      <RadioGroupPrimitive.Indicator className=\"flex items-center justify-center\">\n        <Circle className=\"h-2.5 w-2.5 fill-current text-current\" />\n      </RadioGroupPrimitive.Indicator>\n    </RadioGroupPrimitive.Item>\n  )\n})\nRadioGroupItem.displayName = RadioGroupPrimitive.Item.displayName\n\nexport { RadioGroup, RadioGroupItem }\n","path":null,"size_bytes":1467,"size_tokens":null},"client/src/components/ui/scroll-area.tsx":{"content":"import * as React from \"react\"\nimport * as ScrollAreaPrimitive from \"@radix-ui/react-scroll-area\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ScrollArea = React.forwardRef<\n  React.ElementRef<typeof ScrollAreaPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ScrollAreaPrimitive.Root>\n>(({ className, children, ...props }, ref) => (\n  <ScrollAreaPrimitive.Root\n    ref={ref}\n    className={cn(\"relative overflow-hidden\", className)}\n    {...props}\n  >\n    <ScrollAreaPrimitive.Viewport className=\"h-full w-full rounded-[inherit]\">\n      {children}\n    </ScrollAreaPrimitive.Viewport>\n    <ScrollBar />\n    <ScrollAreaPrimitive.Corner />\n  </ScrollAreaPrimitive.Root>\n))\nScrollArea.displayName = ScrollAreaPrimitive.Root.displayName\n\nconst ScrollBar = React.forwardRef<\n  React.ElementRef<typeof ScrollAreaPrimitive.ScrollAreaScrollbar>,\n  React.ComponentPropsWithoutRef<typeof ScrollAreaPrimitive.ScrollAreaScrollbar>\n>(({ className, orientation = \"vertical\", ...props }, ref) => (\n  <ScrollAreaPrimitive.ScrollAreaScrollbar\n    ref={ref}\n    orientation={orientation}\n    className={cn(\n      \"flex touch-none select-none transition-colors\",\n      orientation === \"vertical\" &&\n        \"h-full w-2.5 border-l border-l-transparent p-[1px]\",\n      orientation === \"horizontal\" &&\n        \"h-2.5 flex-col border-t border-t-transparent p-[1px]\",\n      className\n    )}\n    {...props}\n  >\n    <ScrollAreaPrimitive.ScrollAreaThumb className=\"relative flex-1 rounded-full bg-border\" />\n  </ScrollAreaPrimitive.ScrollAreaScrollbar>\n))\nScrollBar.displayName = ScrollAreaPrimitive.ScrollAreaScrollbar.displayName\n\nexport { ScrollArea, ScrollBar }\n","path":null,"size_bytes":1642,"size_tokens":null},"attached_assets/design_guidelines_1763670650465.md":{"content":"# Inventory Management System Design Guidelines\n\n## Design Approach\n**System-Based Approach**: Leveraging existing Shadcn UI component library with focus on utility and data management efficiency. This is a productivity-focused application prioritizing clarity and workflow optimization.\n\n## Core Design Principles\n1. **Data-First Layout**: Information density balanced with scanning efficiency\n2. **Action-Oriented**: Quick access to CRUD operations and QR scanning\n3. **Role-Aware Interface**: Clear visual distinction between admin and staff capabilities\n4. **Scan-Ready**: QR code integration throughout inventory displays\n\n## Typography\n- **Headings**: System font stack, medium weight (500-600)\n- **Body**: Default (400), Small (sm) for dense tables\n- **Data Display**: Monospace for codes/IDs, tabular numbers enabled\n- **Hierarchy**: H1 for page titles, H2 for sections, H3 for cards\n\n## Layout System\n**Spacing Primitives**: Tailwind units of 2, 4, 6, and 8\n- Card padding: p-6\n- Section gaps: gap-8\n- Form spacing: space-y-4\n- Table cells: p-4\n\n## Component Library\n\n### Navigation\n- Top bar with user context (name, role badge)\n- Sidebar for main sections: Dashboard, Inventory, Reservations, Activity Log, Users (admin)\n- Breadcrumbs for deep navigation\n\n### Data Display\n- **Tables**: Striped rows, sticky headers, sortable columns\n- **Cards**: Bordered, subtle shadow, item details with thumbnail + QR\n- **Stats Widgets**: Count badges, status indicators\n- **Search/Filter Bar**: Prominent placement above tables\n\n### Forms\n- **Input Fields**: Consistent h-9 height, clear labels above\n- **Buttons**: Primary for submit, Ghost for secondary actions\n- **Modal Dialogs**: For add/edit operations, keeping context visible\n- **File Upload**: QR scanner activation button\n\n### Inventory Specific\n- **Item Cards**: Image/QR on left, details on right, action buttons top-right\n- **QR Display**: Large, scannable size (200x200px minimum)\n- **Status Badges**: Available (green), Reserved (amber), Out (red)\n- **Quick Actions**: Edit, Reserve, Generate QR as icon buttons\n\n### Reservations\n- **Timeline View**: Chronological display with date separators\n- **Approval Workflow**: Clear approve/deny actions for pending items\n- **Email Preview**: Read-only notification display\n\n### Activity Log\n- **Feed Layout**: Avatar + timestamp + action description\n- **Filters**: By user, action type, date range\n- **Infinite Scroll**: Lazy loading for performance\n\n## Images\nNo hero images needed. This is a utility application focused on functional clarity. Use:\n- Product/item thumbnails in inventory listings (square, 64x64 or 80x80)\n- QR code visualizations (generated dynamically)\n- User avatars in activity feed (circular, 32x32)\n- Empty state illustrations for \"no items\" scenarios\n\n## Critical Features\n- Responsive tables that stack on mobile\n- Inline editing where possible\n- Toast notifications for actions\n- Loading states for async operations\n- Error boundaries with clear messages\n- Keyboard shortcuts for power users (navigate with arrow keys, quick search with '/')\n\n## Accessibility\n- ARIA labels on all interactive elements\n- Focus visible states on all controls\n- Color not sole indicator of status\n- Screen reader announcements for dynamic updates","path":null,"size_bytes":3260,"size_tokens":null},"server/storage.ts":{"content":"import { type User, type InsertUser, type Item, type Reservation, type InsertReservation, type InsertActivityLog, type ActivityLog, type InsertCategory, type Category, type Notification, type InsertNotification, type InsertDamageReport, type DamageReport } from \"@shared/schema\";\nimport { randomUUID } from \"crypto\";\nimport { db } from './db';\nimport { \n  items, users, reservations, categories, notifications, activityLogs,\n  itemEditHistory, reservationStatusHistory, damageReports,\n  type InsertItem, type InsertItemEditHistory, type InsertReservationStatusHistory\n} from \"@shared/schema\";\nimport { eq, and, gte, lte, or, desc, asc } from 'drizzle-orm';\n\n\nexport interface IStorage {\n  getUser(id: string): Promise<User | undefined>;\n  getUserByUsername(username: string): Promise<User | undefined>;\n  getAllUsers(): Promise<User[]>;\n  createUser(user: InsertUser): Promise<User>;\n  updateUser(id: string, updates: Partial<InsertUser>): Promise<User | undefined>;\n  deleteUser(id: string): Promise<boolean>;\n\n  getAllItems(): Promise<Item[]>;\n  getItemById(id: string): Promise<Item | undefined>;\n  getItemByBarcode(barcode: string): Promise<Item | undefined>;\n  getItemsByCategory(categorySubTypes: readonly string[]): Promise<Item[]>;\n  createItem(item: InsertItem): Promise<Item>;\n  updateItem(id: string, item: Partial<InsertItem>): Promise<Item | undefined>;\n  deleteItem(id: string): Promise<boolean>;\n  softDeleteItem(id: string, userId: string): Promise<boolean>;\n\n  getAllReservations(): Promise<Reservation[]>;\n  getReservationById(id: string): Promise<Reservation | undefined>;\n  getReservationsByUser(userId: string): Promise<Reservation[]>;\n  getReservationsByItem(itemId: string): Promise<Reservation[]>;\n  createReservation(reservation: InsertReservation): Promise<Reservation>;\n  updateReservation(id: string, reservation: Partial<InsertReservation>): Promise<Reservation | undefined>;\n  checkReservationConflict(itemId: string, startDate: Date, returnDate: Date, excludeId?: string): Promise<boolean>;\n\n  createActivityLog(data: InsertActivityLog): Promise<ActivityLog>;\n  getAllActivityLogs(): Promise<any[]>;\n  getActivityLogsByItem(itemId: string): Promise<any[]>;\n\n  getAllCategories(): Promise<Category[]>;\n  getCategoryById(id: string): Promise<Category | undefined>;\n  createCategory(data: InsertCategory): Promise<Category>;\n  updateCategory(id: string, data: Partial<InsertCategory>): Promise<Category | undefined>;\n  deleteCategory(id: string): Promise<boolean>;\n\n  createNotification(notification: InsertNotification): Promise<Notification>;\n  getNotificationsByUser(userId: string): Promise<Notification[]>;\n  markNotificationAsRead(id: string): Promise<void>;\n  markAllNotificationsAsRead(userId: string): Promise<void>;\n  deleteNotification(id: string): Promise<void>;\n  getUnreadNotificationCount(userId: string): Promise<number>;\n\n  createItemEditHistory(data: InsertItemEditHistory): Promise<any>;\n  getItemEditHistory(itemId: string): Promise<any[]>;\n  createReservationStatusHistory(data: InsertReservationStatusHistory): Promise<any>;\n  getReservationStatusHistory(reservationId: string): Promise<any[]>;\n\n  createDamageReport(data: InsertDamageReport): Promise<DamageReport>;\n  getAllDamageReports(): Promise<any[]>;\n  getDamageReportById(id: string): Promise<DamageReport | undefined>;\n  updateDamageReport(id: string, data: Partial<InsertDamageReport>): Promise<DamageReport | undefined>;\n}\n\nexport class MemStorage implements IStorage {\n  constructor() {\n  }\n\n  async getUser(id: string): Promise<User | undefined> {\n    return await db.query.users.findFirst({\n      where: eq(users.id, id)\n    });\n  }\n\n  async getUserByUsername(username: string): Promise<User | undefined> {\n    return await db.query.users.findFirst({\n      where: eq(users.username, username)\n    });\n  }\n\n  async getAllUsers(): Promise<User[]> {\n    return await db.query.users.findMany({\n      orderBy: [asc(users.name)]\n    });\n  }\n\n  async createUser(insertUser: InsertUser): Promise<User> {\n    const [user] = await db.insert(users).values(insertUser).returning();\n    return user;\n  }\n\n  async updateUser(id: string, updates: Partial<InsertUser>): Promise<User | undefined> {\n    const [user] = await db.update(users)\n      .set(updates)\n      .where(eq(users.id, id))\n      .returning();\n    return user;\n  }\n\n  async deleteUser(id: string): Promise<boolean> {\n    const result = await db.delete(users)\n      .where(eq(users.id, id))\n      .returning();\n    return result.length > 0;\n  }\n\n  async getAllItems(): Promise<Item[]> {\n    return await db.query.items.findMany({\n      orderBy: [asc(items.productName)]\n    });\n  }\n\n  async getItemById(id: string): Promise<Item | undefined> {\n    return await db.query.items.findFirst({\n      where: eq(items.id, id)\n    });\n  }\n\n  async getItemByBarcode(barcode: string): Promise<Item | undefined> {\n    return await db.query.items.findFirst({\n      where: eq(items.barcode, barcode)\n    });\n  }\n\n  async getItemsByCategory(categorySubTypes: readonly string[]): Promise<Item[]> {\n    const allItems = await db.query.items.findMany();\n    return allItems.filter(item => categorySubTypes.includes(item.productType));\n  }\n\n  async createItem(insertItem: InsertItem): Promise<Item> {\n    const now = new Date();\n    const itemData = {\n      ...insertItem,\n      status: insertItem.status || 'Available',\n      location: insertItem.location || null,\n      notes: insertItem.notes || null,\n      createdAt: now,\n      updatedAt: now\n    };\n\n    const [item] = await db.insert(items).values(itemData).returning();\n    return item;\n  }\n\n  async updateItem(id: string, updates: Partial<InsertItem>): Promise<Item | undefined> {\n    const [item] = await db.update(items)\n      .set({ ...updates, updatedAt: new Date() })\n      .where(eq(items.id, id))\n      .returning();\n    return item;\n  }\n\n  async deleteItem(id: string): Promise<boolean> {\n    const result = await db.delete(items)\n      .where(eq(items.id, id))\n      .returning();\n    return result.length > 0;\n  }\n\n  async softDeleteItem(id: string, userId: string): Promise<boolean> {\n    const [item] = await db.update(items)\n      .set({ status: 'Disabled', updatedAt: new Date() })\n      .where(eq(items.id, id))\n      .returning();\n    return !!item;\n  }\n\n  async getAllReservations(): Promise<Reservation[]> {\n    return await db.query.reservations.findMany({\n      orderBy: [desc(reservations.requestDate)]\n    });\n  }\n\n  async getReservationById(id: string): Promise<Reservation | undefined> {\n    return await db.query.reservations.findFirst({\n      where: eq(reservations.id, id)\n    });\n  }\n\n  async getReservationsByUser(userId: string): Promise<Reservation[]> {\n    return await db.query.reservations.findMany({\n      where: eq(reservations.userId, userId)\n    });\n  }\n\n  async getReservationsByItem(itemId: string): Promise<Reservation[]> {\n    return await db.query.reservations.findMany({\n      where: eq(reservations.itemId, itemId)\n    });\n  }\n\n  async createReservation(insertReservation: InsertReservation): Promise<Reservation> {\n    const now = new Date();\n    const reservationData = {\n      ...insertReservation,\n      status: insertReservation.status || 'pending',\n      notes: insertReservation.notes || null,\n      requestDate: now,\n      approvalDate: null,\n      rejectionReason: null,\n      itemConditionOnReceive: null,\n      itemConditionOnReturn: null\n    };\n\n    const [reservation] = await db.insert(reservations).values(reservationData).returning();\n    return reservation;\n  }\n\n  async updateReservation(id: string, updates: Partial<InsertReservation> & { rejectionReason?: string; itemConditionOnReceive?: string; itemConditionOnReturn?: string }): Promise<Reservation | undefined> {\n    const [reservation] = await db.update(reservations)\n      .set(updates)\n      .where(eq(reservations.id, id))\n      .returning();\n    return reservation;\n  }\n\n  async checkReservationConflict(itemId: string, startDate: Date, returnDate: Date, excludeId?: string): Promise<boolean> {\n    const allReservations = await db.query.reservations.findMany({\n      where: eq(reservations.itemId, itemId)\n    });\n\n    const itemReservations = allReservations.filter(\n      res => res.status !== 'rejected' &&\n             res.status !== 'completed' &&\n             (!excludeId || res.id !== excludeId)\n    );\n\n    for (const res of itemReservations) {\n      const resStart = new Date(res.startDate);\n      const resEnd = new Date(res.returnDate);\n\n      if (\n        (startDate >= resStart && startDate <= resEnd) ||\n        (returnDate >= resStart && returnDate <= resEnd) ||\n        (startDate <= resStart && returnDate >= resEnd)\n      ) {\n        return true;\n      }\n    }\n\n    return false;\n  }\n\n  async createActivityLog(data: InsertActivityLog): Promise<ActivityLog> {\n    try {\n      const logData = {\n        ...data,\n        timestamp: new Date()\n      };\n      const [log] = await db.insert(activityLogs).values(logData).returning();\n      return log as ActivityLog;\n    } catch (error) {\n      console.error('Error creating activity log:', error);\n      console.error('Activity log data:', data);\n      throw error;\n    }\n  }\n\n  async getAllActivityLogs(): Promise<ActivityLog[]> {\n    try {\n      return await db.select({\n        id: activityLogs.id,\n        itemId: activityLogs.itemId,\n        itemName: items.productName,\n        itemBarcode: items.barcode,\n        userId: activityLogs.userId,\n        userName: users.name,\n        userRole: users.role,\n        userDepartment: users.department,\n        action: activityLogs.action,\n        oldStatus: activityLogs.oldStatus,\n        newStatus: activityLogs.newStatus,\n        notes: activityLogs.notes,\n        timestamp: activityLogs.timestamp,\n      })\n      .from(activityLogs)\n      .leftJoin(items, eq(activityLogs.itemId, items.id))\n      .leftJoin(users, eq(activityLogs.userId, users.id))\n      .orderBy(desc(activityLogs.timestamp));\n    } catch (error) {\n      console.error('Error getting activity logs:', error);\n      return [];\n    }\n  }\n\n  async getActivityLogsByItem(itemId: string): Promise<ActivityLog[]> {\n    try {\n      return await db.select({\n        id: activityLogs.id,\n        itemId: activityLogs.itemId,\n        userId: activityLogs.userId,\n        userName: users.name,\n        userRole: users.role,\n        userDepartment: users.department,\n        action: activityLogs.action,\n        oldStatus: activityLogs.oldStatus,\n        newStatus: activityLogs.newStatus,\n        notes: activityLogs.notes,\n        timestamp: activityLogs.timestamp,\n      })\n      .from(activityLogs)\n      .leftJoin(users, eq(activityLogs.userId, users.id))\n      .where(eq(activityLogs.itemId, itemId))\n      .orderBy(desc(activityLogs.timestamp));\n    } catch (error) {\n      console.error('Error getting activity logs by item:', error);\n      return [];\n    }\n  }\n\n  async getAllCategories(): Promise<Category[]> {\n    return await db.query.categories.findMany({\n      orderBy: [asc(categories.name)]\n    });\n  }\n\n  async getCategoryById(id: string): Promise<Category | undefined> {\n    return await db.query.categories.findFirst({\n      where: eq(categories.id, id)\n    });\n  }\n\n  async createCategory(data: InsertCategory): Promise<Category> {\n    const [category] = await db.insert(categories).values(data).returning();\n    return category;\n  }\n\n  async updateCategory(id: string, data: Partial<InsertCategory>): Promise<Category | undefined> {\n    const category = await this.getCategoryById(id);\n    if (category && category.isDefault) {\n      throw new Error('Cannot edit default categories.');\n    }\n\n    const [updatedCategory] = await db.update(categories)\n      .set(data)\n      .where(eq(categories.id, id))\n      .returning();\n    return updatedCategory;\n  }\n\n  async deleteCategory(id: string): Promise<boolean> {\n    const category = await this.getCategoryById(id);\n    if (category && category.isDefault) {\n      throw new Error('Cannot delete default categories.');\n    }\n    const result = await db.delete(categories)\n      .where(eq(categories.id, id))\n      .returning();\n    return result.length > 0;\n  }\n\n  async createNotification(data: InsertNotification): Promise<Notification> {\n    const [notification] = await db.insert(notifications).values({\n      ...data,\n      isRead: data.isRead || 'false'\n    }).returning();\n    return notification;\n  }\n\n  async getNotificationsByUser(userId: string): Promise<Notification[]> {\n    return await db.query.notifications.findMany({\n      where: eq(notifications.userId, userId),\n      orderBy: [desc(notifications.createdAt)],\n    });\n  }\n\n  async markNotificationAsRead(id: string): Promise<void> {\n    await db.update(notifications)\n      .set({ isRead: 'true' })\n      .where(eq(notifications.id, id));\n  }\n\n  async markAllNotificationsAsRead(userId: string): Promise<void> {\n    await db.update(notifications)\n      .set({ isRead: 'true' })\n      .where(eq(notifications.userId, userId));\n  }\n\n  async deleteNotification(id: string): Promise<void> {\n    await db.delete(notifications).where(eq(notifications.id, id));\n  }\n\n  async getUnreadNotificationCount(userId: string): Promise<number> {\n    const result = await db.query.notifications.findMany({\n      where: and(\n        eq(notifications.userId, userId),\n        eq(notifications.isRead, 'false')\n      ),\n    });\n    return result.length;\n  }\n\n  async createItemEditHistory(data: InsertItemEditHistory): Promise<any> {\n    const [history] = await db.insert(itemEditHistory).values(data).returning();\n    return history;\n  }\n\n  async getItemEditHistory(itemId: string): Promise<any[]> {\n    const history = await db.query.itemEditHistory.findMany({\n      where: eq(itemEditHistory.itemId, itemId),\n      orderBy: [desc(itemEditHistory.timestamp)],\n      with: {\n        user: {\n          columns: {\n            id: true,\n            name: true,\n            role: true\n          }\n        }\n      }\n    });\n\n    return history.map(h => ({\n      id: h.id,\n      itemId: h.itemId,\n      userId: h.userId,\n      fieldName: h.fieldName,\n      oldValue: h.oldValue,\n      newValue: h.newValue,\n      timestamp: h.timestamp,\n      userName: h.user.name,\n      userRole: h.user.role\n    }));\n  }\n\n  async createReservationStatusHistory(data: InsertReservationStatusHistory): Promise<any> {\n    const [history] = await db.insert(reservationStatusHistory).values(data).returning();\n    return history;\n  }\n\n  async getReservationStatusHistory(reservationId: string): Promise<any[]> {\n    const history = await db.query.reservationStatusHistory.findMany({\n      where: eq(reservationStatusHistory.reservationId, reservationId),\n      orderBy: [desc(reservationStatusHistory.timestamp)],\n      with: {\n        user: {\n          columns: {\n            id: true,\n            name: true,\n            role: true\n          }\n        }\n      }\n    });\n\n    return history.map(h => ({\n      id: h.id,\n      reservationId: h.reservationId,\n      userId: h.userId,\n      oldStatus: h.oldStatus,\n      newStatus: h.newStatus,\n      notes: h.notes,\n      timestamp: h.timestamp,\n      userName: h.user.name,\n      userRole: h.user.role\n    }));\n  }\n\n  async createDamageReport(data: InsertDamageReport): Promise<DamageReport> {\n    const [report] = await db.insert(damageReports).values(data).returning();\n    return report;\n  }\n\n  async getAllDamageReports(): Promise<any[]> {\n    const reports = await db.query.damageReports.findMany({\n      orderBy: [desc(damageReports.createdAt)],\n      with: {\n        reportedByUser: {\n          columns: {\n            id: true,\n            name: true,\n            role: true\n          }\n        }\n      }\n    });\n\n    return reports.map(r => ({\n      id: r.id,\n      itemId: r.itemId,\n      reportedBy: r.reportedBy,\n      reportType: r.reportType,\n      severity: r.severity,\n      description: r.description,\n      status: r.status,\n      resolutionNotes: r.resolutionNotes,\n      createdAt: r.createdAt,\n      resolvedAt: r.resolvedAt,\n      reportedByName: r.reportedByUser?.name,\n      reportedByRole: r.reportedByUser?.role\n    }));\n  }\n\n  async getDamageReportById(id: string): Promise<DamageReport | undefined> {\n    return await db.query.damageReports.findFirst({\n      where: eq(damageReports.id, id)\n    });\n  }\n\n  async updateDamageReport(id: string, data: Partial<InsertDamageReport>): Promise<DamageReport | undefined> {\n    const [report] = await db.update(damageReports)\n      .set({ ...data, resolvedAt: data.status === 'resolved' ? new Date() : undefined })\n      .where(eq(damageReports.id, id))\n      .returning();\n    return report;\n  }\n}\n\nexport const storage = new MemStorage();\n","path":null,"size_bytes":16656,"size_tokens":null},"attached_assets/toaster_1763671095572.tsx":{"content":"import { useToast } from \"@/hooks/use-toast\"\nimport {\n  Toast,\n  ToastClose,\n  ToastDescription,\n  ToastProvider,\n  ToastTitle,\n  ToastViewport,\n} from \"@/components/ui/toast\"\n\nexport function Toaster() {\n  const { toasts } = useToast()\n\n  return (\n    <ToastProvider>\n      {toasts.map(function ({ id, title, description, action, ...props }) {\n        return (\n          <Toast key={id} {...props}>\n            <div className=\"grid gap-1\">\n              {title && <ToastTitle>{title}</ToastTitle>}\n              {description && (\n                <ToastDescription>{description}</ToastDescription>\n              )}\n            </div>\n            {action}\n            <ToastClose />\n          </Toast>\n        )\n      })}\n      <ToastViewport />\n    </ToastProvider>\n  )\n}\n","path":null,"size_bytes":772,"size_tokens":null},"server/routes.ts":{"content":"import type { Express } from \"express\";\nimport { createServer, type Server } from \"http\";\nimport { z } from \"zod\";\nimport QRCode from \"qrcode\";\nimport { storage } from \"./storage\";\nimport { loginUser, requireAuth, requireAdmin, hashPassword } from \"./auth\";\nimport { EQUIPMENT_CATEGORIES, ASSET_CATEGORIES, CATEGORIES, insertItemSchema, insertReservationSchema, insertDamageReportSchema, users, itemEditHistory, reservationStatusHistory } from \"@shared/schema\";\nimport { eq, desc } from \"drizzle-orm\";\nimport { db } from \"./db\";\nimport { sendReservationRequestEmail, sendReservationApprovedEmail, sendReservationRejectedEmail } from \"./emailService\";\nimport { format } from \"date-fns\";\n\nexport async function registerRoutes(app: Express): Promise<Server> {\n  // Authentication routes\n  app.post(\"/api/auth/login\", async (req, res) => {\n    try {\n      const { username, password } = req.body;\n\n      if (!username || !password) {\n        return res.status(400).json({ error: 'Username and password required' });\n      }\n\n      const result = await loginUser(username, password);\n\n      if (!result.success) {\n        return res.status(401).json({ error: result.message });\n      }\n\n      // Regenerate session to prevent session fixation attacks\n      req.session.regenerate((err) => {\n        if (err) {\n          return res.status(500).json({ error: 'Session error' });\n        }\n\n        req.session.userId = result.user!.id;\n        req.session.username = result.user!.username;\n        req.session.role = result.user!.role;\n        req.session.name = result.user!.name;\n        req.session.department = result.user!.department;\n\n        // Save session to database\n        req.session.save((saveErr) => {\n          if (saveErr) {\n            return res.status(500).json({ error: 'Failed to save session' });\n          }\n          res.json({\n            user: result.user\n          });\n        });\n      });\n    } catch (error) {\n      console.error('Login error:', error);\n      res.status(500).json({ error: 'Internal server error' });\n    }\n  });\n\n  app.post(\"/api/auth/logout\", (req, res) => {\n    req.session.destroy((err) => {\n      if (err) {\n        return res.status(500).json({ error: 'Failed to logout' });\n      }\n      res.json({ success: true });\n    });\n  });\n\n  app.get(\"/api/auth/session\", (req, res) => {\n    if (!req.session?.userId) {\n      return res.status(401).json({ error: 'Not authenticated' });\n    }\n\n    res.json({\n      user: {\n        id: req.session.userId,\n        username: req.session.username,\n        role: req.session.role,\n        name: req.session.name\n      }\n    });\n  });\n\n  // Item routes\n  app.get(\"/api/items\", requireAuth, async (req, res) => {\n    try {\n      const category = req.query.category as string | undefined;\n      const isEquipmentParam = req.query.isEquipment as string | undefined;\n      let allItems = await storage.getAllItems();\n\n      // Filter by equipment type if specified\n      if (isEquipmentParam !== undefined) {\n        const isEquipment = isEquipmentParam === 'true';\n        allItems = allItems.filter(item => item.isEquipment === isEquipment);\n      }\n\n      if (category) {\n        // Find the category configuration to get its subTypes\n        const dbCategories = await storage.getAllCategories();\n\n        // Check if it's a default category (Equipment or Asset)\n        const defaultCategory = Object.values(EQUIPMENT_CATEGORIES).find(cat => cat.name === category) || \n                               Object.values(ASSET_CATEGORIES).find(cat => cat.name === category);\n\n        // Check if it's a custom category\n        const customCategory = dbCategories.find(cat => cat.name === category);\n\n        let subTypes: string[] = [];\n\n        if (defaultCategory) {\n          subTypes = [...defaultCategory.subTypes];\n        } else if (customCategory) {\n          subTypes = JSON.parse(customCategory.subTypes);\n        }\n\n        // Log for debugging\n        console.log(`Filtering category: ${category}`);\n        console.log(`SubTypes for category:`, subTypes);\n        console.log(`Total items:`, allItems.length);\n\n        // Filter items whose productType matches any of the category's subTypes\n        const filteredItems = allItems.filter(item => {\n          const matches = subTypes.includes(item.productType);\n          if (matches) {\n            console.log(`âœ“ Item \"${item.productName}\" (${item.productType}) matches category`);\n          } else {\n            console.log(`âœ— Item \"${item.productName}\" (${item.productType}) does NOT match subTypes: ${JSON.stringify(subTypes)}`);\n          }\n          return matches;\n        });\n\n        console.log(`Filtered items count: ${filteredItems.length}`);\n        res.json(filteredItems);\n      } else {\n        res.json(allItems);\n      }\n    } catch (error) {\n      console.error('Error fetching items:', error);\n      res.status(500).json({ error: \"Failed to fetch items\" });\n    }\n  });\n\n  app.get(\"/api/items/:id\", requireAuth, async (req, res) => {\n    try {\n      const item = await storage.getItemById(req.params.id);\n      if (!item) {\n        return res.status(404).json({ error: 'Item not found' });\n      }\n      res.json(item);\n    } catch (error) {\n      console.error('Get item error:', error);\n      res.status(500).json({ error: 'Failed to fetch item' });\n    }\n  });\n\n  app.post(\"/api/items\", requireAdmin, async (req, res) => {\n    try {\n      console.log('ðŸ“ Item creation request:', JSON.stringify(req.body, null, 2));\n      const validatedData = insertItemSchema.parse(req.body);\n      console.log('âœ… Validated data:', JSON.stringify(validatedData, null, 2));\n      const item = await storage.createItem(validatedData);\n      console.log('ðŸ’¾ Item created in DB:', JSON.stringify(item, null, 2));\n\n      // Log item creation\n      try {\n        await storage.createActivityLog({\n          itemId: item.id,\n          userId: req.session.userId!,\n          action: 'Item Created',\n          oldStatus: null,\n          newStatus: item.status,\n          notes: `Item created: ${item.productName} - ${item.productType}. Created at ${new Date().toLocaleString()}`\n        });\n      } catch (logError) {\n        console.error('Failed to log item creation:', logError);\n      }\n\n      res.status(201).json(item);\n    } catch (error) {\n      if (error instanceof z.ZodError) {\n        console.error('âŒ Zod validation error:', error.errors);\n        return res.status(400).json({ error: 'Invalid item data', details: error.errors });\n      }\n      console.error('Create item error:', error);\n      res.status(500).json({ error: 'Failed to create item' });\n    }\n  });\n\n  app.patch(\"/api/items/:id\", requireAuth, async (req, res) => {\n    try {\n      const validatedData = insertItemSchema.partial().parse(req.body);\n\n      // Get the current item state before update\n      const currentItem = await storage.getItemById(req.params.id);\n      if (!currentItem) {\n        return res.status(404).json({ error: 'Item not found' });\n      }\n\n      const item = await storage.updateItem(req.params.id, validatedData);\n\n      // Track all field changes\n      const fieldsToTrack = ['productName', 'productType', 'status', 'location', 'notes', 'barcode'];\n      for (const field of fieldsToTrack) {\n        if (validatedData[field] !== undefined && validatedData[field] !== currentItem[field]) {\n          try {\n            await storage.createItemEditHistory({\n              itemId: item.id,\n              userId: req.session.userId!,\n              fieldName: field,\n              oldValue: String(currentItem[field] || ''),\n              newValue: String(validatedData[field] || '')\n            });\n          } catch (historyError) {\n            console.error('Failed to log field change:', historyError);\n          }\n        }\n      }\n\n      // Log activity if status changed\n      if (validatedData.status && validatedData.status !== currentItem.status) {\n        let action = 'Status Updated';\n\n        if (validatedData.status === 'In Use' && currentItem.status === 'Available') {\n          action = 'Checked Out (Manual)';\n        } else if (validatedData.status === 'Available' && currentItem.status === 'In Use') {\n          action = 'Checked In (Manual)';\n        } else if (validatedData.status === 'Reserved') {\n          action = 'Marked as Reserved';\n        } else if (validatedData.status === 'Maintenance') {\n          action = 'Sent to Maintenance';\n        } else if (validatedData.status === 'Disabled') {\n          action = 'Disabled';\n        }\n\n        try {\n          await storage.createActivityLog({\n            itemId: item.id,\n            userId: req.session.userId!,\n            action,\n            oldStatus: currentItem.status,\n            newStatus: validatedData.status,\n            notes: `${item.productName}: ${currentItem.status} â†’ ${validatedData.status}. Updated at ${new Date().toLocaleString()}`\n          });\n        } catch (logError) {\n          console.error('Failed to log status change:', logError);\n        }\n      }\n\n      res.json(item);\n    } catch (error) {\n      if (error instanceof z.ZodError) {\n        return res.status(400).json({ error: 'Invalid item data', details: error.errors });\n      }\n      console.error('Update item error:', error);\n      res.status(500).json({ error: 'Failed to update item' });\n    }\n  });\n\n  app.delete(\"/api/items/:id\", requireAdmin, async (req, res) => {\n    try {\n      // Get item details before deletion\n      const item = await storage.getItemById(req.params.id);\n      if (!item) {\n        return res.status(404).json({ error: 'Item not found' });\n      }\n\n      // Soft delete the item\n      const deleted = await storage.softDeleteItem(req.params.id, req.session.userId!);\n\n      // Log deletion\n      try {\n        await storage.createActivityLog({\n          itemId: item.id,\n          userId: req.session.userId!,\n          action: 'Item Deleted (Soft)',\n          oldStatus: item.status,\n          newStatus: null,\n          notes: `${item.productName} (${item.barcode}) moved to trash. Can be restored. Deleted at ${new Date().toLocaleString()}`\n        });\n      } catch (logError) {\n        console.error('Failed to log item deletion:', logError);\n      }\n\n      res.json({ success: true, deleted });\n    } catch (error) {\n      console.error('Delete item error:', error);\n      res.status(500).json({ error: 'Failed to delete item' });\n    }\n  });\n\n  // QR Scan route (admin only)\n  app.post(\"/api/scan\", requireAdmin, async (req, res) => {\n    try {\n      const schema = z.object({\n        barcode: z.string().min(1, 'Barcode is required')\n      });\n      const { barcode } = schema.parse(req.body);\n\n      const item = await storage.getItemByBarcode(barcode);\n\n      if (!item) {\n        return res.json({\n          success: false,\n          error: `Item not found with barcode: ${barcode}`\n        });\n      }\n\n      const oldStatus = item.status;\n      let newStatus = oldStatus;\n      let action = '';\n\n      if (oldStatus === 'Available') {\n        newStatus = 'In Use';\n        action = 'Checked Out';\n      } else if (oldStatus === 'In Use') {\n        newStatus = 'Available';\n        action = 'Checked In';\n      } else if (oldStatus === 'Reserved') {\n        // When admin scans a reserved item, they're confirming pickup - change to In Use\n        newStatus = 'In Use';\n        action = 'Checked Out';\n      } else {\n        return res.json({\n          success: false,\n          error: `Item is currently ${oldStatus} and cannot be scanned`\n        });\n      }\n\n      await storage.updateItem(item.id, { status: newStatus });\n\n      // Log the activity\n      try {\n        await storage.createActivityLog({\n          itemId: item.id,\n          userId: req.session.userId!,\n          action: `${action} (QR Scan)`,\n          oldStatus,\n          newStatus,\n          notes: `${item.productName} scanned via admin QR scanner. ${oldStatus} â†’ ${newStatus}. Scanned at ${new Date().toLocaleString()}`\n        });\n      } catch (logError) {\n        console.error('Failed to log QR scan:', logError);\n      }\n\n      res.json({\n        success: true,\n        productName: item.productName,\n        barcode: item.barcode,\n        oldStatus,\n        newStatus,\n        action\n      });\n    } catch (error) {\n      if (error instanceof z.ZodError) {\n        return res.status(400).json({ error: 'Invalid scan data', details: error.errors });\n      }\n      console.error('Scan error:', error);\n      res.status(500).json({ error: 'Failed to process scan' });\n    }\n  });\n\n  // Public QR Scan route (no auth required)\n  app.get(\"/public/scan/:barcode\", async (req, res) => {\n    try {\n      const { barcode } = req.params;\n      const item = await storage.getItemByBarcode(barcode);\n\n      if (!item) {\n        return res.send(`\n          <!DOCTYPE html>\n          <html>\n            <head>\n              <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n              <title>Item Not Found</title>\n              <style>\n                body { font-family: Arial, sans-serif; text-align: center; padding: 50px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; }\n                .container { background: white; color: #333; padding: 40px; border-radius: 20px; max-width: 500px; margin: 0 auto; box-shadow: 0 10px 40px rgba(0,0,0,0.2); }\n                h1 { color: #ef4444; margin-bottom: 20px; }\n                p { font-size: 18px; }\n              </style>\n            </head>\n            <body>\n              <div class=\"container\">\n                <h1>âŒ Item Not Found</h1>\n                <p>No item found with barcode: <strong>${barcode}</strong></p>\n              </div>\n            </body>\n          </html>\n        `);\n      }\n\n      const oldStatus = item.status;\n      let newStatus = oldStatus;\n      let action = '';\n      let statusColor = '#3b82f6';\n\n      if (oldStatus === 'Available') {\n        newStatus = 'In Use';\n        action = 'Checked Out';\n        statusColor = '#f59e0b';\n      } else if (oldStatus === 'In Use') {\n        newStatus = 'Available';\n        action = 'Checked In';\n        statusColor = '#10b981';\n      } else if (oldStatus === 'Reserved') {\n        // When item is scanned while reserved, confirm pickup - change to In Use\n        newStatus = 'In Use';\n        action = 'Checked Out';\n        statusColor = '#f59e0b';\n      } else {\n        return res.send(`\n          <!DOCTYPE html>\n          <html>\n            <head>\n              <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n              <title>Cannot Process</title>\n              <style>\n                body { font-family: Arial, sans-serif; text-align: center; padding: 50px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; }\n                .container { background: white; color: #333; padding: 40px; border-radius: 20px; max-width: 500px; margin: 0 auto; box-shadow: 0 10px 40px rgba(0,0,0,0.2); }\n                h1 { color: #f59e0b; margin-bottom: 20px; }\n                .status { background: #fef3c7; padding: 10px 20px; border-radius: 10px; display: inline-block; margin: 20px 0; }\n              </style>\n            </head>\n            <body>\n              <div class=\"container\">\n                <h1>âš ï¸ Cannot Process</h1>\n                <p><strong>${item.productName}</strong></p>\n                <div class=\"status\">Current Status: ${oldStatus}</div>\n                <p>This item cannot be checked out/in at this time.</p>\n              </div>\n            </body>\n          </html>\n        `);\n      }\n\n      await storage.updateItem(item.id, { status: newStatus });\n\n      // Get a system user for logging (first admin user)\n      const systemUser = await db.query.users.findFirst({\n        where: eq(users.role, 'admin')\n      });\n\n      if (systemUser) {\n        try {\n          await storage.createActivityLog({\n            itemId: item.id,\n            userId: systemUser.id,\n            action: `${action} (Public QR)`,\n            oldStatus,\n            newStatus,\n            notes: `${item.productName} scanned via public QR code. ${oldStatus} â†’ ${newStatus}. Scanned at ${new Date().toLocaleString()}`\n          });\n        } catch (logError) {\n          console.error('Failed to log public QR scan:', logError);\n        }\n      }\n\n      const timestamp = new Date().toLocaleString('en-US', {\n        dateStyle: 'medium',\n        timeStyle: 'short'\n      });\n\n      res.send(`\n        <!DOCTYPE html>\n        <html>\n          <head>\n            <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n            <title>${action === 'Checked Out' ? 'Item Checked Out' : 'Item Returned'} Successfully</title>\n            <style>\n              * { margin: 0; padding: 0; box-sizing: border-box; }\n              body { \n                font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;\n                min-height: 100vh;\n                display: flex;\n                align-items: center;\n                justify-content: center;\n                background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n                padding: 20px;\n              }\n              .container { \n                background: white;\n                padding: 40px;\n                border-radius: 24px;\n                max-width: 500px;\n                width: 100%;\n                box-shadow: 0 20px 60px rgba(0,0,0,0.3);\n                animation: slideUp 0.4s ease-out;\n              }\n              @keyframes slideUp {\n                from { transform: translateY(20px); opacity: 0; }\n                to { transform: translateY(0); opacity: 1; }\n              }\n              .icon-container {\n                width: 80px;\n                height: 80px;\n                margin: 0 auto 24px;\n                background: ${action === 'Checked Out' ? 'linear-gradient(135deg, #f59e0b 0%, #f97316 100%)' : 'linear-gradient(135deg, #10b981 0%, #059669 100%)'};\n                border-radius: 50%;\n                display: flex;\n                align-items: center;\n                justify-content: center;\n                font-size: 40px;\n                animation: bounceIn 0.6s cubic-bezier(0.68, -0.55, 0.265, 1.55);\n              }\n              @keyframes bounceIn {\n                0% { transform: scale(0); }\n                50% { transform: scale(1.1); }\n                100% { transform: scale(1); }\n              }\n              h1 { \n                color: #111827;\n                font-size: 28px;\n                font-weight: 700;\n                text-align: center;\n                margin-bottom: 8px;\n              }\n              .subtitle {\n                text-align: center;\n                color: #6b7280;\n                font-size: 16px;\n                margin-bottom: 32px;\n              }\n              .info-card {\n                background: #f9fafb;\n                border-radius: 16px;\n                padding: 24px;\n                margin-bottom: 24px;\n              }\n              .info-row {\n                display: flex;\n                justify-content: space-between;\n                align-items: center;\n                padding: 12px 0;\n                border-bottom: 1px solid #e5e7eb;\n              }\n              .info-row:last-child { border-bottom: none; }\n              .label {\n                font-weight: 600;\n                color: #6b7280;\n                font-size: 14px;\n              }\n              .value {\n                font-weight: 700;\n                color: #111827;\n                font-size: 14px;\n                text-align: right;\n                max-width: 60%;\n                word-break: break-word;\n              }\n              .status-badge {\n                background: ${statusColor};\n                color: white;\n                padding: 6px 16px;\n                border-radius: 20px;\n                font-size: 13px;\n                font-weight: 600;\n              }\n              .action-badge {\n                background: ${action === 'Checked Out' ? '#f59e0b' : '#10b981'};\n                color: white;\n                padding: 6px 16px;\n                border-radius: 20px;\n                font-size: 13px;\n                font-weight: 600;\n              }\n              .success-message {\n                background: ${action === 'Checked Out' ? '#fef3c7' : '#d1fae5'};\n                color: ${action === 'Checked Out' ? '#92400e' : '#065f46'};\n                padding: 16px;\n                border-radius: 12px;\n                text-align: center;\n                font-weight: 600;\n                font-size: 15px;\n                border: 2px solid ${action === 'Checked Out' ? '#fbbf24' : '#34d399'};\n              }\n              .timestamp {\n                text-align: center;\n                color: #9ca3af;\n                font-size: 13px;\n                margin-top: 16px;\n              }\n            </style>\n          </head>\n          <body>\n            <div class=\"container\">\n              <div class=\"icon-container\">\n                ${action === 'Checked Out' ? 'ðŸ“¦' : 'âœ…'}\n              </div>\n              <h1>${action === 'Checked Out' ? 'Item Checked Out' : 'Item Returned'} Successfully!</h1>\n              <p class=\"subtitle\">${item.productName}</p>\n\n              <div class=\"info-card\">\n                <div class=\"info-row\">\n                  <span class=\"label\">Barcode</span>\n                  <span class=\"value\">${item.barcode}</span>\n                </div>\n                <div class=\"info-row\">\n                  <span class=\"label\">Product Type</span>\n                  <span class=\"value\">${item.productType}</span>\n                </div>\n                <div class=\"info-row\">\n                  <span class=\"label\">Action</span>\n                  <span class=\"action-badge\">${action}</span>\n                </div>\n                <div class=\"info-row\">\n                  <span class=\"label\">New Status</span>\n                  <span class=\"status-badge\">${newStatus}</span>\n                </div>\n              </div>\n\n              <div class=\"success-message\">\n                ${action === 'Checked Out' ? 'ðŸ“¦ This item is now marked as \"In Use\" in the system' : 'âœ¨ This item is now marked as \"Available\" and ready for use'}\n              </div>\n\n              <div class=\"timestamp\">\n                ${timestamp}\n              </div>\n            </div>\n          </body>\n        </html>\n      `);\n    } catch (error) {\n      console.error('Public scan error:', error);\n      res.status(500).send(`\n        <!DOCTYPE html>\n        <html>\n          <head>\n            <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n            <title>Error</title>\n            <style>\n              body { font-family: Arial, sans-serif; text-align: center; padding: 50px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; }\n              .container { background: white; color: #333; padding: 40px; border-radius: 20px; max-width: 500px; margin: 0 auto; }\n              h1 { color: #ef4444; }\n            </style>\n          </head>\n          <body>\n            <div class=\"container\">\n              <h1>Error</h1>\n              <p>Failed to process scan. Please try again.</p>\n            </div>\n          </body>\n        </html>\n      `);\n    }\n  });\n\n  // Categories route\n  app.get(\"/api/categories\", requireAuth, async (req, res) => {\n    try {\n      const isEquipmentParam = req.query.isEquipment as string | undefined;\n      const allItems = await storage.getAllItems();\n      const dbCategories = await storage.getAllCategories();\n\n      // Determine which categories to show based on filter\n      let shouldShowEquipment = true;\n      if (isEquipmentParam !== undefined) {\n        shouldShowEquipment = isEquipmentParam === 'true';\n      }\n\n      // Combine default and custom categories\n      const defaultCategories = Object.values(CATEGORIES)\n        .filter(cat => {\n          // Filter based on equipment type - check if category is in EQUIPMENT_CATEGORIES or ASSET_CATEGORIES\n          const isEquipmentCategory = Object.values(EQUIPMENT_CATEGORIES).some(c => c.name === cat.name);\n          return shouldShowEquipment === isEquipmentCategory;\n        })\n        .map(cat => {\n          const categoryItems = allItems.filter(item => \n            (cat.subTypes as readonly string[]).includes(item.productType)\n          );\n\n          return {\n            name: cat.name,\n            image: cat.image,\n            subTypes: cat.subTypes,\n            totalCount: categoryItems.length,\n            availableCount: categoryItems.filter(item => item.status === 'Available').length,\n            isCustom: false,\n            isEquipment: shouldShowEquipment\n          };\n        });\n\n      const customCategories = dbCategories\n        .filter(cat => {\n          // Filter custom categories by isEquipment flag\n          return shouldShowEquipment === cat.isEquipment;\n        })\n        .map(cat => {\n          const subTypes = JSON.parse(cat.subTypes);\n          const categoryItems = allItems.filter(item => \n            subTypes.includes(item.productType)\n          );\n\n          return {\n            id: cat.id,\n            name: cat.name,\n            image: cat.image,\n            subTypes,\n            totalCount: categoryItems.length,\n            availableCount: categoryItems.filter(item => item.status === 'Available').length,\n            isCustom: true,\n            isEquipment: cat.isEquipment\n          };\n        });\n\n      // Show all default categories (even with 0 items) and custom categories\n      const allCategories = [...defaultCategories, ...customCategories];\n      \n      console.log(`ðŸ“‹ GET /api/categories (isEquipment=${isEquipmentParam}):`, {\n        shouldShowEquipment,\n        defaultCategoriesCount: defaultCategories.length,\n        customCategoriesCount: customCategories.length,\n        totalCategoriesCount: allCategories.length,\n        customCategories: customCategories.map(c => ({ name: c.name, isEquipment: c.isEquipment }))\n      });\n\n      res.json(allCategories);\n    } catch (error) {\n      console.error('Get categories error:', error);\n      res.status(500).json({ error: 'Failed to fetch categories' });\n    }\n  });\n\n  // Category management routes (admin only)\n  app.post(\"/api/custom-categories\", requireAdmin, async (req, res) => {\n    try {\n      console.log('ðŸ“ POST body:', JSON.stringify(req.body, null, 2));\n      const validatedData = z.object({\n        name: z.string().min(1, \"Category name is required\"),\n        image: z.string().url(\"Valid image URL is required\"),\n        subTypes: z.array(z.string()).min(1, \"At least one product type is required\"),\n        isEquipment: z.boolean().default(true)\n      }).parse(req.body);\n\n      // Check if category name already exists\n      const existingCategories = await storage.getAllCategories();\n      const nameExists = existingCategories.some(\n        cat => cat.name.toLowerCase() === validatedData.name.toLowerCase()\n      );\n\n      if (nameExists) {\n        return res.status(400).json({ error: 'A category with this name already exists' });\n      }\n\n      console.log('ðŸ“ Creating custom category with isEquipment:', validatedData.isEquipment);\n      const category = await storage.createCategory({\n        name: validatedData.name,\n        image: validatedData.image,\n        subTypes: JSON.stringify(validatedData.subTypes),\n        isEquipment: validatedData.isEquipment,\n        showQuantity: true,\n        showLocation: true,\n        showNotes: true\n      });\n      console.log('âœ… Category created:', { name: category.name, isEquipment: category.isEquipment });\n\n      res.status(201).json(category);\n    } catch (error) {\n      if (error instanceof z.ZodError) {\n        return res.status(400).json({ \n          error: 'Invalid category data', \n          details: error.errors.map(e => ({ field: e.path.join('.'), message: e.message }))\n        });\n      }\n      console.error('Create category error:', error);\n      res.status(500).json({ error: 'Failed to create category' });\n    }\n  });\n\n  app.patch(\"/api/custom-categories/:id\", requireAdmin, async (req, res) => {\n    try {\n      const validatedData = z.object({\n        name: z.string().min(1).optional(),\n        image: z.string().url().optional(),\n        subTypes: z.array(z.string()).optional(),\n        isEquipment: z.boolean().optional(),\n        showQuantity: z.boolean().optional(),\n        showLocation: z.boolean().optional(),\n        showNotes: z.boolean().optional()\n      }).parse(req.body);\n\n      const updateData: any = { ...validatedData };\n      if (validatedData.subTypes) {\n        updateData.subTypes = JSON.stringify(validatedData.subTypes);\n      }\n\n      const category = await storage.updateCategory(req.params.id, updateData);\n      if (!category) {\n        return res.status(404).json({ error: 'Category not found' });\n      }\n      res.json(category);\n    } catch (error) {\n      if (error instanceof z.ZodError) {\n        return res.status(400).json({ error: 'Invalid category data', details: error.errors });\n      }\n      console.error('Update category error:', error);\n      res.status(500).json({ error: 'Failed to update category' });\n    }\n  });\n\n  app.delete(\"/api/custom-categories/:id\", requireAdmin, async (req, res) => {\n    try {\n      const deleted = await storage.deleteCategory(req.params.id);\n      if (!deleted) {\n        return res.status(404).json({ error: 'Category not found' });\n      }\n      res.json({ success: true });\n    } catch (error) {\n      console.error('Delete category error:', error);\n      res.status(500).json({ error: 'Failed to delete category' });\n    }\n  });\n\n  // Notification routes\n  app.get(\"/api/notifications\", requireAuth, async (req, res) => {\n    try {\n      const notifications = await storage.getNotificationsByUser(req.session.userId!);\n      res.json(notifications);\n    } catch (error) {\n      console.error('Get notifications error:', error);\n      res.status(500).json({ error: 'Failed to fetch notifications' });\n    }\n  });\n\n  app.patch(\"/api/notifications/:id/read\", requireAuth, async (req, res) => {\n    try {\n      await storage.markNotificationAsRead(req.params.id);\n      res.json({ success: true });\n    } catch (error) {\n      console.error('Mark notification as read error:', error);\n      res.status(500).json({ error: 'Failed to mark notification as read' });\n    }\n  });\n\n  app.patch(\"/api/notifications/read-all\", requireAuth, async (req, res) => {\n    try {\n      await storage.markAllNotificationsAsRead(req.session.userId!);\n      res.json({ success: true });\n    } catch (error) {\n      console.error('Mark all notifications as read error:', error);\n      res.status(500).json({ error: 'Failed to mark all notifications as read' });\n    }\n  });\n\n  app.delete(\"/api/notifications/:id\", requireAuth, async (req, res) => {\n    try {\n      await storage.deleteNotification(req.params.id);\n      res.json({ success: true });\n    } catch (error) {\n      console.error('Delete notification error:', error);\n      res.status(500).json({ error: 'Failed to delete notification' });\n    }\n  });\n\n  // Reservation routes\n  app.get(\"/api/reservations\", requireAuth, async (req, res) => {\n    try {\n      const reservations = await storage.getAllReservations();\n      res.json(reservations);\n    } catch (error) {\n      console.error('Get reservations error:', error);\n      res.status(500).json({ error: 'Failed to fetch reservations' });\n    }\n  });\n\n  app.get(\"/api/reservations/:id\", requireAuth, async (req, res) => {\n    try {\n      const reservation = await storage.getReservationById(req.params.id);\n      if (!reservation) {\n        return res.status(404).json({ error: 'Reservation not found' });\n      }\n      res.json(reservation);\n    } catch (error) {\n      console.error('Get reservation error:', error);\n      res.status(500).json({ error: 'Failed to fetch reservation' });\n    }\n  });\n\n  app.get(\"/api/reservations/item/:itemId\", requireAuth, async (req, res) => {\n    try {\n      const reservations = await storage.getReservationsByItem(req.params.itemId);\n      // Only return active reservations (pending, approved)\n      const activeReservations = reservations.filter(\n        r => r.status === 'pending' || r.status === 'approved'\n      );\n      res.json(activeReservations);\n    } catch (error) {\n      console.error('Get item reservations error:', error);\n      res.status(500).json({ error: 'Failed to fetch item reservations' });\n    }\n  });\n\n  app.post(\"/api/reservations\", requireAuth, async (req, res) => {\n    try {\n      console.log('ðŸ“ POST /api/reservations body:', req.body);\n      console.log('ðŸ“ Session userId:', req.session.userId);\n      \n      // Use session userId instead of body userId\n      const bodyData = req.body;\n      const validatedData = insertReservationSchema.parse({\n        ...bodyData,\n        userId: req.session.userId // Override with session userId\n      });\n\n      // Check for date conflicts\n      const hasConflict = await storage.checkReservationConflict(\n        validatedData.itemId,\n        validatedData.startDate,\n        validatedData.returnDate\n      );\n\n      if (hasConflict) {\n        return res.status(409).json({ \n          error: 'This item is already reserved for the selected dates. Please choose different dates.' \n        });\n      }\n\n      const reservation = await storage.createReservation(validatedData);\n\n      // Get item details\n      const item = await storage.getItemById(validatedData.itemId);\n      const oldStatus = item?.status || 'Available';\n\n      // Get user details\n      const user = await db.query.users.findFirst({\n        where: eq(users.id, validatedData.userId)\n      });\n\n      // Notify all admins about new reservation request\n      try {\n        const admins = await db.query.users.findMany({\n          where: eq(users.role, 'admin')\n        });\n\n        for (const admin of admins) {\n          await storage.createNotification({\n            userId: admin.id,\n            type: 'reservation_request',\n            title: 'New Reservation Request',\n            message: `${user?.name || 'A user'} has requested ${item?.productName || 'an item'} from ${new Date(validatedData.startDate).toLocaleDateString()} to ${new Date(validatedData.returnDate).toLocaleDateString()}`,\n            relatedId: reservation.id,\n            isRead: 'false',\n            notificationFor: 'admin'\n          });\n\n          // Send email notification to admin\n          if (admin.email) {\n            await sendReservationRequestEmail(admin.email, {\n              itemName: item?.productName || 'Item',\n              userName: user?.name || 'User',\n              userEmail: user?.email || '',\n              startDate: format(new Date(validatedData.startDate), 'MMM dd, yyyy'),\n              returnDate: format(new Date(validatedData.returnDate), 'MMM dd, yyyy'),\n              notes: validatedData.notes\n            });\n          }\n        }\n      } catch (notifError) {\n        console.error('Failed to create admin notifications:', notifError);\n      }\n\n      // Log activity\n      try {\n        await storage.createActivityLog({\n          itemId: validatedData.itemId,\n          userId: validatedData.userId,\n          action: 'Reservation Created',\n          oldStatus,\n          newStatus: oldStatus,\n          notes: `${item?.productName || 'Item'} reservation requested by ${user?.name || 'User'} from ${new Date(validatedData.startDate).toLocaleDateString()} to ${new Date(validatedData.returnDate).toLocaleDateString()}. Reservation Status: Pending (awaiting admin approval). Created at ${new Date().toLocaleString()}`\n        });\n      } catch (logError) {\n        console.error('Failed to log reservation creation:', logError);\n      }\n\n      res.status(201).json(reservation);\n    } catch (error) {\n      if (error instanceof z.ZodError) {\n        return res.status(400).json({ error: 'Invalid reservation data', details: error.errors });\n      }\n      console.error('Create reservation error:', error);\n      res.status(500).json({ error: 'Failed to create reservation' });\n    }\n  });\n\n  app.patch(\"/api/reservations/:id\", requireAuth, async (req, res) => {\n    try {\n      const validatedData = insertReservationSchema.partial().extend({\n        rejectionReason: z.string().optional(),\n        itemConditionOnReceive: z.string().optional(),\n        itemConditionOnReturn: z.string().optional(),\n        checkoutDate: z.date().optional().or(z.string().datetime().transform(str => new Date(str))),\n        returnedDate: z.date().optional().or(z.string().datetime().transform(str => new Date(str))),\n        returnNotes: z.string().optional()\n      }).parse(req.body);\n\n      // Get current reservation state\n      const currentReservation = await storage.getReservationById(req.params.id);\n      if (!currentReservation) {\n        return res.status(404).json({ error: 'Reservation not found' });\n      }\n\n      const reservation = await storage.updateReservation(req.params.id, validatedData);\n\n      // Track status changes\n      if (validatedData.status && validatedData.status !== currentReservation.status) {\n        try {\n          await storage.createReservationStatusHistory({\n            reservationId: reservation.id,\n            userId: req.session.userId!,\n            oldStatus: currentReservation.status,\n            newStatus: validatedData.status,\n            notes: validatedData.rejectionReason || `Status changed from ${currentReservation.status} to ${validatedData.status}`\n          });\n        } catch (historyError) {\n          console.error('Failed to log reservation status change:', historyError);\n        }\n      }\n\n      const item = await storage.getItemById(reservation.itemId);\n\n      // Update item status based on reservation status\n      if (validatedData.status === 'rejected') {\n        await storage.updateItem(reservation.itemId, { status: 'Available' });\n\n        // Create notification for user about rejection\n        try {\n          await storage.createNotification({\n            userId: reservation.userId,\n            type: 'reservation_rejected',\n            title: 'Reservation Rejected',\n            message: `Your reservation for ${item?.productName || 'item'} has been rejected${validatedData.rejectionReason ? `: ${validatedData.rejectionReason}` : '.'}`,\n            relatedId: reservation.id,\n            isRead: 'false',\n            notificationFor: 'user'\n          });\n\n          // Send rejection email\n          const user = await db.query.users.findFirst({\n            where: eq(users.id, reservation.userId)\n          });\n          if (user?.email) {\n            await sendReservationRejectedEmail(user.email, {\n              itemName: item?.productName || 'Item',\n              userName: user.name,\n              userEmail: user.email,\n              startDate: format(new Date(reservation.startDate), 'MMM dd, yyyy'),\n              returnDate: format(new Date(reservation.returnDate), 'MMM dd, yyyy'),\n              rejectionReason: validatedData.rejectionReason\n            });\n          }\n        } catch (notifError) {\n          console.error('Failed to create rejection notification:', notifError);\n        }\n\n        // Log activity\n        try {\n          await storage.createActivityLog({\n            itemId: reservation.itemId,\n            userId: req.session.userId!,\n            action: 'Reservation Rejected',\n            oldStatus: item?.status || 'Reserved',\n            newStatus: 'Available',\n            notes: `${item?.productName || 'Item'} reservation rejected by ${req.session.name}${validatedData.rejectionReason ? `. Reason: ${validatedData.rejectionReason}` : ''}. Status: Reserved â†’ Available. Updated at ${new Date().toLocaleString()}`\n          });\n        } catch (logError) {\n          console.error('Failed to log reservation status change:', logError);\n        }\n      } else if (validatedData.status === 'completed') {\n        // Update item status back to Available when reservation is completed\n        await storage.updateItem(reservation.itemId, { status: 'Available' });\n\n        // Log activity for return confirmation\n        try {\n          await storage.createActivityLog({\n            itemId: reservation.itemId,\n            userId: req.session.userId!,\n            action: 'Equipment Return Confirmed',\n            oldStatus: item?.status || 'Reserved',\n            newStatus: 'Available',\n            notes: `${item?.productName || 'Item'} return confirmed by ${req.session.name}. Condition: ${validatedData.itemConditionOnReturn || 'No notes provided'}. Status: Reserved â†’ Available. Returned at ${new Date().toLocaleString()}`\n          });\n        } catch (logError) {\n          console.error('Failed to log return confirmation:', logError);\n        }\n      } else if (validatedData.checkoutDate && validatedData.itemConditionOnReceive !== undefined) {\n        // Only record the receipt condition - do NOT change item status\n        // Log activity for receipt confirmation (condition only, no status change)\n        try {\n          await storage.createActivityLog({\n            itemId: reservation.itemId,\n            userId: req.session.userId!,\n            action: 'Equipment Receipt Confirmed',\n            oldStatus: item?.status || 'Reserved',\n            newStatus: item?.status || 'Reserved',\n            notes: `${item?.productName || 'Item'} received by ${req.session.name}. Condition: ${validatedData.itemConditionOnReceive || 'No notes provided'}. Status remains: ${item?.status || 'Reserved'}. Received at ${new Date().toLocaleString()}`\n          });\n        } catch (logError) {\n          console.error('Failed to log receipt confirmation:', logError);\n        }\n\n        // Create notification for user\n        try {\n          await storage.createNotification({\n            userId: reservation.userId,\n            type: 'equipment_received',\n            title: 'Equipment Received',\n            message: `You have successfully received ${item?.productName || 'equipment'}. Return by ${format(new Date(reservation.returnDate), 'MMM dd, yyyy')} at ${reservation.returnTime || '17:00'}`,\n            relatedId: reservation.id,\n            isRead: 'false',\n            notificationFor: 'user'\n          });\n        } catch (notifError) {\n          console.error('Failed to create checkout notification:', notifError);\n        }\n      } else if (validatedData.status === 'approved') {\n        await storage.updateItem(reservation.itemId, { status: 'Reserved' });\n\n        // Create notification for user about approval\n        try {\n          await storage.createNotification({\n            userId: reservation.userId,\n            type: 'reservation_approved',\n            title: 'Reservation Approved',\n            message: `Your reservation for ${item?.productName || 'item'} has been approved!`,\n            relatedId: reservation.id,\n            isRead: 'false',\n            notificationFor: 'user'\n          });\n\n          // Send approval email\n          const user = await db.query.users.findFirst({\n            where: eq(users.id, reservation.userId)\n          });\n          if (user?.email) {\n            await sendReservationApprovedEmail(user.email, {\n              itemName: item?.productName || 'Item',\n              userName: user.name,\n              userEmail: user.email,\n              startDate: format(new Date(reservation.startDate), 'MMM dd, yyyy'),\n              returnDate: format(new Date(reservation.returnDate), 'MMM dd, yyyy')\n            });\n          }\n        } catch (notifError) {\n          console.error('Failed to create approval notification:', notifError);\n        }\n\n        // Log activity\n        try {\n          await storage.createActivityLog({\n            itemId: reservation.itemId,\n            userId: req.session.userId!,\n            action: 'Reservation Approved',\n            oldStatus: item?.status || 'Available',\n            newStatus: 'Reserved',\n            notes: `${item?.productName || 'Item'} reservation approved by ${req.session.name}. Status: ${item?.status} â†’ Reserved. Approved at ${new Date().toLocaleString()}`\n          });\n        } catch (logError) {\n          console.error('Failed to log reservation approval:', logError);\n        }\n      }\n\n      res.json(reservation);\n    } catch (error) {\n      if (error instanceof z.ZodError) {\n        return res.status(400).json({ error: 'Invalid reservation data', details: error.errors });\n      }\n      console.error('Update reservation error:', error);\n      res.status(500).json({ error: 'Failed to update reservation' });\n    }\n  });\n\n  // QR Code generation route\n  app.get(\"/api/items/:id/qrcode\", requireAuth, async (req, res) => {\n    try {\n      const item = await storage.getItemById(req.params.id);\n      if (!item) {\n        return res.status(404).json({ error: 'Item not found' });\n      }\n\n      // Generate public scan URL\n      const publicUrl = `${req.protocol}://${req.get('host')}/public/scan/${item.barcode}`;\n\n      // Generate QR code as data URL with public link\n      const qrCodeUrl = await QRCode.toDataURL(publicUrl, {\n        width: 300,\n        margin: 2,\n        color: {\n          dark: '#000000',\n          light: '#FFFFFF'\n        }\n      });\n\n      res.json({ qrCode: qrCodeUrl, barcode: item.barcode, publicUrl });\n    } catch (error) {\n      console.error('QR code generation error:', error);\n      res.status(500).json({ error: 'Failed to generate QR code' });\n    }\n  });\n\n  // Generate all QR codes\n  app.get(\"/api/qrcodes/all\", requireAdmin, async (req, res) => {\n    try {\n      const items = await storage.getAllItems();\n      const qrCodes = await Promise.all(\n        items.map(async (item) => {\n          const publicUrl = `${req.protocol}://${req.get('host')}/public/scan/${item.barcode}`;\n          const qrCode = await QRCode.toDataURL(publicUrl, {\n            width: 300,\n            margin: 2,\n            color: {\n              dark: '#000000',\n              light: '#FFFFFF'\n            }\n          });\n          return {\n            id: item.id,\n            barcode: item.barcode,\n            productName: item.productName,\n            qrCode,\n            publicUrl\n          };\n        })\n      );\n      res.json(qrCodes);\n    } catch (error) {\n      console.error('QR codes generation error:', error);\n      res.status(500).json({ error: 'Failed to generate QR codes' });\n    }\n  });\n\n  // User management routes (admin or developer)\n  const requireAdminOrDeveloper = (req: Request, res: Response, next: NextFunction) => {\n    if (!req.session.userId) {\n      return res.status(401).json({ error: 'Not authenticated' });\n    }\n    if (req.session.role !== 'developer' && req.session.role !== 'admin') {\n      return res.status(403).json({ error: 'Admin access required' });\n    }\n    next();\n  };\n\n  app.get(\"/api/users\", requireAdminOrDeveloper, async (req, res) => {\n    try {\n      const allUsers = await db.query.users.findMany({\n        columns: {\n          id: true,\n          username: true,\n          email: true,\n          name: true,\n          role: true,\n          department: true\n        }\n      });\n      res.json(allUsers);\n    } catch (error) {\n      console.error('Get users error:', error);\n      res.status(500).json({ error: 'Failed to fetch users' });\n    }\n  });\n\n  app.post(\"/api/users\", requireAdminOrDeveloper, async (req, res) => {\n    try {\n      const validatedData = z.object({\n        username: z.string().min(3, \"Username must be at least 3 characters\"),\n        password: z.string().min(3, \"Password must be at least 3 characters\"),\n        email: z.string().email(\"Valid email is required\"),\n        name: z.string().min(1, \"Name is required\"),\n        role: z.enum(['developer', 'admin', 'user']).default('user'),\n        department: z.string().optional()\n      }).parse(req.body);\n\n      // Check if username already exists\n      const existingUser = await storage.getUserByUsername(validatedData.username);\n      if (existingUser) {\n        return res.status(400).json({ error: 'Username already exists' });\n      }\n\n      // Hash password\n      const hashedPassword = await hashPassword(validatedData.password);\n\n      // Create user\n      const [newUser] = await db.insert(users).values({\n        username: validatedData.username,\n        password: hashedPassword,\n        email: validatedData.email,\n        name: validatedData.name,\n        role: validatedData.role,\n        department: validatedData.department || null\n      }).returning({\n        id: users.id,\n        username: users.username,\n        email: users.email,\n        name: users.name,\n        role: users.role,\n        department: users.department\n      });\n\n      res.status(201).json(newUser);\n    } catch (error) {\n      if (error instanceof z.ZodError) {\n        return res.status(400).json({ \n          error: 'Invalid user data', \n          details: error.errors.map(e => ({ field: e.path.join('.'), message: e.message }))\n        });\n      }\n      console.error('Create user error:', error);\n      res.status(500).json({ error: 'Failed to create user' });\n    }\n  });\n\n  app.patch(\"/api/users/:id\", requireAdminOrDeveloper, async (req, res) => {\n    try {\n      const validatedData = z.object({\n        email: z.string().email(\"Valid email is required\").optional(),\n        name: z.string().min(1, \"Name is required\").optional(),\n        role: z.enum(['developer', 'admin', 'user']).optional(),\n        department: z.string().optional()\n      }).parse(req.body);\n\n      const updateData: any = {};\n      if (validatedData.email) updateData.email = validatedData.email;\n      if (validatedData.name) updateData.name = validatedData.name;\n      if (validatedData.role) updateData.role = validatedData.role;\n      if (validatedData.department !== undefined) updateData.department = validatedData.department || null;\n\n      const [updatedUser] = await db.update(users)\n        .set(updateData)\n        .where(eq(users.id, req.params.id))\n        .returning({\n          id: users.id,\n          username: users.username,\n          email: users.email,\n          name: users.name,\n          role: users.role,\n          department: users.department\n        });\n\n      res.json(updatedUser);\n    } catch (error) {\n      if (error instanceof z.ZodError) {\n        return res.status(400).json({ \n          error: 'Invalid user data', \n          details: error.errors.map(e => ({ field: e.path.join('.'), message: e.message }))\n        });\n      }\n      console.error('Update user error:', error);\n      res.status(500).json({ error: 'Failed to update user' });\n    }\n  });\n\n  app.delete(\"/api/users/:id\", requireAdminOrDeveloper, async (req, res) => {\n    try {\n      // Prevent deleting self\n      if (req.params.id === req.session.userId) {\n        return res.status(400).json({ error: 'Cannot delete your own account' });\n      }\n\n      await db.delete(users).where(eq(users.id, req.params.id));\n      res.json({ success: true });\n    } catch (error) {\n      console.error('Delete user error:', error);\n      res.status(500).json({ error: 'Failed to delete user' });\n    }\n  });\n\n  // Activity log routes\n  app.get(\"/api/activity-logs\", requireAuth, async (req, res) => {\n    try {\n      const { startDate, endDate } = req.query;\n      let logs = await storage.getAllActivityLogs();\n      \n      // Filter by date range if provided\n      if (startDate || endDate) {\n        const start = startDate ? new Date(startDate as string) : new Date(0);\n        const end = endDate ? new Date(endDate as string) : new Date(Date.now() + 86400000);\n        \n        logs = logs.filter(log => {\n          const logDate = new Date(log.timestamp);\n          return logDate >= start && logDate <= end;\n        });\n      }\n      \n      res.json(logs);\n    } catch (error) {\n      console.error('Get activity logs error:', error);\n      res.status(500).json({ error: 'Failed to fetch activity logs' });\n    }\n  });\n\n  app.get(\"/api/activity-logs/item/:itemId\", requireAuth, async (req, res) => {\n    try {\n      const logs = await storage.getActivityLogsByItem(req.params.itemId);\n      res.json(logs);\n    } catch (error) {\n      console.error('Get item activity logs error:', error);\n      res.status(500).json({ error: 'Failed to fetch item activity logs' });\n    }\n  });\n\n  // Item Edit History routes\n  app.get('/api/item-edit-history/:itemId', requireAuth, async (req, res) => {\n    try {\n      const { itemId } = req.params;\n      const history = await db\n        .select({\n          id: itemEditHistory.id,\n          fieldName: itemEditHistory.fieldName,\n          oldValue: itemEditHistory.oldValue,\n          newValue: itemEditHistory.newValue,\n          timestamp: itemEditHistory.timestamp,\n          userName: users.name,\n        })\n        .from(itemEditHistory)\n        .innerJoin(users, eq(itemEditHistory.userId, users.id))\n        .where(eq(itemEditHistory.itemId, itemId))\n        .orderBy(desc(itemEditHistory.timestamp));\n\n      res.json(history);\n    } catch (error: any) {\n      console.error('Get item edit history error:', error);\n      res.status(500).json({ error: 'Failed to get item edit history' });\n    }\n  });\n\n  // Reservation Status History routes\n  app.get('/api/reservation-status-history/:reservationId', requireAuth, async (req, res) => {\n    try {\n      const { reservationId } = req.params;\n      const history = await db\n        .select({\n          id: reservationStatusHistory.id,\n          oldStatus: reservationStatusHistory.oldStatus,\n          newStatus: reservationStatusHistory.newStatus,\n          notes: reservationStatusHistory.notes,\n          timestamp: reservationStatusHistory.timestamp,\n          userName: users.name,\n        })\n        .from(reservationStatusHistory)\n        .innerJoin(users, eq(reservationStatusHistory.userId, users.id))\n        .where(eq(reservationStatusHistory.reservationId, reservationId))\n        .orderBy(desc(reservationStatusHistory.timestamp));\n\n      res.json(history);\n    } catch (error: any) {\n      console.error('Get reservation status history error:', error);\n      res.status(500).json({ error: 'Failed to get reservation status history' });\n    }\n  });\n\n  // Damage Reports routes\n  app.get('/api/damage-reports', requireAuth, async (req, res) => {\n    try {\n      const { startDate, endDate } = req.query;\n      let reports = await storage.getAllDamageReports();\n      \n      // Filter by date range if provided\n      if (startDate || endDate) {\n        const start = startDate ? new Date(startDate as string) : new Date(0);\n        const end = endDate ? new Date(endDate as string) : new Date(Date.now() + 86400000);\n        \n        reports = reports.filter(report => {\n          const reportDate = new Date(report.createdAt);\n          return reportDate >= start && reportDate <= end;\n        });\n      }\n      \n      res.json(reports);\n    } catch (error) {\n      console.error('Get damage reports error:', error);\n      res.status(500).json({ error: 'Failed to fetch damage reports' });\n    }\n  });\n\n  app.post('/api/damage-reports', requireAuth, async (req, res) => {\n    try {\n      const validatedData = insertDamageReportSchema.parse(req.body);\n      const report = await storage.createDamageReport(validatedData);\n      res.status(201).json(report);\n    } catch (error) {\n      if (error instanceof z.ZodError) {\n        return res.status(400).json({ error: 'Invalid damage report data', details: error.errors });\n      }\n      console.error('Create damage report error:', error);\n      res.status(500).json({ error: 'Failed to create damage report' });\n    }\n  });\n\n  app.patch('/api/damage-reports/:id', requireAuth, async (req, res) => {\n    try {\n      const { status, resolutionNotes } = req.body;\n      const report = await storage.updateDamageReport(req.params.id, { status, resolutionNotes });\n      if (!report) {\n        return res.status(404).json({ error: 'Report not found' });\n      }\n      res.json(report);\n    } catch (error) {\n      console.error('Update damage report error:', error);\n      res.status(500).json({ error: 'Failed to update damage report' });\n    }\n  });\n\n  const httpServer = createServer(app);\n  return httpServer;\n}","path":null,"size_bytes":56221,"size_tokens":null},"client/src/lib/utils.ts":{"content":"import { clsx, type ClassValue } from \"clsx\"\nimport { twMerge } from \"tailwind-merge\"\n\nexport function cn(...inputs: ClassValue[]) {\n  return twMerge(clsx(inputs))\n}\n","path":null,"size_bytes":166,"size_tokens":null},"client/src/pages/Maintenance.tsx":{"content":"import { useState } from \"react\";\nimport { useQuery, useMutation } from \"@tanstack/react-query\";\nimport { queryClient } from \"@/lib/queryClient\";\nimport InventoryHeader from \"@/components/InventoryHeader\";\nimport ItemCard from \"@/components/ItemCard\";\nimport ItemFormDialog from \"@/components/ItemFormDialog\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Table, TableBody, TableCell, TableHead, TableHeader, TableRow } from \"@/components/ui/table\";\nimport { Search, LayoutGrid, TableIcon, Wrench } from \"lucide-react\";\nimport { api, type Item } from \"@/lib/api\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport type { Language } from \"@/lib/translations\";\nimport { useTranslation } from '@/lib/translations';\n\ninterface MaintenancePageProps {\n  userName: string;\n  userRole: string;\n  userId: string;\n  onLogout: () => void;\n  onNavigateToInventory?: () => void;\n  onNavigateToReservations?: () => void;\n  onNavigateToActivityLogs?: () => void;\n  onNavigateToQRCodes?: () => void;\n  onNavigateToReports?: () => void;\n  language?: Language;\n  onLanguageChange?: (language: Language) => void;\n}\n\nexport default function Maintenance({\n  userName,\n  userRole,\n  userId,\n  onLogout,\n  onNavigateToInventory,\n  onNavigateToReservations,\n  onNavigateToActivityLogs,\n  onNavigateToQRCodes,\n  onNavigateToReports,\n  language = 'en',\n  onLanguageChange\n}: MaintenancePageProps) {\n  const { toast } = useToast();\n  const t = useTranslation(language);\n  const [searchQuery, setSearchQuery] = useState(\"\");\n  const [showItemForm, setShowItemForm] = useState(false);\n  const [editingItem, setEditingItem] = useState<Item | null>(null);\n  const [viewMode, setViewMode] = useState<'card' | 'table'>('card');\n\n  const { data: allItems = [] } = useQuery<Item[]>({\n    queryKey: ['/api/items'],\n    queryFn: () => api.items.getAll(),\n  });\n\n  const maintenanceItems = allItems.filter((item: Item) => item.status === 'Maintenance');\n\n  const updateItemMutation = useMutation({\n    mutationFn: ({ id, data }: { id: string; data: Partial<Item> }) =>\n      api.items.update(id, data),\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['/api/items'] });\n      queryClient.invalidateQueries({ queryKey: ['/api/categories'] });\n      setShowItemForm(false);\n      setEditingItem(null);\n      toast({ title: \"Item updated successfully\" });\n    },\n    onError: () => {\n      toast({ title: \"Failed to update item\", variant: \"destructive\" });\n    }\n  });\n\n  const deleteItemMutation = useMutation({\n    mutationFn: (id: string) => api.items.delete(id),\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['/api/items'] });\n      queryClient.invalidateQueries({ queryKey: ['/api/categories'] });\n      toast({ title: \"Item deleted successfully\" });\n    },\n    onError: () => {\n      toast({ title: \"Failed to delete item\", variant: \"destructive\" });\n    }\n  });\n\n  const handleLogout = async () => {\n    try {\n      await api.auth.logout();\n      onLogout();\n    } catch (error) {\n      console.error('Logout failed:', error);\n      onLogout();\n    }\n  };\n\n  const filteredItems = maintenanceItems.filter((item: Item) => {\n    const matchesSearch = searchQuery === \"\" ||\n      item.productName.toLowerCase().includes(searchQuery.toLowerCase()) ||\n      item.barcode.toLowerCase().includes(searchQuery.toLowerCase());\n    return matchesSearch;\n  });\n\n  const handleEditItem = (itemData: any) => {\n    if (editingItem) {\n      updateItemMutation.mutate({ id: editingItem.id, data: itemData });\n    }\n  };\n\n  const handleDeleteItem = (id: string) => {\n    if (confirm(t('areYouSureDeleteItem'))) {\n      deleteItemMutation.mutate(id);\n    }\n  };\n\n  return (\n    <div className=\"min-h-screen bg-background\">\n      <InventoryHeader\n        userName={userName}\n        userRole={userRole}\n        currentView=\"maintenance\"\n        language={language}\n        onLanguageChange={onLanguageChange}\n        onViewChange={(view) => {\n          if (view === 'inventory' || view === 'categories') {\n            onNavigateToInventory?.();\n          }\n        }}\n        onLogout={handleLogout}\n        onNavigateToReservations={onNavigateToReservations}\n        onNavigateToActivityLogs={onNavigateToActivityLogs}\n        onNavigateToQRCodes={onNavigateToQRCodes}\n        onNavigateToMaintenance={() => {}}\n        onNavigateToReports={onNavigateToReports}\n      />\n\n      <main className=\"max-w-[1400px] mx-auto px-5 py-8\">\n        <div className=\"text-center mb-10 p-10 bg-gradient-to-r from-[#667eea] to-[#764ba2] rounded-2xl text-white\">\n          <div className=\"flex items-center justify-center gap-3 mb-4\">\n            <Wrench className=\"w-10 h-10\" />\n            <h1 className=\"text-4xl font-extrabold\" data-testid=\"text-maintenance-title\">\n              {t('maintenanceManagement')}\n            </h1>\n          </div>\n          <p className=\"text-lg opacity-90 max-w-2xl mx-auto\" data-testid=\"text-maintenance-subtitle\">\n            {t('itemsInMaintenanceSubtitle')}\n          </p>\n        </div>\n\n        <div className=\"flex items-center justify-between mb-6 flex-wrap gap-4\">\n          <div>\n            <p className=\"text-muted-foreground text-lg\" data-testid=\"text-maintenance-count\">\n              {filteredItems.length} {t('itemsInMaintenanceCount')}\n            </p>\n          </div>\n          <div className=\"flex gap-3\">\n            <Button\n              onClick={() => setViewMode(viewMode === 'card' ? 'table' : 'card')}\n              variant=\"outline\"\n              data-testid=\"button-toggle-view\"\n            >\n              {viewMode === 'card' ? <TableIcon className=\"w-4 h-4 mr-2\" /> : <LayoutGrid className=\"w-4 h-4 mr-2\" />}\n              {viewMode === 'card' ? t('table_view') : t('card_view')}\n            </Button>\n          </div>\n        </div>\n\n        <div className=\"mb-6\">\n          <div className=\"relative max-w-md\">\n            <Search className=\"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-muted-foreground\" />\n            <Input\n              placeholder={t('search_maintenance_items')}\n              value={searchQuery}\n              onChange={(e) => setSearchQuery(e.target.value)}\n              className=\"pl-12\"\n              data-testid=\"input-search-maintenance\"\n            />\n          </div>\n        </div>\n\n        {filteredItems.length === 0 ? (\n          <div className=\"text-center py-16 bg-card rounded-lg border-2 border-dashed\">\n            <Wrench className=\"w-16 h-16 mx-auto mb-4 text-muted-foreground\" />\n            <h3 className=\"text-xl font-semibold mb-2\" data-testid=\"text-no-maintenance\">\n              {t('noItemsInMaintenance')}\n            </h3>\n            <p className=\"text-muted-foreground\" data-testid=\"text-no-maintenance-subtitle\">\n              {t('allEquipmentWorking')}\n            </p>\n          </div>\n        ) : viewMode === 'card' ? (\n          <div className=\"grid gap-4\">\n            {filteredItems.map((item: Item) => (\n              <ItemCard\n                key={item.id}\n                id={item.id}\n                barcode={item.barcode}\n                productName={item.productName}\n                productType={item.productType}\n                status={item.status}\n                location={item.location || undefined}\n                notes={item.notes || undefined}\n                userRole={userRole}\n                onEdit={userRole === 'admin' ? () => {\n                  setEditingItem(item);\n                  setShowItemForm(true);\n                } : undefined}\n                onDelete={userRole === 'admin' ? () => handleDeleteItem(item.id) : undefined}\n              />\n            ))}\n          </div>\n        ) : (\n          <div className=\"bg-white rounded-lg shadow overflow-hidden\">\n            <Table>\n              <TableHeader>\n                <TableRow>\n                  <TableHead>{t('barcode')}</TableHead>\n                  <TableHead>{t('name')}</TableHead>\n                  <TableHead>{t('type')}</TableHead>\n                  <TableHead>{t('status')}</TableHead>\n                  <TableHead>{t('location')}</TableHead>\n                  <TableHead>{t('notes')}</TableHead>\n                  {userRole === 'admin' && <TableHead className=\"text-right\">{t('actions')}</TableHead>}\n                </TableRow>\n              </TableHeader>\n              <TableBody>\n                {filteredItems.map((item: Item) => (\n                  <TableRow key={item.id} data-testid={`row-maintenance-item-${item.id}`}>\n                    <TableCell className=\"font-mono\" data-testid={`text-barcode-${item.id}`}>{item.barcode}</TableCell>\n                    <TableCell className=\"font-medium\" data-testid={`text-name-${item.id}`}>{item.productName}</TableCell>\n                    <TableCell data-testid={`text-type-${item.id}`}>{item.productType}</TableCell>\n                    <TableCell>\n                      <span className=\"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-orange-100 text-orange-800\" data-testid={`badge-status-${item.id}`}>\n                        {item.status}\n                      </span>\n                    </TableCell>\n                    <TableCell data-testid={`text-location-${item.id}`}>{item.location || '-'}</TableCell>\n                    <TableCell data-testid={`text-notes-${item.id}`}>{item.notes || '-'}</TableCell>\n                    {userRole === 'admin' && (\n                      <TableCell className=\"text-right\">\n                        <div className=\"flex gap-2 justify-end\">\n                          <Button\n                            size=\"sm\"\n                            variant=\"outline\"\n                            onClick={() => {\n                              setEditingItem(item);\n                              setShowItemForm(true);\n                            }}\n                            data-testid={`button-edit-${item.id}`}\n                          >\n                            {t('edit')}\n                          </Button>\n                        </div>\n                      </TableCell>\n                    )}\n                  </TableRow>\n                ))}\n              </TableBody>\n            </Table>\n          </div>\n        )}\n      </main>\n\n      {showItemForm && (\n        <ItemFormDialog\n          open={showItemForm}\n          onClose={() => {\n            setShowItemForm(false);\n            setEditingItem(null);\n          }}\n          onSubmit={handleEditItem}\n          item={editingItem || undefined}\n          mode={editingItem ? 'edit' : 'add'}\n          userRole=\"admin\"\n        />\n      )}\n    </div>\n  );\n}","path":null,"size_bytes":10613,"size_tokens":null},"attached_assets/resizable_1763670995702.tsx":{"content":"\"use client\"\n\nimport { GripVertical } from \"lucide-react\"\nimport * as ResizablePrimitive from \"react-resizable-panels\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ResizablePanelGroup = ({\n  className,\n  ...props\n}: React.ComponentProps<typeof ResizablePrimitive.PanelGroup>) => (\n  <ResizablePrimitive.PanelGroup\n    className={cn(\n      \"flex h-full w-full data-[panel-group-direction=vertical]:flex-col\",\n      className\n    )}\n    {...props}\n  />\n)\n\nconst ResizablePanel = ResizablePrimitive.Panel\n\nconst ResizableHandle = ({\n  withHandle,\n  className,\n  ...props\n}: React.ComponentProps<typeof ResizablePrimitive.PanelResizeHandle> & {\n  withHandle?: boolean\n}) => (\n  <ResizablePrimitive.PanelResizeHandle\n    className={cn(\n      \"relative flex w-px items-center justify-center bg-border after:absolute after:inset-y-0 after:left-1/2 after:w-1 after:-translate-x-1/2 focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring focus-visible:ring-offset-1 data-[panel-group-direction=vertical]:h-px data-[panel-group-direction=vertical]:w-full data-[panel-group-direction=vertical]:after:left-0 data-[panel-group-direction=vertical]:after:h-1 data-[panel-group-direction=vertical]:after:w-full data-[panel-group-direction=vertical]:after:-translate-y-1/2 data-[panel-group-direction=vertical]:after:translate-x-0 [&[data-panel-group-direction=vertical]>div]:rotate-90\",\n      className\n    )}\n    {...props}\n  >\n    {withHandle && (\n      <div className=\"z-10 flex h-4 w-3 items-center justify-center rounded-sm border bg-border\">\n        <GripVertical className=\"h-2.5 w-2.5\" />\n      </div>\n    )}\n  </ResizablePrimitive.PanelResizeHandle>\n)\n\nexport { ResizablePanelGroup, ResizablePanel, ResizableHandle }\n","path":null,"size_bytes":1723,"size_tokens":null},"attached_assets/alert-dialog_1763670951624.tsx":{"content":"import * as React from \"react\"\nimport * as AlertDialogPrimitive from \"@radix-ui/react-alert-dialog\"\n\nimport { cn } from \"@/lib/utils\"\nimport { buttonVariants } from \"@/components/ui/button\"\n\nconst AlertDialog = AlertDialogPrimitive.Root\n\nconst AlertDialogTrigger = AlertDialogPrimitive.Trigger\n\nconst AlertDialogPortal = AlertDialogPrimitive.Portal\n\nconst AlertDialogOverlay = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Overlay\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n    ref={ref}\n  />\n))\nAlertDialogOverlay.displayName = AlertDialogPrimitive.Overlay.displayName\n\nconst AlertDialogContent = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPortal>\n    <AlertDialogOverlay />\n    <AlertDialogPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg\",\n        className\n      )}\n      {...props}\n    />\n  </AlertDialogPortal>\n))\nAlertDialogContent.displayName = AlertDialogPrimitive.Content.displayName\n\nconst AlertDialogHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-2 text-center sm:text-left\",\n      className\n    )}\n    {...props}\n  />\n)\nAlertDialogHeader.displayName = \"AlertDialogHeader\"\n\nconst AlertDialogFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\n      className\n    )}\n    {...props}\n  />\n)\nAlertDialogFooter.displayName = \"AlertDialogFooter\"\n\nconst AlertDialogTitle = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Title\n    ref={ref}\n    className={cn(\"text-lg font-semibold\", className)}\n    {...props}\n  />\n))\nAlertDialogTitle.displayName = AlertDialogPrimitive.Title.displayName\n\nconst AlertDialogDescription = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nAlertDialogDescription.displayName =\n  AlertDialogPrimitive.Description.displayName\n\nconst AlertDialogAction = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Action>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Action>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Action\n    ref={ref}\n    className={cn(buttonVariants(), className)}\n    {...props}\n  />\n))\nAlertDialogAction.displayName = AlertDialogPrimitive.Action.displayName\n\nconst AlertDialogCancel = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Cancel>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Cancel>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Cancel\n    ref={ref}\n    className={cn(\n      buttonVariants({ variant: \"outline\" }),\n      \"mt-2 sm:mt-0\",\n      className\n    )}\n    {...props}\n  />\n))\nAlertDialogCancel.displayName = AlertDialogPrimitive.Cancel.displayName\n\nexport {\n  AlertDialog,\n  AlertDialogPortal,\n  AlertDialogOverlay,\n  AlertDialogTrigger,\n  AlertDialogContent,\n  AlertDialogHeader,\n  AlertDialogFooter,\n  AlertDialogTitle,\n  AlertDialogDescription,\n  AlertDialogAction,\n  AlertDialogCancel,\n}\n","path":null,"size_bytes":4420,"size_tokens":null},"attached_assets/storage_1763670748027.ts":{"content":"import { type User, type InsertUser, type Item, type Reservation, type InsertReservation, type InsertActivityLog, type ActivityLog, type InsertCategory, type Category, type Notification, type InsertNotification } from \"@shared/schema\";\nimport { randomUUID } from \"crypto\";\nimport { db } from './db';\nimport { \n  items, users, reservations, categories, notifications, activityLogs,\n  itemEditHistory, reservationStatusHistory,\n  type InsertItem, type InsertReservation, type InsertCategory, \n  type InsertNotification, type InsertActivityLog,\n  type InsertItemEditHistory, type InsertReservationStatusHistory\n} from \"@shared/schema\";\nimport { eq, and, gte, lte, or, desc, asc } from 'drizzle-orm';\n\n\nexport interface IStorage {\n  getUser(id: string): Promise<User | undefined>;\n  getUserByUsername(username: string): Promise<User | undefined>;\n  createUser(user: InsertUser): Promise<User>;\n\n  getAllItems(): Promise<Item[]>;\n  getItemById(id: string): Promise<Item | undefined>;\n  getItemByBarcode(barcode: string): Promise<Item | undefined>;\n  getItemsByCategory(categorySubTypes: readonly string[]): Promise<Item[]>;\n  createItem(item: InsertItem): Promise<Item>;\n  updateItem(id: string, item: Partial<InsertItem>): Promise<Item | undefined>;\n  deleteItem(id: string): Promise<boolean>;\n\n  getAllReservations(): Promise<Reservation[]>;\n  getReservationById(id: string): Promise<Reservation | undefined>;\n  getReservationsByUser(userId: string): Promise<Reservation[]>;\n  getReservationsByItem(itemId: string): Promise<Reservation[]>;\n  createReservation(reservation: InsertReservation): Promise<Reservation>;\n  updateReservation(id: string, reservation: Partial<InsertReservation>): Promise<Reservation | undefined>;\n  checkReservationConflict(itemId: string, startDate: Date, returnDate: Date, excludeId?: string): Promise<boolean>;\n\n  // Activity Log methods\n  createActivityLog(data: InsertActivityLog): Promise<ActivityLog>;\n  getAllActivityLogs(): Promise<any[]>; // Adjust return type as needed\n  getActivityLogsByItem(itemId: string): Promise<any[]>; // Adjust return type as needed\n\n  // Category methods\n  getAllCategories(): Promise<Category[]>;\n  getCategoryById(id: string): Promise<Category | undefined>;\n  createCategory(data: InsertCategory): Promise<Category>;\n  updateCategory(id: string, data: Partial<InsertCategory>): Promise<Category | undefined>;\n  deleteCategory(id: string): Promise<boolean>;\n\n  // Notification methods\n  createNotification(notification: InsertNotification): Promise<Notification>;\n  getNotificationsByUser(userId: string): Promise<Notification[]>;\n  markNotificationAsRead(id: string): Promise<void>;\n  markAllNotificationsAsRead(userId: string): Promise<void>;\n  deleteNotification(id: string): Promise<void>;\n  getUnreadNotificationCount(userId: string): Promise<number>;\n\n  // Enhanced Activity Log methods\n  createItemEditHistory(data: InsertItemEditHistory): Promise<any>;\n  getItemEditHistory(itemId: string): Promise<any[]>;\n  createReservationStatusHistory(data: InsertReservationStatusHistory): Promise<any>;\n  getReservationStatusHistory(reservationId: string): Promise<any[]>;\n}\n\nexport class MemStorage implements IStorage {\n  constructor() {\n    // All data now stored in database\n  }\n\n  async getUser(id: string): Promise<User | undefined> {\n    return await db.query.users.findFirst({\n      where: eq(users.id, id)\n    });\n  }\n\n  async getUserByUsername(username: string): Promise<User | undefined> {\n    return await db.query.users.findFirst({\n      where: eq(users.username, username)\n    });\n  }\n\n  async createUser(insertUser: InsertUser): Promise<User> {\n    const [user] = await db.insert(users).values(insertUser).returning();\n    return user;\n  }\n\n  async getAllItems(): Promise<Item[]> {\n    return await db.query.items.findMany({\n      orderBy: [asc(items.productName)]\n    });\n  }\n\n  async getItemById(id: string): Promise<Item | undefined> {\n    return await db.query.items.findFirst({\n      where: eq(items.id, id)\n    });\n  }\n\n  async getItemByBarcode(barcode: string): Promise<Item | undefined> {\n    return await db.query.items.findFirst({\n      where: eq(items.barcode, barcode)\n    });\n  }\n\n  async getItemsByCategory(categorySubTypes: readonly string[]): Promise<Item[]> {\n    const allItems = await db.query.items.findMany();\n    return allItems.filter(item => categorySubTypes.includes(item.productType));\n  }\n\n  async createItem(insertItem: InsertItem): Promise<Item> {\n    const now = new Date();\n    const itemData = {\n      ...insertItem,\n      status: insertItem.status || 'Available',\n      location: insertItem.location || null,\n      notes: insertItem.notes || null,\n      createdAt: now,\n      updatedAt: now\n    };\n\n    const [item] = await db.insert(items).values(itemData).returning();\n    return item;\n  }\n\n  async updateItem(id: string, updates: Partial<InsertItem>): Promise<Item | undefined> {\n    const [item] = await db.update(items)\n      .set({ ...updates, updatedAt: new Date() })\n      .where(eq(items.id, id))\n      .returning();\n    return item;\n  }\n\n  async deleteItem(id: string): Promise<boolean> {\n    const result = await db.delete(items)\n      .where(eq(items.id, id))\n      .returning();\n    return result.length > 0;\n  }\n\n  async getAllReservations(): Promise<Reservation[]> {\n    return await db.query.reservations.findMany({\n      orderBy: [desc(reservations.requestDate)]\n    });\n  }\n\n  async getReservationById(id: string): Promise<Reservation | undefined> {\n    return await db.query.reservations.findFirst({\n      where: eq(reservations.id, id)\n    });\n  }\n\n  async getReservationsByUser(userId: string): Promise<Reservation[]> {\n    return await db.query.reservations.findMany({\n      where: eq(reservations.userId, userId)\n    });\n  }\n\n  async getReservationsByItem(itemId: string): Promise<Reservation[]> {\n    return await db.query.reservations.findMany({\n      where: eq(reservations.itemId, itemId)\n    });\n  }\n\n  async createReservation(insertReservation: InsertReservation): Promise<Reservation> {\n    const now = new Date();\n    const reservationData = {\n      ...insertReservation,\n      status: insertReservation.status || 'pending',\n      notes: insertReservation.notes || null,\n      requestDate: now,\n      approvalDate: null,\n      rejectionReason: insertReservation.rejectionReason || null, // Added for rejection reason\n      itemNotes: insertReservation.itemNotes || null, // Added for user item notes\n    };\n\n    const [reservation] = await db.insert(reservations).values(reservationData).returning();\n    return reservation;\n  }\n\n  async updateReservation(id: string, updates: Partial<InsertReservation>): Promise<Reservation | undefined> {\n    const [reservation] = await db.update(reservations)\n      .set(updates)\n      .where(eq(reservations.id, id))\n      .returning();\n    return reservation;\n  }\n\n  async checkReservationConflict(itemId: string, startDate: Date, returnDate: Date, excludeId?: string): Promise<boolean> {\n    const allReservations = await db.query.reservations.findMany({\n      where: eq(reservations.itemId, itemId)\n    });\n\n    const itemReservations = allReservations.filter(\n      res => res.status !== 'rejected' &&\n             res.status !== 'completed' &&\n             (!excludeId || res.id !== excludeId)\n    );\n\n    for (const res of itemReservations) {\n      const resStart = new Date(res.startDate);\n      const resEnd = new Date(res.returnDate);\n\n      // Check if dates overlap\n      if (\n        (startDate >= resStart && startDate <= resEnd) ||\n        (returnDate >= resStart && returnDate <= resEnd) ||\n        (startDate <= resStart && returnDate >= resEnd)\n      ) {\n        return true; // Conflict found\n      }\n    }\n\n    return false; // No conflict\n  }\n\n  // Activity Log methods\n  async createActivityLog(data: InsertActivityLog): Promise<ActivityLog> {\n    try {\n      const logData = {\n        ...data,\n        timestamp: new Date()\n      };\n      const [log] = await db.insert(activityLogs).values(logData).returning();\n      return log as ActivityLog;\n    } catch (error) {\n      console.error('Error creating activity log:', error);\n      console.error('Activity log data:', data);\n      throw error; // Throw to allow caller to handle\n    }\n  }\n\n  async getAllActivityLogs(): Promise<ActivityLog[]> {\n    try {\n      return await db.select({\n        id: activityLogs.id,\n        itemId: activityLogs.itemId,\n        itemName: items.productName,\n        itemBarcode: items.barcode,\n        userId: activityLogs.userId,\n        userName: users.name,\n        userRole: users.role,\n        action: activityLogs.action,\n        oldStatus: activityLogs.oldStatus,\n        newStatus: activityLogs.newStatus,\n        notes: activityLogs.notes,\n        timestamp: activityLogs.timestamp,\n      })\n      .from(activityLogs)\n      .leftJoin(items, eq(activityLogs.itemId, items.id))\n      .leftJoin(users, eq(activityLogs.userId, users.id))\n      .orderBy(desc(activityLogs.timestamp));\n    } catch (error) {\n      console.error('Error getting activity logs:', error);\n      return [];\n    }\n  }\n\n  async getActivityLogsByItem(itemId: string): Promise<ActivityLog[]> {\n    try {\n      return await db.select({\n        id: activityLogs.id,\n        itemId: activityLogs.itemId,\n        userId: activityLogs.userId,\n        userName: users.name,\n        userRole: users.role,\n        action: activityLogs.action,\n        oldStatus: activityLogs.oldStatus,\n        newStatus: activityLogs.newStatus,\n        notes: activityLogs.notes,\n        timestamp: activityLogs.timestamp,\n      })\n      .from(activityLogs)\n      .leftJoin(users, eq(activityLogs.userId, users.id))\n      .where(eq(activityLogs.itemId, itemId))\n      .orderBy(desc(activityLogs.timestamp));\n    } catch (error) {\n      console.error('Error getting activity logs by item:', error);\n      return [];\n    }\n  }\n\n  // Category methods\n  async getAllCategories(): Promise<Category[]> {\n    return await db.query.categories.findMany({\n      orderBy: [asc(categories.name)]\n    });\n  }\n\n  async getCategoryById(id: string): Promise<Category | undefined> {\n    return await db.query.categories.findFirst({\n      where: eq(categories.id, id)\n    });\n  }\n\n  async createCategory(data: InsertCategory): Promise<Category> {\n    const [category] = await db.insert(categories).values(data).returning();\n    return category;\n  }\n\n  async updateCategory(id: string, data: Partial<InsertCategory>): Promise<Category | undefined> {\n    // Prevent editing default categories\n    const category = await this.getCategoryById(id);\n    if (category && category.isDefault) {\n      throw new Error('Cannot edit default categories.');\n    }\n\n    const [updatedCategory] = await db.update(categories)\n      .set(data)\n      .where(eq(categories.id, id))\n      .returning();\n    return updatedCategory;\n  }\n\n  async deleteCategory(id: string): Promise<boolean> {\n    const category = await this.getCategoryById(id);\n    if (category && category.isDefault) {\n      throw new Error('Cannot delete default categories.');\n    }\n    const result = await db.delete(categories)\n      .where(eq(categories.id, id))\n      .returning();\n    return result.length > 0;\n  }\n\n  // Notification methods\n  async createNotification(data: InsertNotification): Promise<Notification> {\n    const [notification] = await db.insert(notifications).values({\n      ...data,\n      isRead: data.isRead || 'false'\n    }).returning();\n    return notification;\n  }\n\n  async getNotificationsByUser(userId: string): Promise<Notification[]> {\n    return await db.query.notifications.findMany({\n      where: eq(notifications.userId, userId),\n      orderBy: [desc(notifications.createdAt)],\n    });\n  }\n\n  async markNotificationAsRead(id: string): Promise<void> {\n    await db.update(notifications)\n      .set({ isRead: 'true' })\n      .where(eq(notifications.id, id));\n  }\n\n  async markAllNotificationsAsRead(userId: string): Promise<void> {\n    await db.update(notifications)\n      .set({ isRead: 'true' })\n      .where(eq(notifications.userId, userId));\n  }\n\n  async deleteNotification(id: string): Promise<void> {\n    await db.delete(notifications).where(eq(notifications.id, id));\n  }\n\n  async getUnreadNotificationCount(userId: string): Promise<number> {\n    const result = await db.query.notifications.findMany({\n      where: and(\n        eq(notifications.userId, userId),\n        eq(notifications.isRead, 'false')\n      ),\n    });\n    return result.length;\n  }\n\n  // Item Edit History\n  async createItemEditHistory(data: InsertItemEditHistory): Promise<any> {\n    const [history] = await db.insert(itemEditHistory).values(data).returning();\n    return history;\n  }\n\n  async getItemEditHistory(itemId: string): Promise<any[]> {\n    const history = await db.query.itemEditHistory.findMany({\n      where: eq(itemEditHistory.itemId, itemId),\n      orderBy: [desc(itemEditHistory.timestamp)],\n      with: {\n        user: {\n          columns: {\n            id: true,\n            name: true,\n            role: true\n          }\n        }\n      }\n    });\n\n    return history.map(h => ({\n      id: h.id,\n      itemId: h.itemId,\n      userId: h.userId,\n      fieldName: h.fieldName,\n      oldValue: h.oldValue,\n      newValue: h.newValue,\n      timestamp: h.timestamp,\n      userName: h.user.name,\n      userRole: h.user.role\n    }));\n  }\n\n  // Reservation Status History\n  async createReservationStatusHistory(data: InsertReservationStatusHistory): Promise<any> {\n    const [history] = await db.insert(reservationStatusHistory).values(data).returning();\n    return history;\n  }\n\n  async getReservationStatusHistory(reservationId: string): Promise<any[]> {\n    const history = await db.query.reservationStatusHistory.findMany({\n      where: eq(reservationStatusHistory.reservationId, reservationId),\n      orderBy: [desc(reservationStatusHistory.timestamp)],\n      with: {\n        user: {\n          columns: {\n            id: true,\n            name: true,\n            role: true\n          }\n        }\n      }\n    });\n\n    return history.map(h => ({\n      id: h.id,\n      reservationId: h.reservationId,\n      userId: h.userId,\n      oldStatus: h.oldStatus,\n      newStatus: h.newStatus,\n      notes: h.notes,\n      timestamp: h.timestamp,\n      userName: h.user.name,\n      userRole: h.user.role\n    }));\n  }\n}\n\nexport const storage = new MemStorage();","path":null,"size_bytes":14336,"size_tokens":null},"attached_assets/input_1763670995696.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Input = React.forwardRef<HTMLInputElement, React.ComponentProps<\"input\">>(\n  ({ className, type, ...props }, ref) => {\n    // h-9 to match icon buttons and default buttons.\n    return (\n      <input\n        type={type}\n        className={cn(\n          \"flex h-9 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm\",\n          className\n        )}\n        ref={ref}\n        {...props}\n      />\n    )\n  }\n)\nInput.displayName = \"Input\"\n\nexport { Input }\n","path":null,"size_bytes":844,"size_tokens":null},"client/src/components/ui/avatar.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as AvatarPrimitive from \"@radix-ui/react-avatar\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Avatar = React.forwardRef<\n  React.ElementRef<typeof AvatarPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <AvatarPrimitive.Root\n    ref={ref}\n    className={cn(`\n      after:content-[''] after:block after:absolute after:inset-0 after:rounded-full after:pointer-events-none after:border after:border-black/10 dark:after:border-white/10\n      relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full`,\n      className\n    )}\n    {...props}\n  />\n))\nAvatar.displayName = AvatarPrimitive.Root.displayName\n\nconst AvatarImage = React.forwardRef<\n  React.ElementRef<typeof AvatarPrimitive.Image>,\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Image>\n>(({ className, ...props }, ref) => (\n  <AvatarPrimitive.Image\n    ref={ref}\n    className={cn(\"aspect-square h-full w-full\", className)}\n    {...props}\n  />\n))\nAvatarImage.displayName = AvatarPrimitive.Image.displayName\n\nconst AvatarFallback = React.forwardRef<\n  React.ElementRef<typeof AvatarPrimitive.Fallback>,\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Fallback>\n>(({ className, ...props }, ref) => (\n  <AvatarPrimitive.Fallback\n    ref={ref}\n    className={cn(\n      \"flex h-full w-full items-center justify-center rounded-full bg-muted\",\n      className\n    )}\n    {...props}\n  />\n))\nAvatarFallback.displayName = AvatarPrimitive.Fallback.displayName\n\nexport { Avatar, AvatarImage, AvatarFallback }\n","path":null,"size_bytes":1592,"size_tokens":null},"client/src/components/ui/drawer.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport { Drawer as DrawerPrimitive } from \"vaul\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Drawer = ({\n  shouldScaleBackground = true,\n  ...props\n}: React.ComponentProps<typeof DrawerPrimitive.Root>) => (\n  <DrawerPrimitive.Root\n    shouldScaleBackground={shouldScaleBackground}\n    {...props}\n  />\n)\nDrawer.displayName = \"Drawer\"\n\nconst DrawerTrigger = DrawerPrimitive.Trigger\n\nconst DrawerPortal = DrawerPrimitive.Portal\n\nconst DrawerClose = DrawerPrimitive.Close\n\nconst DrawerOverlay = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <DrawerPrimitive.Overlay\n    ref={ref}\n    className={cn(\"fixed inset-0 z-50 bg-black/80\", className)}\n    {...props}\n  />\n))\nDrawerOverlay.displayName = DrawerPrimitive.Overlay.displayName\n\nconst DrawerContent = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Content>\n>(({ className, children, ...props }, ref) => (\n  <DrawerPortal>\n    <DrawerOverlay />\n    <DrawerPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"fixed inset-x-0 bottom-0 z-50 mt-24 flex h-auto flex-col rounded-t-[10px] border bg-background\",\n        className\n      )}\n      {...props}\n    >\n      <div className=\"mx-auto mt-4 h-2 w-[100px] rounded-full bg-muted\" />\n      {children}\n    </DrawerPrimitive.Content>\n  </DrawerPortal>\n))\nDrawerContent.displayName = \"DrawerContent\"\n\nconst DrawerHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\"grid gap-1.5 p-4 text-center sm:text-left\", className)}\n    {...props}\n  />\n)\nDrawerHeader.displayName = \"DrawerHeader\"\n\nconst DrawerFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\"mt-auto flex flex-col gap-2 p-4\", className)}\n    {...props}\n  />\n)\nDrawerFooter.displayName = \"DrawerFooter\"\n\nconst DrawerTitle = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <DrawerPrimitive.Title\n    ref={ref}\n    className={cn(\n      \"text-lg font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nDrawerTitle.displayName = DrawerPrimitive.Title.displayName\n\nconst DrawerDescription = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <DrawerPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nDrawerDescription.displayName = DrawerPrimitive.Description.displayName\n\nexport {\n  Drawer,\n  DrawerPortal,\n  DrawerOverlay,\n  DrawerTrigger,\n  DrawerClose,\n  DrawerContent,\n  DrawerHeader,\n  DrawerFooter,\n  DrawerTitle,\n  DrawerDescription,\n}\n","path":null,"size_bytes":3021,"size_tokens":null},"attached_assets/breadcrumb_1763670951627.tsx":{"content":"import * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { ChevronRight, MoreHorizontal } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Breadcrumb = React.forwardRef<\n  HTMLElement,\n  React.ComponentPropsWithoutRef<\"nav\"> & {\n    separator?: React.ReactNode\n  }\n>(({ ...props }, ref) => <nav ref={ref} aria-label=\"breadcrumb\" {...props} />)\nBreadcrumb.displayName = \"Breadcrumb\"\n\nconst BreadcrumbList = React.forwardRef<\n  HTMLOListElement,\n  React.ComponentPropsWithoutRef<\"ol\">\n>(({ className, ...props }, ref) => (\n  <ol\n    ref={ref}\n    className={cn(\n      \"flex flex-wrap items-center gap-1.5 break-words text-sm text-muted-foreground sm:gap-2.5\",\n      className\n    )}\n    {...props}\n  />\n))\nBreadcrumbList.displayName = \"BreadcrumbList\"\n\nconst BreadcrumbItem = React.forwardRef<\n  HTMLLIElement,\n  React.ComponentPropsWithoutRef<\"li\">\n>(({ className, ...props }, ref) => (\n  <li\n    ref={ref}\n    className={cn(\"inline-flex items-center gap-1.5\", className)}\n    {...props}\n  />\n))\nBreadcrumbItem.displayName = \"BreadcrumbItem\"\n\nconst BreadcrumbLink = React.forwardRef<\n  HTMLAnchorElement,\n  React.ComponentPropsWithoutRef<\"a\"> & {\n    asChild?: boolean\n  }\n>(({ asChild, className, ...props }, ref) => {\n  const Comp = asChild ? Slot : \"a\"\n\n  return (\n    <Comp\n      ref={ref}\n      className={cn(\"transition-colors hover:text-foreground\", className)}\n      {...props}\n    />\n  )\n})\nBreadcrumbLink.displayName = \"BreadcrumbLink\"\n\nconst BreadcrumbPage = React.forwardRef<\n  HTMLSpanElement,\n  React.ComponentPropsWithoutRef<\"span\">\n>(({ className, ...props }, ref) => (\n  <span\n    ref={ref}\n    role=\"link\"\n    aria-disabled=\"true\"\n    aria-current=\"page\"\n    className={cn(\"font-normal text-foreground\", className)}\n    {...props}\n  />\n))\nBreadcrumbPage.displayName = \"BreadcrumbPage\"\n\nconst BreadcrumbSeparator = ({\n  children,\n  className,\n  ...props\n}: React.ComponentProps<\"li\">) => (\n  <li\n    role=\"presentation\"\n    aria-hidden=\"true\"\n    className={cn(\"[&>svg]:w-3.5 [&>svg]:h-3.5\", className)}\n    {...props}\n  >\n    {children ?? <ChevronRight />}\n  </li>\n)\nBreadcrumbSeparator.displayName = \"BreadcrumbSeparator\"\n\nconst BreadcrumbEllipsis = ({\n  className,\n  ...props\n}: React.ComponentProps<\"span\">) => (\n  <span\n    role=\"presentation\"\n    aria-hidden=\"true\"\n    className={cn(\"flex h-9 w-9 items-center justify-center\", className)}\n    {...props}\n  >\n    <MoreHorizontal className=\"h-4 w-4\" />\n    <span className=\"sr-only\">More</span>\n  </span>\n)\nBreadcrumbEllipsis.displayName = \"BreadcrumbElipssis\"\n\nexport {\n  Breadcrumb,\n  BreadcrumbList,\n  BreadcrumbItem,\n  BreadcrumbLink,\n  BreadcrumbPage,\n  BreadcrumbSeparator,\n  BreadcrumbEllipsis,\n}\n","path":null,"size_bytes":2712,"size_tokens":null},"client/src/components/ui/pagination.tsx":{"content":"import * as React from \"react\"\nimport { ChevronLeft, ChevronRight, MoreHorizontal } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\nimport { ButtonProps, buttonVariants } from \"@/components/ui/button\"\n\nconst Pagination = ({ className, ...props }: React.ComponentProps<\"nav\">) => (\n  <nav\n    role=\"navigation\"\n    aria-label=\"pagination\"\n    className={cn(\"mx-auto flex w-full justify-center\", className)}\n    {...props}\n  />\n)\nPagination.displayName = \"Pagination\"\n\nconst PaginationContent = React.forwardRef<\n  HTMLUListElement,\n  React.ComponentProps<\"ul\">\n>(({ className, ...props }, ref) => (\n  <ul\n    ref={ref}\n    className={cn(\"flex flex-row items-center gap-1\", className)}\n    {...props}\n  />\n))\nPaginationContent.displayName = \"PaginationContent\"\n\nconst PaginationItem = React.forwardRef<\n  HTMLLIElement,\n  React.ComponentProps<\"li\">\n>(({ className, ...props }, ref) => (\n  <li ref={ref} className={cn(\"\", className)} {...props} />\n))\nPaginationItem.displayName = \"PaginationItem\"\n\ntype PaginationLinkProps = {\n  isActive?: boolean\n} & Pick<ButtonProps, \"size\"> &\n  React.ComponentProps<\"a\">\n\nconst PaginationLink = ({\n  className,\n  isActive,\n  size = \"icon\",\n  ...props\n}: PaginationLinkProps) => (\n  <a\n    aria-current={isActive ? \"page\" : undefined}\n    className={cn(\n      buttonVariants({\n        variant: isActive ? \"outline\" : \"ghost\",\n        size,\n      }),\n      className\n    )}\n    {...props}\n  />\n)\nPaginationLink.displayName = \"PaginationLink\"\n\nconst PaginationPrevious = ({\n  className,\n  ...props\n}: React.ComponentProps<typeof PaginationLink>) => (\n  <PaginationLink\n    aria-label=\"Go to previous page\"\n    size=\"default\"\n    className={cn(\"gap-1 pl-2.5\", className)}\n    {...props}\n  >\n    <ChevronLeft className=\"h-4 w-4\" />\n    <span>Previous</span>\n  </PaginationLink>\n)\nPaginationPrevious.displayName = \"PaginationPrevious\"\n\nconst PaginationNext = ({\n  className,\n  ...props\n}: React.ComponentProps<typeof PaginationLink>) => (\n  <PaginationLink\n    aria-label=\"Go to next page\"\n    size=\"default\"\n    className={cn(\"gap-1 pr-2.5\", className)}\n    {...props}\n  >\n    <span>Next</span>\n    <ChevronRight className=\"h-4 w-4\" />\n  </PaginationLink>\n)\nPaginationNext.displayName = \"PaginationNext\"\n\nconst PaginationEllipsis = ({\n  className,\n  ...props\n}: React.ComponentProps<\"span\">) => (\n  <span\n    aria-hidden\n    className={cn(\"flex h-9 w-9 items-center justify-center\", className)}\n    {...props}\n  >\n    <MoreHorizontal className=\"h-4 w-4\" />\n    <span className=\"sr-only\">More pages</span>\n  </span>\n)\nPaginationEllipsis.displayName = \"PaginationEllipsis\"\n\nexport {\n  Pagination,\n  PaginationContent,\n  PaginationEllipsis,\n  PaginationItem,\n  PaginationLink,\n  PaginationNext,\n  PaginationPrevious,\n}\n","path":null,"size_bytes":2751,"size_tokens":null},"attached_assets/alert_1763670951624.tsx":{"content":"import * as React from \"react\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst alertVariants = cva(\n  \"relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-background text-foreground\",\n        destructive:\n          \"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nconst Alert = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement> & VariantProps<typeof alertVariants>\n>(({ className, variant, ...props }, ref) => (\n  <div\n    ref={ref}\n    role=\"alert\"\n    className={cn(alertVariants({ variant }), className)}\n    {...props}\n  />\n))\nAlert.displayName = \"Alert\"\n\nconst AlertTitle = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLHeadingElement>\n>(({ className, ...props }, ref) => (\n  <h5\n    ref={ref}\n    className={cn(\"mb-1 font-medium leading-none tracking-tight\", className)}\n    {...props}\n  />\n))\nAlertTitle.displayName = \"AlertTitle\"\n\nconst AlertDescription = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"text-sm [&_p]:leading-relaxed\", className)}\n    {...props}\n  />\n))\nAlertDescription.displayName = \"AlertDescription\"\n\nexport { Alert, AlertTitle, AlertDescription }\n","path":null,"size_bytes":1584,"size_tokens":null},"server/vite.ts":{"content":"import express, { type Express } from \"express\";\nimport fs from \"fs\";\nimport path from \"path\";\nimport { createServer as createViteServer, createLogger } from \"vite\";\nimport { type Server } from \"http\";\nimport viteConfig from \"../vite.config\";\nimport { nanoid } from \"nanoid\";\n\nconst viteLogger = createLogger();\n\nexport function log(message: string, source = \"express\") {\n  const formattedTime = new Date().toLocaleTimeString(\"en-US\", {\n    hour: \"numeric\",\n    minute: \"2-digit\",\n    second: \"2-digit\",\n    hour12: true,\n  });\n\n  console.log(`${formattedTime} [${source}] ${message}`);\n}\n\nexport async function setupVite(app: Express, server: Server) {\n  const serverOptions = {\n    middlewareMode: true,\n    hmr: { server },\n    allowedHosts: true as const,\n  };\n\n  const vite = await createViteServer({\n    ...viteConfig,\n    configFile: false,\n    customLogger: {\n      ...viteLogger,\n      error: (msg, options) => {\n        viteLogger.error(msg, options);\n        process.exit(1);\n      },\n    },\n    server: serverOptions,\n    appType: \"custom\",\n  });\n\n  app.use(vite.middlewares);\n  app.use(\"*\", async (req, res, next) => {\n    const url = req.originalUrl;\n\n    try {\n      const clientTemplate = path.resolve(\n        import.meta.dirname,\n        \"..\",\n        \"client\",\n        \"index.html\",\n      );\n\n      // always reload the index.html file from disk incase it changes\n      let template = await fs.promises.readFile(clientTemplate, \"utf-8\");\n      template = template.replace(\n        `src=\"/src/main.tsx\"`,\n        `src=\"/src/main.tsx?v=${nanoid()}\"`,\n      );\n      const page = await vite.transformIndexHtml(url, template);\n      res.status(200).set({ \"Content-Type\": \"text/html\" }).end(page);\n    } catch (e) {\n      vite.ssrFixStacktrace(e as Error);\n      next(e);\n    }\n  });\n}\n\nexport function serveStatic(app: Express) {\n  const distPath = path.resolve(import.meta.dirname, \"public\");\n\n  if (!fs.existsSync(distPath)) {\n    throw new Error(\n      `Could not find the build directory: ${distPath}, make sure to build the client first`,\n    );\n  }\n\n  app.use(express.static(distPath));\n\n  // fall through to index.html if the file doesn't exist\n  app.use(\"*\", (_req, res) => {\n    res.sendFile(path.resolve(distPath, \"index.html\"));\n  });\n}\n","path":null,"size_bytes":2263,"size_tokens":null},"attached_assets/sheet_1763670995705.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as SheetPrimitive from \"@radix-ui/react-dialog\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\nimport { X } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Sheet = SheetPrimitive.Root\n\nconst SheetTrigger = SheetPrimitive.Trigger\n\nconst SheetClose = SheetPrimitive.Close\n\nconst SheetPortal = SheetPrimitive.Portal\n\nconst SheetOverlay = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <SheetPrimitive.Overlay\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n    ref={ref}\n  />\n))\nSheetOverlay.displayName = SheetPrimitive.Overlay.displayName\n\nconst sheetVariants = cva(\n  \"fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500\",\n  {\n    variants: {\n      side: {\n        top: \"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top\",\n        bottom:\n          \"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom\",\n        left: \"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm\",\n        right:\n          \"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm\",\n      },\n    },\n    defaultVariants: {\n      side: \"right\",\n    },\n  }\n)\n\ninterface SheetContentProps\n  extends React.ComponentPropsWithoutRef<typeof SheetPrimitive.Content>,\n    VariantProps<typeof sheetVariants> {}\n\nconst SheetContent = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Content>,\n  SheetContentProps\n>(({ side = \"right\", className, children, ...props }, ref) => (\n  <SheetPortal>\n    <SheetOverlay />\n    <SheetPrimitive.Content\n      ref={ref}\n      className={cn(sheetVariants({ side }), className)}\n      {...props}\n    >\n      {children}\n      <SheetPrimitive.Close className=\"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary\">\n        <X className=\"h-4 w-4\" />\n        <span className=\"sr-only\">Close</span>\n      </SheetPrimitive.Close>\n    </SheetPrimitive.Content>\n  </SheetPortal>\n))\nSheetContent.displayName = SheetPrimitive.Content.displayName\n\nconst SheetHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-2 text-center sm:text-left\",\n      className\n    )}\n    {...props}\n  />\n)\nSheetHeader.displayName = \"SheetHeader\"\n\nconst SheetFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\n      className\n    )}\n    {...props}\n  />\n)\nSheetFooter.displayName = \"SheetFooter\"\n\nconst SheetTitle = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <SheetPrimitive.Title\n    ref={ref}\n    className={cn(\"text-lg font-semibold text-foreground\", className)}\n    {...props}\n  />\n))\nSheetTitle.displayName = SheetPrimitive.Title.displayName\n\nconst SheetDescription = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <SheetPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nSheetDescription.displayName = SheetPrimitive.Description.displayName\n\nexport {\n  Sheet,\n  SheetPortal,\n  SheetOverlay,\n  SheetTrigger,\n  SheetClose,\n  SheetContent,\n  SheetHeader,\n  SheetFooter,\n  SheetTitle,\n  SheetDescription,\n}\n","path":null,"size_bytes":4281,"size_tokens":null},"attached_assets/tailwind.config_1763670650469.ts":{"content":"import type { Config } from \"tailwindcss\";\n\nexport default {\n  darkMode: [\"class\"],\n  content: [\"./client/index.html\", \"./client/src/**/*.{js,jsx,ts,tsx}\"],\n  theme: {\n    extend: {\n      borderRadius: {\n        lg: \".5625rem\", /* 9px */\n        md: \".375rem\", /* 6px */\n        sm: \".1875rem\", /* 3px */\n      },\n      colors: {\n        // Flat / base colors (regular buttons)\n        background: \"hsl(var(--background) / <alpha-value>)\",\n        foreground: \"hsl(var(--foreground) / <alpha-value>)\",\n        border: \"hsl(var(--border) / <alpha-value>)\",\n        input: \"hsl(var(--input) / <alpha-value>)\",\n        card: {\n          DEFAULT: \"hsl(var(--card) / <alpha-value>)\",\n          foreground: \"hsl(var(--card-foreground) / <alpha-value>)\",\n          border: \"hsl(var(--card-border) / <alpha-value>)\",\n        },\n        popover: {\n          DEFAULT: \"hsl(var(--popover) / <alpha-value>)\",\n          foreground: \"hsl(var(--popover-foreground) / <alpha-value>)\",\n          border: \"hsl(var(--popover-border) / <alpha-value>)\",\n        },\n        primary: {\n          DEFAULT: \"hsl(var(--primary) / <alpha-value>)\",\n          foreground: \"hsl(var(--primary-foreground) / <alpha-value>)\",\n          border: \"var(--primary-border)\",\n        },\n        secondary: {\n          DEFAULT: \"hsl(var(--secondary) / <alpha-value>)\",\n          foreground: \"hsl(var(--secondary-foreground) / <alpha-value>)\",\n          border: \"var(--secondary-border)\",\n        },\n        muted: {\n          DEFAULT: \"hsl(var(--muted) / <alpha-value>)\",\n          foreground: \"hsl(var(--muted-foreground) / <alpha-value>)\",\n          border: \"var(--muted-border)\",\n        },\n        accent: {\n          DEFAULT: \"hsl(var(--accent) / <alpha-value>)\",\n          foreground: \"hsl(var(--accent-foreground) / <alpha-value>)\",\n          border: \"var(--accent-border)\",\n        },\n        destructive: {\n          DEFAULT: \"hsl(var(--destructive) / <alpha-value>)\",\n          foreground: \"hsl(var(--destructive-foreground) / <alpha-value>)\",\n          border: \"var(--destructive-border)\",\n        },\n        ring: \"hsl(var(--ring) / <alpha-value>)\",\n        chart: {\n          \"1\": \"hsl(var(--chart-1) / <alpha-value>)\",\n          \"2\": \"hsl(var(--chart-2) / <alpha-value>)\",\n          \"3\": \"hsl(var(--chart-3) / <alpha-value>)\",\n          \"4\": \"hsl(var(--chart-4) / <alpha-value>)\",\n          \"5\": \"hsl(var(--chart-5) / <alpha-value>)\",\n        },\n        sidebar: {\n          ring: \"hsl(var(--sidebar-ring) / <alpha-value>)\",\n          DEFAULT: \"hsl(var(--sidebar) / <alpha-value>)\",\n          foreground: \"hsl(var(--sidebar-foreground) / <alpha-value>)\",\n          border: \"hsl(var(--sidebar-border) / <alpha-value>)\",\n        },\n        \"sidebar-primary\": {\n          DEFAULT: \"hsl(var(--sidebar-primary) / <alpha-value>)\",\n          foreground: \"hsl(var(--sidebar-primary-foreground) / <alpha-value>)\",\n          border: \"var(--sidebar-primary-border)\",\n        },\n        \"sidebar-accent\": {\n          DEFAULT: \"hsl(var(--sidebar-accent) / <alpha-value>)\",\n          foreground: \"hsl(var(--sidebar-accent-foreground) / <alpha-value>)\",\n          border: \"var(--sidebar-accent-border)\"\n        },\n        status: {\n          online: \"rgb(34 197 94)\",\n          away: \"rgb(245 158 11)\",\n          busy: \"rgb(239 68 68)\",\n          offline: \"rgb(156 163 175)\",\n        },\n      },\n      fontFamily: {\n        sans: [\"var(--font-sans)\"],\n        serif: [\"var(--font-serif)\"],\n        mono: [\"var(--font-mono)\"],\n      },\n      keyframes: {\n        \"accordion-down\": {\n          from: { height: \"0\" },\n          to: { height: \"var(--radix-accordion-content-height)\" },\n        },\n        \"accordion-up\": {\n          from: { height: \"var(--radix-accordion-content-height)\" },\n          to: { height: \"0\" },\n        },\n      },\n      animation: {\n        \"accordion-down\": \"accordion-down 0.2s ease-out\",\n        \"accordion-up\": \"accordion-up 0.2s ease-out\",\n      },\n    },\n  },\n  plugins: [require(\"tailwindcss-animate\"), require(\"@tailwindcss/typography\")],\n} satisfies Config;\n","path":null,"size_bytes":4050,"size_tokens":null},"client/src/components/ui/menubar.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as MenubarPrimitive from \"@radix-ui/react-menubar\"\nimport { Check, ChevronRight, Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nfunction MenubarMenu({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Menu>) {\n  return <MenubarPrimitive.Menu {...props} />\n}\n\nfunction MenubarGroup({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Group>) {\n  return <MenubarPrimitive.Group {...props} />\n}\n\nfunction MenubarPortal({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Portal>) {\n  return <MenubarPrimitive.Portal {...props} />\n}\n\nfunction MenubarRadioGroup({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.RadioGroup>) {\n  return <MenubarPrimitive.RadioGroup {...props} />\n}\n\nfunction MenubarSub({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Sub>) {\n  return <MenubarPrimitive.Sub data-slot=\"menubar-sub\" {...props} />\n}\n\nconst Menubar = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"flex h-10 items-center space-x-1 rounded-md border bg-background p-1\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubar.displayName = MenubarPrimitive.Root.displayName\n\nconst MenubarTrigger = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Trigger>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center rounded-sm px-3 py-1.5 text-sm font-medium outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarTrigger.displayName = MenubarPrimitive.Trigger.displayName\n\nconst MenubarSubTrigger = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.SubTrigger>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.SubTrigger> & {\n    inset?: boolean\n  }\n>(({ className, inset, children, ...props }, ref) => (\n  <MenubarPrimitive.SubTrigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <ChevronRight className=\"ml-auto h-4 w-4\" />\n  </MenubarPrimitive.SubTrigger>\n))\nMenubarSubTrigger.displayName = MenubarPrimitive.SubTrigger.displayName\n\nconst MenubarSubContent = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.SubContent>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.SubContent>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.SubContent\n    ref={ref}\n    className={cn(\n      \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-menubar-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarSubContent.displayName = MenubarPrimitive.SubContent.displayName\n\nconst MenubarContent = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Content>\n>(\n  (\n    { className, align = \"start\", alignOffset = -4, sideOffset = 8, ...props },\n    ref\n  ) => (\n    <MenubarPrimitive.Portal>\n      <MenubarPrimitive.Content\n        ref={ref}\n        align={align}\n        alignOffset={alignOffset}\n        sideOffset={sideOffset}\n        className={cn(\n          \"z-50 min-w-[12rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-menubar-content-transform-origin]\",\n          className\n        )}\n        {...props}\n      />\n    </MenubarPrimitive.Portal>\n  )\n)\nMenubarContent.displayName = MenubarPrimitive.Content.displayName\n\nconst MenubarItem = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Item> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <MenubarPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarItem.displayName = MenubarPrimitive.Item.displayName\n\nconst MenubarCheckboxItem = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.CheckboxItem>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.CheckboxItem>\n>(({ className, children, checked, ...props }, ref) => (\n  <MenubarPrimitive.CheckboxItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    checked={checked}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <MenubarPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </MenubarPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </MenubarPrimitive.CheckboxItem>\n))\nMenubarCheckboxItem.displayName = MenubarPrimitive.CheckboxItem.displayName\n\nconst MenubarRadioItem = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.RadioItem>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.RadioItem>\n>(({ className, children, ...props }, ref) => (\n  <MenubarPrimitive.RadioItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <MenubarPrimitive.ItemIndicator>\n        <Circle className=\"h-2 w-2 fill-current\" />\n      </MenubarPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </MenubarPrimitive.RadioItem>\n))\nMenubarRadioItem.displayName = MenubarPrimitive.RadioItem.displayName\n\nconst MenubarLabel = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Label> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <MenubarPrimitive.Label\n    ref={ref}\n    className={cn(\n      \"px-2 py-1.5 text-sm font-semibold\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarLabel.displayName = MenubarPrimitive.Label.displayName\n\nconst MenubarSeparator = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\n    {...props}\n  />\n))\nMenubarSeparator.displayName = MenubarPrimitive.Separator.displayName\n\nconst MenubarShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\n        \"ml-auto text-xs tracking-widest text-muted-foreground\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\nMenubarShortcut.displayname = \"MenubarShortcut\"\n\nexport {\n  Menubar,\n  MenubarMenu,\n  MenubarTrigger,\n  MenubarContent,\n  MenubarItem,\n  MenubarSeparator,\n  MenubarLabel,\n  MenubarCheckboxItem,\n  MenubarRadioGroup,\n  MenubarRadioItem,\n  MenubarPortal,\n  MenubarSubContent,\n  MenubarSubTrigger,\n  MenubarGroup,\n  MenubarSub,\n  MenubarShortcut,\n}\n","path":null,"size_bytes":8605,"size_tokens":null},"client/src/pages/UserManagement.tsx":{"content":"import { useState } from \"react\";\nimport { useQuery, useMutation } from \"@tanstack/react-query\";\nimport { queryClient } from \"@/lib/queryClient\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { Table, TableBody, TableCell, TableHead, TableHeader, TableRow } from \"@/components/ui/table\";\nimport { Dialog, DialogContent, DialogHeader, DialogTitle, DialogFooter } from \"@/components/ui/dialog\";\nimport { Card, CardContent } from \"@/components/ui/card\";\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\nimport { UserPlus, Trash2, Users, ArrowLeft, Edit } from \"lucide-react\";\nimport { api } from \"@/lib/api\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport InventoryHeader from \"@/components/InventoryHeader\";\nimport type { Language } from \"@/lib/translations\";\nimport { useTranslation } from \"@/lib/translations\";\n\ninterface UserManagementProps {\n  userName: string;\n  userRole: string;\n  onLogout: () => void;\n  onNavigateToInventory?: () => void;\n  onNavigateToReservations?: () => void;\n  onNavigateToActivityLogs?: () => void;\n  onNavigateToQRCodes?: () => void;\n  onNavigateToMaintenance?: () => void;\n  onNavigateToReports?: () => void;\n  language: Language;\n  onLanguageChange: (language: Language) => void;\n}\n\nexport default function UserManagement({ userName, userRole, onLogout, onNavigateToInventory, onNavigateToReservations, onNavigateToActivityLogs, onNavigateToQRCodes, onNavigateToMaintenance, onNavigateToReports, language = 'en', onLanguageChange = () => {} }: UserManagementProps) {\n  const { toast } = useToast();\n  const t = useTranslation(language || 'en');\n  const [showAddUser, setShowAddUser] = useState(false);\n  const [showEditUser, setShowEditUser] = useState(false);\n  const [editingUserId, setEditingUserId] = useState<string | null>(null);\n  const [formData, setFormData] = useState({\n    username: '',\n    password: '',\n    email: '',\n    name: '',\n    role: 'user' as 'developer' | 'admin' | 'user',\n    department: ''\n  });\n  const [editFormData, setEditFormData] = useState({\n    email: '',\n    name: '',\n    role: 'user' as 'developer' | 'admin' | 'user',\n    department: ''\n  });\n\n  const { data: users = [] } = useQuery({\n    queryKey: ['/api/users'],\n    queryFn: () => api.users.getAll()\n  });\n\n  const createUserMutation = useMutation({\n    mutationFn: (userData: typeof formData) => api.users.create(userData),\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['/api/users'] });\n      setShowAddUser(false);\n      setFormData({\n        username: '',\n        password: '',\n        email: '',\n        name: '',\n        role: 'user',\n        department: ''\n      });\n      toast({ title: \"User created successfully\" });\n    },\n    onError: (error: any) => {\n      toast({ \n        title: \"Failed to create user\", \n        description: error.message || \"Please try again\",\n        variant: \"destructive\" \n      });\n    }\n  });\n\n  const updateUserMutation = useMutation({\n    mutationFn: ({ id, data }: { id: string; data: typeof editFormData }) => api.users.update(id, data),\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['/api/users'] });\n      setShowEditUser(false);\n      setEditingUserId(null);\n      setEditFormData({ email: '', name: '', role: 'user', department: '' });\n      toast({ title: \"User updated successfully\" });\n    },\n    onError: (error: any) => {\n      toast({ \n        title: \"Failed to update user\", \n        description: error.message || \"Please try again\",\n        variant: \"destructive\" \n      });\n    }\n  });\n\n  const deleteUserMutation = useMutation({\n    mutationFn: (id: string) => api.users.delete(id),\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['/api/users'] });\n      toast({ title: \"User deleted successfully\" });\n    },\n    onError: (error: any) => {\n      toast({ \n        title: \"Failed to delete user\", \n        description: error.message || \"Please try again\",\n        variant: \"destructive\" \n      });\n    }\n  });\n\n  const handleSubmit = (e: React.FormEvent) => {\n    e.preventDefault();\n    createUserMutation.mutate(formData);\n  };\n\n  const handleEditUser = (user: any) => {\n    setEditingUserId(user.id);\n    setEditFormData({\n      email: user.email,\n      name: user.name,\n      role: user.role,\n      department: user.department || ''\n    });\n    setShowEditUser(true);\n  };\n\n  const handleEditSubmit = (e: React.FormEvent) => {\n    e.preventDefault();\n    if (editingUserId && editFormData.email && editFormData.name) {\n      updateUserMutation.mutate({\n        id: editingUserId,\n        data: editFormData\n      });\n    }\n  };\n\n  const handleDeleteUser = (id: string, username: string) => {\n    if (confirm(`Are you sure you want to delete user \"${username}\"?`)) {\n      deleteUserMutation.mutate(id);\n    }\n  };\n\n  return (\n    <div className=\"min-h-screen bg-background\">\n      <InventoryHeader\n        userName={userName}\n        userRole={userRole}\n        currentView=\"categories\"\n        onViewChange={() => onNavigateToInventory?.()}\n        onLogout={onLogout}\n        onNavigateToReservations={onNavigateToReservations}\n        onNavigateToActivityLogs={onNavigateToActivityLogs}\n        onNavigateToQRCodes={onNavigateToQRCodes}\n        onNavigateToMaintenance={onNavigateToMaintenance}\n        onNavigateToReports={onNavigateToReports}\n        hideViewToggle={true}\n        language={language}\n        onLanguageChange={onLanguageChange}\n      />\n\n      <main className=\"max-w-[1400px] mx-auto px-5 py-8\">\n        <div className=\"mb-6\">\n          <Button\n            variant=\"ghost\"\n            onClick={onNavigateToInventory}\n            className=\"gap-2\"\n          >\n            <ArrowLeft className=\"w-4 h-4\" />\n            {t('backToInventory')}\n          </Button>\n        </div>\n\n        <div className=\"text-center mb-10 p-10 bg-gradient-to-r from-[#667eea] to-[#764ba2] rounded-2xl text-white\">\n          <h1 className=\"text-4xl font-extrabold mb-4\">{t('userManagement')}</h1>\n          <p className=\"text-lg opacity-90 max-w-2xl mx-auto\">\n            {t('createManageUsers')}\n          </p>\n        </div>\n\n        <div className=\"mb-6 flex justify-between items-center\">\n          <div className=\"flex items-center gap-3\">\n            <Users className=\"w-6 h-6 text-[#667eea]\" />\n            <h2 className=\"text-2xl font-bold\">{users.length} {t('totalUsers')}</h2>\n          </div>\n          <Button\n            onClick={() => setShowAddUser(true)}\n            className=\"bg-gradient-to-r from-[#667eea] to-[#764ba2]\"\n          >\n            <UserPlus className=\"w-4 h-4 mr-2\" />\n            {t('addNewUser')}\n          </Button>\n        </div>\n\n        <Card>\n          <CardContent className=\"p-0\">\n            <Table>\n              <TableHeader>\n                <TableRow>\n                  <TableHead>{t('username')}</TableHead>\n                  <TableHead>{t('name')}</TableHead>\n                  <TableHead>{t('email')}</TableHead>\n                  <TableHead>{t('department')}</TableHead>\n                  <TableHead>{t('role')}</TableHead>\n                  <TableHead className=\"text-right\">{t('actions')}</TableHead>\n                </TableRow>\n              </TableHeader>\n              <TableBody>\n                {users.map((user: any) => (\n                  <TableRow key={user.id}>\n                    <TableCell className=\"font-medium\">{user.username}</TableCell>\n                    <TableCell>{user.name}</TableCell>\n                    <TableCell>{user.email}</TableCell>\n                    <TableCell className=\"text-sm text-muted-foreground\">{user.department || '-'}</TableCell>\n                    <TableCell>\n                      <span className={`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${\n                        user.role === 'admin' \n                          ? 'bg-red-100 text-red-800' \n                          : 'bg-green-100 text-green-800'\n                      }`}>\n                        {user.role === 'admin' ? t('admin').toUpperCase() : t('user').toUpperCase()}\n                      </span>\n                    </TableCell>\n                    <TableCell className=\"text-right\">\n                      <div className=\"flex gap-2 justify-end\">\n                        <Button\n                          size=\"sm\"\n                          variant=\"outline\"\n                          onClick={() => handleEditUser(user)}\n                        >\n                          <Edit className=\"w-3 h-3\" />\n                        </Button>\n                        <Button\n                          size=\"sm\"\n                          variant=\"destructive\"\n                          onClick={() => handleDeleteUser(user.id, user.username)}\n                        >\n                          <Trash2 className=\"w-3 h-3\" />\n                        </Button>\n                      </div>\n                    </TableCell>\n                  </TableRow>\n                ))}\n              </TableBody>\n            </Table>\n          </CardContent>\n        </Card>\n      </main>\n\n      <Dialog open={showAddUser} onOpenChange={setShowAddUser}>\n        <DialogContent className=\"max-w-md\">\n          <DialogHeader>\n            <DialogTitle>{t('addNewUser')}</DialogTitle>\n          </DialogHeader>\n          <form onSubmit={handleSubmit} className=\"space-y-4\">\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"username\">{t('username')} *</Label>\n              <Input\n                id=\"username\"\n                value={formData.username}\n                onChange={(e) => setFormData({ ...formData, username: e.target.value })}\n                placeholder=\"e.g., jsmith\"\n                required\n              />\n            </div>\n\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"password\">{t('password')} *</Label>\n              <Input\n                id=\"password\"\n                type=\"password\"\n                value={formData.password}\n                onChange={(e) => setFormData({ ...formData, password: e.target.value })}\n                placeholder={t('password')}\n                required\n              />\n            </div>\n\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"name\">{t('fullName')} *</Label>\n              <Input\n                id=\"name\"\n                value={formData.name}\n                onChange={(e) => setFormData({ ...formData, name: e.target.value })}\n                placeholder=\"e.g., John Smith\"\n                required\n              />\n            </div>\n\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"email\">{t('email')} *</Label>\n              <Input\n                id=\"email\"\n                type=\"email\"\n                value={formData.email}\n                onChange={(e) => setFormData({ ...formData, email: e.target.value })}\n                placeholder=\"e.g., jsmith@company.com\"\n                required\n              />\n            </div>\n\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"department\">{t('department')}</Label>\n              <Input\n                id=\"department\"\n                value={formData.department}\n                onChange={(e) => setFormData({ ...formData, department: e.target.value })}\n                placeholder=\"e.g., Production\"\n              />\n            </div>\n\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"role\">{t('role')} *</Label>\n              <Select\n                value={formData.role}\n                onValueChange={(value: 'developer' | 'admin' | 'user') => setFormData({ ...formData, role: value })}\n              >\n                <SelectTrigger>\n                  <SelectValue />\n                </SelectTrigger>\n                <SelectContent>\n                  <SelectItem value=\"user\">{t('user')}</SelectItem>\n                  <SelectItem value=\"admin\">{t('admin')}</SelectItem>\n                  <SelectItem value=\"developer\">Developer</SelectItem>\n                </SelectContent>\n              </Select>\n            </div>\n\n            <DialogFooter>\n              <Button type=\"button\" variant=\"outline\" onClick={() => setShowAddUser(false)}>\n                {t('cancel')}\n              </Button>\n              <Button \n                type=\"submit\" \n                className=\"bg-gradient-to-r from-[#667eea] to-[#764ba2]\"\n                disabled={createUserMutation.isPending}\n              >\n                {createUserMutation.isPending ? t('creating') : t('createUser')}\n              </Button>\n            </DialogFooter>\n          </form>\n        </DialogContent>\n      </Dialog>\n\n      <Dialog open={showEditUser} onOpenChange={setShowEditUser}>\n        <DialogContent className=\"max-w-md\">\n          <DialogHeader>\n            <DialogTitle>{t('editUser')}</DialogTitle>\n          </DialogHeader>\n          <form onSubmit={handleEditSubmit} className=\"space-y-4\">\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"edit-name\">{t('fullName')} *</Label>\n              <Input\n                id=\"edit-name\"\n                value={editFormData.name}\n                onChange={(e) => setEditFormData({ ...editFormData, name: e.target.value })}\n                placeholder=\"e.g., John Smith\"\n                required\n              />\n            </div>\n\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"edit-email\">{t('email')} *</Label>\n              <Input\n                id=\"edit-email\"\n                type=\"email\"\n                value={editFormData.email}\n                onChange={(e) => setEditFormData({ ...editFormData, email: e.target.value })}\n                placeholder=\"e.g., jsmith@company.com\"\n                required\n              />\n            </div>\n\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"edit-department\">{t('department')}</Label>\n              <Input\n                id=\"edit-department\"\n                value={editFormData.department}\n                onChange={(e) => setEditFormData({ ...editFormData, department: e.target.value })}\n                placeholder=\"e.g., Production\"\n              />\n            </div>\n\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"edit-role\">{t('role')} *</Label>\n              <Select\n                value={editFormData.role}\n                onValueChange={(value: 'developer' | 'admin' | 'user') => setEditFormData({ ...editFormData, role: value })}\n              >\n                <SelectTrigger>\n                  <SelectValue />\n                </SelectTrigger>\n                <SelectContent>\n                  <SelectItem value=\"user\">{t('user')}</SelectItem>\n                  <SelectItem value=\"admin\">{t('admin')}</SelectItem>\n                  <SelectItem value=\"developer\">Developer</SelectItem>\n                </SelectContent>\n              </Select>\n            </div>\n\n            <DialogFooter>\n              <Button type=\"button\" variant=\"outline\" onClick={() => setShowEditUser(false)}>\n                {t('cancel')}\n              </Button>\n              <Button \n                type=\"submit\" \n                className=\"bg-gradient-to-r from-[#667eea] to-[#764ba2]\"\n                disabled={updateUserMutation.isPending}\n              >\n                {updateUserMutation.isPending ? 'Updating...' : 'Update User'}\n              </Button>\n            </DialogFooter>\n          </form>\n        </DialogContent>\n      </Dialog>\n    </div>\n  );\n}","path":null,"size_bytes":15576,"size_tokens":null},"client/src/components/ItemCard.tsx":{"content":"import { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Edit, Trash2, MapPin, FileText, QrCode, Download, Pencil, Calendar, LogOut, LogIn, CheckCircle } from \"lucide-react\";\nimport { useQuery } from \"@tanstack/react-query\";\nimport { api } from \"@/lib/api\";\nimport { useState } from \"react\";\nimport { Dialog, DialogContent, DialogHeader, DialogTitle } from \"@/components/ui/dialog\";\nimport { useTranslation } from \"@/lib/translations\";\n\ninterface ItemCardProps {\n  id: string;\n  barcode: string;\n  productName: string;\n  productType: string;\n  status: string;\n  location?: string;\n  notes?: string;\n  onEdit?: () => void;\n  onDelete?: () => void;\n  onScan?: () => void;\n  onReserve?: () => void;\n  onCheckout?: () => void;\n  onCheckin?: () => void;\n  onReceiveEquipment?: () => void;\n  onMarkReturned?: () => void;\n  userRole: string;\n  isEquipment?: boolean;\n  language?: 'en' | 'ar';\n}\n\nconst statusColors: Record<string, string> = {\n  'Available': 'bg-green-600 hover:bg-green-700',\n  'In Use': 'bg-amber-500 hover:bg-amber-600',\n  'Reserved': 'bg-blue-600 hover:bg-blue-700',\n  'Maintenance': 'bg-red-600 hover:bg-red-700'\n};\n\nexport default function ItemCard({\n  id,\n  barcode,\n  productName,\n  productType,\n  status,\n  location,\n  notes,\n  onEdit,\n  onDelete,\n  onScan,\n  onReserve,\n  onCheckout,\n  onCheckin,\n  onReceiveEquipment,\n  onMarkReturned,\n  userRole,\n  language = 'en',\n  isEquipment = true,\n}: ItemCardProps) {\n  const t = useTranslation(language);\n  const [showQRDialog, setShowQRDialog] = useState(false);\n\n  const { data: qrData, isLoading: qrLoading } = useQuery({\n    queryKey: ['/api/items', id, 'qrcode'],\n    queryFn: () => api.qrCodes.getItemQRCode(id),\n    enabled: showQRDialog,\n  });\n\n  const getStatusColor = (status: string) => {\n    switch (status) {\n      case 'Available':\n        return 'bg-green-500';\n      case 'In Use':\n        return 'bg-blue-500';\n      case 'Reserved':\n        return 'bg-amber-500';\n      case 'Maintenance':\n        return 'bg-red-500';\n      default:\n        return 'bg-gray-500';\n    }\n  };\n\n  const downloadQRCode = () => {\n    if (qrData?.qrCode) {\n      const link = document.createElement('a');\n      link.href = qrData.qrCode;\n      link.download = `${barcode}-${productName}.png`;\n      link.click();\n    }\n  };\n\n  return (\n    <>\n      <Card className=\"hover:shadow-md transition-shadow\" data-testid={`card-item-${id}`}>\n        <CardHeader className=\"flex flex-row items-center justify-between gap-2 space-y-0 pb-3\">\n          <div className=\"flex-1\">\n            <h3 className=\"font-bold text-lg\" data-testid={`text-product-name-${id}`}>{productName}</h3>\n            <p className=\"text-sm text-muted-foreground\" data-testid={`text-barcode-${id}`}>{t('barcode')}: {barcode}</p>\n          </div>\n          <Badge\n            className={`${statusColors[status]} text-white`}\n            data-testid={`badge-status-${id}`}\n          >\n            {status}\n          </Badge>\n        </CardHeader>\n        <CardContent>\n          <div className=\"space-y-3\">\n            <div className=\"grid grid-cols-2 gap-3 text-sm\">\n              <div>\n                <span className=\"text-muted-foreground\">{t('type')}:</span>\n                <span className=\"ml-2 font-medium\" data-testid={`text-type-${id}`}>{productType}</span>\n              </div>\n              {location && (\n                <div>\n                  <span className=\"text-muted-foreground\">{t('location')}:</span>\n                  <span className=\"ml-2 font-medium\" data-testid={`text-location-${id}`}>{location}</span>\n                </div>\n              )}\n            </div>\n            {notes && (\n              <p className=\"text-sm text-muted-foreground\" data-testid={`text-notes-${id}`}>\n                <span className=\"font-medium\">{t('notes_display')}</span> {notes}\n              </p>\n            )}\n            \n            {isEquipment ? (\n              <>\n                {userRole === 'admin' && (\n                  <div className=\"flex gap-2 pt-2 flex-col\">\n                    {onMarkReturned && (\n                      <Button\n                        variant=\"outline\"\n                        size=\"sm\"\n                        onClick={onMarkReturned}\n                        className=\"bg-blue-50 hover:bg-blue-100 text-blue-700 border-blue-200 w-full\"\n                        data-testid={`button-mark-returned-${id}`}\n                      >\n                        <LogIn className=\"w-4 h-4 mr-2\" />\n                        {t('markReturned')}\n                      </Button>\n                    )}\n                    <div className=\"flex gap-2 flex-wrap\">\n                      {status === 'Available' && (\n                        <Button\n                          onClick={onCheckout}\n                          variant=\"default\"\n                          size=\"sm\"\n                          className=\"bg-blue-600 hover:bg-blue-700 flex-1\"\n                        >\n                          <LogOut className=\"w-4 h-4 mr-2\" />\n                          {t('checkout')}\n                        </Button>\n                      )}\n                      {status === 'In Use' && (\n                        <Button\n                          onClick={onCheckin}\n                          variant=\"default\"\n                          size=\"sm\"\n                          className=\"bg-green-600 hover:bg-green-700 flex-1\"\n                        >\n                          <LogIn className=\"w-4 h-4 mr-2\" />\n                          {t('checkin')}\n                        </Button>\n                      )}\n                      <Button\n                        onClick={() => setShowQRDialog(true)}\n                        variant=\"outline\"\n                        size=\"sm\"\n                        className=\"flex-1\"\n                      >\n                        <QrCode className=\"w-4 h-4 mr-2\" />\n                        QR Code\n                      </Button>\n                      <Button\n                        onClick={onEdit}\n                        variant=\"outline\"\n                        size=\"sm\"\n                        className=\"flex-1\"\n                      >\n                        <Edit className=\"w-4 h-4 mr-2\" />\n                        Edit\n                      </Button>\n                    </div>\n                  </div>\n                )}\n                {userRole !== 'admin' && (\n                  <div className=\"flex gap-2 pt-2 flex-col\">\n                    {onReceiveEquipment && (\n                      <Button\n                        variant=\"outline\"\n                        size=\"sm\"\n                        onClick={onReceiveEquipment}\n                        className=\"bg-green-50 hover:bg-green-100 text-green-700 border-green-200 w-full\"\n                        data-testid={`button-receive-equipment-${id}`}\n                      >\n                        <CheckCircle className=\"w-4 h-4 mr-2\" />\n                        Receive Equipment\n                      </Button>\n                    )}\n                    <div className=\"flex gap-2\">\n                      <Button\n                        variant=\"outline\"\n                        size=\"sm\"\n                        onClick={onScan}\n                        className=\"flex-1\"\n                        data-testid={`button-scan-${id}`}\n                        disabled={status !== 'Available' || !onScan}\n                      >\n                        <QrCode className=\"w-4 h-4 mr-2\" />\n                        {status === 'Available' ? 'Scan to Checkout' : 'Not Available'}\n                      </Button>\n                      <Button\n                        variant=\"default\"\n                        size=\"sm\"\n                        onClick={onReserve}\n                        className=\"flex-1 bg-gradient-to-r from-[#667eea] to-[#764ba2]\"\n                        data-testid={`button-reserve-${id}`}\n                        disabled={status === 'Maintenance' || !onReserve}\n                      >\n                        <Calendar className=\"w-4 h-4 mr-2\" />\n                        Reserve\n                      </Button>\n                    </div>\n                  </div>\n                )}\n              </>\n            ) : (\n              <>\n                {userRole === 'admin' && (\n                  <div className=\"flex gap-2 pt-2\">\n                    <Button\n                      onClick={onEdit}\n                      variant=\"outline\"\n                      size=\"sm\"\n                      className=\"flex-1\"\n                    >\n                      <Edit className=\"w-4 h-4 mr-2\" />\n                      Edit\n                    </Button>\n                  </div>\n                )}\n              </>\n            )}\n          </div>\n        </CardContent>\n      </Card>\n\n      <Dialog open={showQRDialog} onOpenChange={setShowQRDialog}>\n        <DialogContent className=\"max-w-md\">\n          <DialogHeader>\n            <DialogTitle>QR Code - {productName}</DialogTitle>\n          </DialogHeader>\n          <div className=\"space-y-4\">\n            <div className=\"bg-white p-4 rounded-lg border flex items-center justify-center\">\n              {qrLoading ? (\n                <div className=\"w-64 h-64 flex items-center justify-center\">\n                  <p className=\"text-muted-foreground\">Generating QR Code...</p>\n                </div>\n              ) : qrData?.qrCode ? (\n                <img\n                  src={qrData.qrCode}\n                  alt={`QR Code for ${productName}`}\n                  className=\"w-64 h-64\"\n                />\n              ) : (\n                <div className=\"w-64 h-64 flex items-center justify-center\">\n                  <p className=\"text-muted-foreground text-red-500\">Failed to load QR Code</p>\n                </div>\n              )}\n            </div>\n            <div className=\"text-center\">\n              <p className=\"text-sm text-muted-foreground mb-1\">Barcode</p>\n              <p className=\"font-mono font-semibold\">{barcode}</p>\n            </div>\n            <Button\n              onClick={downloadQRCode}\n              className=\"w-full bg-gradient-to-r from-[#667eea] to-[#764ba2]\"\n              disabled={!qrData?.qrCode}\n            >\n              <Download className=\"w-4 h-4 mr-2\" />\n              Download QR Code\n            </Button>\n          </div>\n        </DialogContent>\n      </Dialog>\n    </>\n  );\n}","path":null,"size_bytes":10475,"size_tokens":null},"client/src/components/ReservationActionDialog.tsx":{"content":"\nimport { useState } from \"react\";\nimport { Dialog, DialogContent, DialogHeader, DialogTitle, DialogFooter } from \"@/components/ui/dialog\";\nimport { Button } from \"@/components/ui/button\";\nimport { Label } from \"@/components/ui/label\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { CheckCircle, AlertCircle } from \"lucide-react\";\n\ninterface ReservationActionDialogProps {\n  open: boolean;\n  onClose: () => void;\n  onSubmit: (data: { rejectionReason?: string; itemConditionOnReturn?: string; returnCondition?: 'good' | 'damage' }) => void;\n  action: 'reject' | 'complete';\n  itemName: string;\n}\n\nexport default function ReservationActionDialog({\n  open,\n  onClose,\n  onSubmit,\n  action,\n  itemName\n}: ReservationActionDialogProps) {\n  const [reason, setReason] = useState(\"\");\n  const [returnCondition, setReturnCondition] = useState<'good' | 'damage' | ''>(\"\");\n\n  const handleSubmit = (e: React.FormEvent) => {\n    e.preventDefault();\n    if (action === 'reject') {\n      onSubmit({ rejectionReason: reason.trim() || undefined });\n    } else {\n      if (!returnCondition) return;\n      if (returnCondition === 'damage' && !reason.trim()) return;\n      onSubmit({ \n        itemConditionOnReturn: reason.trim() || undefined,\n        returnCondition \n      });\n    }\n    setReason(\"\");\n    setReturnCondition(\"\");\n    onClose();\n  };\n\n  if (action === 'complete') {\n    return (\n      <Dialog open={open} onOpenChange={onClose}>\n        <DialogContent className=\"max-w-2xl\">\n          <DialogHeader>\n            <DialogTitle>Mark Equipment as Returned</DialogTitle>\n          </DialogHeader>\n          <form onSubmit={handleSubmit} className=\"space-y-6\">\n            <div className=\"bg-blue-50 dark:bg-blue-950 p-4 rounded-lg border border-blue-200 dark:border-blue-800\">\n              <p className=\"text-sm\">\n                Item: <strong>{itemName}</strong>\n              </p>\n            </div>\n\n            <div className=\"space-y-3\">\n              <Label className=\"text-base font-semibold\">Equipment Condition Upon Return *</Label>\n              <div className=\"space-y-3\">\n                <div className=\"flex items-center gap-3 p-3 border rounded-lg cursor-pointer hover:bg-muted/50\" onClick={() => setReturnCondition('good')}>\n                  <input \n                    type=\"radio\" \n                    name=\"return-condition\" \n                    value=\"good\"\n                    checked={returnCondition === 'good'}\n                    onChange={() => setReturnCondition('good')}\n                    className=\"w-4 h-4\"\n                  />\n                  <Label className=\"cursor-pointer font-medium flex items-center gap-2 mb-0\">\n                    <CheckCircle className=\"w-5 h-5 text-green-600\" />\n                    Good\n                  </Label>\n                </div>\n\n                <div className=\"flex items-center gap-3 p-3 border rounded-lg cursor-pointer hover:bg-muted/50\" onClick={() => setReturnCondition('damage')}>\n                  <input \n                    type=\"radio\" \n                    name=\"return-condition\" \n                    value=\"damage\"\n                    checked={returnCondition === 'damage'}\n                    onChange={() => setReturnCondition('damage')}\n                    className=\"w-4 h-4\"\n                  />\n                  <Label className=\"cursor-pointer font-medium flex items-center gap-2 mb-0\">\n                    <AlertCircle className=\"w-5 h-5 text-red-600\" />\n                    Damage or Missing\n                  </Label>\n                </div>\n              </div>\n            </div>\n\n            {returnCondition === 'damage' && (\n              <div className=\"space-y-2 p-4 bg-red-50 dark:bg-red-950 rounded-lg border border-red-200 dark:border-red-800\">\n                <Label htmlFor=\"damage-notes\" className=\"text-base font-semibold\">Please describe the damage or missing items *</Label>\n                <Textarea\n                  id=\"damage-notes\"\n                  value={reason}\n                  onChange={(e) => setReason(e.target.value)}\n                  placeholder=\"Describe what damage or items are missing...\"\n                  rows={3}\n                  className=\"resize-none\"\n                />\n              </div>\n            )}\n\n            <DialogFooter>\n              <Button type=\"button\" variant=\"outline\" onClick={() => {\n                setReason(\"\");\n                setReturnCondition(\"\");\n                onClose();\n              }}>\n                Cancel\n              </Button>\n              <Button \n                type=\"submit\" \n                variant=\"default\"\n                disabled={!returnCondition || (returnCondition === 'damage' && !reason.trim())}\n              >\n                Mark as Returned\n              </Button>\n            </DialogFooter>\n          </form>\n        </DialogContent>\n      </Dialog>\n    );\n  }\n\n  // Rejection dialog (unchanged)\n  return (\n    <Dialog open={open} onOpenChange={onClose}>\n      <DialogContent className=\"max-w-md\">\n        <DialogHeader>\n          <DialogTitle>Reject Reservation</DialogTitle>\n        </DialogHeader>\n        <form onSubmit={handleSubmit} className=\"space-y-4\">\n          <div className=\"space-y-2\">\n            <p className=\"text-sm text-muted-foreground\">\n              Item: <strong>{itemName}</strong>\n            </p>\n          </div>\n          \n          <div className=\"space-y-2\">\n            <Label htmlFor=\"reason\">Rejection Reason *</Label>\n            <Textarea\n              id=\"reason\"\n              value={reason}\n              onChange={(e) => setReason(e.target.value)}\n              placeholder=\"Please provide a reason for rejection...\"\n              rows={4}\n              required\n            />\n          </div>\n\n          <DialogFooter>\n            <Button type=\"button\" variant=\"outline\" onClick={() => {\n              setReason(\"\");\n              onClose();\n            }}>\n              Cancel\n            </Button>\n            <Button \n              type=\"submit\" \n              variant=\"destructive\"\n              disabled={!reason.trim()}\n            >\n              Reject Reservation\n            </Button>\n          </DialogFooter>\n        </form>\n      </DialogContent>\n    </Dialog>\n  );\n}\n","path":null,"size_bytes":6232,"size_tokens":null},"attached_assets/CategoryCard_1763670896220.tsx":{"content":"import { Card } from \"@/components/ui/card\";\nimport { Badge } from \"@/components/ui/badge\";\n\ninterface CategoryCardProps {\n  name: string;\n  image: string;\n  totalCount: number;\n  availableCount: number;\n  subTypes: readonly string[];\n  onClick?: () => void;\n}\n\nexport default function CategoryCard({\n  name,\n  image,\n  totalCount,\n  availableCount,\n  subTypes,\n  onClick\n}: CategoryCardProps) {\n  return (\n    <Card \n      className=\"overflow-hidden cursor-pointer transition-all duration-300 hover:-translate-y-1 hover:shadow-xl\"\n      onClick={onClick}\n      data-testid={`card-category-${name.toLowerCase().replace(/\\s+/g, '-')}`}\n    >\n      <div \n        className=\"h-[180px] bg-cover bg-center relative\"\n        style={{ backgroundImage: `url(${image})` }}\n      >\n        <Badge \n          className=\"absolute top-3 right-3 bg-green-600 hover:bg-green-700\"\n          data-testid={`badge-available-${name.toLowerCase().replace(/\\s+/g, '-')}`}\n        >\n          {availableCount} Available\n        </Badge>\n      </div>\n      <div className=\"p-5\">\n        <h3 className=\"text-lg font-bold mb-2 text-card-foreground\" data-testid={`text-category-name-${name.toLowerCase().replace(/\\s+/g, '-')}`}>\n          {name}\n        </h3>\n        <p className=\"text-sm text-muted-foreground mb-3\" data-testid={`text-category-count-${name.toLowerCase().replace(/\\s+/g, '-')}`}>\n          {totalCount} total items\n        </p>\n        <div className=\"flex flex-wrap gap-1.5\">\n          {subTypes.map((subType, index) => (\n            <Badge \n              key={index} \n              variant=\"secondary\"\n              className=\"bg-gradient-to-r from-[#667eea] to-[#764ba2] text-white text-[11px] px-2 py-0.5\"\n              data-testid={`badge-subtype-${subType.toLowerCase().replace(/\\s+/g, '-')}`}\n            >\n              {subType}\n            </Badge>\n          ))}\n        </div>\n      </div>\n    </Card>\n  );\n}\n","path":null,"size_bytes":1911,"size_tokens":null},"attached_assets/aspect-ratio_1763670951625.tsx":{"content":"import * as AspectRatioPrimitive from \"@radix-ui/react-aspect-ratio\"\n\nconst AspectRatio = AspectRatioPrimitive.Root\n\nexport { AspectRatio }\n","path":null,"size_bytes":140,"size_tokens":null},"client/src/components/ui/sheet.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as SheetPrimitive from \"@radix-ui/react-dialog\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\nimport { X } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Sheet = SheetPrimitive.Root\n\nconst SheetTrigger = SheetPrimitive.Trigger\n\nconst SheetClose = SheetPrimitive.Close\n\nconst SheetPortal = SheetPrimitive.Portal\n\nconst SheetOverlay = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <SheetPrimitive.Overlay\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n    ref={ref}\n  />\n))\nSheetOverlay.displayName = SheetPrimitive.Overlay.displayName\n\nconst sheetVariants = cva(\n  \"fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500\",\n  {\n    variants: {\n      side: {\n        top: \"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top\",\n        bottom:\n          \"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom\",\n        left: \"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm\",\n        right:\n          \"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm\",\n      },\n    },\n    defaultVariants: {\n      side: \"right\",\n    },\n  }\n)\n\ninterface SheetContentProps\n  extends React.ComponentPropsWithoutRef<typeof SheetPrimitive.Content>,\n    VariantProps<typeof sheetVariants> {}\n\nconst SheetContent = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Content>,\n  SheetContentProps\n>(({ side = \"right\", className, children, ...props }, ref) => (\n  <SheetPortal>\n    <SheetOverlay />\n    <SheetPrimitive.Content\n      ref={ref}\n      className={cn(sheetVariants({ side }), className)}\n      {...props}\n    >\n      {children}\n      <SheetPrimitive.Close className=\"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary\">\n        <X className=\"h-4 w-4\" />\n        <span className=\"sr-only\">Close</span>\n      </SheetPrimitive.Close>\n    </SheetPrimitive.Content>\n  </SheetPortal>\n))\nSheetContent.displayName = SheetPrimitive.Content.displayName\n\nconst SheetHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-2 text-center sm:text-left\",\n      className\n    )}\n    {...props}\n  />\n)\nSheetHeader.displayName = \"SheetHeader\"\n\nconst SheetFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\n      className\n    )}\n    {...props}\n  />\n)\nSheetFooter.displayName = \"SheetFooter\"\n\nconst SheetTitle = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <SheetPrimitive.Title\n    ref={ref}\n    className={cn(\"text-lg font-semibold text-foreground\", className)}\n    {...props}\n  />\n))\nSheetTitle.displayName = SheetPrimitive.Title.displayName\n\nconst SheetDescription = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <SheetPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nSheetDescription.displayName = SheetPrimitive.Description.displayName\n\nexport {\n  Sheet,\n  SheetPortal,\n  SheetOverlay,\n  SheetTrigger,\n  SheetClose,\n  SheetContent,\n  SheetHeader,\n  SheetFooter,\n  SheetTitle,\n  SheetDescription,\n}\n","path":null,"size_bytes":4281,"size_tokens":null},"attached_assets/Login_1763670809218.tsx":{"content":"import { useState } from \"react\";\nimport { useMutation } from \"@tanstack/react-query\";\nimport LoginForm from \"@/components/LoginForm\";\nimport { api } from \"@/lib/api\";\n\ninterface LoginProps {\n  onLogin: (user: any) => void;\n}\n\nexport default function Login({ onLogin }: LoginProps) {\n  const [error, setError] = useState(\"\");\n\n  const loginMutation = useMutation({\n    mutationFn: ({ username, password }: { username: string; password: string }) =>\n      api.auth.login(username, password),\n    onSuccess: (data: any) => {\n      onLogin(data.user);\n    },\n    onError: (error: any) => {\n      setError(error.message || \"Login failed. Please try again.\");\n    }\n  });\n\n  const handleLogin = async (username: string, password: string) => {\n    setError(\"\");\n    loginMutation.mutate({ username, password });\n  };\n\n  return (\n    <LoginForm\n      onLogin={handleLogin}\n      isLoading={loginMutation.isPending}\n      error={error}\n    />\n  );\n}","path":null,"size_bytes":941,"size_tokens":null},"attached_assets/Maintenance_1763670809219.tsx":{"content":"import { useState } from \"react\";\nimport { useQuery, useMutation } from \"@tanstack/react-query\";\nimport { queryClient } from \"@/lib/queryClient\";\nimport InventoryHeader from \"@/components/InventoryHeader\";\nimport ItemCard from \"@/components/ItemCard\";\nimport ItemFormDialog from \"@/components/ItemFormDialog\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Table, TableBody, TableCell, TableHead, TableHeader, TableRow } from \"@/components/ui/table\";\nimport { Search, LayoutGrid, TableIcon, Wrench } from \"lucide-react\";\nimport { api, type Item } from \"@/lib/api\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport type { Language } from \"@/lib/translations\";\nimport { useTranslation } from '@/lib/translations';\n\ninterface MaintenancePageProps {\n  userName: string;\n  userRole: string;\n  userId: string;\n  onLogout: () => void;\n  onNavigateToReservations?: () => void;\n  onNavigateToActivityLogs?: () => void;\n  onNavigateToQRCodes?: () => void;\n  onNavigateToInventory?: () => void;\n  language?: Language;\n  onLanguageChange?: (language: Language) => void;\n}\n\nexport default function Maintenance({\n  userName,\n  userRole,\n  userId,\n  onLogout,\n  onNavigateToReservations,\n  onNavigateToActivityLogs,\n  onNavigateToQRCodes,\n  onNavigateToInventory,\n  language = 'en',\n  onLanguageChange\n}: MaintenancePageProps) {\n  const { toast } = useToast();\n  const t = useTranslation(language);\n  const [searchQuery, setSearchQuery] = useState(\"\");\n  const [showItemForm, setShowItemForm] = useState(false);\n  const [editingItem, setEditingItem] = useState<Item | null>(null);\n  const [viewMode, setViewMode] = useState<'card' | 'table'>('card');\n\n  const { data: allItems = [] } = useQuery<Item[]>({\n    queryKey: ['/api/items'],\n    queryFn: () => api.items.getAll(),\n  });\n\n  const maintenanceItems = allItems.filter((item: Item) => item.status === 'Maintenance');\n\n  const updateItemMutation = useMutation({\n    mutationFn: ({ id, data }: { id: string; data: Partial<Item> }) =>\n      api.items.update(id, data),\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['/api/items'] });\n      queryClient.invalidateQueries({ queryKey: ['/api/categories'] });\n      setShowItemForm(false);\n      setEditingItem(null);\n      toast({ title: \"Item updated successfully\" });\n    },\n    onError: () => {\n      toast({ title: \"Failed to update item\", variant: \"destructive\" });\n    }\n  });\n\n  const deleteItemMutation = useMutation({\n    mutationFn: (id: string) => api.items.delete(id),\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['/api/items'] });\n      queryClient.invalidateQueries({ queryKey: ['/api/categories'] });\n      toast({ title: \"Item deleted successfully\" });\n    },\n    onError: () => {\n      toast({ title: \"Failed to delete item\", variant: \"destructive\" });\n    }\n  });\n\n  const handleLogout = async () => {\n    try {\n      await api.auth.logout();\n      onLogout();\n    } catch (error) {\n      console.error('Logout failed:', error);\n      onLogout();\n    }\n  };\n\n  const filteredItems = maintenanceItems.filter((item: Item) => {\n    const matchesSearch = searchQuery === \"\" ||\n      item.productName.toLowerCase().includes(searchQuery.toLowerCase()) ||\n      item.barcode.toLowerCase().includes(searchQuery.toLowerCase());\n    return matchesSearch;\n  });\n\n  const handleEditItem = (itemData: any) => {\n    if (editingItem) {\n      updateItemMutation.mutate({ id: editingItem.id, data: itemData });\n    }\n  };\n\n  const handleDeleteItem = (id: string) => {\n    if (confirm('Are you sure you want to delete this item?')) {\n      deleteItemMutation.mutate(id);\n    }\n  };\n\n  return (\n    <div className=\"min-h-screen bg-background\">\n      <InventoryHeader\n        userName={userName}\n        userRole={userRole}\n        currentView=\"maintenance\"\n        language={language}\n        onLanguageChange={onLanguageChange}\n        onViewChange={(view) => {\n          if (view === 'inventory' || view === 'categories') {\n            onNavigateToInventory?.();\n          }\n        }}\n        onLogout={handleLogout}\n        onNavigateToReservations={onNavigateToReservations}\n        onNavigateToActivityLogs={onNavigateToActivityLogs}\n        onNavigateToQRCodes={onNavigateToQRCodes}\n        onNavigateToMaintenance={() => {}}\n      />\n\n      <main className=\"max-w-[1400px] mx-auto px-5 py-8\">\n        <div className=\"text-center mb-10 p-10 bg-gradient-to-r from-[#667eea] to-[#764ba2] rounded-2xl text-white\">\n          <div className=\"flex items-center justify-center gap-3 mb-4\">\n            <Wrench className=\"w-10 h-10\" />\n            <h1 className=\"text-4xl font-extrabold\" data-testid=\"text-maintenance-title\">\n              {t('maintenanceManagement')}\n            </h1>\n          </div>\n          <p className=\"text-lg opacity-90 max-w-2xl mx-auto\" data-testid=\"text-maintenance-subtitle\">\n            {t('itemsInMaintenanceSubtitle')}\n          </p>\n        </div>\n\n        <div className=\"flex items-center justify-between mb-6 flex-wrap gap-4\">\n          <div>\n            <p className=\"text-muted-foreground text-lg\" data-testid=\"text-maintenance-count\">\n              {filteredItems.length} {t('itemsInMaintenanceCount')}\n            </p>\n          </div>\n          <div className=\"flex gap-3\">\n            <Button\n              onClick={() => setViewMode(viewMode === 'card' ? 'table' : 'card')}\n              variant=\"outline\"\n              data-testid=\"button-toggle-view\"\n            >\n              {viewMode === 'card' ? <TableIcon className=\"w-4 h-4 mr-2\" /> : <LayoutGrid className=\"w-4 h-4 mr-2\" />}\n              {viewMode === 'card' ? t('table_view') : t('card_view')}\n            </Button>\n          </div>\n        </div>\n\n        <div className=\"mb-6\">\n          <div className=\"relative max-w-md\">\n            <Search className=\"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-muted-foreground\" />\n            <Input\n              placeholder={t('search_maintenance_items')}\n              value={searchQuery}\n              onChange={(e) => setSearchQuery(e.target.value)}\n              className=\"pl-12\"\n              data-testid=\"input-search-maintenance\"\n            />\n          </div>\n        </div>\n\n        {filteredItems.length === 0 ? (\n          <div className=\"text-center py-16 bg-card rounded-lg border-2 border-dashed\">\n            <Wrench className=\"w-16 h-16 mx-auto mb-4 text-muted-foreground\" />\n            <h3 className=\"text-xl font-semibold mb-2\" data-testid=\"text-no-maintenance\">\n              {t('noItemsInMaintenance')}\n            </h3>\n            <p className=\"text-muted-foreground\" data-testid=\"text-no-maintenance-subtitle\">\n              {t('allEquipmentWorking')}\n            </p>\n          </div>\n        ) : viewMode === 'card' ? (\n          <div className=\"grid gap-4\">\n            {filteredItems.map((item: Item) => (\n              <ItemCard\n                key={item.id}\n                id={item.id}\n                barcode={item.barcode}\n                productName={item.productName}\n                productType={item.productType}\n                status={item.status}\n                location={item.location || undefined}\n                notes={item.notes || undefined}\n                userRole={userRole}\n                onEdit={userRole === 'admin' ? () => {\n                  setEditingItem(item);\n                  setShowItemForm(true);\n                } : undefined}\n                onDelete={userRole === 'admin' ? () => handleDeleteItem(item.id) : undefined}\n              />\n            ))}\n          </div>\n        ) : (\n          <div className=\"bg-white rounded-lg shadow overflow-hidden\">\n            <Table>\n              <TableHeader>\n                <TableRow>\n                  <TableHead>{t('barcode')}</TableHead>\n                  <TableHead>{t('name')}</TableHead>\n                  <TableHead>{t('type')}</TableHead>\n                  <TableHead>{t('status')}</TableHead>\n                  <TableHead>{t('location')}</TableHead>\n                  <TableHead>{t('notes')}</TableHead>\n                  {userRole === 'admin' && <TableHead className=\"text-right\">{t('actions')}</TableHead>}\n                </TableRow>\n              </TableHeader>\n              <TableBody>\n                {filteredItems.map((item: Item) => (\n                  <TableRow key={item.id} data-testid={`row-maintenance-item-${item.id}`}>\n                    <TableCell className=\"font-mono\" data-testid={`text-barcode-${item.id}`}>{item.barcode}</TableCell>\n                    <TableCell className=\"font-medium\" data-testid={`text-name-${item.id}`}>{item.productName}</TableCell>\n                    <TableCell data-testid={`text-type-${item.id}`}>{item.productType}</TableCell>\n                    <TableCell>\n                      <span className=\"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-orange-100 text-orange-800\" data-testid={`badge-status-${item.id}`}>\n                        {item.status}\n                      </span>\n                    </TableCell>\n                    <TableCell data-testid={`text-location-${item.id}`}>{item.location || '-'}</TableCell>\n                    <TableCell data-testid={`text-notes-${item.id}`}>{item.notes || '-'}</TableCell>\n                    {userRole === 'admin' && (\n                      <TableCell className=\"text-right\">\n                        <div className=\"flex gap-2 justify-end\">\n                          <Button\n                            size=\"sm\"\n                            variant=\"outline\"\n                            onClick={() => {\n                              setEditingItem(item);\n                              setShowItemForm(true);\n                            }}\n                            data-testid={`button-edit-${item.id}`}\n                          >\n                            {t('edit')}\n                          </Button>\n                        </div>\n                      </TableCell>\n                    )}\n                  </TableRow>\n                ))}\n              </TableBody>\n            </Table>\n          </div>\n        )}\n      </main>\n\n      {showItemForm && (\n        <ItemFormDialog\n          open={showItemForm}\n          onClose={() => {\n            setShowItemForm(false);\n            setEditingItem(null);\n          }}\n          onSubmit={handleEditItem}\n          item={editingItem || undefined}\n          mode={editingItem ? 'edit' : 'add'}\n          userRole=\"admin\"\n        />\n      )}\n    </div>\n  );\n}","path":null,"size_bytes":10523,"size_tokens":null},"client/src/components/ui/radio-group.tsx":{"content":"import * as React from \"react\"\nimport * as RadioGroupPrimitive from \"@radix-ui/react-radio-group\"\nimport { Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst RadioGroup = React.forwardRef<\n  React.ElementRef<typeof RadioGroupPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof RadioGroupPrimitive.Root>\n>(({ className, ...props }, ref) => {\n  return (\n    <RadioGroupPrimitive.Root\n      className={cn(\"grid gap-2\", className)}\n      {...props}\n      ref={ref}\n    />\n  )\n})\nRadioGroup.displayName = RadioGroupPrimitive.Root.displayName\n\nconst RadioGroupItem = React.forwardRef<\n  React.ElementRef<typeof RadioGroupPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof RadioGroupPrimitive.Item>\n>(({ className, ...props }, ref) => {\n  return (\n    <RadioGroupPrimitive.Item\n      ref={ref}\n      className={cn(\n        \"aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50\",\n        className\n      )}\n      {...props}\n    >\n      <RadioGroupPrimitive.Indicator className=\"flex items-center justify-center\">\n        <Circle className=\"h-2.5 w-2.5 fill-current text-current\" />\n      </RadioGroupPrimitive.Indicator>\n    </RadioGroupPrimitive.Item>\n  )\n})\nRadioGroupItem.displayName = RadioGroupPrimitive.Item.displayName\n\nexport { RadioGroup, RadioGroupItem }\n","path":null,"size_bytes":1467,"size_tokens":null},"design_guidelines.md":{"content":"# Design Guidelines: Inventory Management System\n\n## Design Approach\n**System-Based Design** following Shadcn UI patterns optimized for data-heavy inventory management. Priority: clarity, efficiency, and bilingual accessibility.\n\n---\n\n## Typography System\n\n**Hierarchy:**\n- Page Titles: `text-3xl font-bold` \n- Section Headers: `text-xl font-semibold`\n- Card/Component Titles: `text-lg font-medium`\n- Body Text: `text-sm` (default for tables, forms, lists)\n- Labels: `text-sm font-medium`\n- Captions/Meta: `text-xs text-muted-foreground`\n\n**Fonts:**\n- Primary: Inter or System UI stack via Tailwind defaults\n- Monospace: For QR codes, IDs, and serial numbers (`font-mono`)\n\n---\n\n## Layout System\n\n**Spacing Scale:** Use Tailwind units **2, 4, 6, 8** consistently\n- Component padding: `p-4` or `p-6`\n- Section gaps: `gap-6` or `gap-8`\n- Form field spacing: `space-y-4`\n- Card spacing: `p-6`\n\n**Container Strategy:**\n- Dashboard/App Layout: Full-width with Sidebar (16rem collapsed, 3rem icon-only)\n- Content area: `max-w-7xl mx-auto px-4` for main views\n- Modals/Dialogs: `max-w-2xl` for forms, `max-w-4xl` for detailed views\n- Tables: Full-width within container, horizontal scroll on mobile\n\n**Grid Patterns:**\n- Item Cards: `grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6`\n- Dashboard Stats: `grid-cols-2 lg:grid-cols-4 gap-4`\n- Form Layouts: Single column with `max-w-2xl`\n\n---\n\n## Component Library\n\n### Navigation\n- **Sidebar (Primary):** Fixed left sidebar with collapsible icon mode. Includes logo, navigation items with icons, user profile at bottom\n- **Header:** Top bar with breadcrumbs, search, notifications bell, language toggle (EN/AR), user dropdown\n- **Mobile:** Sheet-based sidebar overlay with full navigation\n\n### Data Display\n- **Tables:** Shadcn Table with sticky header, sortable columns, row actions dropdown, pagination below\n- **Cards:** Elevated cards (`border rounded-lg`) for inventory items with image thumbnail, title, status badge, metadata grid, action buttons\n- **Badges:** Status indicators - Available, Reserved, In Maintenance, Unavailable (use Shadcn Badge variants)\n- **Stats Cards:** Large number display with icon, label, and trend indicator\n\n### Forms & Input\n- **Form Fields:** Label above input, helper text below, error messages in destructive variant\n- **Search:** Input with search icon, clear button, live filtering\n- **Filters:** Dropdown selects for category, status, location with \"Apply Filters\" button\n- **Date Pickers:** Calendar component for reservation dates\n- **QR Scanner:** Modal with camera view or upload area\n\n### Actions\n- **Primary CTAs:** Shadcn Button default variant (`h-9`)\n- **Secondary Actions:** Button outline variant\n- **Destructive:** Button destructive variant for delete/cancel\n- **Icon Buttons:** Square `h-9 w-9` for actions in tables/cards\n- **Floating Action:** Fixed bottom-right for quick add on mobile\n\n### Feedback\n- **Toasts:** Top-right position for success/error notifications\n- **Loading States:** Skeleton loaders for tables and cards\n- **Empty States:** Centered with icon, heading, description, and primary action\n- **Dialogs:** Confirmation dialogs for destructive actions, form dialogs for add/edit\n\n### Special Components\n- **QR Code Display:** Large QR code in card with download/print buttons\n- **Reservation Timeline:** Horizontal timeline showing booked periods with conflict indicators\n- **Activity Log:** List with timestamps, user avatars, action descriptions\n- **Maintenance Schedule:** Calendar view or list with status indicators\n\n---\n\n## Layout Patterns\n\n### Dashboard Page\n- Stats grid at top (4 cards: Total Items, Available, Reserved, In Maintenance)\n- Recent activity list (left 2/3) + Quick actions card (right 1/3)\n- Charts: Bar chart for category distribution\n\n### Inventory List\n- Filters toolbar (category, status, search) at top\n- Grid view toggle (table/cards)\n- Pagination at bottom\n- Item cards show: thumbnail, name, category, status badge, location, action menu\n\n### Item Detail\n- Two-column layout: Image gallery + QR code (left) | Details, specs, history (right)\n- Tabs: Overview, Reservations, Maintenance, Activity Log\n- Action buttons: Edit, Reserve, Report Issue, Delete\n\n### Reservation Form\n- Modal dialog with calendar date picker\n- Conflict checking with visual indicators\n- User selection (admin only), notes field\n- Preview of selected dates with total duration\n\n### User Management (Admin)\n- Table with columns: Name, Role, Email, Status, Actions\n- Add User button (top right)\n- Inline edit or modal for user details\n- Role badges with distinct styling\n\n---\n\n## Responsive Strategy\n\n**Breakpoints:**\n- Mobile: Base styles, single column, sheet navigation\n- Tablet (md): 2-column grids, collapsible sidebar\n- Desktop (lg+): 3-column grids, full sidebar, optimized spacing\n\n**Mobile Optimizations:**\n- Bottom navigation for key actions\n- Swipeable tabs instead of sidebar on mobile\n- Card view preferred over table on small screens\n- Touch-friendly tap targets (min 44px)\n\n---\n\n## Bilingual & RTL Support\n\n- Use Tailwind RTL variants: `rtl:text-right`, `ltr:ml-4 rtl:mr-4`\n- Mirror layouts completely for Arabic (sidebar right, text alignment right)\n- Icons remain consistent (don't mirror)\n- Numbers and dates localized per language\n- Language toggle in header with flags or language codes\n\n---\n\n## Accessibility\n\n- All interactive elements keyboard navigable\n- Focus states with ring-2 ring-ring\n- ARIA labels for icon-only buttons\n- Form errors announced to screen readers\n- Color contrast meeting WCAG AA standards\n- RTL navigation with arrow keys respecting direction\n\n---\n\n## Visual Refinement\n\n- Consistent border-radius: `rounded-lg` for cards, `rounded-md` for buttons/inputs\n- Shadows: `shadow-sm` for cards, `shadow-lg` for modals\n- Hover states: Subtle `hover:bg-accent` for interactive elements\n- Icons: Lucide icons at `h-4 w-4` for inline, `h-5 w-5` for buttons\n- Loading: Skeleton components matching content structure\n- Animations: Minimal - only for state changes (toast entry, dialog fade)\n\n---\n\n## Images\n\n**QR Codes:** Programmatically generated, displayed at 200x200px minimum, downloadable as PNG\n**Item Thumbnails:** Placeholder illustrations for items without photos (simple product icons)\n**Empty States:** Simple line illustrations for \"no items found\" scenarios\n**User Avatars:** Initials-based fallback when no photo uploaded\n\nNo hero images needed - this is a utility application prioritizing function over marketing.","path":null,"size_bytes":6479,"size_tokens":null},"client/src/components/ui/context-menu.tsx":{"content":"import * as React from \"react\"\nimport * as ContextMenuPrimitive from \"@radix-ui/react-context-menu\"\nimport { Check, ChevronRight, Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ContextMenu = ContextMenuPrimitive.Root\n\nconst ContextMenuTrigger = ContextMenuPrimitive.Trigger\n\nconst ContextMenuGroup = ContextMenuPrimitive.Group\n\nconst ContextMenuPortal = ContextMenuPrimitive.Portal\n\nconst ContextMenuSub = ContextMenuPrimitive.Sub\n\nconst ContextMenuRadioGroup = ContextMenuPrimitive.RadioGroup\n\nconst ContextMenuSubTrigger = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.SubTrigger>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.SubTrigger> & {\n    inset?: boolean\n  }\n>(({ className, inset, children, ...props }, ref) => (\n  <ContextMenuPrimitive.SubTrigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <ChevronRight className=\"ml-auto h-4 w-4\" />\n  </ContextMenuPrimitive.SubTrigger>\n))\nContextMenuSubTrigger.displayName = ContextMenuPrimitive.SubTrigger.displayName\n\nconst ContextMenuSubContent = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.SubContent>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.SubContent>\n>(({ className, ...props }, ref) => (\n  <ContextMenuPrimitive.SubContent\n    ref={ref}\n    className={cn(\n      \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-context-menu-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nContextMenuSubContent.displayName = ContextMenuPrimitive.SubContent.displayName\n\nconst ContextMenuContent = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <ContextMenuPrimitive.Portal>\n    <ContextMenuPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"z-50 max-h-[--radix-context-menu-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md animate-in fade-in-80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-context-menu-content-transform-origin]\",\n        className\n      )}\n      {...props}\n    />\n  </ContextMenuPrimitive.Portal>\n))\nContextMenuContent.displayName = ContextMenuPrimitive.Content.displayName\n\nconst ContextMenuItem = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Item> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <ContextMenuPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nContextMenuItem.displayName = ContextMenuPrimitive.Item.displayName\n\nconst ContextMenuCheckboxItem = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.CheckboxItem>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.CheckboxItem>\n>(({ className, children, checked, ...props }, ref) => (\n  <ContextMenuPrimitive.CheckboxItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    checked={checked}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <ContextMenuPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </ContextMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </ContextMenuPrimitive.CheckboxItem>\n))\nContextMenuCheckboxItem.displayName =\n  ContextMenuPrimitive.CheckboxItem.displayName\n\nconst ContextMenuRadioItem = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.RadioItem>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.RadioItem>\n>(({ className, children, ...props }, ref) => (\n  <ContextMenuPrimitive.RadioItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <ContextMenuPrimitive.ItemIndicator>\n        <Circle className=\"h-2 w-2 fill-current\" />\n      </ContextMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </ContextMenuPrimitive.RadioItem>\n))\nContextMenuRadioItem.displayName = ContextMenuPrimitive.RadioItem.displayName\n\nconst ContextMenuLabel = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Label> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <ContextMenuPrimitive.Label\n    ref={ref}\n    className={cn(\n      \"px-2 py-1.5 text-sm font-semibold text-foreground\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nContextMenuLabel.displayName = ContextMenuPrimitive.Label.displayName\n\nconst ContextMenuSeparator = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <ContextMenuPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-border\", className)}\n    {...props}\n  />\n))\nContextMenuSeparator.displayName = ContextMenuPrimitive.Separator.displayName\n\nconst ContextMenuShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\n        \"ml-auto text-xs tracking-widest text-muted-foreground\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\nContextMenuShortcut.displayName = \"ContextMenuShortcut\"\n\nexport {\n  ContextMenu,\n  ContextMenuTrigger,\n  ContextMenuContent,\n  ContextMenuItem,\n  ContextMenuCheckboxItem,\n  ContextMenuRadioItem,\n  ContextMenuLabel,\n  ContextMenuSeparator,\n  ContextMenuShortcut,\n  ContextMenuGroup,\n  ContextMenuPortal,\n  ContextMenuSub,\n  ContextMenuSubContent,\n  ContextMenuSubTrigger,\n  ContextMenuRadioGroup,\n}\n","path":null,"size_bytes":7428,"size_tokens":null},"client/src/components/ui/toaster.tsx":{"content":"import { useToast } from \"@/hooks/use-toast\"\nimport {\n  Toast,\n  ToastClose,\n  ToastDescription,\n  ToastProvider,\n  ToastTitle,\n  ToastViewport,\n} from \"@/components/ui/toast\"\n\nexport function Toaster() {\n  const { toasts } = useToast()\n\n  return (\n    <ToastProvider>\n      {toasts.map(function ({ id, title, description, action, ...props }) {\n        return (\n          <Toast key={id} {...props}>\n            <div className=\"grid gap-1\">\n              {title && <ToastTitle>{title}</ToastTitle>}\n              {description && (\n                <ToastDescription>{description}</ToastDescription>\n              )}\n            </div>\n            {action}\n            <ToastClose />\n          </Toast>\n        )\n      })}\n      <ToastViewport />\n    </ToastProvider>\n  )\n}\n","path":null,"size_bytes":772,"size_tokens":null},"attached_assets/InventoryHeader_1763670896222.tsx":{"content":"import { Button } from \"@/components/ui/button\";\nimport { LogOut, Users, Calendar, ClipboardList, QrCode, Wrench, Package, Globe } from \"lucide-react\";\nimport {\n  DropdownMenu,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuLabel,\n  DropdownMenuSeparator,\n  DropdownMenuTrigger,\n} from \"@/components/ui/dropdown-menu\";\nimport NotificationBell from \"./NotificationBell\";\nimport { useTranslation, Language } from \"@/lib/translations\";\n\ninterface InventoryHeaderProps {\n  userName: string;\n  userRole: string;\n  currentView: 'categories' | 'inventory';\n  onViewChange: (view: 'categories' | 'inventory') => void;\n  onLogout: () => void;\n  onNavigateToReservations?: () => void;\n  onNavigateToActivityLogs?: () => void;\n  onNavigateToQRCodes?: () => void;\n  onNavigateToMaintenance?: () => void;\n  hideViewToggle?: boolean;\n  language?: Language;\n  onLanguageChange?: (language: Language) => void;\n}\n\nexport default function InventoryHeader({\n  userName,\n  userRole,\n  currentView,\n  onViewChange,\n  onLogout,\n  onNavigateToReservations,\n  onNavigateToActivityLogs,\n  onNavigateToQRCodes,\n  onNavigateToMaintenance,\n  hideViewToggle = false,\n  language = 'en',\n  onLanguageChange\n}: InventoryHeaderProps) {\n  const t = useTranslation(language);\n\n  return (\n    <header className=\"bg-gradient-to-r from-[#667eea] to-[#764ba2] text-white shadow-lg sticky top-0 z-50\">\n      <div className=\"max-w-[1400px] mx-auto px-5 py-4 flex items-center justify-between\">\n        <div className=\"flex items-center gap-3\">\n          <Package className=\"w-8 h-8\" />\n          <div>\n            <h1 className=\"text-2xl font-bold\" data-testid=\"text-app-title\">{t('inventory_manager')}</h1>\n            <p className=\"text-sm opacity-90\" data-testid=\"text-user-info\">\n              {userName} â€¢ {userRole}\n            </p>\n          </div>\n        </div>\n\n        <div className=\"flex items-center gap-3\">\n          {!hideViewToggle && (\n            <div className=\"flex gap-2 bg-white/10 rounded-lg p-1\">\n              <Button\n                variant={currentView === 'categories' ? 'secondary' : 'ghost'}\n                size=\"sm\"\n                onClick={() => onViewChange('categories')}\n                className={currentView === 'categories' ? '' : 'text-white hover:bg-white/20'}\n                data-testid=\"button-view-categories\"\n              >\n                {t('categories')}\n              </Button>\n              <Button\n                variant={currentView === 'inventory' ? 'secondary' : 'ghost'}\n                size=\"sm\"\n                onClick={() => onViewChange('inventory')}\n                className={currentView === 'inventory' ? '' : 'text-white hover:bg-white/20'}\n                data-testid=\"button-view-inventory\"\n              >\n                {t('all_items')}\n              </Button>\n            </div>\n          )}\n\n          <NotificationBell />\n\n          {/* Language Toggle - Always Visible */}\n          <DropdownMenu>\n            <DropdownMenuTrigger asChild>\n              <Button\n                variant=\"ghost\"\n                size=\"sm\"\n                className=\"text-white hover:bg-white/20 gap-2\"\n              >\n                <Globe className=\"w-5 h-5\" />\n                <span className=\"hidden sm:inline\">{language === 'en' ? 'English' : 'Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©'}</span>\n              </Button>\n            </DropdownMenuTrigger>\n            <DropdownMenuContent align=\"end\" className=\"w-32\">\n              <DropdownMenuItem \n                onClick={() => onLanguageChange?.('en')} \n                className={language === 'en' ? 'bg-accent' : ''}\n              >\n                English\n              </DropdownMenuItem>\n              <DropdownMenuItem \n                onClick={() => onLanguageChange?.('ar')} \n                className={language === 'ar' ? 'bg-accent' : ''}\n              >\n                Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©\n              </DropdownMenuItem>\n            </DropdownMenuContent>\n          </DropdownMenu>\n\n          <DropdownMenu>\n            <DropdownMenuTrigger asChild>\n              <Button\n                variant=\"ghost\"\n                size=\"sm\"\n                className=\"text-white hover:bg-white/20\"\n              >\n                <Users className=\"w-4 h-4 mr-2\" />\n                {t('menu')}\n              </Button>\n            </DropdownMenuTrigger>\n            <DropdownMenuContent align=\"end\" className=\"w-56\">\n              <DropdownMenuLabel>{t('navigation')}</DropdownMenuLabel>\n              <DropdownMenuSeparator />\n\n              {onNavigateToReservations && (\n                <DropdownMenuItem onClick={onNavigateToReservations}>\n                  <Calendar className=\"w-4 h-4 mr-2\" />\n                  {t('reservations')}\n                </DropdownMenuItem>\n              )}\n\n              {userRole === 'admin' && onNavigateToActivityLogs && (\n                <DropdownMenuItem onClick={onNavigateToActivityLogs}>\n                  <ClipboardList className=\"w-4 h-4 mr-2\" />\n                  {t('activityLog')}\n                </DropdownMenuItem>\n              )}\n\n              {userRole === 'admin' && onNavigateToQRCodes && (\n                <DropdownMenuItem onClick={onNavigateToQRCodes}>\n                  <QrCode className=\"w-4 h-4 mr-2\" />\n                  {t('qrCodes')}\n                </DropdownMenuItem>\n              )}\n\n              {userRole === 'admin' && onNavigateToMaintenance && (\n                <DropdownMenuItem onClick={onNavigateToMaintenance}>\n                  <Wrench className=\"w-4 h-4 mr-2\" />\n                  {t('maintenance')}\n                </DropdownMenuItem>\n              )}\n\n              {userRole === 'admin' && (\n                <DropdownMenuItem onClick={() => (window as any).navigateToUsers?.()}>\n                  <Users className=\"w-4 h-4 mr-2\" />\n                  {t('userManagement')}\n                </DropdownMenuItem>\n              )}\n\n              <DropdownMenuSeparator />\n\n              <DropdownMenuItem onClick={onLogout}>\n                <LogOut className=\"w-4 h-4 mr-2\" />\n                {t('logout')}\n              </DropdownMenuItem>\n            </DropdownMenuContent>\n          </DropdownMenu>\n        </div>\n      </div>\n    </header>\n  );\n}","path":null,"size_bytes":6184,"size_tokens":null},"attached_assets/ReservationFormDialog_1763670896227.tsx":{"content":"\nimport { useState, useEffect } from \"react\";\nimport { useQuery } from \"@tanstack/react-query\";\nimport { Dialog, DialogContent, DialogHeader, DialogTitle } from \"@/components/ui/dialog\";\nimport { Button } from \"@/components/ui/button\";\nimport { Label } from \"@/components/ui/label\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\nimport { Calendar } from \"@/components/ui/calendar\";\nimport { Popover, PopoverContent, PopoverTrigger } from \"@/components/ui/popover\";\nimport { CalendarIcon, AlertCircle } from \"lucide-react\";\nimport { format } from \"date-fns\";\nimport { api, type Item } from \"@/lib/api\";\nimport { Alert, AlertDescription } from \"@/components/ui/alert\";\n\ninterface ReservationFormDialogProps {\n  open: boolean;\n  onClose: () => void;\n  onSubmit: (data: { itemId: string; startDate: Date; returnDate: Date; notes?: string }) => void;\n  items: Item[];\n}\n\nexport default function ReservationFormDialog({\n  open,\n  onClose,\n  onSubmit,\n  items\n}: ReservationFormDialogProps) {\n  const [itemId, setItemId] = useState(\"\");\n  const [startDate, setStartDate] = useState<Date>();\n  const [returnDate, setReturnDate] = useState<Date>();\n  const [notes, setNotes] = useState(\"\");\n\n  // Auto-select item if only one item is provided (from reserve button)\n  useEffect(() => {\n    if (open && items.length === 1) {\n      setItemId(items[0].id);\n    }\n  }, [open, items]);\n\n  // Fetch existing reservations for the selected item\n  const { data: itemReservations = [] } = useQuery({\n    queryKey: ['/api/reservations/item', itemId],\n    queryFn: () => itemId ? api.reservations.getByItem(itemId) : Promise.resolve([]),\n    enabled: !!itemId,\n  });\n\n  // Reset dates when item changes\n  useEffect(() => {\n    setStartDate(undefined);\n    setReturnDate(undefined);\n  }, [itemId]);\n\n  const handleSubmit = (e: React.FormEvent) => {\n    e.preventDefault();\n    if (!itemId || !startDate || !returnDate) return;\n    \n    if (returnDate < startDate) {\n      alert(\"Return date must be after start date\");\n      return;\n    }\n    \n    onSubmit({\n      itemId,\n      startDate,\n      returnDate,\n      notes: notes.trim() || undefined\n    });\n    \n    setItemId(\"\");\n    setStartDate(undefined);\n    setReturnDate(undefined);\n    setNotes(\"\");\n  };\n\n  const handleClose = () => {\n    setItemId(\"\");\n    setStartDate(undefined);\n    setReturnDate(undefined);\n    setNotes(\"\");\n    onClose();\n  };\n\n  // Check if a date is blocked by existing reservations\n  const isDateBlocked = (date: Date) => {\n    if (!itemId) return false;\n    \n    return itemReservations.some(reservation => {\n      const resStart = new Date(reservation.startDate);\n      const resEnd = new Date(reservation.returnDate);\n      resStart.setHours(0, 0, 0, 0);\n      resEnd.setHours(0, 0, 0, 0);\n      const checkDate = new Date(date);\n      checkDate.setHours(0, 0, 0, 0);\n      \n      return checkDate >= resStart && checkDate <= resEnd;\n    });\n  };\n\n  // Check if selected dates conflict with existing reservations\n  const hasDateConflict = () => {\n    if (!startDate || !returnDate || !itemId) return false;\n\n    return itemReservations.some(reservation => {\n      const resStart = new Date(reservation.startDate);\n      const resEnd = new Date(reservation.returnDate);\n      \n      return (\n        (startDate >= resStart && startDate <= resEnd) ||\n        (returnDate >= resStart && returnDate <= resEnd) ||\n        (startDate <= resStart && returnDate >= resEnd)\n      );\n    });\n  };\n\n  return (\n    <Dialog open={open} onOpenChange={handleClose}>\n      <DialogContent className=\"max-w-md\">\n        <DialogHeader>\n          <DialogTitle>New Reservation Request</DialogTitle>\n        </DialogHeader>\n        <form onSubmit={handleSubmit} className=\"space-y-4\">\n          <div className=\"space-y-2\">\n            <Label htmlFor=\"item\">Select Item *</Label>\n            <Select value={itemId} onValueChange={setItemId} required disabled={items.length === 1}>\n              <SelectTrigger>\n                <SelectValue placeholder=\"Choose an item...\" />\n              </SelectTrigger>\n              <SelectContent>\n                {items.map((item) => (\n                  <SelectItem key={item.id} value={item.id}>\n                    {item.productName} - {item.barcode}\n                  </SelectItem>\n                ))}\n              </SelectContent>\n            </Select>\n            {items.length === 1 && (\n              <p className=\"text-sm text-muted-foreground\">\n                Reserving: {items[0].productName}\n              </p>\n            )}\n          </div>\n\n          {itemId && itemReservations.length > 0 && (\n            <Alert>\n              <AlertCircle className=\"h-4 w-4\" />\n              <AlertDescription>\n                This item has {itemReservations.length} existing reservation(s). \n                Unavailable dates are highlighted in red on the calendar.\n              </AlertDescription>\n            </Alert>\n          )}\n          \n          <div className=\"space-y-2\">\n            <Label>Start Date *</Label>\n            <Popover>\n              <PopoverTrigger asChild>\n                <Button\n                  variant=\"outline\"\n                  className=\"w-full justify-start text-left font-normal\"\n                >\n                  <CalendarIcon className=\"mr-2 h-4 w-4\" />\n                  {startDate ? format(startDate, \"PPP\") : <span>Pick a start date</span>}\n                </Button>\n              </PopoverTrigger>\n              <PopoverContent className=\"w-auto p-0\">\n                <Calendar\n                  mode=\"single\"\n                  selected={startDate}\n                  onSelect={setStartDate}\n                  disabled={(date) => {\n                    const today = new Date(new Date().setHours(0, 0, 0, 0));\n                    return date < today || isDateBlocked(date);\n                  }}\n                  modifiers={{\n                    blocked: (date) => isDateBlocked(date)\n                  }}\n                  modifiersClassNames={{\n                    blocked: \"bg-red-100 text-red-900 line-through\"\n                  }}\n                  initialFocus\n                />\n              </PopoverContent>\n            </Popover>\n          </div>\n\n          <div className=\"space-y-2\">\n            <Label>Return Date *</Label>\n            <Popover>\n              <PopoverTrigger asChild>\n                <Button\n                  variant=\"outline\"\n                  className=\"w-full justify-start text-left font-normal\"\n                >\n                  <CalendarIcon className=\"mr-2 h-4 w-4\" />\n                  {returnDate ? format(returnDate, \"PPP\") : <span>Pick a return date</span>}\n                </Button>\n              </PopoverTrigger>\n              <PopoverContent className=\"w-auto p-0\">\n                <Calendar\n                  mode=\"single\"\n                  selected={returnDate}\n                  onSelect={setReturnDate}\n                  disabled={(date) => {\n                    const today = new Date(new Date().setHours(0, 0, 0, 0));\n                    if (startDate) {\n                      return date < startDate || date < today || isDateBlocked(date);\n                    }\n                    return date < today || isDateBlocked(date);\n                  }}\n                  modifiers={{\n                    blocked: (date) => isDateBlocked(date)\n                  }}\n                  modifiersClassNames={{\n                    blocked: \"bg-red-100 text-red-900 line-through\"\n                  }}\n                  initialFocus\n                />\n              </PopoverContent>\n            </Popover>\n          </div>\n\n          {hasDateConflict() && (\n            <Alert variant=\"destructive\">\n              <AlertCircle className=\"h-4 w-4\" />\n              <AlertDescription>\n                The selected dates conflict with an existing reservation. Please choose different dates.\n              </AlertDescription>\n            </Alert>\n          )}\n          \n          <div className=\"space-y-2\">\n            <Label htmlFor=\"notes\">Request Notes (Optional)</Label>\n            <Textarea\n              id=\"notes\"\n              value={notes}\n              onChange={(e) => setNotes(e.target.value)}\n              placeholder=\"Add any special requests or notes...\"\n              rows={3}\n            />\n          </div>\n\n          <div className=\"flex gap-3 justify-end\">\n            <Button type=\"button\" variant=\"outline\" onClick={handleClose}>\n              Cancel\n            </Button>\n            <Button \n              type=\"submit\" \n              className=\"bg-gradient-to-r from-[#667eea] to-[#764ba2]\"\n              disabled={!itemId || !startDate || !returnDate || hasDateConflict()}\n            >\n              Submit Request\n            </Button>\n          </div>\n        </form>\n      </DialogContent>\n    </Dialog>\n  );\n}\n","path":null,"size_bytes":8922,"size_tokens":null},"attached_assets/main_1763670802183.tsx":{"content":"import { createRoot } from \"react-dom/client\";\nimport App from \"./App\";\nimport \"./index.css\";\n\ncreateRoot(document.getElementById(\"root\")!).render(<App />);\n","path":null,"size_bytes":157,"size_tokens":null},"server/seed.ts":{"content":"\nimport { storage } from \"./storage\";\nimport { hashPassword } from \"./auth\";\n\nexport async function seedDatabase() {\n  console.log('ðŸŒ± Seeding database...');\n\n  const existingItems = await storage.getAllItems();\n  if (existingItems.length > 0) {\n    console.log('âœ… Database already seeded, skipping...');\n    return;\n  }\n\n  // Seed equipment categories (12 categories)\n  const equipmentCategories = [\n    { name: 'Cameras', image: 'ðŸ“·', subTypes: JSON.stringify(['Camera', 'Action Cam']), isEquipment: true },\n    { name: 'Lenses', image: 'ðŸ”', subTypes: JSON.stringify(['Lenses', 'Digital Filter']), isEquipment: true },\n    { name: 'Tripods & Stands', image: 'ðŸŽ¥', subTypes: JSON.stringify(['Stands', 'Small Tripods', 'Backdrop Stands', 'Monopod']), isEquipment: true },\n    { name: 'Grips & Stabilization', image: 'âœ‹', subTypes: JSON.stringify(['Crane', 'Gimbal', 'Dolly / Wheels Tripod', 'Shoulder Rig', 'Spider Rig', 'Slider', 'Camera Support Equipment', 'Rig & Stabilization Gear']), isEquipment: true },\n    { name: 'Audio Equipment', image: 'ðŸŽ¤', subTypes: JSON.stringify(['Microphone', 'Mic', 'Wireless Device', 'Recorder', 'Mixer', 'Boom Arm', 'Transmitter', 'Receiver']), isEquipment: true },\n    { name: 'Lighting', image: 'ðŸ’¡', subTypes: JSON.stringify(['LED Light', 'LED', 'Soft Box', 'Light', 'RGB Lights', 'LED Ring', 'Lighting Equipment']), isEquipment: true },\n    { name: 'Studio Accessories', image: 'ðŸŽ­', subTypes: JSON.stringify(['Clapper', 'Reflector', 'Kit', 'Background Screen']), isEquipment: true },\n    { name: 'Bags & Cases', image: 'ðŸŽ’', subTypes: JSON.stringify(['Bag', 'Backpacks', 'Bags & Cases']), isEquipment: true },\n    { name: 'Batteries & Power', image: 'ðŸ”‹', subTypes: JSON.stringify(['V-Mount Battery', 'Battery', 'Charger', 'Inverter', 'Power Bank', 'Battery Power Tester', 'Power & Accessories']), isEquipment: true },\n    { name: 'Cables & Adapters', image: 'ðŸ”Œ', subTypes: JSON.stringify(['Cable', 'Socket', 'Extension']), isEquipment: true },\n    { name: 'Monitors & Displays', image: 'ðŸ“º', subTypes: JSON.stringify(['Monitor', 'Screen', 'Computing & Display']), isEquipment: true },\n    { name: 'Storage Devices', image: 'ðŸ’¾', subTypes: JSON.stringify(['Storage Devices']), isEquipment: true },\n  ];\n\n  // Seed asset categories (7 categories)\n  const assetCategories = [\n    { name: 'Software Licenses', image: 'ðŸ’»', subTypes: JSON.stringify(['Editing Software', 'Design Software', 'Office Software']), isEquipment: false },\n    { name: 'Office Supplies', image: 'ðŸ“Ž', subTypes: JSON.stringify(['Stationery', 'Desk Items', 'Printer Supplies']), isEquipment: false },\n    { name: 'Pantry Items', image: 'ðŸ¥¤', subTypes: JSON.stringify(['Snacks', 'Disposable Items']), isEquipment: false },\n    { name: 'Transportation', image: 'ðŸšš', subTypes: JSON.stringify(['Vehicles', 'Delivery Equipment', 'Travel Accessories']), isEquipment: false },\n    { name: 'Furniture', image: 'ðŸª‘', subTypes: JSON.stringify(['Chairs', 'Tables', 'Storage Units']), isEquipment: false },\n    { name: 'Communication Devices', image: 'ðŸ“±', subTypes: JSON.stringify(['SIM Cards', 'Internet Devices', 'Mobile Devices']), isEquipment: false },\n    { name: 'Uniforms & Branding', image: 'ðŸ‘•', subTypes: JSON.stringify(['Uniforms', 'Badges', 'Tags', 'T-Shirts', 'Tote Bags', 'Uniform Bags']), isEquipment: false },\n  ];\n\n  for (const category of [...equipmentCategories, ...assetCategories]) {\n    await storage.createCategory(category);\n    console.log(`  âœ“ Created category: ${category.name}`);\n  }\n\n  const users = [\n    {\n      username: 'developer',\n      password: await hashPassword('omg'),\n      role: 'developer',\n      email: 'developer@company.com',\n      name: 'System Developer'\n    },\n    {\n      username: 'admin',\n      password: await hashPassword('omg'),\n      role: 'admin',\n      email: 'ironhub1746@gmail.com',\n      name: 'System Administrator'\n    },\n    {\n      username: 'staff1',\n      password: await hashPassword('omg'),\n      role: 'user',\n      email: 'staff1@company.com',\n      name: 'Staff Member 1'\n    },\n    {\n      username: 'staff2',\n      password: await hashPassword('omg'),\n      role: 'user',\n      email: 'staff2@company.com',\n      name: 'Staff Member 2'\n    }\n  ];\n\n  for (const user of users) {\n    await storage.createUser(user);\n    console.log(`  âœ“ Created user: ${user.username}`);\n  }\n\n  const items = [\n    // 1. Cameras\n    { barcode: 'CAM-001', productName: 'GH4 Lumix Cameras', productType: 'Camera', status: 'Available', location: 'Studio A', notes: 'Panasonic Lumix GH4', isEquipment: true },\n    { barcode: 'CAM-002', productName: 'Canon 70D Camera', productType: 'Camera', status: 'Available', location: 'Studio A', notes: 'Canon DSLR Camera', isEquipment: true },\n    { barcode: 'ACAM-001', productName: 'Insta 360 One R Lens Action Cam', productType: 'Action Cam', status: 'Available', location: 'Equipment Room', notes: '360 degree action camera', isEquipment: true },\n\n    // 2. Lenses\n    { barcode: 'LENS-001', productName: 'CANON 50MM', productType: 'Lenses', status: 'Available', location: 'Lens Cabinet', notes: 'Prime lens', isEquipment: true },\n    { barcode: 'LENS-002', productName: 'CANON 18-55', productType: 'Lenses', status: 'Available', location: 'Lens Cabinet', notes: 'Kit lens', isEquipment: true },\n    { barcode: 'LENS-003', productName: 'CANON 85MM', productType: 'Lenses', status: 'Available', location: 'Lens Cabinet', notes: 'Portrait lens', isEquipment: true },\n    { barcode: 'LENS-004', productName: 'CANON 18-135MM', productType: 'Lenses', status: 'Available', location: 'Lens Cabinet', notes: 'Zoom lens', isEquipment: true },\n    { barcode: 'LENS-005', productName: 'CANON SIGMA DC 18-200MM', productType: 'Lenses', status: 'Available', location: 'Lens Cabinet', notes: 'All-purpose zoom', isEquipment: true },\n    { barcode: 'LENS-006', productName: 'LUMIX 20MM', productType: 'Lenses', status: 'Available', location: 'Lens Cabinet', notes: 'Pancake lens', isEquipment: true },\n    { barcode: 'LENS-007', productName: 'LUMIX 15MM', productType: 'Lenses', status: 'Available', location: 'Lens Cabinet', notes: 'Wide angle', isEquipment: true },\n    { barcode: 'LENS-008', productName: 'LUMIX 14-140MM HD', productType: 'Lenses', status: 'Available', location: 'Lens Cabinet', notes: 'HD zoom lens', isEquipment: true },\n    { barcode: 'LENS-009', productName: 'LUMIX 35-100MM', productType: 'Lenses', status: 'Available', location: 'Lens Cabinet', notes: 'Telephoto zoom', isEquipment: true },\n    { barcode: 'LENS-010', productName: 'LUMIX G12-35MM', productType: 'Lenses', status: 'Available', location: 'Lens Cabinet', notes: 'Standard zoom', isEquipment: true },\n    { barcode: 'FILT-001', productName: 'Digital Filter', productType: 'Digital Filter', status: 'Available', location: 'Accessories Drawer', notes: 'Digital lens filter', isEquipment: true },\n\n    // 3. Tripods & Stands\n    { barcode: 'STND-001', productName: 'LED Soft Box Stands (Average)', productType: 'Stands', status: 'Available', location: 'Stand Storage', notes: 'Medium height stands', isEquipment: true },\n    { barcode: 'STND-002', productName: 'CAER AF2434 (H4)', productType: 'Stands', status: 'Available', location: 'Stand Storage', notes: 'Heavy duty stand', isEquipment: true },\n    { barcode: 'STND-003', productName: 'Manfrotto 190 (Video Head Separate)', productType: 'Stands', status: 'Available', location: 'Stand Storage', notes: 'Professional tripod', isEquipment: true },\n    { barcode: 'STND-004', productName: 'Soft Box Large Stand', productType: 'Stands', status: 'Available', location: 'Stand Storage', notes: 'Tall stand for softbox', isEquipment: true },\n    { barcode: 'STND-005', productName: 'Sea Stands', productType: 'Stands', status: 'Available', location: 'Stand Storage', notes: 'Light stands', isEquipment: true },\n    { barcode: 'STND-006', productName: 'Small Tripod', productType: 'Small Tripods', status: 'Available', location: 'Equipment Room', notes: 'Compact tripod', isEquipment: true },\n    { barcode: 'STND-007', productName: 'Backdrop Stand (Large)', productType: 'Backdrop Stands', status: 'Available', location: 'Studio B', notes: 'Large backdrop support', isEquipment: true },\n    { barcode: 'MONO-001', productName: 'CAER CF34DV with Head', productType: 'Monopod', status: 'Available', location: 'Equipment Room', notes: 'Professional monopod', isEquipment: true },\n\n    // 4. Grips\n    { barcode: 'CRANE-001', productName: 'iFootage Minicrane M1-111', productType: 'Crane', status: 'Available', location: 'Equipment Storage', notes: 'Camera crane', isEquipment: true },\n    { barcode: 'GIBL-001', productName: 'Crane 3 S-Pro Gimbal', productType: 'Gimbal', status: 'Available', location: 'Studio A', notes: 'Professional gimbal', isEquipment: true },\n    { barcode: 'GIBL-002', productName: 'DJI Ronin SC Gimbal', productType: 'Gimbal', status: 'Available', location: 'Studio A', notes: 'Compact gimbal', isEquipment: true },\n    { barcode: 'DOLLY-001', productName: 'Dolly (Wheels Tripod)', productType: 'Dolly / Wheels Tripod', status: 'Available', location: 'Equipment Storage', notes: 'Camera dolly', isEquipment: true },\n    { barcode: 'DOLLY-002', productName: 'Dolly (Small Tripod Wheels)', productType: 'Dolly / Wheels Tripod', status: 'Available', location: 'Equipment Storage', notes: 'Small dolly', isEquipment: true },\n    { barcode: 'SRIG-001', productName: 'Shoulder Rig Kit Film City MB600', productType: 'Shoulder Rig', status: 'Available', location: 'Equipment Room', notes: 'Professional shoulder rig', isEquipment: true },\n    { barcode: 'SRIG-002', productName: 'Neewer Shoulder Rig', productType: 'Shoulder Rig', status: 'Available', location: 'Equipment Room', notes: 'Budget shoulder rig', isEquipment: true },\n    { barcode: 'SRIG-003', productName: 'Local Shoulder Rig', productType: 'Shoulder Rig', status: 'Available', location: 'Equipment Room', notes: 'Custom shoulder rig', isEquipment: true },\n    { barcode: 'SPRIG-001', productName: 'Spider Rig', productType: 'Spider Rig', status: 'Available', location: 'Equipment Storage', notes: 'Spider camera rig', isEquipment: true },\n    { barcode: 'SLID-001', productName: 'Electronic Slider Edelkrone', productType: 'Slider', status: 'Available', location: 'Studio A', notes: 'Motorized slider', isEquipment: true },\n    { barcode: 'SLID-002', productName: 'Neewer Slider (Head)', productType: 'Slider', status: 'Available', location: 'Studio A', notes: 'Manual slider with head', isEquipment: true },\n    { barcode: 'SLID-003', productName: 'Benro Slider MU005583', productType: 'Slider', status: 'Available', location: 'Studio A', notes: 'Carbon fiber slider', isEquipment: true },\n    { barcode: 'SLID-004', productName: 'Small Slider Neewer', productType: 'Slider', status: 'Available', location: 'Equipment Room', notes: 'Compact slider', isEquipment: true },\n    { barcode: 'CSUP-001', productName: 'Manfrotto 290 XTRA Tripod', productType: 'Camera Support Equipment', status: 'Available', location: 'Stand Storage', notes: 'Professional tripod', isEquipment: true },\n    { barcode: 'CSUP-002', productName: 'Manfrotto 190 Go Tripod', productType: 'Camera Support Equipment', status: 'Available', location: 'Stand Storage', notes: 'Travel tripod', isEquipment: true },\n    { barcode: 'CSUP-003', productName: 'Yunteng 288 Tripod', productType: 'Camera Support Equipment', status: 'Available', location: 'Stand Storage', notes: 'Budget tripod', isEquipment: true },\n    { barcode: 'CSUP-004', productName: 'Benro Tripod with Head', productType: 'Camera Support Equipment', status: 'Available', location: 'Stand Storage', notes: 'Tripod with fluid head', isEquipment: true },\n    { barcode: 'RIG-001', productName: 'Froza 60C', productType: 'Rig', status: 'Available', location: 'Equipment Room', notes: 'Camera rig accessory', isEquipment: true },\n    { barcode: 'RIG-002', productName: 'Godex 60C', productType: 'Rig', status: 'Available', location: 'Equipment Room', notes: 'Camera rig accessory', isEquipment: true },\n    { barcode: 'RIG-003', productName: 'Crane 3 S-Pro', productType: 'Rig & Stabilization Gear', status: 'Available', location: 'Equipment Room', notes: 'Stabilization rig', isEquipment: true },\n\n    // 5. Audio\n    { barcode: 'MIC-001', productName: 'Rode Mic', productType: 'Microphone', status: 'Available', location: 'Audio Room', notes: 'Professional microphone', isEquipment: true },\n    { barcode: 'MIC-002', productName: 'Dodex VD-Mic', productType: 'Microphone', status: 'Available', location: 'Audio Room', notes: 'On-camera mic', isEquipment: true },\n    { barcode: 'MIC-003', productName: 'Podcast Mic Blue', productType: 'Microphone', status: 'Available', location: 'Podcast Room', notes: 'USB podcast microphone', isEquipment: true },\n    { barcode: 'MIC-004', productName: 'Neewer NW-700 Mic', productType: 'Microphone', status: 'Available', location: 'Audio Room', notes: 'Condenser microphone', isEquipment: true },\n    { barcode: 'MIC-005', productName: 'LVI Lavalier Micro-Cravate MOVO', productType: 'Mic', status: 'Available', location: 'Audio Room', notes: 'Lavalier microphone', isEquipment: true },\n    { barcode: 'MIC-006', productName: 'MOVO Wire-Mike Doll', productType: 'Mic', status: 'Available', location: 'Audio Room', notes: 'Wired lavalier', isEquipment: true },\n    { barcode: 'WMIC-001', productName: 'Wireless Go II (Rode)', productType: 'Wireless Device', status: 'Available', location: 'Audio Room', notes: 'Wireless mic system', isEquipment: true },\n    { barcode: 'WMIC-002', productName: 'WMIC60 Wireless Microphone', productType: 'Wireless Device', status: 'Available', location: 'Audio Room', notes: 'Wireless handheld mic', isEquipment: true },\n    { barcode: 'REC-001', productName: 'Zoom H8 Handy Recorder', productType: 'Recorder', status: 'Available', location: 'Audio Room', notes: '8-track recorder', isEquipment: true },\n    { barcode: 'REC-002', productName: 'Zoom H6 Handy Recorder', productType: 'Recorder', status: 'Available', location: 'Audio Room', notes: '6-track recorder', isEquipment: true },\n    { barcode: 'MIX-001', productName: 'Mixing Console (4 Channel)', productType: 'Mixer', status: 'Available', location: 'Audio Room', notes: 'Audio mixer', isEquipment: true },\n    { barcode: 'BOOM-001', productName: 'RODE Boom Arm', productType: 'Boom Arm', status: 'Available', location: 'Audio Room', notes: 'Studio boom arm', isEquipment: true },\n    { barcode: 'TXRX-001', productName: 'RODE Link Transmitter RX-CAM / TX-BELT', productType: 'Transmitter', status: 'Available', location: 'Audio Room', notes: 'Wireless transmitter/receiver', isEquipment: true },\n    { barcode: 'TXRX-002', productName: 'MOVO Kit (Transmitter/Receiver)', productType: 'Receiver', status: 'Available', location: 'Audio Room', notes: 'Wireless system', isEquipment: true },\n\n    // 6. Lighting\n    { barcode: 'LED-001', productName: 'LED 880 NiceFoto Kit', productType: 'LED Light', status: 'Available', location: 'Lighting Room', notes: 'LED panel kit', isEquipment: true },\n    { barcode: 'LED-002', productName: 'LED Photostudio Pro LE500ACC', productType: 'LED Light', status: 'Available', location: 'Lighting Room', notes: 'Professional LED', isEquipment: true },\n    { barcode: 'LED-003', productName: 'Godex S600 Kit Combo', productType: 'LED', status: 'Available', location: 'Lighting Room', notes: 'Complete LED kit', isEquipment: true },\n    { barcode: 'SOFT-001', productName: 'Godox ADS 65W Soft Box', productType: 'Soft Box', status: 'Available', location: 'Lighting Room', notes: 'Small softbox', isEquipment: true },\n    { barcode: 'SOFT-002', productName: 'Froza Softbox SB-FMM-60', productType: 'Soft Box', status: 'Available', location: 'Lighting Room', notes: 'Medium softbox', isEquipment: true },\n    { barcode: 'SOFT-003', productName: 'Godex Soft Box P120L', productType: 'Soft Box', status: 'Available', location: 'Lighting Room', notes: 'Large parabolic softbox', isEquipment: true },\n    { barcode: 'LED-004', productName: 'Godex Light SL 150Pi', productType: 'Light', status: 'Available', location: 'Lighting Room', notes: 'Video LED light', isEquipment: true },\n    { barcode: 'RING-001', productName: 'Neewer LED Ring Flash', productType: 'LED Ring', status: 'Available', location: 'Lighting Room', notes: 'Ring light for photography', isEquipment: true },\n    { barcode: 'RGB-001', productName: 'Godox Tube Kit 30cm', productType: 'RGB Lights', status: 'Available', location: 'Lighting Room', notes: 'RGB tube light small', isEquipment: true },\n    { barcode: 'RGB-002', productName: 'Irmai RGB LED Video Light 60cm', productType: 'RGB Lights', status: 'Available', location: 'Lighting Room', notes: 'RGB tube light large', isEquipment: true },\n    { barcode: 'RGB-003', productName: 'Aputure MT Pro', productType: 'RGB Lights', status: 'Available', location: 'Lighting Room', notes: 'RGB mini light', isEquipment: true },\n    { barcode: 'LED-005', productName: 'Neewer CN-LUX360', productType: 'LED', status: 'Available', location: 'Lighting Room', notes: 'Dimmable LED panel', isEquipment: true },\n    { barcode: 'RGB-004', productName: 'Godox R1 RGB', productType: 'RGB Lights', status: 'Available', location: 'Lighting Room', notes: 'Compact RGB light', isEquipment: true },\n    { barcode: 'LED-006', productName: 'Godox LED64', productType: 'LED', status: 'Available', location: 'Lighting Room', notes: 'On-camera LED', isEquipment: true },\n    { barcode: 'LED-007', productName: 'Yongnuo YN300 II', productType: 'LED', status: 'Available', location: 'Lighting Room', notes: 'Portable LED panel', isEquipment: true },\n    { barcode: 'LED-008', productName: 'LS Photography PPH79', productType: 'LED Light', status: 'Available', location: 'Lighting Room', notes: 'Photography LED', isEquipment: true },\n    { barcode: 'LED-009', productName: 'Infrared Vision VL-36L Hak', productType: 'LED Light', status: 'Available', location: 'Lighting Room', notes: 'IR capable LED', isEquipment: true },\n    { barcode: 'LED-010', productName: 'Genaray LED-7100T', productType: 'LED Light', status: 'Available', location: 'Lighting Room', notes: 'Bi-color LED', isEquipment: true },\n    { barcode: 'LED-011', productName: 'JYLED300S LED Light', productType: 'LED Light', status: 'Available', location: 'Lighting Room', notes: 'Studio LED panel', isEquipment: true },\n    { barcode: 'LED-012', productName: 'Neewer CN-160', productType: 'LED', status: 'Available', location: 'Lighting Room', notes: 'Dimmable on-camera LED', isEquipment: true },\n    { barcode: 'LED-013', productName: 'Neewer CN-304', productType: 'LED', status: 'Available', location: 'Lighting Room', notes: 'Large LED panel', isEquipment: true },\n    { barcode: 'LED-014', productName: 'Speedlight NW-561', productType: 'Light', status: 'Available', location: 'Lighting Room', notes: 'Camera flash speedlight', isEquipment: true },\n    { barcode: 'LED-015', productName: 'LED Stands (Economical)', productType: 'Lighting Equipment', status: 'Available', location: 'Stand Storage', notes: 'Budget light stands', isEquipment: true },\n    { barcode: 'LED-016', productName: 'Foldio 360 Smart Turntable Light', productType: 'Lighting Equipment', status: 'Available', location: 'Product Photography', notes: 'Product photography turntable', isEquipment: true },\n\n    // 7. Studio Accessories\n    { barcode: 'CLAP-001', productName: 'Clapper Board', productType: 'Clapper', status: 'Available', location: 'Production Office', notes: 'Film slate', isEquipment: true },\n    { barcode: 'REF-001', productName: 'Reflector Kit (Small)', productType: 'Reflector', status: 'Available', location: 'Lighting Storage', notes: 'Small reflector set', isEquipment: true },\n    { barcode: 'REF-002', productName: 'Reflector Kit (Large)', productType: 'Reflector', status: 'Available', location: 'Lighting Storage', notes: 'Large reflector set', isEquipment: true },\n    { barcode: 'REF-003', productName: 'Angler Reflector Kit', productType: 'Kit', status: 'Available', location: 'Lighting Storage', notes: 'Professional reflector kit', isEquipment: true },\n    { barcode: 'BG-001', productName: 'Background Screen (Green/Black/White)', productType: 'Background Screen', status: 'Available', location: 'Studio B', notes: 'Triple backdrop set', isEquipment: true },\n    { barcode: 'BG-002', productName: 'Cowboy Studio Green Screen', productType: 'Background Screen', status: 'Available', location: 'Studio B', notes: 'Chroma key backdrop', isEquipment: true },\n\n    // 8. Bags & Cases\n    { barcode: 'BAG-001', productName: 'Equipment Bag Think Tank', productType: 'Bag', status: 'Available', location: 'Storage Room', notes: 'Professional camera bag', isEquipment: true },\n    { barcode: 'BAG-002', productName: 'Equipment Bag Tail', productType: 'Bag', status: 'Available', location: 'Storage Room', notes: 'Equipment transport bag', isEquipment: true },\n    { barcode: 'BAG-003', productName: 'Back Bag', productType: 'Backpacks', status: 'Available', location: 'Storage Room', notes: 'Camera backpack', isEquipment: true },\n    { barcode: 'BAG-004', productName: 'Carry Bag Small', productType: 'Bag', status: 'Available', location: 'Storage Room', notes: 'Small equipment bag', isEquipment: true },\n    { barcode: 'BAG-005', productName: 'Medium Bag (Customized)', productType: 'Bags & Cases', status: 'Available', location: 'Storage Room', notes: 'Custom medium case', isEquipment: true },\n    { barcode: 'BAG-006', productName: 'Stand Bag', productType: 'Bag', status: 'Available', location: 'Stand Storage', notes: 'Bag for light stands', isEquipment: true },\n    { barcode: 'BAG-007', productName: 'Low Eprop Bag (Medium)', productType: 'Bag', status: 'Available', location: 'Storage Room', notes: 'Medium equipment bag', isEquipment: true },\n\n    // 9. Batteries & Power\n    { barcode: 'BAT-001', productName: 'V-Mount Battery S-8110S', productType: 'V-Mount Battery', status: 'Available', location: 'Charging Station', notes: 'High capacity V-mount', isEquipment: true },\n    { barcode: 'BAT-002', productName: 'V-Mount Battery PB-M98S', productType: 'V-Mount Battery', status: 'Available', location: 'Charging Station', notes: 'Medium capacity V-mount', isEquipment: true },\n    { barcode: 'BAT-003', productName: 'V-Mount Ion FB-BP-95W', productType: 'V-Mount Battery', status: 'Available', location: 'Charging Station', notes: 'Lithium ion V-mount', isEquipment: true },\n    { barcode: 'BAT-004', productName: 'ZEGO BZ-95 Mini', productType: 'Battery', status: 'Available', location: 'Battery Cabinet', notes: 'Compact battery', isEquipment: true },\n    { barcode: 'BAT-005', productName: 'Canon Camera Battery', productType: 'Battery', status: 'Available', location: 'Battery Cabinet', notes: 'Canon LP-E6 compatible', isEquipment: true },\n    { barcode: 'BAT-006', productName: 'Lumix Battery GH4', productType: 'Battery', status: 'Available', location: 'Battery Cabinet', notes: 'Panasonic DMW-BLF19', isEquipment: true },\n    { barcode: 'BAT-007', productName: 'Monitor and Light Battery', productType: 'Battery', status: 'Available', location: 'Battery Cabinet', notes: 'NP-F style battery', isEquipment: true },\n    { barcode: 'BAT-008', productName: 'Energizer Cell AAA', productType: 'Battery', status: 'Available', location: 'Battery Cabinet', notes: 'AAA batteries pack', isEquipment: true },\n    { barcode: 'CHG-001', productName: 'V-Mount Charger', productType: 'Charger', status: 'Available', location: 'Charging Station', notes: 'Dual bay V-mount charger', isEquipment: true },\n    { barcode: 'CHG-002', productName: 'Energizer Cell Charger', productType: 'Charger', status: 'Available', location: 'Charging Station', notes: 'AA/AAA battery charger', isEquipment: true },\n    { barcode: 'INV-001', productName: 'Godox LP750X Inverter', productType: 'Inverter', status: 'Available', location: 'Power Room', notes: 'Power inverter', isEquipment: true },\n    { barcode: 'PWR-001', productName: 'Power Bank Anker PowerCore+', productType: 'Power Bank', status: 'Available', location: 'Equipment Drawer', notes: 'USB power bank', isEquipment: true },\n    { barcode: 'TEST-001', productName: 'Battery Power Tester DLYFULLB2', productType: 'Battery Power Tester', status: 'Available', location: 'Charging Station', notes: 'Battery capacity tester', isEquipment: true },\n    { barcode: 'EXT-001', productName: 'Extension Cords', productType: 'Power & Accessories', status: 'Available', location: 'Power Room', notes: 'Power extension set', isEquipment: true },\n    { barcode: 'EXT-002', productName: 'Extension Roll', productType: 'Power & Accessories', status: 'Available', location: 'Power Room', notes: 'Long extension reel', isEquipment: true },\n\n    // 10. Cables & Adapters\n    { barcode: 'CBL-001', productName: 'HDMI Cable 15ft', productType: 'Cable', status: 'Available', location: 'Cable Drawer', notes: 'High speed HDMI cable', isEquipment: true },\n    { barcode: 'CBL-002', productName: 'Audio Scale XLR AUX 3.5 Extension', productType: 'Cable', status: 'Available', location: 'Audio Cables', notes: 'XLR to 3.5mm cable', isEquipment: true },\n    { barcode: 'CBL-003', productName: 'Blackmagic Video Assist Cable', productType: 'Cable', status: 'Available', location: 'Cable Drawer', notes: 'Video cable set', isEquipment: true },\n    { barcode: 'EXT-003', productName: 'Small Extension Socket', productType: 'Socket', status: 'Available', location: 'Power Room', notes: 'Power strip small', isEquipment: true },\n    { barcode: 'EXT-004', productName: 'Power Extension Cord', productType: 'Extension', status: 'Available', location: 'Power Room', notes: 'Standard extension cord', isEquipment: true },\n    { barcode: 'EXT-005', productName: 'Extension Roll (Large)', productType: 'Extension', status: 'Available', location: 'Power Room', notes: 'Heavy duty extension reel', isEquipment: true },\n\n    // 11. Monitors & Displays\n    { barcode: 'MON-001', productName: 'Koolertron Small Monitor', productType: 'Monitor', status: 'Available', location: 'Equipment Room', notes: 'Portable field monitor', isEquipment: true },\n    { barcode: 'MON-002', productName: 'iPad Pro 11\"', productType: 'Screen', status: 'Available', location: 'Office', notes: 'Tablet for monitoring', isEquipment: true },\n    { barcode: 'DISP-001', productName: 'iMac 27\" (2019)', productType: 'Computing & Display', status: 'Available', location: 'Editing Suite', notes: 'Desktop workstation', isEquipment: true },\n    { barcode: 'DISP-002', productName: 'Samsung LED Monitor U28', productType: 'Computing & Display', status: 'Available', location: 'Editing Suite', notes: '4K monitor', isEquipment: true },\n\n    // 12. Storage Devices\n    { barcode: 'STO-001', productName: 'WD My Passport Ultra', productType: 'Storage Devices', status: 'Available', location: 'IT Room', notes: 'Portable HDD 2TB', isEquipment: true },\n    { barcode: 'STO-002', productName: 'WD Elements 3221B', productType: 'Storage Devices', status: 'Available', location: 'IT Room', notes: 'Desktop HDD 3TB', isEquipment: true },\n    { barcode: 'STO-003', productName: 'WD My Passport Wireless', productType: 'Storage Devices', status: 'Available', location: 'IT Room', notes: 'Wireless portable HDD', isEquipment: true },\n\n    // 13. Softwares\n    { barcode: 'SOFT-101', productName: 'Adobe Premiere Pro License', productType: 'Editing Software', status: 'Available', location: 'Digital Assets', notes: 'Video editing software', isEquipment: false },\n    { barcode: 'SOFT-102', productName: 'Final Cut Pro License', productType: 'Editing Software', status: 'Available', location: 'Digital Assets', notes: 'Apple video editing', isEquipment: false },\n    { barcode: 'SOFT-103', productName: 'Adobe Photoshop License', productType: 'Design Software', status: 'Available', location: 'Digital Assets', notes: 'Photo editing software', isEquipment: false },\n    { barcode: 'SOFT-104', productName: 'Adobe Illustrator License', productType: 'Design Software', status: 'Available', location: 'Digital Assets', notes: 'Vector design software', isEquipment: false },\n    { barcode: 'SOFT-105', productName: 'Microsoft Office 365', productType: 'Office Software', status: 'Available', location: 'Digital Assets', notes: 'Office productivity suite', isEquipment: false },\n\n    // 14. Office Supplies\n    { barcode: 'OFF-001', productName: 'Pens and Pencils Set', productType: 'Stationery', status: 'Available', location: 'Office Supply Cabinet', notes: 'Writing instruments', isEquipment: false },\n    { barcode: 'OFF-002', productName: 'Notebooks A4', productType: 'Stationery', status: 'Available', location: 'Office Supply Cabinet', notes: 'Spiral notebooks', isEquipment: false },\n    { barcode: 'OFF-003', productName: 'Sticky Notes Assorted', productType: 'Stationery', status: 'Available', location: 'Office Supply Cabinet', notes: 'Post-it notes', isEquipment: false },\n    { barcode: 'OFF-004', productName: 'Desk Organizer', productType: 'Desk Items', status: 'Available', location: 'Office', notes: 'Desktop organization', isEquipment: false },\n    { barcode: 'OFF-005', productName: 'Paper Clips & Binders', productType: 'Desk Items', status: 'Available', location: 'Office Supply Cabinet', notes: 'Office fasteners', isEquipment: false },\n    { barcode: 'OFF-006', productName: 'Printer Paper A4 Ream', productType: 'Printer Supplies', status: 'Available', location: 'Print Room', notes: 'Copy paper 500 sheets', isEquipment: false },\n    { barcode: 'OFF-007', productName: 'Ink Cartridges Set', productType: 'Printer Supplies', status: 'Available', location: 'Print Room', notes: 'Printer ink refills', isEquipment: false },\n\n    // 15. Pantry\n    { barcode: 'PAN-001', productName: 'Coffee & Tea Supplies', productType: 'Snacks', status: 'Available', location: 'Pantry', notes: 'Hot beverages', isEquipment: false },\n    { barcode: 'PAN-002', productName: 'Snack Box Assorted', productType: 'Snacks', status: 'Available', location: 'Pantry', notes: 'Mixed snacks', isEquipment: false },\n    { barcode: 'PAN-003', productName: 'Disposable Cups Pack', productType: 'Disposable Items', status: 'Available', location: 'Pantry', notes: 'Paper cups 100 count', isEquipment: false },\n    { barcode: 'PAN-004', productName: 'Disposable Plates & Utensils', productType: 'Disposable Items', status: 'Available', location: 'Pantry', notes: 'Disposable dinnerware', isEquipment: false },\n\n    // 16. Transportation\n    { barcode: 'TRANS-001', productName: 'Company Van', productType: 'Vehicles', status: 'Available', location: 'Parking Lot', notes: 'Equipment transport van', isEquipment: false },\n    { barcode: 'TRANS-002', productName: 'Delivery Dolly', productType: 'Delivery Equipment', status: 'Available', location: 'Loading Dock', notes: 'Hand truck for transport', isEquipment: false },\n    { barcode: 'TRANS-003', productName: 'Equipment Cart', productType: 'Delivery Equipment', status: 'Available', location: 'Storage', notes: 'Rolling equipment cart', isEquipment: false },\n    { barcode: 'TRANS-004', productName: 'Travel Case Set', productType: 'Travel Accessories', status: 'Available', location: 'Storage Room', notes: 'Protective travel cases', isEquipment: false },\n\n    // 17. Furniture\n    { barcode: 'FURN-001', productName: 'Office Chair Ergonomic', productType: 'Chairs', status: 'Available', location: 'Office', notes: 'Adjustable office chair', isEquipment: false },\n    { barcode: 'FURN-002', productName: 'Director Chair Set', productType: 'Chairs', status: 'Available', location: 'Studio', notes: 'Folding director chairs', isEquipment: false },\n    { barcode: 'FURN-003', productName: 'Conference Table', productType: 'Tables', status: 'Available', location: 'Meeting Room', notes: 'Large meeting table', isEquipment: false },\n    { barcode: 'FURN-004', productName: 'Production Desk', productType: 'Tables', status: 'Available', location: 'Studio', notes: 'Work desk', isEquipment: false },\n    { barcode: 'FURN-005', productName: 'Storage Cabinet Metal', productType: 'Storage Units', status: 'Available', location: 'Equipment Room', notes: 'Lockable storage cabinet', isEquipment: false },\n    { barcode: 'FURN-006', productName: 'Shelving Unit', productType: 'Storage Units', status: 'Available', location: 'Storage Room', notes: '5-tier metal shelving', isEquipment: false },\n\n    // 18. Communication\n    { barcode: 'COMM-001', productName: 'Company SIM Card Set', productType: 'SIM Cards', status: 'Available', location: 'IT Office', notes: 'Mobile data SIM cards', isEquipment: false },\n    { barcode: 'COMM-002', productName: 'Portable WiFi Hotspot', productType: 'Internet Devices', status: 'Available', location: 'Equipment Room', notes: 'Mobile internet device', isEquipment: false },\n    { barcode: 'COMM-003', productName: 'Spare Mobile Phone', productType: 'Mobile Devices', status: 'Available', location: 'IT Office', notes: 'Backup communication device', isEquipment: false },\n\n    // 19. Uniforms & Branding\n    { barcode: 'UNI-001', productName: 'Staff Uniform Shirt (S)', productType: 'Uniforms', status: 'Available', location: 'Uniform Storage', notes: 'Small size uniform', isEquipment: false },\n    { barcode: 'UNI-002', productName: 'Staff Uniform Shirt (M)', productType: 'Uniforms', status: 'Available', location: 'Uniform Storage', notes: 'Medium size uniform', isEquipment: false },\n    { barcode: 'UNI-003', productName: 'Staff Uniform Shirt (L)', productType: 'Uniforms', status: 'Available', location: 'Uniform Storage', notes: 'Large size uniform', isEquipment: false },\n    { barcode: 'UNI-004', productName: 'Staff Uniform Shirt (XL)', productType: 'Uniforms', status: 'Available', location: 'Uniform Storage', notes: 'Extra large uniform', isEquipment: false },\n    { barcode: 'BRAND-001', productName: 'Name Badges Set', productType: 'Badges', status: 'Available', location: 'HR Office', notes: 'Employee ID badges', isEquipment: false },\n    { barcode: 'BRAND-002', productName: 'Luggage Tags', productType: 'Tags', status: 'Available', location: 'Equipment Storage', notes: 'Equipment identification tags', isEquipment: false },\n    { barcode: 'BRAND-003', productName: 'Branded T-Shirts (Assorted)', productType: 'T-Shirts', status: 'Available', location: 'Marketing Storage', notes: 'Promotional t-shirts', isEquipment: false },\n    { barcode: 'BRAND-004', productName: 'Branded Tote Bags', productType: 'Tote Bags', status: 'Available', location: 'Marketing Storage', notes: 'Company logo tote bags', isEquipment: false },\n    { barcode: 'BRAND-005', productName: 'Uniform Storage Bags', productType: 'Uniform Bags', status: 'Available', location: 'Uniform Storage', notes: 'Individual uniform bags', isEquipment: false }\n  ];\n\n  for (const item of items) {\n    await storage.createItem(item);\n    console.log(`  âœ“ Created item: ${item.productName}`);\n  }\n\n  console.log('âœ… Database seeded successfully!');\n  console.log(`ðŸ“Š Total categories: ${equipmentCategories.length + assetCategories.length}`);\n  console.log(`ðŸ“Š Total items: ${items.length}`);\n}\n","path":null,"size_bytes":35090,"size_tokens":null},"client/src/components/ItemFormDialog.tsx":{"content":"\nimport { useState, useEffect } from \"react\";\nimport { useQuery } from \"@tanstack/react-query\";\nimport { Dialog, DialogContent, DialogHeader, DialogTitle, DialogFooter } from \"@/components/ui/dialog\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { CATEGORIES, EQUIPMENT_CATEGORIES, ITEM_STATUSES } from \"@shared/schema\";\nimport { api } from \"@/lib/api\";\nimport { Plus } from \"lucide-react\";\nimport { useTranslation } from \"@/lib/translations\";\nimport type { Language } from \"@/lib/translations\";\n\ninterface ItemFormDialogProps {\n  open: boolean;\n  onClose: () => void;\n  onSubmit: (item: any) => void;\n  item?: {\n    id?: string;\n    barcode: string;\n    productName: string;\n    productType: string;\n    status: string;\n    location?: string;\n    notes?: string;\n    isEquipment?: boolean;\n  };\n  mode: 'add' | 'edit';\n  userRole?: string;\n  isEquipment?: boolean;\n  language?: Language;\n}\n\nexport default function ItemFormDialog({ open, onClose, onSubmit, item, mode, userRole, isEquipment = true, language = 'en' }: ItemFormDialogProps) {\n  const t = useTranslation(language);\n  const [formData, setFormData] = useState({\n    barcode: item?.barcode || '',\n    productName: item?.productName || '',\n    productType: item?.productType || '',\n    status: item?.status || 'Available',\n    location: item?.location || '',\n    notes: item?.notes || '',\n    isEquipment: item?.isEquipment !== undefined ? item.isEquipment : isEquipment\n  });\n\n  const [showAddType, setShowAddType] = useState(false);\n  const [newTypeName, setNewTypeName] = useState('');\n\n  // Fetch categories based on item type to get custom subTypes\n  const { data: categories = [] } = useQuery({\n    queryKey: ['/api/categories', isEquipment],\n    queryFn: () => api.categories.getAll(isEquipment),\n    enabled: open\n  });\n\n  // Get all subTypes ONLY from the API-returned categories (which are already filtered by isEquipment)\n  // This ensures complete separation between Equipment and Assets\n  const allSubTypes = categories\n    .flatMap(cat => cat.subTypes);\n  \n  const uniqueSubTypes = Array.from(new Set(allSubTypes)).sort();\n  \n  console.log(`âœ… ItemFormDialog (isEquipment=${isEquipment}):`, {\n    categoriesCount: categories.length,\n    subTypesCount: uniqueSubTypes.length,\n    subTypes: uniqueSubTypes\n  });\n\n  useEffect(() => {\n    if (item) {\n      setFormData({\n        barcode: item.barcode,\n        productName: item.productName,\n        productType: item.productType,\n        status: item.status,\n        location: item.location || '',\n        notes: item.notes || '',\n        isEquipment: item.isEquipment !== undefined ? item.isEquipment : isEquipment\n      });\n    } else {\n      setFormData({\n        barcode: '',\n        productName: '',\n        productType: '',\n        status: 'Available',\n        location: '',\n        notes: '',\n        isEquipment: isEquipment\n      });\n    }\n  }, [item, open, isEquipment]);\n\n  const handleSubmit = (e: React.FormEvent) => {\n    e.preventDefault();\n    onSubmit(formData);\n  };\n\n  const handleAddNewType = () => {\n    if (newTypeName.trim()) {\n      setFormData({ ...formData, productType: newTypeName.trim() });\n      setNewTypeName('');\n      setShowAddType(false);\n    }\n  };\n\n  return (\n    <Dialog open={open} onOpenChange={onClose}>\n      <DialogContent className=\"max-w-2xl\" data-testid={`dialog-${mode}-item`}>\n        <DialogHeader>\n          <DialogTitle>{mode === 'add' ? t('addItem') : t('editItem')}</DialogTitle>\n        </DialogHeader>\n        <form onSubmit={handleSubmit} className=\"space-y-4\">\n          <div className=\"grid grid-cols-2 gap-4\">\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"barcode\">{t('barcode')} *</Label>\n              <Input\n                id=\"barcode\"\n                value={formData.barcode}\n                onChange={(e) => setFormData({ ...formData, barcode: e.target.value })}\n                placeholder=\"e.g., CAM-001-2024\"\n                required\n                data-testid=\"input-barcode\"\n              />\n            </div>\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"productName\">{t('productName')} *</Label>\n              <Input\n                id=\"productName\"\n                value={formData.productName}\n                onChange={(e) => setFormData({ ...formData, productName: e.target.value })}\n                placeholder=\"e.g., Canon EOS R5\"\n                required\n                data-testid=\"input-product-name\"\n              />\n            </div>\n          </div>\n\n          <div className=\"grid grid-cols-2 gap-4\">\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"productType\">{t('type')} *</Label>\n              {mode === 'edit' ? (\n                <div className=\"bg-muted p-2 rounded text-sm text-muted-foreground\">\n                  {formData.productType}\n                </div>\n              ) : !showAddType ? (\n                <div className=\"space-y-2\">\n                  <Select\n                    value={formData.productType}\n                    onValueChange={(value) => {\n                      if (value === '__add_new__') {\n                        setShowAddType(true);\n                      } else {\n                        setFormData({ ...formData, productType: value });\n                      }\n                    }}\n                  >\n                    <SelectTrigger data-testid=\"select-product-type\">\n                      <SelectValue placeholder=\"Select type\" />\n                    </SelectTrigger>\n                    <SelectContent>\n                      {uniqueSubTypes.map((type) => (\n                        <SelectItem key={type} value={type}>\n                          {type}\n                        </SelectItem>\n                      ))}\n                      {userRole === 'admin' && (\n                        <SelectItem value=\"__add_new__\" className=\"text-blue-600 font-medium\">\n                          <div className=\"flex items-center\">\n                            <Plus className=\"w-4 h-4 mr-2\" />\n                            Add New Type\n                          </div>\n                        </SelectItem>\n                      )}\n                    </SelectContent>\n                  </Select>\n                </div>\n              ) : (\n                <div className=\"flex gap-2\">\n                  <Input\n                    value={newTypeName}\n                    onChange={(e) => setNewTypeName(e.target.value)}\n                    placeholder=\"Enter new product type\"\n                    onKeyDown={(e) => {\n                      if (e.key === 'Enter') {\n                        e.preventDefault();\n                        handleAddNewType();\n                      }\n                    }}\n                    autoFocus\n                  />\n                  <Button\n                    type=\"button\"\n                    onClick={handleAddNewType}\n                    disabled={!newTypeName.trim()}\n                    size=\"sm\"\n                  >\n                    Add\n                  </Button>\n                  <Button\n                    type=\"button\"\n                    variant=\"outline\"\n                    onClick={() => {\n                      setShowAddType(false);\n                      setNewTypeName('');\n                    }}\n                    size=\"sm\"\n                  >\n                    Cancel\n                  </Button>\n                </div>\n              )}\n            </div>\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"status\">{t('status')} *</Label>\n              <Select\n                value={formData.status}\n                onValueChange={(value) => setFormData({ ...formData, status: value })}\n              >\n                <SelectTrigger data-testid=\"select-status\">\n                  <SelectValue placeholder=\"Select status\" />\n                </SelectTrigger>\n                <SelectContent>\n                  {ITEM_STATUSES.map((status) => (\n                    <SelectItem key={status} value={status}>\n                      {status}\n                    </SelectItem>\n                  ))}\n                </SelectContent>\n              </Select>\n            </div>\n          </div>\n\n          <div className=\"space-y-2\">\n            <Label htmlFor=\"location\">{t('location_label')}</Label>\n            <Input\n              id=\"location\"\n              value={formData.location}\n              onChange={(e) => setFormData({ ...formData, location: e.target.value })}\n              placeholder=\"e.g., Studio A - Shelf 2\"\n              data-testid=\"input-location\"\n            />\n          </div>\n\n          <div className=\"space-y-2\">\n            <Label htmlFor=\"notes\">{t('notes')}</Label>\n            <Textarea\n              id=\"notes\"\n              value={formData.notes}\n              onChange={(e) => setFormData({ ...formData, notes: e.target.value })}\n              placeholder=\"Additional notes about the item\"\n              rows={3}\n              data-testid=\"textarea-notes\"\n            />\n          </div>\n\n          <DialogFooter>\n            <Button type=\"button\" variant=\"outline\" onClick={onClose} data-testid=\"button-cancel\">\n              {t('cancel')}\n            </Button>\n            <Button \n              type=\"submit\" \n              className=\"bg-gradient-to-r from-[#667eea] to-[#764ba2]\"\n              data-testid=\"button-submit\"\n              disabled={!formData.barcode || !formData.productName || !formData.productType || !formData.status}\n            >\n              {mode === 'add' ? t('save') : t('save')}\n            </Button>\n          </DialogFooter>\n        </form>\n      </DialogContent>\n    </Dialog>\n  );\n}\n","path":null,"size_bytes":9898,"size_tokens":null},"client/src/pages/not-found.tsx":{"content":"import { Card, CardContent } from \"@/components/ui/card\";\nimport { AlertCircle } from \"lucide-react\";\n\nexport default function NotFound() {\n  return (\n    <div className=\"min-h-screen w-full flex items-center justify-center bg-gray-50\">\n      <Card className=\"w-full max-w-md mx-4\">\n        <CardContent className=\"pt-6\">\n          <div className=\"flex mb-4 gap-2\">\n            <AlertCircle className=\"h-8 w-8 text-red-500\" />\n            <h1 className=\"text-2xl font-bold text-gray-900\">404 Page Not Found</h1>\n          </div>\n\n          <p className=\"mt-4 text-sm text-gray-600\">\n            Did you forget to add the page to the router?\n          </p>\n        </CardContent>\n      </Card>\n    </div>\n  );\n}\n","path":null,"size_bytes":711,"size_tokens":null},"server/email.ts":{"content":"\nimport nodemailer from 'nodemailer';\nimport type { Transporter } from 'nodemailer';\n\ninterface EmailConfig {\n  host: string;\n  port: number;\n  secure: boolean;\n  auth: {\n    user: string;\n    pass: string;\n  };\n}\n\nlet transporter: Transporter | null = null;\n\nfunction getTransporter(): Transporter | null {\n  const emailHost = process.env.EMAIL_HOST;\n  const emailPort = process.env.EMAIL_PORT;\n  const emailUser = process.env.EMAIL_USER;\n  const emailPass = process.env.EMAIL_PASS;\n\n  if (!emailHost || !emailUser || !emailPass) {\n    console.warn('âš ï¸  Email not configured. Set EMAIL_HOST, EMAIL_PORT, EMAIL_USER, EMAIL_PASS environment variables.');\n    return null;\n  }\n\n  if (!transporter) {\n    transporter = nodemailer.createTransport({\n      host: emailHost,\n      port: parseInt(emailPort || '587'),\n      secure: emailPort === '465',\n      auth: {\n        user: emailUser,\n        pass: emailPass,\n      },\n    });\n  }\n\n  return transporter;\n}\n\nexport interface ReservationEmailData {\n  itemName: string;\n  userName: string;\n  userEmail: string;\n  startDate: string;\n  returnDate: string;\n  notes?: string;\n}\n\nexport async function sendReservationRequestEmail(\n  adminEmail: string,\n  data: ReservationEmailData\n): Promise<boolean> {\n  const transport = getTransporter();\n  if (!transport) return false;\n\n  try {\n    const mailOptions = {\n      from: process.env.EMAIL_USER,\n      to: adminEmail,\n      subject: 'New Reservation Request - Inventory Management System',\n      html: `\n        <div style=\"font-family: Arial, sans-serif; max-width: 600px; margin: 0 auto;\">\n          <h2 style=\"color: #667eea;\">New Reservation Request</h2>\n          <div style=\"background: #f9fafb; padding: 20px; border-radius: 8px; margin: 20px 0;\">\n            <p style=\"margin: 10px 0;\"><strong>Item:</strong> ${data.itemName}</p>\n            <p style=\"margin: 10px 0;\"><strong>User:</strong> ${data.userName}</p>\n            <p style=\"margin: 10px 0;\"><strong>Dates:</strong> ${data.startDate} to ${data.returnDate}</p>\n            ${data.notes ? `<p style=\"margin: 10px 0;\"><strong>Notes:</strong> ${data.notes}</p>` : ''}\n          </div>\n          <p>Please log in to the inventory system to review this request.</p>\n          <a href=\"${process.env.APP_URL || 'http://localhost:5000'}\" \n             style=\"display: inline-block; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); \n                    color: white; padding: 12px 24px; text-decoration: none; border-radius: 6px; margin-top: 10px;\">\n            Review Request\n          </a>\n        </div>\n      `,\n    };\n\n    await transport.sendMail(mailOptions);\n    console.log(`âœ… Reservation request email sent to ${adminEmail}`);\n    return true;\n  } catch (error) {\n    console.error('âŒ Failed to send reservation request email:', error);\n    return false;\n  }\n}\n\nexport async function sendReservationApprovedEmail(\n  userEmail: string,\n  data: ReservationEmailData\n): Promise<boolean> {\n  const transport = getTransporter();\n  if (!transport) return false;\n\n  try {\n    const mailOptions = {\n      from: process.env.EMAIL_USER,\n      to: userEmail,\n      subject: 'Reservation Approved - Inventory Management System',\n      html: `\n        <div style=\"font-family: Arial, sans-serif; max-width: 600px; margin: 0 auto;\">\n          <h2 style=\"color: #10b981;\">Reservation Approved! âœ…</h2>\n          <div style=\"background: #d1fae5; padding: 20px; border-radius: 8px; margin: 20px 0; border-left: 4px solid #10b981;\">\n            <p style=\"margin: 10px 0;\"><strong>Item:</strong> ${data.itemName}</p>\n            <p style=\"margin: 10px 0;\"><strong>Reserved Dates:</strong> ${data.startDate} to ${data.returnDate}</p>\n          </div>\n          <p>Your reservation request has been approved! You can pick up the item on the start date.</p>\n          <a href=\"${process.env.APP_URL || 'http://localhost:5000'}\" \n             style=\"display: inline-block; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); \n                    color: white; padding: 12px 24px; text-decoration: none; border-radius: 6px; margin-top: 10px;\">\n            View Reservation\n          </a>\n        </div>\n      `,\n    };\n\n    await transport.sendMail(mailOptions);\n    console.log(`âœ… Approval email sent to ${userEmail}`);\n    return true;\n  } catch (error) {\n    console.error('âŒ Failed to send approval email:', error);\n    return false;\n  }\n}\n\nexport async function sendReservationRejectedEmail(\n  userEmail: string,\n  data: ReservationEmailData & { rejectionReason?: string }\n): Promise<boolean> {\n  const transport = getTransporter();\n  if (!transport) return false;\n\n  try {\n    const mailOptions = {\n      from: process.env.EMAIL_USER,\n      to: userEmail,\n      subject: 'Reservation Declined - Inventory Management System',\n      html: `\n        <div style=\"font-family: Arial, sans-serif; max-width: 600px; margin: 0 auto;\">\n          <h2 style=\"color: #ef4444;\">Reservation Declined</h2>\n          <div style=\"background: #fee2e2; padding: 20px; border-radius: 8px; margin: 20px 0; border-left: 4px solid #ef4444;\">\n            <p style=\"margin: 10px 0;\"><strong>Item:</strong> ${data.itemName}</p>\n            <p style=\"margin: 10px 0;\"><strong>Requested Dates:</strong> ${data.startDate} to ${data.returnDate}</p>\n            ${data.rejectionReason ? `<p style=\"margin: 10px 0;\"><strong>Reason:</strong> ${data.rejectionReason}</p>` : ''}\n          </div>\n          <p>Unfortunately, your reservation request has been declined. Please contact the administrator for more information or submit a new request for different dates.</p>\n          <a href=\"${process.env.APP_URL || 'http://localhost:5000'}\" \n             style=\"display: inline-block; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); \n                    color: white; padding: 12px 24px; text-decoration: none; border-radius: 6px; margin-top: 10px;\">\n            Make New Request\n          </a>\n        </div>\n      `,\n    };\n\n    await transport.sendMail(mailOptions);\n    console.log(`âœ… Rejection email sent to ${userEmail}`);\n    return true;\n  } catch (error) {\n    console.error('âŒ Failed to send rejection email:', error);\n    return false;\n  }\n}\n","path":null,"size_bytes":6216,"size_tokens":null},"client/src/main.tsx":{"content":"import { createRoot } from \"react-dom/client\";\nimport App from \"./App\";\nimport \"./index.css\";\n\ncreateRoot(document.getElementById(\"root\")!).render(<App />);\n","path":null,"size_bytes":157,"size_tokens":null},"client/src/components/ui/hover-card.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as HoverCardPrimitive from \"@radix-ui/react-hover-card\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst HoverCard = HoverCardPrimitive.Root\n\nconst HoverCardTrigger = HoverCardPrimitive.Trigger\n\nconst HoverCardContent = React.forwardRef<\n  React.ElementRef<typeof HoverCardPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof HoverCardPrimitive.Content>\n>(({ className, align = \"center\", sideOffset = 4, ...props }, ref) => (\n  <HoverCardPrimitive.Content\n    ref={ref}\n    align={align}\n    sideOffset={sideOffset}\n    className={cn(\n      \"z-50 w-64 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-hover-card-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nHoverCardContent.displayName = HoverCardPrimitive.Content.displayName\n\nexport { HoverCard, HoverCardTrigger, HoverCardContent }\n","path":null,"size_bytes":1251,"size_tokens":null},"attached_assets/NotificationBell_1763670896225.tsx":{"content":"\nimport { useState, useEffect } from \"react\";\nimport { useQuery, useMutation } from \"@tanstack/react-query\";\nimport { queryClient } from \"@/lib/queryClient\";\nimport { Button } from \"@/components/ui/button\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Popover, PopoverContent, PopoverTrigger } from \"@/components/ui/popover\";\nimport { ScrollArea } from \"@/components/ui/scroll-area\";\nimport { Bell, Check, Trash2, CheckCheck } from \"lucide-react\";\nimport { api, type Notification } from \"@/lib/api\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { format } from \"date-fns\";\n\nexport default function NotificationBell() {\n  const { toast } = useToast();\n  const [open, setOpen] = useState(false);\n\n  const { data: notifications = [] } = useQuery({\n    queryKey: ['/api/notifications'],\n    queryFn: () => api.notifications.getAll(),\n    refetchInterval: 10000, // Poll every 10 seconds\n  });\n\n  const unreadCount = notifications.filter(n => n.isRead === 'false' || n.isRead === false).length;\n\n  const markAsReadMutation = useMutation({\n    mutationFn: (id: string) => api.notifications.markAsRead(id),\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['/api/notifications'] });\n    },\n  });\n\n  const markAllAsReadMutation = useMutation({\n    mutationFn: () => api.notifications.markAllAsRead(),\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['/api/notifications'] });\n      toast({ title: \"All notifications marked as read\" });\n    },\n  });\n\n  const deleteNotificationMutation = useMutation({\n    mutationFn: (id: string) => api.notifications.delete(id),\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['/api/notifications'] });\n      toast({ title: \"Notification deleted\" });\n    },\n  });\n\n  const getNotificationIcon = (type: string) => {\n    switch (type) {\n      case 'reservation_approved':\n        return 'âœ…';\n      case 'reservation_rejected':\n        return 'âŒ';\n      case 'reservation_request':\n        return 'ðŸ“‹';\n      case 'item_damaged':\n        return 'âš ï¸';\n      default:\n        return 'ðŸ””';\n    }\n  };\n\n  return (\n    <Popover open={open} onOpenChange={setOpen}>\n      <PopoverTrigger asChild>\n        <Button variant=\"ghost\" size=\"icon\" className=\"relative\">\n          <Bell className={`h-5 w-5 ${unreadCount > 0 ? 'animate-pulse text-red-500' : ''}`} />\n          {unreadCount > 0 && (\n            <Badge className=\"absolute -top-1 -right-1 h-5 w-5 flex items-center justify-center p-0 bg-red-500 text-white text-xs\">\n              {unreadCount > 9 ? '9+' : unreadCount}\n            </Badge>\n          )}\n        </Button>\n      </PopoverTrigger>\n      <PopoverContent className=\"w-80 p-0\" align=\"end\">\n        <div className=\"flex items-center justify-between p-4 border-b\">\n          <h3 className=\"font-semibold\">Notifications</h3>\n          {unreadCount > 0 && (\n            <Button\n              variant=\"ghost\"\n              size=\"sm\"\n              onClick={() => markAllAsReadMutation.mutate()}\n              className=\"text-xs\"\n            >\n              <CheckCheck className=\"w-4 h-4 mr-1\" />\n              Mark all read\n            </Button>\n          )}\n        </div>\n        <ScrollArea className=\"h-96\">\n          {notifications.length === 0 ? (\n            <div className=\"p-8 text-center text-muted-foreground\">\n              <Bell className=\"w-12 h-12 mx-auto mb-2 opacity-50\" />\n              <p>No notifications</p>\n            </div>\n          ) : (\n            <div className=\"divide-y\">\n              {notifications.map((notification) => (\n                <div\n                  key={notification.id}\n                  className={`p-4 hover:bg-muted/50 transition-colors ${\n                    notification.isRead === 'false' || notification.isRead === false ? 'bg-blue-50' : ''\n                  }`}\n                >\n                  <div className=\"flex items-start gap-3\">\n                    <span className=\"text-2xl\">{getNotificationIcon(notification.type)}</span>\n                    <div className=\"flex-1 min-w-0\">\n                      <p className=\"font-semibold text-sm\">{notification.title}</p>\n                      <p className=\"text-sm text-muted-foreground mt-1\">\n                        {notification.message}\n                      </p>\n                      <p className=\"text-xs text-muted-foreground mt-2\">\n                        {format(new Date(notification.createdAt), 'PPp')}\n                      </p>\n                    </div>\n                    <div className=\"flex gap-1\">\n                      {(notification.isRead === 'false' || notification.isRead === false) && (\n                        <Button\n                          variant=\"ghost\"\n                          size=\"icon\"\n                          className=\"h-8 w-8\"\n                          onClick={() => markAsReadMutation.mutate(notification.id)}\n                        >\n                          <Check className=\"h-4 w-4\" />\n                        </Button>\n                      )}\n                      <Button\n                        variant=\"ghost\"\n                        size=\"icon\"\n                        className=\"h-8 w-8\"\n                        onClick={() => deleteNotificationMutation.mutate(notification.id)}\n                      >\n                        <Trash2 className=\"h-4 w-4\" />\n                      </Button>\n                    </div>\n                  </div>\n                </div>\n              ))}\n            </div>\n          )}\n        </ScrollArea>\n      </PopoverContent>\n    </Popover>\n  );\n}\n","path":null,"size_bytes":5576,"size_tokens":null},"attached_assets/form_1763670995695.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as LabelPrimitive from \"@radix-ui/react-label\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport {\n  Controller,\n  FormProvider,\n  useFormContext,\n  type ControllerProps,\n  type FieldPath,\n  type FieldValues,\n} from \"react-hook-form\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Label } from \"@/components/ui/label\"\n\nconst Form = FormProvider\n\ntype FormFieldContextValue<\n  TFieldValues extends FieldValues = FieldValues,\n  TName extends FieldPath<TFieldValues> = FieldPath<TFieldValues>\n> = {\n  name: TName\n}\n\nconst FormFieldContext = React.createContext<FormFieldContextValue>(\n  {} as FormFieldContextValue\n)\n\nconst FormField = <\n  TFieldValues extends FieldValues = FieldValues,\n  TName extends FieldPath<TFieldValues> = FieldPath<TFieldValues>\n>({\n  ...props\n}: ControllerProps<TFieldValues, TName>) => {\n  return (\n    <FormFieldContext.Provider value={{ name: props.name }}>\n      <Controller {...props} />\n    </FormFieldContext.Provider>\n  )\n}\n\nconst useFormField = () => {\n  const fieldContext = React.useContext(FormFieldContext)\n  const itemContext = React.useContext(FormItemContext)\n  const { getFieldState, formState } = useFormContext()\n\n  const fieldState = getFieldState(fieldContext.name, formState)\n\n  if (!fieldContext) {\n    throw new Error(\"useFormField should be used within <FormField>\")\n  }\n\n  const { id } = itemContext\n\n  return {\n    id,\n    name: fieldContext.name,\n    formItemId: `${id}-form-item`,\n    formDescriptionId: `${id}-form-item-description`,\n    formMessageId: `${id}-form-item-message`,\n    ...fieldState,\n  }\n}\n\ntype FormItemContextValue = {\n  id: string\n}\n\nconst FormItemContext = React.createContext<FormItemContextValue>(\n  {} as FormItemContextValue\n)\n\nconst FormItem = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => {\n  const id = React.useId()\n\n  return (\n    <FormItemContext.Provider value={{ id }}>\n      <div ref={ref} className={cn(\"space-y-2\", className)} {...props} />\n    </FormItemContext.Provider>\n  )\n})\nFormItem.displayName = \"FormItem\"\n\nconst FormLabel = React.forwardRef<\n  React.ElementRef<typeof LabelPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof LabelPrimitive.Root>\n>(({ className, ...props }, ref) => {\n  const { error, formItemId } = useFormField()\n\n  return (\n    <Label\n      ref={ref}\n      className={cn(error && \"text-destructive\", className)}\n      htmlFor={formItemId}\n      {...props}\n    />\n  )\n})\nFormLabel.displayName = \"FormLabel\"\n\nconst FormControl = React.forwardRef<\n  React.ElementRef<typeof Slot>,\n  React.ComponentPropsWithoutRef<typeof Slot>\n>(({ ...props }, ref) => {\n  const { error, formItemId, formDescriptionId, formMessageId } = useFormField()\n\n  return (\n    <Slot\n      ref={ref}\n      id={formItemId}\n      aria-describedby={\n        !error\n          ? `${formDescriptionId}`\n          : `${formDescriptionId} ${formMessageId}`\n      }\n      aria-invalid={!!error}\n      {...props}\n    />\n  )\n})\nFormControl.displayName = \"FormControl\"\n\nconst FormDescription = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, ...props }, ref) => {\n  const { formDescriptionId } = useFormField()\n\n  return (\n    <p\n      ref={ref}\n      id={formDescriptionId}\n      className={cn(\"text-sm text-muted-foreground\", className)}\n      {...props}\n    />\n  )\n})\nFormDescription.displayName = \"FormDescription\"\n\nconst FormMessage = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, children, ...props }, ref) => {\n  const { error, formMessageId } = useFormField()\n  const body = error ? String(error?.message ?? \"\") : children\n\n  if (!body) {\n    return null\n  }\n\n  return (\n    <p\n      ref={ref}\n      id={formMessageId}\n      className={cn(\"text-sm font-medium text-destructive\", className)}\n      {...props}\n    >\n      {body}\n    </p>\n  )\n})\nFormMessage.displayName = \"FormMessage\"\n\nexport {\n  useFormField,\n  Form,\n  FormItem,\n  FormLabel,\n  FormControl,\n  FormDescription,\n  FormMessage,\n  FormField,\n}\n","path":null,"size_bytes":4120,"size_tokens":null},"attached_assets/hover-card_1763670995695.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as HoverCardPrimitive from \"@radix-ui/react-hover-card\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst HoverCard = HoverCardPrimitive.Root\n\nconst HoverCardTrigger = HoverCardPrimitive.Trigger\n\nconst HoverCardContent = React.forwardRef<\n  React.ElementRef<typeof HoverCardPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof HoverCardPrimitive.Content>\n>(({ className, align = \"center\", sideOffset = 4, ...props }, ref) => (\n  <HoverCardPrimitive.Content\n    ref={ref}\n    align={align}\n    sideOffset={sideOffset}\n    className={cn(\n      \"z-50 w-64 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-hover-card-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nHoverCardContent.displayName = HoverCardPrimitive.Content.displayName\n\nexport { HoverCard, HoverCardTrigger, HoverCardContent }\n","path":null,"size_bytes":1251,"size_tokens":null},"attached_assets/queryClient_1763670820748.ts":{"content":"import { QueryClient, QueryFunction } from \"@tanstack/react-query\";\n\nasync function throwIfResNotOk(res: Response) {\n  if (!res.ok) {\n    const text = (await res.text()) || res.statusText;\n    throw new Error(`${res.status}: ${text}`);\n  }\n}\n\nexport async function apiRequest(\n  method: string,\n  url: string,\n  data?: unknown | undefined,\n): Promise<Response> {\n  const res = await fetch(url, {\n    method,\n    headers: data ? { \"Content-Type\": \"application/json\" } : {},\n    body: data ? JSON.stringify(data) : undefined,\n    credentials: \"include\",\n  });\n\n  await throwIfResNotOk(res);\n  return res;\n}\n\ntype UnauthorizedBehavior = \"returnNull\" | \"throw\";\nexport const getQueryFn: <T>(options: {\n  on401: UnauthorizedBehavior;\n}) => QueryFunction<T> =\n  ({ on401: unauthorizedBehavior }) =>\n  async ({ queryKey }) => {\n    const res = await fetch(queryKey.join(\"/\") as string, {\n      credentials: \"include\",\n    });\n\n    if (unauthorizedBehavior === \"returnNull\" && res.status === 401) {\n      return null;\n    }\n\n    await throwIfResNotOk(res);\n    return await res.json();\n  };\n\nexport const queryClient = new QueryClient({\n  defaultOptions: {\n    queries: {\n      queryFn: getQueryFn({ on401: \"throw\" }),\n      refetchInterval: false,\n      refetchOnWindowFocus: false,\n      staleTime: Infinity,\n      retry: false,\n    },\n    mutations: {\n      retry: false,\n    },\n  },\n});\n","path":null,"size_bytes":1383,"size_tokens":null},"attached_assets/label_1763670995697.tsx":{"content":"import * as React from \"react\"\nimport * as LabelPrimitive from \"@radix-ui/react-label\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst labelVariants = cva(\n  \"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70\"\n)\n\nconst Label = React.forwardRef<\n  React.ElementRef<typeof LabelPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof LabelPrimitive.Root> &\n    VariantProps<typeof labelVariants>\n>(({ className, ...props }, ref) => (\n  <LabelPrimitive.Root\n    ref={ref}\n    className={cn(labelVariants(), className)}\n    {...props}\n  />\n))\nLabel.displayName = LabelPrimitive.Root.displayName\n\nexport { Label }\n","path":null,"size_bytes":710,"size_tokens":null},"client/src/components/ui/switch.tsx":{"content":"import * as React from \"react\"\nimport * as SwitchPrimitives from \"@radix-ui/react-switch\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Switch = React.forwardRef<\n  React.ElementRef<typeof SwitchPrimitives.Root>,\n  React.ComponentPropsWithoutRef<typeof SwitchPrimitives.Root>\n>(({ className, ...props }, ref) => (\n  <SwitchPrimitives.Root\n    className={cn(\n      \"peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input\",\n      className\n    )}\n    {...props}\n    ref={ref}\n  >\n    <SwitchPrimitives.Thumb\n      className={cn(\n        \"pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0\"\n      )}\n    />\n  </SwitchPrimitives.Root>\n))\nSwitch.displayName = SwitchPrimitives.Root.displayName\n\nexport { Switch }\n","path":null,"size_bytes":1139,"size_tokens":null},"server/index.ts":{"content":"import express, { type Request, Response, NextFunction } from \"express\";\nimport session from \"express-session\";\nimport PostgresqlStore from \"connect-pg-simple\";\nimport { pool } from \"./db\";\nimport { registerRoutes } from \"./routes\";\nimport { setupVite, serveStatic, log } from \"./vite\";\nimport { seedDatabase } from \"./seed\";\n\nconst app = express();\nconst PostgresStore = PostgresqlStore(session);\n\ndeclare module 'express-session' {\n  interface SessionData {\n    userId: string;\n    username: string;\n    role: string;\n    name: string;\n    department?: string;\n  }\n}\n\ndeclare module 'http' {\n  interface IncomingMessage {\n    rawBody: unknown\n  }\n}\napp.use(express.json({\n  verify: (req, _res, buf) => {\n    req.rawBody = buf;\n  }\n}));\napp.use(express.urlencoded({ extended: false }));\n\nconst isProduction = process.env.NODE_ENV === 'production';\n\napp.use(\n  session({\n    store: new PostgresStore({\n      pool,\n      tableName: 'session',\n      createTableIfMissing: true,\n      ttl: 24 * 60 * 60 * 7 // 7 days in seconds\n    }),\n    secret: process.env.SESSION_SECRET || 'inventory-management-secret-key',\n    resave: false,\n    saveUninitialized: false,\n    name: 'sessionId',\n    proxy: isProduction, // Trust proxy on production (Render uses proxy)\n    cookie: {\n      maxAge: 1000 * 60 * 60 * 24 * 7,\n      httpOnly: true,\n      secure: isProduction,\n      sameSite: 'lax', // Use lax for cross-site cookie compatibility\n      domain: isProduction ? undefined : undefined // Don't restrict domain\n    }\n  })\n);\n\napp.use((req, res, next) => {\n  const start = Date.now();\n  const path = req.path;\n  let capturedJsonResponse: Record<string, any> | undefined = undefined;\n\n  const originalResJson = res.json;\n  res.json = function (bodyJson, ...args) {\n    capturedJsonResponse = bodyJson;\n    return originalResJson.apply(res, [bodyJson, ...args]);\n  };\n\n  res.on(\"finish\", () => {\n    const duration = Date.now() - start;\n    if (path.startsWith(\"/api\")) {\n      let logLine = `${req.method} ${path} ${res.statusCode} in ${duration}ms`;\n      if (capturedJsonResponse) {\n        logLine += ` :: ${JSON.stringify(capturedJsonResponse)}`;\n      }\n\n      if (logLine.length > 80) {\n        logLine = logLine.slice(0, 79) + \"â€¦\";\n      }\n\n      log(logLine);\n    }\n  });\n\n  next();\n});\n\n(async () => {\n  try {\n    await seedDatabase();\n  } catch (seedError) {\n    console.error('âš ï¸ Database seeding failed (will retry on next start):', seedError);\n  }\n  const server = await registerRoutes(app);\n\n  app.use((err: any, _req: Request, res: Response, _next: NextFunction) => {\n    const status = err.status || err.statusCode || 500;\n    const message = err.message || \"Internal Server Error\";\n\n    res.status(status).json({ message });\n    throw err;\n  });\n\n  // importantly only setup vite in development and after\n  // setting up all the other routes so the catch-all route\n  // doesn't interfere with the other routes\n  if (app.get(\"env\") === \"development\") {\n    await setupVite(app, server);\n  } else {\n    serveStatic(app);\n  }\n\n  // ALWAYS serve the app on the port specified in the environment variable PORT\n  // Other ports are firewalled. Default to 5000 if not specified.\n  // this serves both the API and the client.\n  // It is the only port that is not firewalled.\n  const port = parseInt(process.env.PORT || '5000', 10);\n  server.listen({\n    port,\n    host: \"0.0.0.0\",\n    reusePort: true,\n  }, () => {\n    log(`serving on port ${port}`);\n  });\n})();\n","path":null,"size_bytes":3470,"size_tokens":null},"attached_assets/avatar_1763670951625.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as AvatarPrimitive from \"@radix-ui/react-avatar\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Avatar = React.forwardRef<\n  React.ElementRef<typeof AvatarPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <AvatarPrimitive.Root\n    ref={ref}\n    className={cn(`\n      after:content-[''] after:block after:absolute after:inset-0 after:rounded-full after:pointer-events-none after:border after:border-black/10 dark:after:border-white/10\n      relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full`,\n      className\n    )}\n    {...props}\n  />\n))\nAvatar.displayName = AvatarPrimitive.Root.displayName\n\nconst AvatarImage = React.forwardRef<\n  React.ElementRef<typeof AvatarPrimitive.Image>,\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Image>\n>(({ className, ...props }, ref) => (\n  <AvatarPrimitive.Image\n    ref={ref}\n    className={cn(\"aspect-square h-full w-full\", className)}\n    {...props}\n  />\n))\nAvatarImage.displayName = AvatarPrimitive.Image.displayName\n\nconst AvatarFallback = React.forwardRef<\n  React.ElementRef<typeof AvatarPrimitive.Fallback>,\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Fallback>\n>(({ className, ...props }, ref) => (\n  <AvatarPrimitive.Fallback\n    ref={ref}\n    className={cn(\n      \"flex h-full w-full items-center justify-center rounded-full bg-muted\",\n      className\n    )}\n    {...props}\n  />\n))\nAvatarFallback.displayName = AvatarPrimitive.Fallback.displayName\n\nexport { Avatar, AvatarImage, AvatarFallback }\n","path":null,"size_bytes":1592,"size_tokens":null},"attached_assets/input-otp_1763670995697.tsx":{"content":"import * as React from \"react\"\nimport { OTPInput, OTPInputContext } from \"input-otp\"\nimport { Dot } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst InputOTP = React.forwardRef<\n  React.ElementRef<typeof OTPInput>,\n  React.ComponentPropsWithoutRef<typeof OTPInput>\n>(({ className, containerClassName, ...props }, ref) => (\n  <OTPInput\n    ref={ref}\n    containerClassName={cn(\n      \"flex items-center gap-2 has-[:disabled]:opacity-50\",\n      containerClassName\n    )}\n    className={cn(\"disabled:cursor-not-allowed\", className)}\n    {...props}\n  />\n))\nInputOTP.displayName = \"InputOTP\"\n\nconst InputOTPGroup = React.forwardRef<\n  React.ElementRef<\"div\">,\n  React.ComponentPropsWithoutRef<\"div\">\n>(({ className, ...props }, ref) => (\n  <div ref={ref} className={cn(\"flex items-center\", className)} {...props} />\n))\nInputOTPGroup.displayName = \"InputOTPGroup\"\n\nconst InputOTPSlot = React.forwardRef<\n  React.ElementRef<\"div\">,\n  React.ComponentPropsWithoutRef<\"div\"> & { index: number }\n>(({ index, className, ...props }, ref) => {\n  const inputOTPContext = React.useContext(OTPInputContext)\n  const { char, hasFakeCaret, isActive } = inputOTPContext.slots[index]\n\n  return (\n    <div\n      ref={ref}\n      className={cn(\n        \"relative flex h-10 w-10 items-center justify-center border-y border-r border-input text-sm transition-all first:rounded-l-md first:border-l last:rounded-r-md\",\n        isActive && \"z-10 ring-2 ring-ring ring-offset-background\",\n        className\n      )}\n      {...props}\n    >\n      {char}\n      {hasFakeCaret && (\n        <div className=\"pointer-events-none absolute inset-0 flex items-center justify-center\">\n          <div className=\"h-4 w-px animate-caret-blink bg-foreground duration-1000\" />\n        </div>\n      )}\n    </div>\n  )\n})\nInputOTPSlot.displayName = \"InputOTPSlot\"\n\nconst InputOTPSeparator = React.forwardRef<\n  React.ElementRef<\"div\">,\n  React.ComponentPropsWithoutRef<\"div\">\n>(({ ...props }, ref) => (\n  <div ref={ref} role=\"separator\" {...props}>\n    <Dot />\n  </div>\n))\nInputOTPSeparator.displayName = \"InputOTPSeparator\"\n\nexport { InputOTP, InputOTPGroup, InputOTPSlot, InputOTPSeparator }\n","path":null,"size_bytes":2154,"size_tokens":null},"client/src/components/ui/calendar.tsx":{"content":"import * as React from \"react\"\nimport { ChevronLeft, ChevronRight } from \"lucide-react\"\nimport { DayPicker } from \"react-day-picker\"\n\nimport { cn } from \"@/lib/utils\"\nimport { buttonVariants } from \"@/components/ui/button\"\n\nexport type CalendarProps = React.ComponentProps<typeof DayPicker>\n\nfunction Calendar({\n  className,\n  classNames,\n  showOutsideDays = true,\n  ...props\n}: CalendarProps) {\n  return (\n    <DayPicker\n      showOutsideDays={showOutsideDays}\n      className={cn(\"p-3\", className)}\n      classNames={{\n        months: \"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0\",\n        month: \"space-y-4\",\n        caption: \"flex justify-center pt-1 relative items-center\",\n        caption_label: \"text-sm font-medium\",\n        nav: \"space-x-1 flex items-center\",\n        nav_button: cn(\n          buttonVariants({ variant: \"outline\" }),\n          \"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100\"\n        ),\n        nav_button_previous: \"absolute left-1\",\n        nav_button_next: \"absolute right-1\",\n        table: \"w-full border-collapse space-y-1\",\n        head_row: \"flex\",\n        head_cell:\n          \"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]\",\n        row: \"flex w-full mt-2\",\n        cell: \"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20\",\n        day: cn(\n          buttonVariants({ variant: \"ghost\" }),\n          \"h-9 w-9 p-0 font-normal aria-selected:opacity-100\"\n        ),\n        day_range_end: \"day-range-end\",\n        day_selected:\n          \"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground\",\n        day_today: \"bg-accent text-accent-foreground\",\n        day_outside:\n          \"day-outside text-muted-foreground aria-selected:bg-accent/50 aria-selected:text-muted-foreground\",\n        day_disabled: \"text-muted-foreground opacity-50\",\n        day_range_middle:\n          \"aria-selected:bg-accent aria-selected:text-accent-foreground\",\n        day_hidden: \"invisible\",\n        ...classNames,\n      }}\n      components={{\n        IconLeft: ({ className, ...props }) => (\n          <ChevronLeft className={cn(\"h-4 w-4\", className)} {...props} />\n        ),\n        IconRight: ({ className, ...props }) => (\n          <ChevronRight className={cn(\"h-4 w-4\", className)} {...props} />\n        ),\n      }}\n      {...props}\n    />\n  )\n}\nCalendar.displayName = \"Calendar\"\n\nexport { Calendar }\n","path":null,"size_bytes":2695,"size_tokens":null},"client/src/components/ui/label.tsx":{"content":"import * as React from \"react\"\nimport * as LabelPrimitive from \"@radix-ui/react-label\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst labelVariants = cva(\n  \"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70\"\n)\n\nconst Label = React.forwardRef<\n  React.ElementRef<typeof LabelPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof LabelPrimitive.Root> &\n    VariantProps<typeof labelVariants>\n>(({ className, ...props }, ref) => (\n  <LabelPrimitive.Root\n    ref={ref}\n    className={cn(labelVariants(), className)}\n    {...props}\n  />\n))\nLabel.displayName = LabelPrimitive.Root.displayName\n\nexport { Label }\n","path":null,"size_bytes":710,"size_tokens":null},"attached_assets/resizable_1763671095564.tsx":{"content":"\"use client\"\n\nimport { GripVertical } from \"lucide-react\"\nimport * as ResizablePrimitive from \"react-resizable-panels\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ResizablePanelGroup = ({\n  className,\n  ...props\n}: React.ComponentProps<typeof ResizablePrimitive.PanelGroup>) => (\n  <ResizablePrimitive.PanelGroup\n    className={cn(\n      \"flex h-full w-full data-[panel-group-direction=vertical]:flex-col\",\n      className\n    )}\n    {...props}\n  />\n)\n\nconst ResizablePanel = ResizablePrimitive.Panel\n\nconst ResizableHandle = ({\n  withHandle,\n  className,\n  ...props\n}: React.ComponentProps<typeof ResizablePrimitive.PanelResizeHandle> & {\n  withHandle?: boolean\n}) => (\n  <ResizablePrimitive.PanelResizeHandle\n    className={cn(\n      \"relative flex w-px items-center justify-center bg-border after:absolute after:inset-y-0 after:left-1/2 after:w-1 after:-translate-x-1/2 focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring focus-visible:ring-offset-1 data-[panel-group-direction=vertical]:h-px data-[panel-group-direction=vertical]:w-full data-[panel-group-direction=vertical]:after:left-0 data-[panel-group-direction=vertical]:after:h-1 data-[panel-group-direction=vertical]:after:w-full data-[panel-group-direction=vertical]:after:-translate-y-1/2 data-[panel-group-direction=vertical]:after:translate-x-0 [&[data-panel-group-direction=vertical]>div]:rotate-90\",\n      className\n    )}\n    {...props}\n  >\n    {withHandle && (\n      <div className=\"z-10 flex h-4 w-3 items-center justify-center rounded-sm border bg-border\">\n        <GripVertical className=\"h-2.5 w-2.5\" />\n      </div>\n    )}\n  </ResizablePrimitive.PanelResizeHandle>\n)\n\nexport { ResizablePanelGroup, ResizablePanel, ResizableHandle }\n","path":null,"size_bytes":1723,"size_tokens":null},"client/src/components/CategorySettingsDialog.tsx":{"content":"import { useState, useEffect } from \"react\";\nimport { Dialog, DialogContent, DialogHeader, DialogTitle, DialogFooter } from \"@/components/ui/dialog\";\nimport { Button } from \"@/components/ui/button\";\nimport { Label } from \"@/components/ui/label\";\nimport { Checkbox } from \"@/components/ui/checkbox\";\n\ninterface CategorySettingsDialogProps {\n  open: boolean;\n  onClose: () => void;\n  onSave: (settings: { showQuantity: boolean; showLocation: boolean; showNotes: boolean }) => void;\n  category?: any;\n}\n\nexport default function CategorySettingsDialog({ open, onClose, onSave, category }: CategorySettingsDialogProps) {\n  const [settings, setSettings] = useState({\n    showQuantity: true,\n    showLocation: true,\n    showNotes: true\n  });\n\n  useEffect(() => {\n    if (category) {\n      setSettings({\n        showQuantity: category.showQuantity ?? true,\n        showLocation: category.showLocation ?? true,\n        showNotes: category.showNotes ?? true\n      });\n    }\n  }, [category, open]);\n\n  const handleSave = () => {\n    onSave(settings);\n    onClose();\n  };\n\n  return (\n    <Dialog open={open} onOpenChange={onClose}>\n      <DialogContent data-testid=\"dialog-category-settings\">\n        <DialogHeader>\n          <DialogTitle>Column Visibility Settings</DialogTitle>\n        </DialogHeader>\n        <div className=\"space-y-4\">\n          <p className=\"text-sm text-muted-foreground\">\n            Choose which columns to display for items in the <strong>{category?.name}</strong> category\n          </p>\n          <div className=\"space-y-3\">\n            <div className=\"flex items-center gap-3\">\n              <Checkbox\n                id=\"showQuantity\"\n                checked={settings.showQuantity}\n                onCheckedChange={(checked) =>\n                  setSettings({ ...settings, showQuantity: checked as boolean })\n                }\n                data-testid=\"checkbox-show-quantity\"\n              />\n              <Label htmlFor=\"showQuantity\" className=\"cursor-pointer\">\n                Show Quantity Column\n              </Label>\n            </div>\n            <div className=\"flex items-center gap-3\">\n              <Checkbox\n                id=\"showLocation\"\n                checked={settings.showLocation}\n                onCheckedChange={(checked) =>\n                  setSettings({ ...settings, showLocation: checked as boolean })\n                }\n                data-testid=\"checkbox-show-location\"\n              />\n              <Label htmlFor=\"showLocation\" className=\"cursor-pointer\">\n                Show Location Column\n              </Label>\n            </div>\n            <div className=\"flex items-center gap-3\">\n              <Checkbox\n                id=\"showNotes\"\n                checked={settings.showNotes}\n                onCheckedChange={(checked) =>\n                  setSettings({ ...settings, showNotes: checked as boolean })\n                }\n                data-testid=\"checkbox-show-notes\"\n              />\n              <Label htmlFor=\"showNotes\" className=\"cursor-pointer\">\n                Show Notes Column\n              </Label>\n            </div>\n          </div>\n        </div>\n        <DialogFooter>\n          <Button variant=\"outline\" onClick={onClose} data-testid=\"button-cancel-settings\">\n            Cancel\n          </Button>\n          <Button onClick={handleSave} data-testid=\"button-save-settings\">\n            Save Settings\n          </Button>\n        </DialogFooter>\n      </DialogContent>\n    </Dialog>\n  );\n}\n","path":null,"size_bytes":3476,"size_tokens":null},"client/src/components/DateRangeFilter.tsx":{"content":"import { useState } from \"react\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Card } from \"@/components/ui/card\";\nimport { Calendar, ChevronDown } from \"lucide-react\";\nimport {\n  DropdownMenu,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuLabel,\n  DropdownMenuSeparator,\n  DropdownMenuTrigger,\n} from \"@/components/ui/dropdown-menu\";\nimport {\n  Dialog,\n  DialogContent,\n  DialogHeader,\n  DialogTitle,\n  DialogFooter,\n} from \"@/components/ui/dialog\";\nimport { startOfWeek, endOfWeek, startOfMonth, endOfMonth, subDays, format, startOfToday } from \"date-fns\";\n\ninterface DateRange {\n  startDate: Date;\n  endDate: Date;\n  label: string;\n}\n\ninterface DateRangeFilterProps {\n  onDateRangeChange: (range: DateRange) => void;\n}\n\nexport default function DateRangeFilter({ onDateRangeChange }: DateRangeFilterProps) {\n  const [selectedRange, setSelectedRange] = useState<string>(\"all\");\n  const [customOpen, setCustomOpen] = useState(false);\n  const [customStart, setCustomStart] = useState(\"\");\n  const [customEnd, setCustomEnd] = useState(\"\");\n\n  const getDateRange = (range: string): DateRange | null => {\n    const today = startOfToday();\n    \n    switch (range) {\n      case \"this-week\": {\n        const start = startOfWeek(today);\n        const end = endOfWeek(today);\n        return { startDate: start, endDate: end, label: \"This Week\" };\n      }\n      case \"last-week\": {\n        const start = startOfWeek(subDays(today, 7));\n        const end = endOfWeek(subDays(today, 7));\n        return { startDate: start, endDate: end, label: \"Last Week\" };\n      }\n      case \"this-month\": {\n        const start = startOfMonth(today);\n        const end = endOfMonth(today);\n        return { startDate: start, endDate: end, label: \"This Month\" };\n      }\n      case \"last-month\": {\n        const lastMonth = subDays(today, 30);\n        const start = startOfMonth(lastMonth);\n        const end = endOfMonth(lastMonth);\n        return { startDate: start, endDate: end, label: \"Last Month\" };\n      }\n      default:\n        return null;\n    }\n  };\n\n  const handlePresetSelect = (range: string) => {\n    setSelectedRange(range);\n    const dateRange = getDateRange(range);\n    if (dateRange) {\n      onDateRangeChange(dateRange);\n    }\n  };\n\n  const handleCustomRangeSubmit = () => {\n    if (!customStart || !customEnd) {\n      return;\n    }\n    \n    const start = new Date(customStart);\n    const end = new Date(customEnd);\n    \n    if (start > end) {\n      return;\n    }\n    \n    setSelectedRange(\"custom\");\n    onDateRangeChange({\n      startDate: start,\n      endDate: end,\n      label: `${format(start, \"MMM dd, yyyy\")} - ${format(end, \"MMM dd, yyyy\")}`,\n    });\n    setCustomOpen(false);\n  };\n\n  const handleClearFilter = () => {\n    setSelectedRange(\"all\");\n    onDateRangeChange({\n      startDate: new Date(0),\n      endDate: new Date(Date.now() + 86400000),\n      label: \"All Time\",\n    });\n  };\n\n  const getDisplayLabel = () => {\n    if (selectedRange === \"all\") return \"All Time\";\n    if (selectedRange === \"custom\") return `${format(new Date(customStart), \"MMM dd\")} - ${format(new Date(customEnd), \"MMM dd\")}`;\n    const range = getDateRange(selectedRange);\n    return range?.label || \"All Time\";\n  };\n\n  return (\n    <div className=\"flex items-center gap-2\">\n      <DropdownMenu>\n        <DropdownMenuTrigger asChild>\n          <Button variant=\"outline\" className=\"gap-2\" data-testid=\"button-date-filter\">\n            <Calendar className=\"w-4 h-4\" />\n            {getDisplayLabel()}\n            <ChevronDown className=\"w-4 h-4\" />\n          </Button>\n        </DropdownMenuTrigger>\n        <DropdownMenuContent align=\"start\" className=\"w-56\">\n          <DropdownMenuLabel>Filter by Date</DropdownMenuLabel>\n          <DropdownMenuSeparator />\n          \n          <DropdownMenuItem onClick={() => handlePresetSelect(\"this-week\")} data-testid=\"menu-item-this-week\">\n            This Week\n          </DropdownMenuItem>\n          <DropdownMenuItem onClick={() => handlePresetSelect(\"last-week\")} data-testid=\"menu-item-last-week\">\n            Last Week\n          </DropdownMenuItem>\n          <DropdownMenuItem onClick={() => handlePresetSelect(\"this-month\")} data-testid=\"menu-item-this-month\">\n            This Month\n          </DropdownMenuItem>\n          <DropdownMenuItem onClick={() => handlePresetSelect(\"last-month\")} data-testid=\"menu-item-last-month\">\n            Last Month\n          </DropdownMenuItem>\n          \n          <DropdownMenuSeparator />\n          \n          <DropdownMenuItem onClick={() => setCustomOpen(true)} data-testid=\"menu-item-custom-range\">\n            Custom Range\n          </DropdownMenuItem>\n          \n          <DropdownMenuSeparator />\n          \n          <DropdownMenuItem onClick={handleClearFilter} data-testid=\"menu-item-all-time\">\n            All Time\n          </DropdownMenuItem>\n        </DropdownMenuContent>\n      </DropdownMenu>\n\n      {/* Custom Date Range Dialog */}\n      <Dialog open={customOpen} onOpenChange={setCustomOpen}>\n        <DialogContent data-testid=\"dialog-custom-date-range\">\n          <DialogHeader>\n            <DialogTitle>Select Custom Date Range</DialogTitle>\n          </DialogHeader>\n          <div className=\"space-y-4\">\n            <div>\n              <label className=\"text-sm font-medium\">Start Date</label>\n              <Input\n                type=\"date\"\n                value={customStart}\n                onChange={(e) => setCustomStart(e.target.value)}\n                data-testid=\"input-custom-start-date\"\n              />\n            </div>\n            <div>\n              <label className=\"text-sm font-medium\">End Date</label>\n              <Input\n                type=\"date\"\n                value={customEnd}\n                onChange={(e) => setCustomEnd(e.target.value)}\n                data-testid=\"input-custom-end-date\"\n              />\n            </div>\n          </div>\n          <DialogFooter>\n            <Button\n              variant=\"outline\"\n              onClick={() => setCustomOpen(false)}\n              data-testid=\"button-cancel-date-range\"\n            >\n              Cancel\n            </Button>\n            <Button\n              onClick={handleCustomRangeSubmit}\n              disabled={!customStart || !customEnd}\n              data-testid=\"button-apply-date-range\"\n            >\n              Apply\n            </Button>\n          </DialogFooter>\n        </DialogContent>\n      </Dialog>\n    </div>\n  );\n}\n","path":null,"size_bytes":6486,"size_tokens":null},"render.yaml":{"content":"services:\n  - type: web\n    name: inventory-system\n    runtime: node\n    buildCommand: npm install && npm run build && npm run db:push\n    startCommand: npm start\n    envVars:\n      - key: NODE_ENV\n        value: production\n      - key: PORT\n        value: 3000\n    autoDeploy: true\n","path":null,"size_bytes":283,"size_tokens":null},"RENDER_DEPLOYMENT.md":{"content":"# Render Deployment Guide\n\n## Step-by-Step Deployment\n\n### 1. **Prepare Your Project**\n```bash\n# Install dependencies locally\nnpm install\n\n# Build the project\nnpm run build\n\n# Verify build is successful\nls -la dist/\n```\n\n### 2. **Push to Git Repository**\n```bash\ngit init\ngit add .\ngit commit -m \"Initial commit\"\ngit remote add origin https://github.com/yourusername/inventory-system.git\ngit branch -M main\ngit push -u origin main\n```\n\n### 3. **Create Render Account & Database**\n1. Go to [render.com](https://render.com)\n2. Sign in with GitHub\n3. Click **New +** â†’ **PostgreSQL**\n4. Choose region (recommended: Singapore or EU)\n5. Create database\n6. Copy connection details\n\n### 4. **Deploy Application on Render**\n1. Go to Render Dashboard\n2. Click **New +** â†’ **Web Service**\n3. Select your GitHub repository\n4. Configure:\n   - **Name**: `inventory-system`\n   - **Environment**: `Node`\n   - **Build Command**: `npm install && npm run build && npm run db:push`\n   - **Start Command**: `npm start`\n   - **Instance Type**: Free (or Starter+)\n\n### 5. **Set Environment Variables**\nIn Render Dashboard â†’ Your Service â†’ **Environment**:\n\n```\nDATABASE_URL=postgresql://user:password@host:5432/database\nPGHOST=host-from-database\nPGPORT=5432\nPGDATABASE=database-name\nPGUSER=user-from-database\nPGPASSWORD=password-from-database\nSESSION_SECRET=[generate: openssl rand -hex 32]\nNODE_ENV=production\n```\n\n### 6. **Enable Auto-Deploy**\n- Service Settings â†’ Auto-Deploy: **Yes**\n- Any push to main branch auto-deploys\n\n### 7. **Access Your App**\nYour app will be live at: `https://your-service-name.onrender.com`\n\n## Troubleshooting\n\n**Build Fails:**\n- Check logs: Service â†’ Logs\n- Ensure DATABASE_URL is set in Environment\n- Run `npm run db:push` manually if needed\n\n**Connection Timeout:**\n- Verify DATABASE_URL in Environment\n- Check Postgres database is active\n- Render may have firewall - use connection pooling\n\n**Session Not Persisting:**\n- Ensure SESSION_SECRET is set\n- PostgreSQL session table should auto-create\n- Check database logs\n\n## Key Files\n- `render.yaml` - Render configuration\n- `package.json` - Build & start scripts\n- `server/index.ts` - Express server setup\n- `.env.example` - Reference for environment variables\n\n## Database Migrations\nMigrations run automatically in build command via `npm run db:push`. If you need to migrate manually:\n```bash\nnpm run db:push\n```\n","path":null,"size_bytes":2390,"size_tokens":null},"replit.md":{"content":"# Inventory Management System\n\n## Overview\n\nA full-stack inventory management system built for equipment tracking and reservation workflows. The application enables employees to browse available equipment, request reservations, and manage check-out/check-in processes, while administrators oversee approvals, user management, and system-wide operations. The system features bilingual support (English/Arabic), QR code integration for physical item tracking, and comprehensive activity logging.\n\n**Core Capabilities:**\n- Category-based equipment organization with dynamic sub-types\n- Reservation workflow with approval process\n- QR code generation and scanning for item tracking\n- Real-time notifications system\n- Activity and audit logging\n- User management with role-based access control (admin/user)\n- Maintenance status tracking\n- **Quantity tracking** - Items can have multiple quantities in stock\n- **Column visibility toggles** - Toggle Quantity and Location columns in table view\n- **Card view enhancements** - Display quantity on every item card\n\n## User Preferences\n\nPreferred communication style: Simple, everyday language.\n\n## System Architecture\n\n### Frontend Architecture\n\n**Technology Stack:**\n- React 18 with TypeScript\n- Vite as build tool and development server\n- TanStack Query (React Query) for server state management\n- Shadcn UI component library (New York variant) with Radix UI primitives\n- Tailwind CSS for styling with custom design tokens\n\n**Component Structure:**\n- Page-level components in `client/src/pages/` (Login, Inventory, Reservations, ActivityLogs, QRCodes, Maintenance, UserManagement)\n- Reusable UI components in `client/src/components/` following Shadcn patterns\n- Path aliases configured for clean imports (`@/` for client, `@shared/` for shared types)\n\n**State Management:**\n- Session-based authentication state\n- React Query for API data caching and synchronization with 5-10 second polling intervals for real-time updates\n- Local state for UI interactions (dialogs, forms, view modes)\n- Column visibility state (showQuantityColumn, showLocationColumn) for table view customization\n\n**Design System:**\n- Custom CSS variables for theming (light/dark mode support)\n- Consistent spacing scale (2, 4, 6, 8 Tailwind units)\n- Typography hierarchy with specific font weights for data-dense interfaces\n- System-based design prioritizing clarity and efficiency\n\n### Backend Architecture\n\n**Technology Stack:**\n- Node.js with Express.js\n- TypeScript with ES modules\n- Session-based authentication using express-session with MemoryStore\n- Bcrypt for password hashing\n\n**API Design:**\n- RESTful endpoints organized by resource type\n- Session middleware for authentication (`requireAuth`, `requireAdmin`)\n- JSON request/response format\n- Credentials included in requests for session persistence\n\n**Key API Routes:**\n- `/api/auth/*` - Authentication (login/logout)\n- `/api/items/*` - Item CRUD operations (includes quantity field)\n- `/api/categories/*` - Category management\n- `/api/reservations/*` - Reservation workflow\n- `/api/users/*` - User management (admin only)\n- `/api/activity-logs/*` - Activity tracking\n- `/api/notifications/*` - Notification system\n- `/api/qrcodes/*` - QR code generation\n\n**Authentication & Authorization:**\n- Session-based authentication stored in memory (production should use persistent store)\n- Role-based access control (admin vs user roles)\n- Middleware functions enforce authentication requirements\n- Password hashing with bcrypt (10 salt rounds)\n\n### Data Storage\n\n**Database:**\n- PostgreSQL as primary database\n- Drizzle ORM for type-safe database operations\n- Connection pooling via `pg` package\n- Neon Database serverless driver (`@neondatabase/serverless`)\n\n**Schema Design (from shared/schema.ts):**\n- **users** - Authentication and user profiles (id, username, password, email, name, role, department)\n- **items** - Inventory items (id, barcode, productName, productType, status, location, notes, quantity, qrCode)\n- **categories** - Equipment categories (id, name, image, subTypes array, showQuantity, showLocation, showNotes)\n- **reservations** - Booking system (id, itemId, userId, startDate, returnDate, status, notes, timestamps)\n- **activityLogs** - Audit trail (id, userId, userName, action, itemName, timestamp)\n- **notifications** - User notifications (id, userId, message, type, isRead, timestamp, notificationFor)\n- **itemEditHistory** - Item modification tracking\n- **reservationStatusHistory** - Reservation status change tracking\n\n**Status Enumerations:**\n- Item statuses: Available, In Use, Reserved, Maintenance\n- Reservation statuses: Pending, Approved, Rejected, Active, Completed, Cancelled\n\n**Migration Strategy:**\n- Drizzle Kit for schema migrations\n- Migration files in `./migrations` directory\n- Push-based deployment with `drizzle-kit push`\n\n### Recent Changes (Nov 23, 2025)\n\n**Email Notification System:**\n- Integrated nodemailer for transactional email sending\n- Created `server/emailService.ts` with three email templates:\n  - **Reservation Request**: Sent to admins when user creates a reservation (includes user details, department, item name, dates, purpose of use)\n  - **Reservation Approved**: Sent to user when admin approves the reservation\n  - **Reservation Rejected**: Sent to user when admin rejects with optional rejection reason\n- Email addresses stored in user table (email field already present in UserManagement)\n- Supports SMTP configuration via environment variables (SMTP_HOST, SMTP_PORT, SMTP_USER, SMTP_PASS, SMTP_FROM)\n- Falls back to console logging if SMTP not configured (for development)\n\n**Reports Navigation Fix:**\n- Added Reports menu item to all pages (Inventory, Reservations, QR Codes, Maintenance, Activity Logs, User Management)\n- Reports text translated to \"Damage Reports\" using translation keys\n- Fixed onNavigateToReports prop passing through all pages in App.tsx\n\n**Quantity Tracking Implementation:**\n- Added `quantity` field to items table (defaults to 1)\n- Updated ItemFormDialog to include quantity input with minimum value of 1\n- Items display quantity: \"2 cameras\" means 1 item with quantity 2 available\n- Checkout/return logic now works with available quantities\n\n**Column Visibility Toggles:**\n- Added `showQuantityColumn` and `showLocationColumn` state to Inventory page\n- Toggle buttons appear in table view header (Qty, Location)\n- Buttons show 'default' variant when column is visible, 'outline' when hidden\n- Table header and rows dynamically show/hide based on toggle state\n\n**Card View Enhancements:**\n- ItemCard component now accepts and displays `quantity` prop\n- Quantity displayed alongside Type in card grid (2-column layout)\n- Both Equipment (card) and Assets (card) show quantity information\n- Quantity defaults to 1 if not specified\n\n## Features Summary\n\n### Recently Added\n- âœ… Email notification system (reservations, approvals, rejections)\n- âœ… Reports tab visible on all pages for easy navigation\n- âœ… Quantity field with input validation (min: 1)\n- âœ… Column visibility toggles for table view (Quantity, Location)\n- âœ… Quantity display on all item cards\n- âœ… Default quantity 1 for all items\n- âœ… Column visibility only appears in table view mode\n\n### Existing Features\n- âœ… Date range filters (This week, Last week, This month, Last month, Custom)\n- âœ… Separate notifications for users and admins\n- âœ… QR code generation and scanning\n- âœ… Equipment reservation with approval workflow\n- âœ… Checkout/check-in with condition tracking\n- âœ… Activity logging with search\n- âœ… Reports page for damage tracking\n- âœ… User management (admin only)\n- âœ… Bilingual support (English/Arabic)\n- âœ… Mobile responsive design\n","path":null,"size_bytes":7692,"size_tokens":null},"server/emailService.ts":{"content":"import nodemailer from 'nodemailer';\n\n// Email service configuration\nconst transporter = nodemailer.createTransport({\n  host: process.env.SMTP_HOST || 'localhost',\n  port: parseInt(process.env.SMTP_PORT || '587'),\n  secure: process.env.SMTP_SECURE === 'true',\n  auth: process.env.SMTP_USER && process.env.SMTP_PASS ? {\n    user: process.env.SMTP_USER,\n    pass: process.env.SMTP_PASS,\n  } : undefined,\n});\n\nexport interface EmailOptions {\n  to: string;\n  subject: string;\n  html: string;\n}\n\nasync function sendEmail(options: EmailOptions): Promise<boolean> {\n  try {\n    // If no SMTP configured, log the email instead of failing\n    if (!process.env.SMTP_HOST) {\n      console.log('ðŸ“§ Email would be sent to:', options.to);\n      console.log('   Subject:', options.subject);\n      console.log('   Body:', options.html.substring(0, 100) + '...');\n      return true;\n    }\n\n    await transporter.sendMail({\n      from: process.env.SMTP_FROM || 'noreply@inventory.local',\n      ...options,\n    });\n    console.log('âœ… Email sent to:', options.to);\n    return true;\n  } catch (error) {\n    console.error('âŒ Error sending email:', error);\n    return false;\n  }\n}\n\nexport async function sendReservationRequestEmail(\n  adminEmail: string,\n  data: {\n    itemName: string;\n    userName: string;\n    userEmail: string;\n    startDate: string;\n    returnDate: string;\n    notes?: string;\n  }\n): Promise<boolean> {\n  const html = `\n    <!DOCTYPE html>\n    <html>\n      <head>\n        <style>\n          body { font-family: Arial, sans-serif; line-height: 1.6; color: #333; }\n          .container { max-width: 600px; margin: 0 auto; padding: 20px; }\n          .header { background-color: #667eea; color: white; padding: 20px; border-radius: 5px; margin-bottom: 20px; }\n          .content { background-color: #f9f9f9; padding: 20px; border-radius: 5px; }\n          .field { margin-bottom: 15px; }\n          .label { font-weight: bold; color: #667eea; display: block; margin-bottom: 5px; }\n          .value { margin-left: 20px; }\n          .footer { margin-top: 20px; font-size: 12px; color: #999; }\n        </style>\n      </head>\n      <body>\n        <div class=\"container\">\n          <div class=\"header\">\n            <h2>New Reservation Request</h2>\n          </div>\n          <div class=\"content\">\n            <div class=\"field\">\n              <span class=\"label\">Item:</span>\n              <div class=\"value\">${data.itemName}</div>\n            </div>\n            <div class=\"field\">\n              <span class=\"label\">Requested By:</span>\n              <div class=\"value\">${data.userName}</div>\n            </div>\n            <div class=\"field\">\n              <span class=\"label\">User Email:</span>\n              <div class=\"value\"><a href=\"mailto:${data.userEmail}\">${data.userEmail}</a></div>\n            </div>\n            <div class=\"field\">\n              <span class=\"label\">Start Date:</span>\n              <div class=\"value\">${data.startDate}</div>\n            </div>\n            <div class=\"field\">\n              <span class=\"label\">Return Date:</span>\n              <div class=\"value\">${data.returnDate}</div>\n            </div>\n            ${data.notes ? `\n            <div class=\"field\">\n              <span class=\"label\">Notes:</span>\n              <div class=\"value\">${data.notes}</div>\n            </div>\n            ` : ''}\n            <p style=\"margin-top: 30px; padding-top: 20px; border-top: 1px solid #ddd;\">\n              Please review this reservation request and approve or reject it in the system.\n            </p>\n          </div>\n          <div class=\"footer\">\n            <p>This is an automated email. Please do not reply to this email.</p>\n          </div>\n        </div>\n      </body>\n    </html>\n  `;\n\n  return sendEmail({\n    to: adminEmail,\n    subject: `New Reservation Request for ${data.itemName}`,\n    html\n  });\n}\n\nexport async function sendReservationApprovedEmail(\n  userEmail: string,\n  data: {\n    itemName: string;\n    userName: string;\n    userEmail: string;\n    startDate: string;\n    returnDate: string;\n  }\n): Promise<boolean> {\n  const html = `\n    <!DOCTYPE html>\n    <html>\n      <head>\n        <style>\n          body { font-family: Arial, sans-serif; line-height: 1.6; color: #333; }\n          .container { max-width: 600px; margin: 0 auto; padding: 20px; }\n          .header { background-color: #22c55e; color: white; padding: 20px; border-radius: 5px; margin-bottom: 20px; }\n          .content { background-color: #f9f9f9; padding: 20px; border-radius: 5px; }\n          .field { margin-bottom: 15px; }\n          .label { font-weight: bold; color: #22c55e; display: block; margin-bottom: 5px; }\n          .value { margin-left: 20px; }\n          .footer { margin-top: 20px; font-size: 12px; color: #999; }\n          .success { color: #22c55e; font-weight: bold; }\n        </style>\n      </head>\n      <body>\n        <div class=\"container\">\n          <div class=\"header\">\n            <h2>Reservation Approved âœ“</h2>\n          </div>\n          <div class=\"content\">\n            <p class=\"success\">Your reservation has been approved!</p>\n            <div class=\"field\">\n              <span class=\"label\">Item:</span>\n              <div class=\"value\">${data.itemName}</div>\n            </div>\n            <div class=\"field\">\n              <span class=\"label\">Start Date:</span>\n              <div class=\"value\">${data.startDate}</div>\n            </div>\n            <div class=\"field\">\n              <span class=\"label\">Return Date:</span>\n              <div class=\"value\">${data.returnDate}</div>\n            </div>\n            <p style=\"margin-top: 30px; padding-top: 20px; border-top: 1px solid #ddd;\">\n              Please pick up the item on the start date and ensure to return it in good condition by the return date.\n            </p>\n          </div>\n          <div class=\"footer\">\n            <p>This is an automated email. Please do not reply to this email.</p>\n          </div>\n        </div>\n      </body>\n    </html>\n  `;\n\n  return sendEmail({\n    to: userEmail,\n    subject: `Your Reservation for ${data.itemName} Has Been Approved`,\n    html\n  });\n}\n\nexport async function sendReservationRejectedEmail(\n  userEmail: string,\n  data: {\n    itemName: string;\n    userName: string;\n    userEmail: string;\n    startDate: string;\n    returnDate: string;\n    rejectionReason?: string;\n  }\n): Promise<boolean> {\n  const html = `\n    <!DOCTYPE html>\n    <html>\n      <head>\n        <style>\n          body { font-family: Arial, sans-serif; line-height: 1.6; color: #333; }\n          .container { max-width: 600px; margin: 0 auto; padding: 20px; }\n          .header { background-color: #ef4444; color: white; padding: 20px; border-radius: 5px; margin-bottom: 20px; }\n          .content { background-color: #f9f9f9; padding: 20px; border-radius: 5px; }\n          .field { margin-bottom: 15px; }\n          .label { font-weight: bold; color: #ef4444; display: block; margin-bottom: 5px; }\n          .value { margin-left: 20px; }\n          .footer { margin-top: 20px; font-size: 12px; color: #999; }\n        </style>\n      </head>\n      <body>\n        <div class=\"container\">\n          <div class=\"header\">\n            <h2>Reservation Rejected</h2>\n          </div>\n          <div class=\"content\">\n            <p>Unfortunately, your reservation request has been rejected.</p>\n            <div class=\"field\">\n              <span class=\"label\">Item:</span>\n              <div class=\"value\">${data.itemName}</div>\n            </div>\n            <div class=\"field\">\n              <span class=\"label\">Requested Period:</span>\n              <div class=\"value\">${data.startDate} to ${data.returnDate}</div>\n            </div>\n            ${data.rejectionReason ? `\n            <div class=\"field\">\n              <span class=\"label\">Reason:</span>\n              <div class=\"value\">${data.rejectionReason}</div>\n            </div>\n            ` : ''}\n            <p style=\"margin-top: 30px; padding-top: 20px; border-top: 1px solid #ddd;\">\n              If you have any questions, please contact the administrator.\n            </p>\n          </div>\n          <div class=\"footer\">\n            <p>This is an automated email. Please do not reply to this email.</p>\n          </div>\n        </div>\n      </body>\n    </html>\n  `;\n\n  return sendEmail({\n    to: userEmail,\n    subject: `Your Reservation for ${data.itemName} Has Been Rejected`,\n    html\n  });\n}\n","path":null,"size_bytes":8384,"size_tokens":null}},"version":2}